= SCP(1)

== NAME

scp - Simple transfer command that has syntax similiar to SCP
== SYNOPSIS

*scp *
.BR "-r " 
.BI "[-s " "SYNC-LEVEL" ]
.BI [ options ]
.IB source : source_dir 
.IB dest : dest_dir 
.br
*scp *
.BI "[-s " "SYNC-LEVEL" ]
.BI [ options ]
.IB source : source_file 
.IB dest : dest_path 
== DESCRIPTION

Globus Online's
*scp *
command provides a simple way to copy a file or directory between servers.  
'source '
and 
'dest'
must be logical endpoint names.

*scp *
can activate endpoints using gsi-ssh or automatically use the endpoints'
default myproxy configuration.
Use the
*endpoint-activate*
command for manual endpoint activation.

By default, 
*scp*
creates a transfer task and waits for the task to complete.  
Type
.I
<CTRL-C>
to cancel the task.
Use the
*-D*
option or type 'bg<ENTER>' to create a detached task that runs in the
background.  You may
use other Globus Online commands, like 
*status *
and 
*wait,*
to check the status of the task at any time.   Note that if the task is not backgrounded and the SSH connection is broken, the 
*scp *
task will be automatically canceled.

User relative paths may be specified as '~/path' or 'path'.  Absolute paths are specified as '/path'.

SCP's directory semantics are different than the 
*transfer*
command: the
*transfer *
command will always place files in a pre-determined directory; the
*scp*
command (like UNIX cp and scp) will check whether the target
is an existing directory or not.  

== OPTIONS

.SS Standard SCP Options
.TP
*-r*
Transfer directory recursively.  The source path must be a directory.  The destination path must either not yet exist or be a directory.  The destination directory will be created if it does not exist.
.TP
*-v*
Enable verbose output.  Show endpoint and credential details.

.SS Globus Online Extensions
.TP
*-g*
Use your gsi-ssh proxy credential to activate the source and destination
endpoints.  You must be using gsi-ssh, not regular ssh.

.\" %start OPT_DEADLINE
.TP
.BI "-d " DEADLINE 
Set the task's deadline.  If the task has not completed by the deadline it
will be automatically canceled.  A suffix of 'm', 'h', or 'd' may be specified
to indicate minutes, hours, or days.  If a unit suffix is not given it is
assumed to be minutes.  Example: '30m', '4h', '1d'.  

If a deadline is not explicitly set, Globus Online will give the task a
flexible deadline that is automatically extended as long as it is making
progress.  
.\" %end


.\" %start OPT_TASKLABEL
.TP
.BI "--label " LABEL
Set the task's label.  The label can be displayed and searched for in commands
such as 
*status *
and 
.BR details .
See 
.BR labels (7)
for more details on labels.
.\" %end


.\" %start OPT_ENCRYPT
.TP
.BI "--encrypt" 
Encrypt the data channel during file transfer.  This requires gsiftp and will
not work on anonymous GridFTP servers.  By default, data channel connections
are securely authenticated during initialization, but the file data is sent
directly (unencrypted). 
.\" %end

.\" %start OPT_PRESERVE_MTIME
.TP
.BI "--preserve-mtime" 
Preserve file modification time of files that were transferred.  Also preserve
modification time of all directories.  Note: The destination server must be a
recent GridFTP version, otherwise the transfer will have errors and not
complete.  
.\" %end

.\" %start OPT_VERIFY_CHECKSUM
.TP
.BI "--verify-checksum" 
After each file is transferred, verify that the source and destination
checksums match.  If they don't, retransfer the entire file and try checksum
verification again.  Keep trying until verification succeeds.  This is
currently the default.
.TP
.BI "--no-verify-checksum" 
Disables the --verify-checksum option; no checksum verification is performed.
.\" %end

.TP
.BI "--delete" 
Delete extraneous files (and directories) in the destination directory.  For recursive directory
transfers only.  For example, SCP of /some/source/dir to /tmp will
ensure /tmp/dir is a perfect clone of /some/source/dir.  All other files in
/tmp outside of /tmp/dir are left alone.


.TP
*-D*
Create a detached (background) task and exit.
.TP


.\" %start OPT_SYNC_LEVEL
.TP
*"-s sync-level"*
Synchronize, i.e. only copy new files or files that have been changed.  Note
that this option alone does not turn on deletion of any files.  (See the --delete option for that).

Valid sync levels are:
.RS
.TP
*0*
Copy files that do not exist at the destination
.TP
*1*
Copy files if the size of the destination does not match the size of the source 
.TP
*2*
Copy files if the timestamp of the destination is older than the timestamp of
the source.   
.TP
*3*
Copy files if checksums of the source and destination do not match

.RE
.RS
Each sync level includes the comparison criteria from lower-numbered levels.  For instance, if level 3 is specified and the source and destination file sizes are different or the source file has a newer timestamp, the file will be transfered and a checksum operation is not even attempted.
.RE
.\" %end


== EXAMPLES

.TP
Transfer a directory using gsi-ssh for activation:
.nf
*scp -g -r tiger:myproject-dir bear:/tmp*
.fi

.TP
Transfer a file from a home directory:
*scp my_endpoint_1:~/file1.txt my_endpoint_2:/tmp*


== EXIT STATUS

If 
*-D*
is used, scp returns 0 if the task was successfully created.  If 
*-D *
is not used, scp returns 0 if the task completes successfully or non zero if the task has a fatal error, fails to complete by the deadline, or is canceled.
