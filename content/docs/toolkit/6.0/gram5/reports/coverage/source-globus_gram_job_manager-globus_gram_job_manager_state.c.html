<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- source.template -->
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
      <title>Code Coverage for globus_gram_job_manager_state.c</title>
      <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/>
      <link href="coverage.css" rel="stylesheet" type="text/css" />
  </head>

  <body>
      <table class="srcView">
      
        <tr>
          <td class="lineCount">1</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">/*</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * Copyright 1999-2009 University of Chicago</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">3</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * </span></td>
        </tr>
      
        <tr>
          <td class="lineCount">4</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">5</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * you may not use this file except in compliance with the License.</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">6</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * You may obtain a copy of the License at</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">7</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * </span></td>
        </tr>
      
        <tr>
          <td class="lineCount">8</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * http://www.apache.org/licenses/LICENSE-2.0</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">9</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * </span></td>
        </tr>
      
        <tr>
          <td class="lineCount">10</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * Unless required by applicable law or agreed to in writing, software</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">11</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">12</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">13</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * See the License for the specific language governing permissions and</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">14</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * limitations under the License.</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">15</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> */</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">16</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">17</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">#ifndef GLOBUS_DONT_DOCUMENT_INTERNAL</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">18</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">/**</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">19</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * @file globus_gram_job_manager_state.c Job Manager State Machine</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">20</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> *</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">21</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * CVS Information:</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">22</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * </span></td>
        </tr>
      
        <tr>
          <td class="lineCount">23</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * $Source: /home/ec2-user/alliance-web/alliance/toolkit/docs/5.2/5.2.5/gram5/reports/coverage/source-globus_gram_job_manager-globus_gram_job_manager_state.c.html,v $</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">24</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * $Date: 2013/06/19 18:13:40 $</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">25</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * $Revision: 1.1 $</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">26</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * $Author: bester $</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">27</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> */</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">28</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">#include &quot;globus_gram_job_manager.h&quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">29</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">#include &quot;globus_rsl_assist.h&quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">30</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">#include &quot;globus_gsi_system_config.h&quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">31</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">#include &quot;globus_gsi_system_config_constants.h&quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">32</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">#include &quot;version.h&quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">33</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">34</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">#include &lt;string.h&gt;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">35</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">36</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">37</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">/* Module Specific Prototypes */</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">38</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">39</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">const char *                     globus_i_gram_job_manager_state_strings[] =</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">40</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">{</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">41</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    &quot;GLOBUS_GRAM_JOB_MANAGER_STATE_START&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">42</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    &quot;GLOBUS_GRAM_JOB_MANAGER_STATE_TWO_PHASE&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">43</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    &quot;GLOBUS_GRAM_JOB_MANAGER_STATE_TWO_PHASE_COMMITTED&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">44</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    &quot;GLOBUS_GRAM_JOB_MANAGER_STATE_STAGE_IN&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">45</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    &quot;GLOBUS_GRAM_JOB_MANAGER_STATE_SUBMIT&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">46</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    &quot;GLOBUS_GRAM_JOB_MANAGER_STATE_POLL1&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">47</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    &quot;GLOBUS_GRAM_JOB_MANAGER_STATE_POLL2&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">48</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    &quot;GLOBUS_GRAM_JOB_MANAGER_STATE_CLOSE_OUTPUT&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">49</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    &quot;GLOBUS_GRAM_JOB_MANAGER_STATE_STAGE_OUT&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">50</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    &quot;GLOBUS_GRAM_JOB_MANAGER_STATE_TWO_PHASE_END&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">51</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    &quot;GLOBUS_GRAM_JOB_MANAGER_STATE_TWO_PHASE_END_COMMITTED&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">52</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    &quot;GLOBUS_GRAM_JOB_MANAGER_STATE_FILE_CLEAN_UP&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">53</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    &quot;GLOBUS_GRAM_JOB_MANAGER_STATE_SCRATCH_CLEAN_UP&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">54</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    &quot;GLOBUS_GRAM_JOB_MANAGER_STATE_CACHE_CLEAN_UP&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">55</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    &quot;GLOBUS_GRAM_JOB_MANAGER_STATE_DONE&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">56</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    &quot;GLOBUS_GRAM_JOB_MANAGER_STATE_FAILED&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">57</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    &quot;GLOBUS_GRAM_JOB_MANAGER_STATE_FAILED_CLOSE_OUTPUT&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">58</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    &quot;GLOBUS_GRAM_JOB_MANAGER_STATE_FAILED_TWO_PHASE&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">59</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    &quot;GLOBUS_GRAM_JOB_MANAGER_STATE_FAILED_TWO_PHASE_COMMITTED&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">60</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    &quot;GLOBUS_GRAM_JOB_MANAGER_STATE_FAILED_FILE_CLEAN_UP&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">61</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    &quot;GLOBUS_GRAM_JOB_MANAGER_STATE_FAILED_SCRATCH_CLEAN_UP&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">62</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    &quot;GLOBUS_GRAM_JOB_MANAGER_STATE_FAILED_CACHE_CLEAN_UP&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">63</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    &quot;GLOBUS_GRAM_JOB_MANAGER_STATE_FAILED_DONE&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">64</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    &quot;GLOBUS_GRAM_JOB_MANAGER_STATE_STOP&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">65</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    &quot;GLOBUS_GRAM_JOB_MANAGER_STATE_POLL_QUERY1&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">66</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    &quot;GLOBUS_GRAM_JOB_MANAGER_STATE_POLL_QUERY2&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">67</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    &quot;GLOBUS_GRAM_JOB_MANAGER_STATE_PROXY_REFRESH&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">68</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    &quot;GLOBUS_GRAM_JOB_MANAGER_STATE_PRE_CLOSE_OUTPUT&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">69</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    &quot;GLOBUS_GRAM_JOB_MANAGER_STATE_TWO_PHASE_QUERY1&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">70</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    &quot;GLOBUS_GRAM_JOB_MANAGER_STATE_TWO_PHASE_QUERY2&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">71</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    &quot;GLOBUS_GRAM_JOB_MANAGER_STATE_TWO_PHASE_PROXY_REFRESH&quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">72</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">};</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">73</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">74</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">static</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">75</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">globus_bool_t</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">76</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">globus_l_gram_job_manager_set_restart_state(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">77</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    globus_gram_jobmanager_request_t *  request);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">78</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">79</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">static</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">80</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">int</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">81</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">globus_l_gram_job_manager_add_cache_info(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">82</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    globus_gram_jobmanager_request_t *  request);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">83</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">84</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">static</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">85</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">void</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">86</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">globus_l_gram_job_manager_cancel_queries(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">87</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    globus_gram_jobmanager_request_t *  request);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">88</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">89</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">static</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">90</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">int</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">91</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">globus_l_gram_gss_send_fd(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">92</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    void *                              arg,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">93</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    void *                              buffer,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">94</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    size_t                              length);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">95</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">96</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">static</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">97</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">void</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">98</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">globus_l_gram_file_cleanup(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">99</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    globus_gram_jobmanager_request_t *  request);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">100</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">101</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">static</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">102</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">globus_bool_t</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">103</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">globus_l_gram_job_manager_state_machine(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">104</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    globus_gram_jobmanager_request_t *  request);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">105</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">106</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">#endif</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">107</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">108</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">/*</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">109</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * Callback to enter the state machine from a timeout. Used to</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">110</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * handle two-phase commit timeouts, and delays between calls to the</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">111</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * poll script.</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">112</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> */</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">113</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">void</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">114</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">globus_gram_job_manager_state_machine_callback(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">115</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    void *                              user_arg)</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">116</td>
          <td class="coverageCount">439</td>
          <td class="srcCell"><span class="srcLine">{</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">117</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    globus_gram_jobmanager_request_t *  request;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">118</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    globus_bool_t                       event_registered;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">119</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    int                                 rc;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">120</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">121</td>
          <td class="coverageCount">439</td>
          <td class="srcCell"><span class="srcLine">    request = user_arg;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">122</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">123</td>
          <td class="coverageCount">439</td>
          <td class="srcCell"><span class="srcLine">    GlobusGramJobManagerRequestLock(request);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">124</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">125</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    /*</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">126</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">     * If nobody tried to cancel this callback, then we need to unregister</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">127</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">     * it to free memory in the callback code.</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">128</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">     */</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">129</td>
          <td class="coverageCount">439</td>
          <td class="srcCell"><span class="srcLine">    if(request-&gt;poll_timer != GLOBUS_HANDLE_TABLE_NO_HANDLE)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">130</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">131</td>
          <td class="coverageCount">439</td>
          <td class="srcCell"><span class="srcLine">        globus_callback_unregister(request-&gt;poll_timer, NULL, NULL, NULL);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">132</td>
          <td class="coverageCount">439</td>
          <td class="srcCell"><span class="srcLine">        request-&gt;poll_timer = GLOBUS_HANDLE_TABLE_NO_HANDLE;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">133</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">134</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    </span></td>
        </tr>
      
        <tr>
          <td class="lineCount">135</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    do</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">136</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">137</td>
          <td class="coverageCount">1780</td>
          <td class="srcCell"><span class="srcLine">        event_registered = globus_l_gram_job_manager_state_machine(request);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">138</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">139</td>
          <td class="coverageCount">1780</td>
          <td class="srcCell"><span class="srcLine">    while(!event_registered);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">140</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">141</td>
          <td class="coverageCount">439</td>
          <td class="srcCell"><span class="srcLine">    GlobusGramJobManagerRequestUnlock(request);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">142</td>
          <td class="coverageCount">439</td>
          <td class="srcCell"><span class="srcLine">    rc = globus_gram_job_manager_remove_reference(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">143</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request-&gt;manager,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">144</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request-&gt;job_contact_path,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">145</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;state machine&quot;);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">146</td>
          <td class="coverageCount">439</td>
          <td class="srcCell"><span class="srcLine">    assert(rc == GLOBUS_SUCCESS);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">147</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">148</td>
          <td class="coverageCount">439</td>
          <td class="srcCell"><span class="srcLine">}</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">149</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">/* globus_gram_job_manager_state_machine_callback() */</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">150</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">151</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">152</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">/*</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">153</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * Job Manager state machine.</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">154</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> */</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">155</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">static</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">156</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">globus_bool_t</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">157</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">globus_l_gram_job_manager_state_machine(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">158</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    globus_gram_jobmanager_request_t *  request)</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">159</td>
          <td class="coverageCount">1780</td>
          <td class="srcCell"><span class="srcLine">{</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">160</td>
          <td class="coverageCount">1780</td>
          <td class="srcCell"><span class="srcLine">    globus_bool_t                       event_registered = GLOBUS_FALSE;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">161</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    globus_reltime_t                    delay_time;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">162</td>
          <td class="coverageCount">1780</td>
          <td class="srcCell"><span class="srcLine">    int                                 rc = 0;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">163</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    int                                 save_status;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">164</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    int                                 save_jobmanager_state;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">165</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    globus_gram_job_manager_query_t *   query;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">166</td>
          <td class="coverageCount">1780</td>
          <td class="srcCell"><span class="srcLine">    globus_bool_t                       first_poll = GLOBUS_FALSE;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">167</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    globus_gram_jobmanager_state_t      next_state;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">168</td>
          <td class="coverageCount">1780</td>
          <td class="srcCell"><span class="srcLine">    char                                exit_code_string[] = &quot;unknown&quot;;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">169</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">170</td>
          <td class="coverageCount">1780</td>
          <td class="srcCell"><span class="srcLine">    globus_gram_job_manager_request_log(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">171</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">172</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            GLOBUS_GRAM_JOB_MANAGER_LOG_TRACE,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">173</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;event=gram.state_machine.start &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">174</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;level=TRACE &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">175</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;gramid=%s &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">176</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;jmstate=%s &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">177</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;job_state=%d &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">178</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;\n&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">179</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request-&gt;job_contact_path,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">180</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            globus_i_gram_job_manager_state_strings[request-&gt;jobmanager_state],</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">181</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request-&gt;status);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">182</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">183</td>
          <td class="coverageCount">1780</td>
          <td class="srcCell"><span class="srcLine">    switch(request-&gt;jobmanager_state)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">184</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">185</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">      case GLOBUS_GRAM_JOB_MANAGER_STATE_START:</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">186</td>
          <td class="coverageCount">115</td>
          <td class="srcCell"><span class="srcLine">        request-&gt;jobmanager_state = GLOBUS_GRAM_JOB_MANAGER_STATE_TWO_PHASE;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">187</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        /*</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">188</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">         * To do a two-phase commit, we need to send an error</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">189</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">         * message (WAITING_FOR_COMMIT) in the initial reply; otherwise,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">190</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">         * we just return the current status code.</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">191</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">         * </span></td>
        </tr>
      
        <tr>
          <td class="lineCount">192</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">         * When doing a dry run, we don&#39;t send the reply until we would</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">193</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">         * submit the job (no state callbacks with a dry-run.)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">194</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">         */</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">195</td>
          <td class="coverageCount">115</td>
          <td class="srcCell"><span class="srcLine">        if(!request-&gt;dry_run)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">196</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">197</td>
          <td class="coverageCount">115</td>
          <td class="srcCell"><span class="srcLine">            if(request-&gt;two_phase_commit != 0 &amp;&amp; rc == GLOBUS_SUCCESS)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">198</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">199</td>
          <td class="coverageCount">14</td>
          <td class="srcCell"><span class="srcLine">                GlobusTimeReltimeSet(delay_time,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">200</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                                     request-&gt;two_phase_commit,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">201</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                                     0);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">202</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">203</td>
          <td class="coverageCount">14</td>
          <td class="srcCell"><span class="srcLine">                rc = globus_gram_job_manager_state_machine_register(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">204</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        request-&gt;manager,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">205</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        request,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">206</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        &amp;delay_time);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">207</td>
          <td class="coverageCount">14</td>
          <td class="srcCell"><span class="srcLine">                if (rc == GLOBUS_SUCCESS)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">208</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">209</td>
          <td class="coverageCount">14</td>
          <td class="srcCell"><span class="srcLine">                    event_registered = GLOBUS_TRUE;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">210</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">211</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">212</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">213</td>
          <td class="coverageCount">115</td>
          <td class="srcCell"><span class="srcLine">        break;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">214</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">215</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">      case GLOBUS_GRAM_JOB_MANAGER_STATE_TWO_PHASE:</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">216</td>
          <td class="coverageCount">107</td>
          <td class="srcCell"><span class="srcLine">        if(request-&gt;two_phase_commit != 0 &amp;&amp; request-&gt;commit_extend != 0)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">217</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">218</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            GlobusTimeReltimeSet(delay_time,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">219</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                                 request-&gt;commit_extend,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">220</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                                 0);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">221</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">222</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            request-&gt;commit_extend = 0;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">223</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            rc = globus_gram_job_manager_state_machine_register(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">224</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    request-&gt;manager,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">225</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    request,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">226</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &amp;delay_time);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">227</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">228</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">229</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            if (rc == GLOBUS_SUCCESS)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">230</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">231</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">                event_registered = GLOBUS_TRUE;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">232</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">233</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">234</td>
          <td class="coverageCount">107</td>
          <td class="srcCell"><span class="srcLine">        else if(request-&gt;two_phase_commit == 0)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">235</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">236</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            /* Nothing to do here if we are not doing the two-phase</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">237</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">             * commit protocol</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">238</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">             */</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">239</td>
          <td class="coverageCount">101</td>
          <td class="srcCell"><span class="srcLine">            request-&gt;jobmanager_state =</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">240</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                GLOBUS_GRAM_JOB_MANAGER_STATE_TWO_PHASE_COMMITTED;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">241</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">242</td>
          <td class="coverageCount">6</td>
          <td class="srcCell"><span class="srcLine">        else if(request-&gt;jm_restart)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">243</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">244</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            /*</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">245</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">             * commit didn&#39;t happen, but this was a restart of a job manager</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">246</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">             * so we&#39;ll just stop and leave the job manager state.</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">247</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">             */</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">248</td>
          <td class="coverageCount">5</td>
          <td class="srcCell"><span class="srcLine">            request-&gt;poll_timer = GLOBUS_HANDLE_TABLE_NO_HANDLE;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">249</td>
          <td class="coverageCount">5</td>
          <td class="srcCell"><span class="srcLine">            request-&gt;jobmanager_state = GLOBUS_GRAM_JOB_MANAGER_STATE_STOP;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">250</td>
          <td class="coverageCount">5</td>
          <td class="srcCell"><span class="srcLine">            request-&gt;stop_reason = GLOBUS_GRAM_PROTOCOL_ERROR_COMMIT_TIMED_OUT;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">251</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">252</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        else</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">253</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">254</td>
          <td class="coverageCount">1</td>
          <td class="srcCell"><span class="srcLine">            request-&gt;poll_timer = GLOBUS_HANDLE_TABLE_NO_HANDLE;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">255</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            /* Send failed message later */</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">256</td>
          <td class="coverageCount">1</td>
          <td class="srcCell"><span class="srcLine">            request-&gt;jobmanager_state = GLOBUS_GRAM_JOB_MANAGER_STATE_FAILED;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">257</td>
          <td class="coverageCount">1</td>
          <td class="srcCell"><span class="srcLine">            request-&gt;failure_code = GLOBUS_GRAM_PROTOCOL_ERROR_COMMIT_TIMED_OUT;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">258</td>
          <td class="coverageCount">1</td>
          <td class="srcCell"><span class="srcLine">            request-&gt;unsent_status_change = GLOBUS_TRUE;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">259</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">260</td>
          <td class="coverageCount">107</td>
          <td class="srcCell"><span class="srcLine">        break;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">261</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">262</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">      case GLOBUS_GRAM_JOB_MANAGER_STATE_TWO_PHASE_COMMITTED:</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">263</td>
          <td class="coverageCount">109</td>
          <td class="srcCell"><span class="srcLine">        if(request-&gt;jm_restart)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">264</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">265</td>
          <td class="coverageCount">3</td>
          <td class="srcCell"><span class="srcLine">            if(globus_l_gram_job_manager_set_restart_state(request))</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">266</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">267</td>
          <td class="coverageCount">3</td>
          <td class="srcCell"><span class="srcLine">                break;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">268</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">269</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">270</td>
          <td class="coverageCount">106</td>
          <td class="srcCell"><span class="srcLine">        request-&gt;jobmanager_state = GLOBUS_GRAM_JOB_MANAGER_STATE_STAGE_IN;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">271</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">272</td>
          <td class="coverageCount">106</td>
          <td class="srcCell"><span class="srcLine">        if(globus_gram_job_manager_rsl_need_stage_in(request))</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">273</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">274</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">            globus_gram_job_manager_request_set_status(request, GLOBUS_GRAM_PROTOCOL_JOB_STATE_STAGE_IN);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">275</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">276</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">            if(!request-&gt;dry_run)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">277</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">278</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">                globus_gram_job_manager_contact_state_callback(request);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">279</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">280</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">281</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">            rc = globus_gram_job_manager_script_stage_in(request);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">282</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">283</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">            if(rc != GLOBUS_SUCCESS)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">284</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">285</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">                request-&gt;failure_code = rc;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">286</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">                request-&gt;jobmanager_state =</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">287</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    GLOBUS_GRAM_JOB_MANAGER_STATE_FAILED;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">288</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">289</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            else</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">290</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">291</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">                event_registered = GLOBUS_TRUE;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">292</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">293</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">294</td>
          <td class="coverageCount">106</td>
          <td class="srcCell"><span class="srcLine">        break;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">295</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">296</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">      case GLOBUS_GRAM_JOB_MANAGER_STATE_STAGE_IN:</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">297</td>
          <td class="coverageCount">106</td>
          <td class="srcCell"><span class="srcLine">        if((!globus_list_empty(request-&gt;stage_in_todo)) ||</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">298</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">           (!globus_list_empty(request-&gt;stage_in_shared_todo)))</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">299</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">300</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            /* Didn&#39;t successfully stage in everything. */</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">301</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            request-&gt;jobmanager_state = </span></td>
        </tr>
      
        <tr>
          <td class="lineCount">302</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                GLOBUS_GRAM_JOB_MANAGER_STATE_FAILED;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">303</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            if(request-&gt;failure_code == GLOBUS_SUCCESS)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">304</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">305</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">                request-&gt;failure_code =</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">306</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    GLOBUS_GRAM_PROTOCOL_ERROR_STAGE_IN_FAILED;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">307</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">308</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            break;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">309</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">310</td>
          <td class="coverageCount">106</td>
          <td class="srcCell"><span class="srcLine">        request-&gt;jobmanager_state = GLOBUS_GRAM_JOB_MANAGER_STATE_SUBMIT;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">311</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">312</td>
          <td class="coverageCount">106</td>
          <td class="srcCell"><span class="srcLine">        if(request-&gt;status == GLOBUS_GRAM_PROTOCOL_JOB_STATE_FAILED &amp;&amp; </span></td>
        </tr>
      
        <tr>
          <td class="lineCount">313</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">           request-&gt;dry_run)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">314</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">315</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            request-&gt;jobmanager_state =</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">316</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                GLOBUS_GRAM_JOB_MANAGER_STATE_FAILED_TWO_PHASE_COMMITTED;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">317</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">318</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            break;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">319</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">320</td>
          <td class="coverageCount">106</td>
          <td class="srcCell"><span class="srcLine">        else if(request-&gt;status == GLOBUS_GRAM_PROTOCOL_JOB_STATE_FAILED)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">321</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">322</td>
          <td class="coverageCount">2</td>
          <td class="srcCell"><span class="srcLine">            request-&gt;jobmanager_state = </span></td>
        </tr>
      
        <tr>
          <td class="lineCount">323</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    GLOBUS_GRAM_JOB_MANAGER_STATE_FAILED;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">324</td>
          <td class="coverageCount">2</td>
          <td class="srcCell"><span class="srcLine">            break;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">325</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">326</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">327</td>
          <td class="coverageCount">104</td>
          <td class="srcCell"><span class="srcLine">        globus_gram_job_manager_seg_pause(request-&gt;manager);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">328</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">329</td>
          <td class="coverageCount">104</td>
          <td class="srcCell"><span class="srcLine">        rc = globus_gram_job_manager_script_submit(request);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">330</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">331</td>
          <td class="coverageCount">104</td>
          <td class="srcCell"><span class="srcLine">        if(rc != GLOBUS_SUCCESS)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">332</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">333</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            request-&gt;failure_code = rc;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">334</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            globus_gram_job_manager_request_set_status(request, GLOBUS_GRAM_PROTOCOL_JOB_STATE_FAILED);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">335</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">336</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            if(!request-&gt;dry_run)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">337</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">338</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">                request-&gt;jobmanager_state = </span></td>
        </tr>
      
        <tr>
          <td class="lineCount">339</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        GLOBUS_GRAM_JOB_MANAGER_STATE_FAILED;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">340</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">                request-&gt;unsent_status_change = GLOBUS_TRUE;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">341</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">342</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            globus_gram_job_manager_seg_resume(request-&gt;manager);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">343</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">344</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        else</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">345</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">346</td>
          <td class="coverageCount">104</td>
          <td class="srcCell"><span class="srcLine">            event_registered = GLOBUS_TRUE;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">347</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">348</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">349</td>
          <td class="coverageCount">104</td>
          <td class="srcCell"><span class="srcLine">        break;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">350</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">351</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">      case GLOBUS_GRAM_JOB_MANAGER_STATE_SUBMIT:</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">352</td>
          <td class="coverageCount">104</td>
          <td class="srcCell"><span class="srcLine">        if(request-&gt;status == GLOBUS_GRAM_PROTOCOL_JOB_STATE_FAILED &amp;&amp; </span></td>
        </tr>
      
        <tr>
          <td class="lineCount">353</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">           request-&gt;dry_run)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">354</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">355</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            request-&gt;jobmanager_state =</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">356</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                GLOBUS_GRAM_JOB_MANAGER_STATE_FAILED_TWO_PHASE_COMMITTED;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">357</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">358</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            globus_gram_job_manager_seg_resume(request-&gt;manager);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">359</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            break;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">360</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">361</td>
          <td class="coverageCount">104</td>
          <td class="srcCell"><span class="srcLine">        else if(request-&gt;job_id_string == NULL)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">362</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">363</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            /* submission failed to generate a job id */</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">364</td>
          <td class="coverageCount">11</td>
          <td class="srcCell"><span class="srcLine">            if(request-&gt;failure_code == GLOBUS_SUCCESS)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">365</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">366</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">                request-&gt;failure_code =</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">367</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    GLOBUS_GRAM_PROTOCOL_ERROR_SUBMIT_UNKNOWN;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">368</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">369</td>
          <td class="coverageCount">11</td>
          <td class="srcCell"><span class="srcLine">            globus_gram_job_manager_request_set_status(request, GLOBUS_GRAM_PROTOCOL_JOB_STATE_FAILED);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">370</td>
          <td class="coverageCount">11</td>
          <td class="srcCell"><span class="srcLine">            request-&gt;unsent_status_change = GLOBUS_TRUE;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">371</td>
          <td class="coverageCount">11</td>
          <td class="srcCell"><span class="srcLine">            globus_gram_job_manager_seg_resume(request-&gt;manager);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">372</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">373</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        else</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">374</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">375</td>
          <td class="coverageCount">93</td>
          <td class="srcCell"><span class="srcLine">            rc = globus_gram_job_manager_register_job_id(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">376</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    request-&gt;manager,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">377</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    request-&gt;job_id_string,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">378</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    request);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">379</td>
          <td class="coverageCount">93</td>
          <td class="srcCell"><span class="srcLine">            if (rc != GLOBUS_SUCCESS)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">380</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">381</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">                request-&gt;failure_code = rc;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">382</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">                globus_gram_job_manager_request_set_status(request, GLOBUS_GRAM_PROTOCOL_JOB_STATE_FAILED);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">383</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">                request-&gt;unsent_status_change = GLOBUS_TRUE;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">384</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">385</td>
          <td class="coverageCount">93</td>
          <td class="srcCell"><span class="srcLine">            globus_l_gram_job_manager_add_cache_info(request);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">386</td>
          <td class="coverageCount">93</td>
          <td class="srcCell"><span class="srcLine">            globus_gram_job_manager_seg_resume(request-&gt;manager);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">387</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">388</td>
          <td class="coverageCount">104</td>
          <td class="srcCell"><span class="srcLine">        request-&gt;queued_time = time(NULL);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">389</td>
          <td class="coverageCount">104</td>
          <td class="srcCell"><span class="srcLine">        globus_gram_job_manager_history_file_create(request);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">390</td>
          <td class="coverageCount">104</td>
          <td class="srcCell"><span class="srcLine">        request-&gt;job_history_status = request-&gt;status;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">391</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">392</td>
          <td class="coverageCount">104</td>
          <td class="srcCell"><span class="srcLine">        globus_gram_job_manager_state_file_write(request);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">393</td>
          <td class="coverageCount">104</td>
          <td class="srcCell"><span class="srcLine">        request-&gt;jobmanager_state =</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">394</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            GLOBUS_GRAM_JOB_MANAGER_STATE_POLL1;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">395</td>
          <td class="coverageCount">104</td>
          <td class="srcCell"><span class="srcLine">        first_poll = GLOBUS_TRUE;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">396</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        </span></td>
        </tr>
      
        <tr>
          <td class="lineCount">397</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        /* FALLSTHROUGH so we can act on a job state change returned from</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">398</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">         * the submit script.</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">399</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">         */</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">400</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">      case GLOBUS_GRAM_JOB_MANAGER_STATE_POLL1:</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">401</td>
          <td class="coverageCount">382</td>
          <td class="srcCell"><span class="srcLine">        if (! globus_fifo_empty(&amp;request-&gt;seg_event_queue))</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">402</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">403</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            /* A SEG event occurred recently. Let&#39;s update our job state</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">404</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">             */</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">405</td>
          <td class="coverageCount">274</td>
          <td class="srcCell"><span class="srcLine">            globus_gram_job_manager_seg_handle_event(request);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">406</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">407</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">408</td>
          <td class="coverageCount">382</td>
          <td class="srcCell"><span class="srcLine">        if(request-&gt;unsent_status_change)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">409</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">410</td>
          <td class="coverageCount">290</td>
          <td class="srcCell"><span class="srcLine">            globus_gram_job_manager_state_file_write(request);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">411</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">412</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">413</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        /* The request-&gt;job_history_status is used to save the last job status</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">414</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">         * that is stored in history file. If it is different with</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">415</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">         * request-&gt;status, we have to write history file.</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">416</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">         */ </span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">417</td>
          <td class="coverageCount">382</td>
          <td class="srcCell"><span class="srcLine">        if(request-&gt;unsent_status_change &amp;&amp;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">418</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                (request-&gt;job_history_status != request-&gt;status))</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">419</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">420</td>
          <td class="coverageCount">185</td>
          <td class="srcCell"><span class="srcLine">            globus_gram_job_manager_history_file_create(request);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">421</td>
          <td class="coverageCount">185</td>
          <td class="srcCell"><span class="srcLine">            request-&gt;job_history_status = request-&gt;status;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">422</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">423</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">424</td>
          <td class="coverageCount">382</td>
          <td class="srcCell"><span class="srcLine">        if (request-&gt;status == GLOBUS_GRAM_PROTOCOL_JOB_STATE_FAILED)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">425</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">426</td>
          <td class="coverageCount">14</td>
          <td class="srcCell"><span class="srcLine">            request-&gt;jobmanager_state =</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">427</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                GLOBUS_GRAM_JOB_MANAGER_STATE_FAILED;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">428</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">429</td>
          <td class="coverageCount">368</td>
          <td class="srcCell"><span class="srcLine">        else if (request-&gt;status == GLOBUS_GRAM_PROTOCOL_JOB_STATE_DONE ||</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">430</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                 request-&gt;status == GLOBUS_GRAM_PROTOCOL_JOB_STATE_STAGE_OUT)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">431</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">432</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            /* Job finished! start finalizing */</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">433</td>
          <td class="coverageCount">91</td>
          <td class="srcCell"><span class="srcLine">            request-&gt;jobmanager_state =</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">434</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    GLOBUS_GRAM_JOB_MANAGER_STATE_PRE_CLOSE_OUTPUT;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">435</td>
          <td class="coverageCount">91</td>
          <td class="srcCell"><span class="srcLine">            break;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">436</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">437</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        else</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">438</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">439</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            /* Send job state callbacks if necessary */</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">440</td>
          <td class="coverageCount">277</td>
          <td class="srcCell"><span class="srcLine">            if(request-&gt;unsent_status_change)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">441</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">442</td>
          <td class="coverageCount">185</td>
          <td class="srcCell"><span class="srcLine">                globus_gram_job_manager_contact_state_callback(request);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">443</td>
          <td class="coverageCount">185</td>
          <td class="srcCell"><span class="srcLine">                request-&gt;unsent_status_change = GLOBUS_FALSE;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">444</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">445</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">446</td>
          <td class="coverageCount">277</td>
          <td class="srcCell"><span class="srcLine">            if(!globus_fifo_empty(&amp;request-&gt;pending_queries))</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">447</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">448</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">                request-&gt;jobmanager_state =</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">449</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    GLOBUS_GRAM_JOB_MANAGER_STATE_POLL_QUERY1;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">450</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">                break;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">451</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">452</td>
          <td class="coverageCount">277</td>
          <td class="srcCell"><span class="srcLine">            request-&gt;jobmanager_state = GLOBUS_GRAM_JOB_MANAGER_STATE_POLL2;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">453</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">454</td>
          <td class="coverageCount">277</td>
          <td class="srcCell"><span class="srcLine">            if (!first_poll &amp;&amp; !request-&gt;manager-&gt;seg_started)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">455</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            {</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">456</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                /* Register next poll of job state */</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">457</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">                GlobusTimeReltimeSet(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">458</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        delay_time,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">459</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        request-&gt;poll_frequency, 0);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">460</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">461</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">                rc = globus_gram_job_manager_state_machine_register(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">462</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        request-&gt;manager,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">463</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        request,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">464</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        &amp;delay_time);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">465</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">                if (rc == GLOBUS_SUCCESS)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">466</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">467</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">                    event_registered = GLOBUS_TRUE;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">468</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">469</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">470</td>
          <td class="coverageCount">277</td>
          <td class="srcCell"><span class="srcLine">            else if (request-&gt;manager-&gt;seg_started)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">471</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            {</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">472</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                /* SEG has been started. If there is an event pending,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">473</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                 * we should jump to POLL1 state and not set</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">474</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                 * event_registered, so that we can process it.</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">475</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                 *</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">476</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                 * Otherwise, we&#39;ll set event_registered and the next</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">477</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                 * query or SEG event will move the state machine.</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">478</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                 */</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">479</td>
          <td class="coverageCount">277</td>
          <td class="srcCell"><span class="srcLine">                if (! globus_fifo_empty(&amp;request-&gt;seg_event_queue))</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">480</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                {</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">481</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">482</td>
          <td class="coverageCount">168</td>
          <td class="srcCell"><span class="srcLine">                    request-&gt;jobmanager_state =</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">483</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        GLOBUS_GRAM_JOB_MANAGER_STATE_POLL1;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">484</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">485</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                else</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">486</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">487</td>
          <td class="coverageCount">109</td>
          <td class="srcCell"><span class="srcLine">                    event_registered = GLOBUS_TRUE;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">488</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">489</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">490</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">491</td>
          <td class="coverageCount">291</td>
          <td class="srcCell"><span class="srcLine">        break;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">492</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">493</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">      case GLOBUS_GRAM_JOB_MANAGER_STATE_POLL2:</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">494</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        /* timer expired since last poll. start polling again. */</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">495</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">496</td>
          <td class="coverageCount">1</td>
          <td class="srcCell"><span class="srcLine">        request-&gt;jobmanager_state = GLOBUS_GRAM_JOB_MANAGER_STATE_POLL1;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">497</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">498</td>
          <td class="coverageCount">1</td>
          <td class="srcCell"><span class="srcLine">        if (request-&gt;config-&gt;seg_module == NULL &amp;&amp;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">499</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            strcmp(request-&gt;config-&gt;jobmanager_type, &quot;fork&quot;) != 0)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">500</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">501</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            rc = globus_gram_job_manager_script_poll(request);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">502</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">503</td>
          <td class="coverageCount">1</td>
          <td class="srcCell"><span class="srcLine">        else if (!globus_fifo_empty(&amp;request-&gt;seg_event_queue))</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">504</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">505</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            /* We don&#39;t want to set event_registered in this case, because</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">506</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">             * we want to immediately process the event in the queue.</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">507</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">             */</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">508</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            break;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">509</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">510</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        else</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">511</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">512</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            /* Nothing in the SEG queue. We need to stay in this state to</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">513</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">             * get SEG code to reregister the state machine</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">514</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">             */</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">515</td>
          <td class="coverageCount">1</td>
          <td class="srcCell"><span class="srcLine">            request-&gt;jobmanager_state = GLOBUS_GRAM_JOB_MANAGER_STATE_POLL2;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">516</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">517</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">518</td>
          <td class="coverageCount">1</td>
          <td class="srcCell"><span class="srcLine">        if(rc != GLOBUS_SUCCESS)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">519</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">520</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            globus_gram_job_manager_request_log(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">521</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                request,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">522</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                GLOBUS_GRAM_JOB_MANAGER_LOG_WARN,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">523</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;event=gram.state_machine.info &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">524</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;level=WARN &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">525</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;gramid=%s &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">526</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;msg=\&quot;%s\&quot; &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">527</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;status=%d &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">528</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;reason=\&quot;%s\&quot; &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">529</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;\n&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">530</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                request-&gt;job_contact_path,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">531</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;Poll failed&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">532</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                -rc,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">533</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                globus_gram_protocol_error_string(rc));</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">534</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">535</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        else</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">536</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">537</td>
          <td class="coverageCount">1</td>
          <td class="srcCell"><span class="srcLine">            event_registered = GLOBUS_TRUE;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">538</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">539</td>
          <td class="coverageCount">1</td>
          <td class="srcCell"><span class="srcLine">        break;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">540</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">541</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">      case GLOBUS_GRAM_JOB_MANAGER_STATE_POLL_QUERY1:</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">542</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">      case GLOBUS_GRAM_JOB_MANAGER_STATE_TWO_PHASE_QUERY1:</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">543</td>
          <td class="coverageCount">4</td>
          <td class="srcCell"><span class="srcLine">        if (request-&gt;jobmanager_state ==</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">544</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                GLOBUS_GRAM_JOB_MANAGER_STATE_POLL_QUERY1)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">545</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">546</td>
          <td class="coverageCount">4</td>
          <td class="srcCell"><span class="srcLine">            next_state = GLOBUS_GRAM_JOB_MANAGER_STATE_POLL_QUERY2;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">547</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">548</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        else</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">549</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">550</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            next_state = GLOBUS_GRAM_JOB_MANAGER_STATE_TWO_PHASE_QUERY2;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">551</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">552</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">553</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        /*</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">554</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">         * timer cancelled since last poll, because we may have some</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">555</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">         * queries to process</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">556</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">         */</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">557</td>
          <td class="coverageCount">4</td>
          <td class="srcCell"><span class="srcLine">        query = globus_fifo_peek(&amp;request-&gt;pending_queries);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">558</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">559</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">560</td>
          <td class="coverageCount">4</td>
          <td class="srcCell"><span class="srcLine">        if (query-&gt;type == GLOBUS_GRAM_JOB_MANAGER_SIGNAL &amp;&amp;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">561</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            query-&gt;signal == GLOBUS_GRAM_PROTOCOL_JOB_SIGNAL_STDIO_UPDATE)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">562</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">563</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">564</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            if (request-&gt;config-&gt;log_levels &amp; GLOBUS_GRAM_JOB_MANAGER_LOG_TRACE)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">565</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            {</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">566</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                char * tmp_str;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">567</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">568</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">                tmp_str = globus_gram_prepare_log_string(query-&gt;signal_arg);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">569</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">570</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">                globus_gram_job_manager_request_log(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">571</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    request,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">572</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    GLOBUS_GRAM_JOB_MANAGER_LOG_TRACE,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">573</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;event=gram.state_machine.info &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">574</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;level=TRACE &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">575</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;gramid=%s &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">576</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;query_type=%s &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">577</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;rsl=\&quot;%s\&quot; &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">578</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;\n&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">579</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    request-&gt;job_contact_path,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">580</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;stdio_update&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">581</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    tmp_str ? tmp_str : &quot;&quot;);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">582</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">                if (tmp_str)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">583</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">584</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">                    free(tmp_str);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">585</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">586</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">587</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">588</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">	    query-&gt;rsl = globus_rsl_parse(query-&gt;signal_arg);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">589</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">	    if(!query-&gt;rsl)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">590</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">	    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">591</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                char * tmp_str;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">592</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">593</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">                tmp_str = globus_gram_prepare_log_string(query-&gt;signal_arg);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">594</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">595</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">		query-&gt;failure_code = GLOBUS_GRAM_PROTOCOL_ERROR_BAD_RSL;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">596</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">	        request-&gt;jobmanager_state = next_state;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">597</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">598</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">                globus_gram_job_manager_request_log(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">599</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    request,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">600</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    GLOBUS_GRAM_JOB_MANAGER_LOG_ERROR,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">601</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;event=gram.state_machine.info &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">602</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;level=ERROR &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">603</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;gramid=%s &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">604</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;query_type=%s &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">605</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;rsl=\&quot;%s\&quot; &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">606</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;msg=%s &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">607</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;status=%d &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">608</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;reason=\&quot;%s\&quot; &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">609</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;\n&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">610</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    request-&gt;job_contact_path,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">611</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;stdio_update&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">612</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    tmp_str ? tmp_str : &quot;&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">613</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;Error parsing query rsl&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">614</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    -rc,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">615</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    globus_gram_protocol_error_string(query-&gt;failure_code));</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">616</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">617</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">                if (tmp_str)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">618</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">619</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">                    free(tmp_str);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">620</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">621</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">		goto error_out;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">622</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">	    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">623</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">	    rc = globus_rsl_assist_attributes_canonicalize(query-&gt;rsl);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">624</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">	    if(rc != GLOBUS_SUCCESS)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">625</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">	    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">626</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                char * tmp_str;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">627</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">628</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">                tmp_str = globus_gram_prepare_log_string(query-&gt;signal_arg);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">629</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">630</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">		query-&gt;failure_code = GLOBUS_GRAM_PROTOCOL_ERROR_BAD_RSL;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">631</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">	        request-&gt;jobmanager_state = next_state;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">632</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">633</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">                globus_gram_job_manager_request_log(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">634</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    request,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">635</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    GLOBUS_GRAM_JOB_MANAGER_LOG_ERROR,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">636</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;event=gram.state_machine.end&quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">637</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;level=ERROR &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">638</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;query_type=%s &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">639</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;gramid=%s &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">640</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;rsl=\&quot;%s\&quot; &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">641</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;msg=\&quot;%s\&quot; &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">642</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;status=%d &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">643</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;reason=\&quot;%s\&quot; &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">644</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;\n&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">645</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;stdio_update&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">646</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    request-&gt;job_contact_path,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">647</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    tmp_str ? tmp_str : &quot;&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">648</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;Error canonicalizing RSL&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">649</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    -query-&gt;failure_code,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">650</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    globus_gram_protocol_error_string(query-&gt;failure_code));</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">651</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">652</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">                if (tmp_str)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">653</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">654</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">                    free(tmp_str);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">655</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">656</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">657</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">		goto error_out;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">658</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">	    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">659</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">660</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">	    rc = globus_gram_job_manager_validate_rsl(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">661</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">		    request,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">662</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    query-&gt;rsl,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">663</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">		    GLOBUS_GRAM_VALIDATE_STDIO_UPDATE);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">664</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">	    if(rc != GLOBUS_SUCCESS)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">665</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">	    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">666</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">		query-&gt;failure_code = GLOBUS_GRAM_PROTOCOL_ERROR_BAD_RSL;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">667</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">	        request-&gt;jobmanager_state = next_state;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">668</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">		break;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">669</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">	    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">670</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">	    rc = globus_rsl_eval(query-&gt;rsl, &amp;request-&gt;symbol_table);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">671</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">	    if(rc != GLOBUS_SUCCESS)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">672</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">	    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">673</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">		query-&gt;failure_code =</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">674</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">		    GLOBUS_GRAM_PROTOCOL_ERROR_RSL_EVALUATION_FAILED;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">675</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">	        request-&gt;jobmanager_state = next_state;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">676</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">		break;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">677</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">	    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">678</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">679</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            rc = globus_i_gram_request_stdio_update(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">680</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    request,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">681</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    query-&gt;rsl);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">682</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">683</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">		query-&gt;failure_code = GLOBUS_GRAM_PROTOCOL_ERROR_BAD_RSL;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">684</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">	        request-&gt;jobmanager_state = next_state;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">685</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">		break;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">686</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">687</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request-&gt;jobmanager_state = next_state;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">688</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            globus_i_gram_remote_io_url_update(request);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">689</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">	    break;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">690</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">691</td>
          <td class="coverageCount">4</td>
          <td class="srcCell"><span class="srcLine">        else if (query-&gt;type == GLOBUS_GRAM_JOB_MANAGER_SIGNAL)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">692</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">693</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            rc = globus_gram_job_manager_script_signal(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">694</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    request,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">695</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    query);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">696</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">697</td>
          <td class="coverageCount">4</td>
          <td class="srcCell"><span class="srcLine">        else if(query-&gt;type == GLOBUS_GRAM_JOB_MANAGER_CANCEL)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">698</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">699</td>
          <td class="coverageCount">3</td>
          <td class="srcCell"><span class="srcLine">            rc = globus_gram_job_manager_script_cancel(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">700</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    request,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">701</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    query);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">702</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">703</td>
          <td class="coverageCount">1</td>
          <td class="srcCell"><span class="srcLine">        else if(query-&gt;type == GLOBUS_GRAM_JOB_MANAGER_PROXY_REFRESH)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">704</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">705</td>
          <td class="coverageCount">1</td>
          <td class="srcCell"><span class="srcLine">            if (request-&gt;jobmanager_state ==</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">706</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    GLOBUS_GRAM_JOB_MANAGER_STATE_POLL_QUERY1)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">707</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">708</td>
          <td class="coverageCount">1</td>
          <td class="srcCell"><span class="srcLine">                request-&gt;jobmanager_state =</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">709</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    GLOBUS_GRAM_JOB_MANAGER_STATE_PROXY_REFRESH;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">710</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">711</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            else</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">712</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">713</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">                request-&gt;jobmanager_state =</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">714</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    GLOBUS_GRAM_JOB_MANAGER_STATE_TWO_PHASE_PROXY_REFRESH;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">715</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">716</td>
          <td class="coverageCount">1</td>
          <td class="srcCell"><span class="srcLine">            rc = globus_gram_protocol_accept_delegation(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">717</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    query-&gt;handle,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">718</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    GSS_C_NO_OID_SET,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">719</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    GSS_C_NO_BUFFER_SET,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">720</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    GSS_C_GLOBUS_LIMITED_DELEG_PROXY_FLAG |</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">721</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        GSS_C_GLOBUS_SSL_COMPATIBLE,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">722</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    0,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">723</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    globus_gram_job_manager_query_delegation_callback,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">724</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    request);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">725</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">726</td>
          <td class="coverageCount">1</td>
          <td class="srcCell"><span class="srcLine">            if(rc == GLOBUS_SUCCESS)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">727</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">728</td>
          <td class="coverageCount">1</td>
          <td class="srcCell"><span class="srcLine">                event_registered = GLOBUS_TRUE;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">729</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">730</td>
          <td class="coverageCount">1</td>
          <td class="srcCell"><span class="srcLine">            break;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">731</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">732</td>
          <td class="coverageCount">3</td>
          <td class="srcCell"><span class="srcLine">        if(rc == GLOBUS_SUCCESS)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">733</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">734</td>
          <td class="coverageCount">3</td>
          <td class="srcCell"><span class="srcLine">            request-&gt;jobmanager_state = next_state;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">735</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">736</td>
          <td class="coverageCount">3</td>
          <td class="srcCell"><span class="srcLine">            event_registered = GLOBUS_TRUE;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">737</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">738</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        else</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">739</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">740</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            globus_fifo_dequeue(&amp;request-&gt;pending_queries);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">741</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            query-&gt;failure_code = rc;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">742</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">743</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            globus_gram_job_manager_query_reply(request, query);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">744</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">745</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            if(globus_fifo_empty(&amp;request-&gt;pending_queries))</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">746</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">747</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">                request-&gt;jobmanager_state =</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">748</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    GLOBUS_GRAM_JOB_MANAGER_STATE_POLL2;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">749</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">750</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">751</td>
          <td class="coverageCount">3</td>
          <td class="srcCell"><span class="srcLine">        break;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">752</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">753</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">      case GLOBUS_GRAM_JOB_MANAGER_STATE_TWO_PHASE_QUERY2:</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">754</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        query = globus_fifo_dequeue(&amp;request-&gt;pending_queries);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">755</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">756</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        /* Frees the query */</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">757</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        globus_gram_job_manager_query_reply(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">758</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                request,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">759</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                query);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">760</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">761</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        if(globus_fifo_empty(&amp;request-&gt;pending_queries))</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">762</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">763</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            request-&gt;jobmanager_state =</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">764</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                GLOBUS_GRAM_JOB_MANAGER_STATE_TWO_PHASE;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">765</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">766</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            GlobusTimeReltimeSet(delay_time,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">767</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                                 request-&gt;two_phase_commit,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">768</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                                 0);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">769</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">770</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            rc = globus_gram_job_manager_state_machine_register(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">771</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    request-&gt;manager,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">772</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    request,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">773</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &amp;delay_time);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">774</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">775</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            if (rc == GLOBUS_SUCCESS)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">776</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">777</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">                event_registered = GLOBUS_TRUE;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">778</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">779</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">780</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        else</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">781</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">782</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            request-&gt;jobmanager_state =</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">783</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                GLOBUS_GRAM_JOB_MANAGER_STATE_TWO_PHASE_QUERY1;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">784</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">785</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        break;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">786</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">787</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">      case GLOBUS_GRAM_JOB_MANAGER_STATE_POLL_QUERY2:</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">788</td>
          <td class="coverageCount">4</td>
          <td class="srcCell"><span class="srcLine">        query = globus_fifo_dequeue(&amp;request-&gt;pending_queries);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">789</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">790</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        /* Frees the query */</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">791</td>
          <td class="coverageCount">4</td>
          <td class="srcCell"><span class="srcLine">        globus_gram_job_manager_query_reply(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">792</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                request,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">793</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                query);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">794</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">795</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">        if(globus_fifo_empty(&amp;request-&gt;pending_queries) &amp;&amp;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">796</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">           (request-&gt;unsent_status_change ||</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">797</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            !globus_fifo_empty(&amp;request-&gt;seg_event_queue)))</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">798</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">799</td>
          <td class="coverageCount">3</td>
          <td class="srcCell"><span class="srcLine">            request-&gt;jobmanager_state =</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">800</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                GLOBUS_GRAM_JOB_MANAGER_STATE_POLL1;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">801</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">802</td>
          <td class="coverageCount">1</td>
          <td class="srcCell"><span class="srcLine">        else if(globus_fifo_empty(&amp;request-&gt;pending_queries))</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">803</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">804</td>
          <td class="coverageCount">1</td>
          <td class="srcCell"><span class="srcLine">            request-&gt;jobmanager_state = </span></td>
        </tr>
      
        <tr>
          <td class="lineCount">805</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                GLOBUS_GRAM_JOB_MANAGER_STATE_POLL2;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">806</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">807</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        else</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">808</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">809</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            request-&gt;jobmanager_state =</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">810</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                GLOBUS_GRAM_JOB_MANAGER_STATE_POLL_QUERY1;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">811</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">812</td>
          <td class="coverageCount">4</td>
          <td class="srcCell"><span class="srcLine">        break;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">813</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    </span></td>
        </tr>
      
        <tr>
          <td class="lineCount">814</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">      case GLOBUS_GRAM_JOB_MANAGER_STATE_PROXY_REFRESH:</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">815</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">      case GLOBUS_GRAM_JOB_MANAGER_STATE_TWO_PHASE_PROXY_REFRESH:</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">816</td>
          <td class="coverageCount">1</td>
          <td class="srcCell"><span class="srcLine">        query = globus_fifo_peek(&amp;request-&gt;pending_queries);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">817</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">818</td>
          <td class="coverageCount">1</td>
          <td class="srcCell"><span class="srcLine">        globus_assert(query-&gt;type == GLOBUS_GRAM_JOB_MANAGER_PROXY_REFRESH);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">819</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">820</td>
          <td class="coverageCount">1</td>
          <td class="srcCell"><span class="srcLine">        if (request-&gt;jobmanager_state ==</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">821</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                GLOBUS_GRAM_JOB_MANAGER_STATE_PROXY_REFRESH)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">822</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">823</td>
          <td class="coverageCount">1</td>
          <td class="srcCell"><span class="srcLine">            request-&gt;jobmanager_state =</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">824</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    GLOBUS_GRAM_JOB_MANAGER_STATE_POLL_QUERY2;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">825</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">826</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        else if (request-&gt;jobmanager_state ==</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">827</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                GLOBUS_GRAM_JOB_MANAGER_STATE_TWO_PHASE_PROXY_REFRESH)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">828</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">829</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            request-&gt;jobmanager_state =</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">830</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    GLOBUS_GRAM_JOB_MANAGER_STATE_TWO_PHASE_QUERY2;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">831</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">832</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">833</td>
          <td class="coverageCount">1</td>
          <td class="srcCell"><span class="srcLine">        if(query-&gt;delegated_credential != GSS_C_NO_CREDENTIAL)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">834</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">835</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            /*</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">836</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">             * We got a new credential... update our listener and</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">837</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">             * store it on disk</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">838</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">             */</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">839</td>
          <td class="coverageCount">1</td>
          <td class="srcCell"><span class="srcLine">            rc = globus_gram_job_manager_gsi_update_credential(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">840</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    request-&gt;manager,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">841</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    request,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">842</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    query-&gt;delegated_credential);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">843</td>
          <td class="coverageCount">1</td>
          <td class="srcCell"><span class="srcLine">            if(rc != GLOBUS_SUCCESS)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">844</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">845</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">                break;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">846</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">847</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">848</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        else</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">849</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">850</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            query-&gt;failure_code =</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">851</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                GLOBUS_GRAM_PROTOCOL_ERROR_DELEGATION_FAILED;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">852</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">853</td>
          <td class="coverageCount">1</td>
          <td class="srcCell"><span class="srcLine">        break;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">854</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">855</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">      case GLOBUS_GRAM_JOB_MANAGER_STATE_PRE_CLOSE_OUTPUT:</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">856</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">      case GLOBUS_GRAM_JOB_MANAGER_STATE_FAILED:</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">857</td>
          <td class="coverageCount">108</td>
          <td class="srcCell"><span class="srcLine">        if(request-&gt;unsent_status_change)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">858</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">859</td>
          <td class="coverageCount">108</td>
          <td class="srcCell"><span class="srcLine">            globus_gram_job_manager_state_file_write(request);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">860</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">861</td>
          <td class="coverageCount">108</td>
          <td class="srcCell"><span class="srcLine">        if(request-&gt;jobmanager_state ==</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">862</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                GLOBUS_GRAM_JOB_MANAGER_STATE_PRE_CLOSE_OUTPUT)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">863</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">864</td>
          <td class="coverageCount">91</td>
          <td class="srcCell"><span class="srcLine">            request-&gt;jobmanager_state =</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">865</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                GLOBUS_GRAM_JOB_MANAGER_STATE_CLOSE_OUTPUT;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">866</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">867</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        else</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">868</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">869</td>
          <td class="coverageCount">17</td>
          <td class="srcCell"><span class="srcLine">            request-&gt;jobmanager_state =</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">870</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                GLOBUS_GRAM_JOB_MANAGER_STATE_FAILED_CLOSE_OUTPUT;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">871</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">872</td>
          <td class="coverageCount">108</td>
          <td class="srcCell"><span class="srcLine">        save_status = request-&gt;status;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">873</td>
          <td class="coverageCount">108</td>
          <td class="srcCell"><span class="srcLine">        save_jobmanager_state = request-&gt;jobmanager_state;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">874</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">875</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        /* Reply to any outstanding queries */</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">876</td>
          <td class="coverageCount">216</td>
          <td class="srcCell"><span class="srcLine">        while (!globus_fifo_empty(&amp;request-&gt;pending_queries))</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">877</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">878</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            query = globus_fifo_dequeue(&amp;request-&gt;pending_queries);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">879</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">880</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            query-&gt;failure_code = GLOBUS_GRAM_PROTOCOL_ERROR_JOB_QUERY_DENIAL;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">881</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            /* Frees the query */</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">882</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            globus_gram_job_manager_query_reply(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">883</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    request,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">884</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    query);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">885</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">886</td>
          <td class="coverageCount">108</td>
          <td class="srcCell"><span class="srcLine">        break;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">887</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">888</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">      case GLOBUS_GRAM_JOB_MANAGER_STATE_TWO_PHASE_END:</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">889</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">      case GLOBUS_GRAM_JOB_MANAGER_STATE_FAILED_TWO_PHASE:</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">890</td>
          <td class="coverageCount">104</td>
          <td class="srcCell"><span class="srcLine">        if(request-&gt;two_phase_commit != 0 &amp;&amp; request-&gt;commit_extend != 0)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">891</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">892</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            GlobusTimeReltimeSet(delay_time,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">893</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                                 request-&gt;commit_extend,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">894</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                                 0);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">895</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            request-&gt;commit_extend = 0;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">896</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">897</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            rc = globus_gram_job_manager_state_machine_register(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">898</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    request-&gt;manager,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">899</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    request,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">900</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &amp;delay_time);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">901</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">902</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            if (rc == GLOBUS_SUCCESS)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">903</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">904</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">                event_registered = GLOBUS_TRUE;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">905</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">906</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">907</td>
          <td class="coverageCount">205</td>
          <td class="srcCell"><span class="srcLine">        else if(request-&gt;two_phase_commit == 0 || !request-&gt;client_contacts)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">908</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">909</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            /* Nothing to do here if we are not doing the two-phase</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">910</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">             * commit protocol or if we have no client callbacks</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">911</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">             */</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">912</td>
          <td class="coverageCount">101</td>
          <td class="srcCell"><span class="srcLine">            if(request-&gt;jobmanager_state ==</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">913</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    GLOBUS_GRAM_JOB_MANAGER_STATE_TWO_PHASE_END)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">914</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">915</td>
          <td class="coverageCount">85</td>
          <td class="srcCell"><span class="srcLine">                request-&gt;jobmanager_state =</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">916</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    GLOBUS_GRAM_JOB_MANAGER_STATE_TWO_PHASE_END_COMMITTED;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">917</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">918</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            else</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">919</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">920</td>
          <td class="coverageCount">16</td>
          <td class="srcCell"><span class="srcLine">                request-&gt;jobmanager_state =</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">921</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                  GLOBUS_GRAM_JOB_MANAGER_STATE_FAILED_TWO_PHASE_COMMITTED;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">922</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">923</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">924</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        else</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">925</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">926</td>
          <td class="coverageCount">3</td>
          <td class="srcCell"><span class="srcLine">            request-&gt;restart_state = request-&gt;jobmanager_state;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">927</td>
          <td class="coverageCount">3</td>
          <td class="srcCell"><span class="srcLine">            request-&gt;jobmanager_state = GLOBUS_GRAM_JOB_MANAGER_STATE_STOP;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">928</td>
          <td class="coverageCount">3</td>
          <td class="srcCell"><span class="srcLine">            request-&gt;stop_reason = GLOBUS_GRAM_PROTOCOL_ERROR_COMMIT_TIMED_OUT;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">929</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">930</td>
          <td class="coverageCount">3</td>
          <td class="srcCell"><span class="srcLine">            event_registered = GLOBUS_TRUE;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">931</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">932</td>
          <td class="coverageCount">104</td>
          <td class="srcCell"><span class="srcLine">        break;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">933</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">934</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">      case GLOBUS_GRAM_JOB_MANAGER_STATE_TWO_PHASE_END_COMMITTED:</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">935</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">      case GLOBUS_GRAM_JOB_MANAGER_STATE_FAILED_TWO_PHASE_COMMITTED:</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">936</td>
          <td class="coverageCount">107</td>
          <td class="srcCell"><span class="srcLine">        if(request-&gt;jobmanager_state ==</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">937</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                GLOBUS_GRAM_JOB_MANAGER_STATE_TWO_PHASE_END_COMMITTED)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">938</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">939</td>
          <td class="coverageCount">89</td>
          <td class="srcCell"><span class="srcLine">            request-&gt;jobmanager_state =</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">940</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                GLOBUS_GRAM_JOB_MANAGER_STATE_FILE_CLEAN_UP;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">941</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">942</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        else</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">943</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">944</td>
          <td class="coverageCount">18</td>
          <td class="srcCell"><span class="srcLine">            request-&gt;jobmanager_state =</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">945</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                GLOBUS_GRAM_JOB_MANAGER_STATE_FAILED_FILE_CLEAN_UP;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">946</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">947</td>
          <td class="coverageCount">107</td>
          <td class="srcCell"><span class="srcLine">        if(globus_gram_job_manager_rsl_need_file_cleanup(request))</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">948</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">949</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            globus_l_gram_file_cleanup(request);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">950</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">951</td>
          <td class="coverageCount">107</td>
          <td class="srcCell"><span class="srcLine">        break;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">952</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">953</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">      case GLOBUS_GRAM_JOB_MANAGER_STATE_FILE_CLEAN_UP:</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">954</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">      case GLOBUS_GRAM_JOB_MANAGER_STATE_FAILED_FILE_CLEAN_UP:</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">955</td>
          <td class="coverageCount">107</td>
          <td class="srcCell"><span class="srcLine">        if(request-&gt;jobmanager_state ==</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">956</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                GLOBUS_GRAM_JOB_MANAGER_STATE_FILE_CLEAN_UP)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">957</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">958</td>
          <td class="coverageCount">89</td>
          <td class="srcCell"><span class="srcLine">            if(request-&gt;status != GLOBUS_GRAM_PROTOCOL_JOB_STATE_FAILED)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">959</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">960</td>
          <td class="coverageCount">89</td>
          <td class="srcCell"><span class="srcLine">                request-&gt;jobmanager_state =</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">961</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    GLOBUS_GRAM_JOB_MANAGER_STATE_SCRATCH_CLEAN_UP;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">962</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">963</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            else</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">964</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">965</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">                request-&gt;jobmanager_state =</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">966</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    GLOBUS_GRAM_JOB_MANAGER_STATE_FAILED_SCRATCH_CLEAN_UP;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">967</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">968</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">969</td>
          <td class="coverageCount">18</td>
          <td class="srcCell"><span class="srcLine">        else if(request-&gt;jobmanager_state ==</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">970</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                GLOBUS_GRAM_JOB_MANAGER_STATE_FAILED_FILE_CLEAN_UP)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">971</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">972</td>
          <td class="coverageCount">18</td>
          <td class="srcCell"><span class="srcLine">            request-&gt;jobmanager_state =</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">973</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                GLOBUS_GRAM_JOB_MANAGER_STATE_FAILED_SCRATCH_CLEAN_UP;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">974</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">975</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        else</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">976</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">977</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            request-&gt;jobmanager_state =</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">978</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                GLOBUS_GRAM_JOB_MANAGER_STATE_FAILED_SCRATCH_CLEAN_UP;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">979</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">980</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">981</td>
          <td class="coverageCount">107</td>
          <td class="srcCell"><span class="srcLine">        break;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">982</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">983</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">      case GLOBUS_GRAM_JOB_MANAGER_STATE_SCRATCH_CLEAN_UP:</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">984</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">      case GLOBUS_GRAM_JOB_MANAGER_STATE_FAILED_SCRATCH_CLEAN_UP:</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">985</td>
          <td class="coverageCount">107</td>
          <td class="srcCell"><span class="srcLine">        if(request-&gt;jobmanager_state ==</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">986</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                GLOBUS_GRAM_JOB_MANAGER_STATE_SCRATCH_CLEAN_UP)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">987</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">988</td>
          <td class="coverageCount">89</td>
          <td class="srcCell"><span class="srcLine">            request-&gt;jobmanager_state =</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">989</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                GLOBUS_GRAM_JOB_MANAGER_STATE_CACHE_CLEAN_UP;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">990</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">991</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        else</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">992</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">993</td>
          <td class="coverageCount">18</td>
          <td class="srcCell"><span class="srcLine">            request-&gt;jobmanager_state =</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">994</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                GLOBUS_GRAM_JOB_MANAGER_STATE_FAILED_CACHE_CLEAN_UP;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">995</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">996</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">997</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        /* Cache cleanup script cleaned gass cache and jobdir */</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">998</td>
          <td class="coverageCount">107</td>
          <td class="srcCell"><span class="srcLine">        globus_gram_job_manager_destroy_directory(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">999</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                request,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1000</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                request-&gt;job_dir);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1001</td>
          <td class="coverageCount">107</td>
          <td class="srcCell"><span class="srcLine">        globus_gass_cache_cleanup_tag_all(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1002</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                request-&gt;cache_handle,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1003</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                request-&gt;cache_tag);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1004</td>
          <td class="coverageCount">107</td>
          <td class="srcCell"><span class="srcLine">        break;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1005</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">      case GLOBUS_GRAM_JOB_MANAGER_STATE_CACHE_CLEAN_UP:</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1006</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">      case GLOBUS_GRAM_JOB_MANAGER_STATE_FAILED_CACHE_CLEAN_UP:</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1007</td>
          <td class="coverageCount">107</td>
          <td class="srcCell"><span class="srcLine">        if(request-&gt;jobmanager_state ==</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1008</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                GLOBUS_GRAM_JOB_MANAGER_STATE_CACHE_CLEAN_UP)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1009</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1010</td>
          <td class="coverageCount">89</td>
          <td class="srcCell"><span class="srcLine">            request-&gt;jobmanager_state =</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1011</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                GLOBUS_GRAM_JOB_MANAGER_STATE_DONE;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1012</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1013</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        else</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1014</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1015</td>
          <td class="coverageCount">18</td>
          <td class="srcCell"><span class="srcLine">            request-&gt;jobmanager_state = </span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1016</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                GLOBUS_GRAM_JOB_MANAGER_STATE_FAILED_DONE;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1017</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1018</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        </span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1019</td>
          <td class="coverageCount">107</td>
          <td class="srcCell"><span class="srcLine">        if(request-&gt;job_state_file)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1020</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1021</td>
          <td class="coverageCount">107</td>
          <td class="srcCell"><span class="srcLine">            remove(request-&gt;job_state_file);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1022</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1023</td>
          <td class="coverageCount">107</td>
          <td class="srcCell"><span class="srcLine">        if(request-&gt;job_state_lock_file)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1024</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1025</td>
          <td class="coverageCount">107</td>
          <td class="srcCell"><span class="srcLine">            remove(request-&gt;job_state_lock_file);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1026</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1027</td>
          <td class="coverageCount">107</td>
          <td class="srcCell"><span class="srcLine">        globus_l_gram_job_manager_cancel_queries(request);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1028</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1029</td>
          <td class="coverageCount">107</td>
          <td class="srcCell"><span class="srcLine">        break;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1030</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1031</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">      case GLOBUS_GRAM_JOB_MANAGER_STATE_STOP:</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1032</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        /* This state is reached when the job manager decides to stop</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1033</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">         * between the time the job request reply is sent and the </span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1034</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">         * job manager has noticed stop or failed</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1035</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">         */</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1036</td>
          <td class="coverageCount">5</td>
          <td class="srcCell"><span class="srcLine">        globus_gram_job_manager_contact_state_callback(request);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1037</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1038</td>
          <td class="coverageCount">5</td>
          <td class="srcCell"><span class="srcLine">        globus_gram_job_manager_state_file_write(request);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1039</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1040</td>
          <td class="coverageCount">5</td>
          <td class="srcCell"><span class="srcLine">        event_registered = GLOBUS_TRUE;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1041</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1042</td>
          <td class="coverageCount">5</td>
          <td class="srcCell"><span class="srcLine">        break;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1043</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1044</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">      case GLOBUS_GRAM_JOB_MANAGER_STATE_FAILED_DONE:</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1045</td>
          <td class="coverageCount">18</td>
          <td class="srcCell"><span class="srcLine">        if(request-&gt;job_state_file)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1046</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1047</td>
          <td class="coverageCount">18</td>
          <td class="srcCell"><span class="srcLine">            remove(request-&gt;job_state_file);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1048</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1049</td>
          <td class="coverageCount">18</td>
          <td class="srcCell"><span class="srcLine">        if(request-&gt;job_state_lock_file)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1050</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1051</td>
          <td class="coverageCount">18</td>
          <td class="srcCell"><span class="srcLine">            remove(request-&gt;job_state_lock_file);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1052</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1053</td>
          <td class="coverageCount">18</td>
          <td class="srcCell"><span class="srcLine">        globus_l_gram_job_manager_cancel_queries(request);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1054</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        /* Write auditing file if job is DONE or FAILED */</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1055</td>
          <td class="coverageCount">18</td>
          <td class="srcCell"><span class="srcLine">        if (request-&gt;jobmanager_state == GLOBUS_GRAM_JOB_MANAGER_STATE_DONE ||</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1056</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request-&gt;jobmanager_state == GLOBUS_GRAM_JOB_MANAGER_STATE_FAILED_DONE)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1057</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1058</td>
          <td class="coverageCount">18</td>
          <td class="srcCell"><span class="srcLine">            globus_gram_job_manager_auditing_file_write(request);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1059</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1060</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1061</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        /* Don&#39;t allow any new SEG events to enter the queue */</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1062</td>
          <td class="coverageCount">18</td>
          <td class="srcCell"><span class="srcLine">        (void) globus_gram_job_manager_unregister_job_id(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1063</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                request-&gt;manager,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1064</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                request-&gt;job_id_string);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1065</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1066</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        /* Clear any existing SEG events */</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1067</td>
          <td class="coverageCount">36</td>
          <td class="srcCell"><span class="srcLine">        while (! globus_fifo_empty(&amp;request-&gt;seg_event_queue))</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1068</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1069</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            /* A SEG event occurred recently. Let&#39;s update our job state</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1070</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">             */</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1071</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            globus_gram_job_manager_seg_handle_event(request);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1072</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1073</td>
          <td class="coverageCount">18</td>
          <td class="srcCell"><span class="srcLine">        globus_i_gram_send_job_stats(request);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1074</td>
          <td class="coverageCount">18</td>
          <td class="srcCell"><span class="srcLine">        globus_gram_job_manager_request_log(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1075</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                request,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1076</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                GLOBUS_GRAM_JOB_MANAGER_LOG_ERROR,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1077</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;event=gram.job.end &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1078</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;level=ERROR &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1079</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;gramid=%s &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1080</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;job_status=%d &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1081</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;status=%d &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1082</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;reason=\&quot;%s\&quot;\n&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1083</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                request-&gt;job_contact_path,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1084</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                request-&gt;status,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1085</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                -request-&gt;failure_code,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1086</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                globus_gram_protocol_error_string(request-&gt;failure_code));</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1087</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1088</td>
          <td class="coverageCount">18</td>
          <td class="srcCell"><span class="srcLine">        event_registered = GLOBUS_TRUE;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1089</td>
          <td class="coverageCount">18</td>
          <td class="srcCell"><span class="srcLine">        break;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1090</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1091</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">      case GLOBUS_GRAM_JOB_MANAGER_STATE_DONE:</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1092</td>
          <td class="coverageCount">89</td>
          <td class="srcCell"><span class="srcLine">        globus_l_gram_job_manager_cancel_queries(request);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1093</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1094</td>
          <td class="coverageCount">89</td>
          <td class="srcCell"><span class="srcLine">        globus_gram_job_manager_auditing_file_write(request);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1095</td>
          <td class="coverageCount">89</td>
          <td class="srcCell"><span class="srcLine">        event_registered = GLOBUS_TRUE;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1096</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1097</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        /* Don&#39;t allow any new SEG events to enter the queue */</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1098</td>
          <td class="coverageCount">89</td>
          <td class="srcCell"><span class="srcLine">        (void) globus_gram_job_manager_unregister_job_id(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1099</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                request-&gt;manager,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1100</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                request-&gt;job_id_string);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1101</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        /* Clear any existing SEG events */</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1102</td>
          <td class="coverageCount">178</td>
          <td class="srcCell"><span class="srcLine">        while (! globus_fifo_empty(&amp;request-&gt;seg_event_queue))</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1103</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1104</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            /* A SEG event occurred recently. Let&#39;s update our job state</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1105</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">             */</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1106</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            globus_gram_job_manager_seg_handle_event(request);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1107</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1108</td>
          <td class="coverageCount">89</td>
          <td class="srcCell"><span class="srcLine">        if (request-&gt;config-&gt;seg_module &amp;&amp; request-&gt;manager-&gt;seg_started)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1109</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1110</td>
          <td class="coverageCount">89</td>
          <td class="srcCell"><span class="srcLine">            snprintf(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1111</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    exit_code_string,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1112</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    sizeof(exit_code_string),</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1113</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;%d&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1114</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    (int) request-&gt;exit_code &amp; 0xffff);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1115</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1116</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1117</td>
          <td class="coverageCount">89</td>
          <td class="srcCell"><span class="srcLine">        globus_i_gram_send_job_stats(request);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1118</td>
          <td class="coverageCount">89</td>
          <td class="srcCell"><span class="srcLine">        globus_gram_job_manager_request_log(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1119</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                request,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1120</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                GLOBUS_GRAM_JOB_MANAGER_LOG_INFO,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1121</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;event=gram.job.end &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1122</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;level=INFO &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1123</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;gramid=%s &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1124</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;job_status=%d &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1125</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;exit_code=%s &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1126</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;status=%d &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1127</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;msg=\&quot;%s\&quot; &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1128</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;\n&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1129</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                request-&gt;job_contact_path,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1130</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                request-&gt;status,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1131</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                exit_code_string,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1132</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                0,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1133</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;Job complete&quot;);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1134</td>
          <td class="coverageCount">89</td>
          <td class="srcCell"><span class="srcLine">        break;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1135</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1136</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">      case GLOBUS_GRAM_JOB_MANAGER_STATE_CLOSE_OUTPUT:</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1137</td>
          <td class="coverageCount">91</td>
          <td class="srcCell"><span class="srcLine">        if (request-&gt;status == GLOBUS_GRAM_PROTOCOL_JOB_STATE_FAILED &amp;&amp; request-&gt;failure_code == GLOBUS_GRAM_PROTOCOL_ERROR_STAGE_OUT_FAILED)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1138</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1139</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            request-&gt;jobmanager_state =</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1140</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            GLOBUS_GRAM_JOB_MANAGER_STATE_FAILED_CLOSE_OUTPUT;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1141</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            break;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1142</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1143</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1144</td>
          <td class="coverageCount">91</td>
          <td class="srcCell"><span class="srcLine">        request-&gt;jobmanager_state = GLOBUS_GRAM_JOB_MANAGER_STATE_STAGE_OUT;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1145</td>
          <td class="coverageCount">91</td>
          <td class="srcCell"><span class="srcLine">        if(globus_gram_job_manager_rsl_need_stage_out(request))</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1146</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1147</td>
          <td class="coverageCount">78</td>
          <td class="srcCell"><span class="srcLine">            rc = globus_gram_job_manager_script_stage_out(request);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1148</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            </span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1149</td>
          <td class="coverageCount">78</td>
          <td class="srcCell"><span class="srcLine">            if(rc != GLOBUS_SUCCESS)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1150</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1151</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">                request-&gt;failure_code = rc;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1152</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">                request-&gt;jobmanager_state =</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1153</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        GLOBUS_GRAM_JOB_MANAGER_STATE_FAILED;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1154</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1155</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            else</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1156</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1157</td>
          <td class="coverageCount">78</td>
          <td class="srcCell"><span class="srcLine">                event_registered = GLOBUS_TRUE;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1158</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1159</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1160</td>
          <td class="coverageCount">91</td>
          <td class="srcCell"><span class="srcLine">        break;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1161</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1162</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">      case GLOBUS_GRAM_JOB_MANAGER_STATE_STAGE_OUT:</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1163</td>
          <td class="coverageCount">91</td>
          <td class="srcCell"><span class="srcLine">        if(!globus_list_empty(request-&gt;stage_stream_todo))</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1164</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1165</td>
          <td class="coverageCount">1</td>
          <td class="srcCell"><span class="srcLine">            request-&gt;jobmanager_state</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1166</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    = GLOBUS_GRAM_JOB_MANAGER_STATE_FAILED_CLOSE_OUTPUT;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1167</td>
          <td class="coverageCount">1</td>
          <td class="srcCell"><span class="srcLine">            if(request-&gt;failure_code == GLOBUS_SUCCESS ||</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1168</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">               request-&gt;failure_code ==</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1169</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    GLOBUS_GRAM_PROTOCOL_ERROR_STAGE_OUT_FAILED)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1170</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1171</td>
          <td class="coverageCount">1</td>
          <td class="srcCell"><span class="srcLine">                request-&gt;failure_code =</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1172</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    GLOBUS_GRAM_PROTOCOL_ERROR_OPENING_STDOUT;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1173</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1174</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1175</td>
          <td class="coverageCount">90</td>
          <td class="srcCell"><span class="srcLine">        else if(!globus_list_empty(request-&gt;stage_out_todo))</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1176</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1177</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            request-&gt;jobmanager_state</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1178</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    = GLOBUS_GRAM_JOB_MANAGER_STATE_FAILED_CLOSE_OUTPUT;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1179</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            if(request-&gt;failure_code == GLOBUS_SUCCESS)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1180</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1181</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">                request-&gt;failure_code =</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1182</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    GLOBUS_GRAM_PROTOCOL_ERROR_STAGE_OUT_FAILED;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1183</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1184</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1185</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">      /* FALLSTHROUGH */</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1186</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">      case GLOBUS_GRAM_JOB_MANAGER_STATE_FAILED_CLOSE_OUTPUT:</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1187</td>
          <td class="coverageCount">108</td>
          <td class="srcCell"><span class="srcLine">        if(request-&gt;jobmanager_state ==</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1188</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                GLOBUS_GRAM_JOB_MANAGER_STATE_STAGE_OUT)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1189</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1190</td>
          <td class="coverageCount">90</td>
          <td class="srcCell"><span class="srcLine">            request-&gt;jobmanager_state =</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1191</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                GLOBUS_GRAM_JOB_MANAGER_STATE_TWO_PHASE_END;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1192</td>
          <td class="coverageCount">90</td>
          <td class="srcCell"><span class="srcLine">            globus_gram_job_manager_request_set_status(request, GLOBUS_GRAM_PROTOCOL_JOB_STATE_DONE);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1193</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1194</td>
          <td class="coverageCount">18</td>
          <td class="srcCell"><span class="srcLine">        else if(request-&gt;jobmanager_state ==</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1195</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                GLOBUS_GRAM_JOB_MANAGER_STATE_FAILED_CLOSE_OUTPUT)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1196</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1197</td>
          <td class="coverageCount">18</td>
          <td class="srcCell"><span class="srcLine">            request-&gt;jobmanager_state =</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1198</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                GLOBUS_GRAM_JOB_MANAGER_STATE_FAILED_TWO_PHASE;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1199</td>
          <td class="coverageCount">18</td>
          <td class="srcCell"><span class="srcLine">            globus_gram_job_manager_request_set_status(request, GLOBUS_GRAM_PROTOCOL_JOB_STATE_FAILED);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1200</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1201</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1202</td>
          <td class="coverageCount">108</td>
          <td class="srcCell"><span class="srcLine">        if(request-&gt;unsent_status_change)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1203</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1204</td>
          <td class="coverageCount">108</td>
          <td class="srcCell"><span class="srcLine">            if(request-&gt;job_history_status != request-&gt;status)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1205</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1206</td>
          <td class="coverageCount">81</td>
          <td class="srcCell"><span class="srcLine">                globus_gram_job_manager_history_file_create(request);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1207</td>
          <td class="coverageCount">81</td>
          <td class="srcCell"><span class="srcLine">                request-&gt;job_history_status = request-&gt;status;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1208</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1209</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1210</td>
          <td class="coverageCount">108</td>
          <td class="srcCell"><span class="srcLine">            globus_gram_job_manager_contact_state_callback(request);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1211</td>
          <td class="coverageCount">108</td>
          <td class="srcCell"><span class="srcLine">            request-&gt;unsent_status_change = GLOBUS_FALSE;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1212</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1213</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1214</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        /*</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1215</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">         * If there are no client callbacks then skip the two phase end</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1216</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">         * commit delay, since there is nobody listening to the state</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1217</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">         * changes to send the commit.</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1218</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">         */</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1219</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1220</td>
          <td class="coverageCount">108</td>
          <td class="srcCell"><span class="srcLine">        if(request-&gt;two_phase_commit != 0 &amp;&amp; request-&gt;client_contacts)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1221</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1222</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">            GlobusTimeReltimeSet(delay_time, request-&gt;two_phase_commit, 0);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1223</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1224</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">            rc = globus_gram_job_manager_state_machine_register(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1225</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    request-&gt;manager,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1226</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    request,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1227</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &amp;delay_time);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1228</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1229</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">            if (rc == GLOBUS_SUCCESS)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1230</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1231</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">                event_registered = GLOBUS_TRUE;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1232</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1233</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1234</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        break;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1235</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1236</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1237</td>
          <td class="coverageCount">1780</td>
          <td class="srcCell"><span class="srcLine">    globus_gram_job_manager_request_log(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1238</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1239</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            GLOBUS_GRAM_JOB_MANAGER_LOG_TRACE,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1240</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;event=gram.state_machine.end &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1241</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;level=TRACE &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1242</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;gramid=%s &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1243</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;jmstate=%s &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1244</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;job_state=%d &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1245</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;event_registered=%s &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1246</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;\n&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1247</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request-&gt;job_contact_path,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1248</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            globus_i_gram_job_manager_state_strings[request-&gt;jobmanager_state],</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1249</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request-&gt;status,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1250</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            event_registered ? &quot;true&quot; : &quot;false&quot;);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1251</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1252</td>
          <td class="coverageCount">1780</td>
          <td class="srcCell"><span class="srcLine">error_out:</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1253</td>
          <td class="coverageCount">1780</td>
          <td class="srcCell"><span class="srcLine">    return event_registered;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1254</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">}</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1255</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">/* globus_gram_job_manager_state_machine() */</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1256</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1257</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">/**</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1258</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * Send the response to the initial job request to the GRAM client</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1259</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> *</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1260</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * @param request</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1261</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> *     Job request</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1262</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * @param response_code</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1263</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> *     GLOBUS_SUCCESS, or a GRAM protocol failure code.</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1264</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * @param job_contact</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1265</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> *     Job contact</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1266</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * @param response_fd</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1267</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> *     Descriptor to send response to</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1268</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> */</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1269</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">int</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1270</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">globus_gram_job_manager_reply(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1271</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    globus_gram_jobmanager_request_t *  request,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1272</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    globus_gram_job_manager_t *         manager,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1273</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    int                                 response_code,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1274</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    const char *                        job_contact,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1275</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    int                                 response_fd,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1276</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    gss_ctx_id_t                        response_context)</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1277</td>
          <td class="coverageCount">164</td>
          <td class="srcCell"><span class="srcLine">{</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1278</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    int                                 rc;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1279</td>
          <td class="coverageCount">164</td>
          <td class="srcCell"><span class="srcLine">    globus_byte_t *                     reply = NULL;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1280</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    globus_size_t                       replysize;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1281</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    globus_byte_t *                     sendbuf;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1282</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    globus_size_t                       sendsize;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1283</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    OM_uint32                           major_status;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1284</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    OM_uint32                           minor_status;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1285</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    int                                 token_status;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1286</td>
          <td class="coverageCount">164</td>
          <td class="srcCell"><span class="srcLine">    globus_hashtable_t                  extensions = NULL;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1287</td>
          <td class="coverageCount">164</td>
          <td class="srcCell"><span class="srcLine">    globus_gram_protocol_extension_t *  extension = NULL;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1288</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1289</td>
          <td class="coverageCount">164</td>
          <td class="srcCell"><span class="srcLine">    globus_gram_job_manager_log(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1290</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            manager,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1291</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            GLOBUS_GRAM_JOB_MANAGER_LOG_DEBUG,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1292</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;event=gram.reply.start &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1293</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;level=DEBUG &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1294</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;gramid=%s &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1295</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;job_contact=\&quot;%s\&quot; &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1296</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;response_code=%d &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1297</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;\n&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1298</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request ? request-&gt;job_contact_path : &quot;&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1299</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            job_contact ? job_contact : &quot;&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1300</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            response_code);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1301</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1302</td>
          <td class="coverageCount">164</td>
          <td class="srcCell"><span class="srcLine">    rc = globus_hashtable_init(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1303</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &amp;extensions,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1304</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            3,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1305</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            globus_hashtable_string_hash,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1306</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            globus_hashtable_string_keyeq);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1307</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1308</td>
          <td class="coverageCount">164</td>
          <td class="srcCell"><span class="srcLine">    if (rc != GLOBUS_SUCCESS)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1309</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1310</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        rc = GLOBUS_GRAM_PROTOCOL_ERROR_MALLOC_FAILED;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1311</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1312</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        goto hashtable_init_failed;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1313</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1314</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1315</td>
          <td class="coverageCount">164</td>
          <td class="srcCell"><span class="srcLine">    if (manager != NULL)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1316</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1317</td>
          <td class="coverageCount">164</td>
          <td class="srcCell"><span class="srcLine">        extension = globus_gram_protocol_create_extension(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1318</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;toolkit-version&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1319</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;%s&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1320</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                manager-&gt;config-&gt;globus_version);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1321</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1322</td>
          <td class="coverageCount">164</td>
          <td class="srcCell"><span class="srcLine">        if (extension == NULL)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1323</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1324</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            rc = GLOBUS_GRAM_PROTOCOL_ERROR_MALLOC_FAILED;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1325</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1326</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            goto extension_create_failed;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1327</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1328</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1329</td>
          <td class="coverageCount">164</td>
          <td class="srcCell"><span class="srcLine">        rc = globus_hashtable_insert(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1330</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &amp;extensions,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1331</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                extension-&gt;attribute,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1332</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                extension);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1333</td>
          <td class="coverageCount">164</td>
          <td class="srcCell"><span class="srcLine">        if (rc != GLOBUS_SUCCESS)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1334</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1335</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            rc = GLOBUS_GRAM_PROTOCOL_ERROR_MALLOC_FAILED;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1336</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1337</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            goto extension_insert_failed;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1338</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1339</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1340</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1341</td>
          <td class="coverageCount">164</td>
          <td class="srcCell"><span class="srcLine">    extension = globus_gram_protocol_create_extension(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1342</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;version&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1343</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;%d.%d (%d-%d)&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1344</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            local_version.major,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1345</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            local_version.minor,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1346</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            local_version.timestamp,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1347</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            local_version.branch_id);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1348</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1349</td>
          <td class="coverageCount">164</td>
          <td class="srcCell"><span class="srcLine">    if (extension == NULL)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1350</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1351</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        rc = GLOBUS_GRAM_PROTOCOL_ERROR_MALLOC_FAILED;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1352</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1353</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        goto extension_create_failed;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1354</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1355</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1356</td>
          <td class="coverageCount">164</td>
          <td class="srcCell"><span class="srcLine">    rc = globus_hashtable_insert(&amp;extensions, extension-&gt;attribute, extension);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1357</td>
          <td class="coverageCount">164</td>
          <td class="srcCell"><span class="srcLine">    if (rc != GLOBUS_SUCCESS)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1358</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1359</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        rc = GLOBUS_GRAM_PROTOCOL_ERROR_MALLOC_FAILED;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1360</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1361</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        goto extension_insert_failed;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1362</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1363</td>
          <td class="coverageCount">164</td>
          <td class="srcCell"><span class="srcLine">    extension = NULL;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1364</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1365</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    /* Response to initial job request. */</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1366</td>
          <td class="coverageCount">164</td>
          <td class="srcCell"><span class="srcLine">    rc = globus_gram_protocol_pack_job_request_reply_with_extensions(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1367</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            response_code,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1368</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            job_contact,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1369</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &amp;extensions,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1370</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &amp;reply,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1371</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &amp;replysize);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1372</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1373</td>
          <td class="coverageCount">164</td>
          <td class="srcCell"><span class="srcLine">    if(rc == GLOBUS_SUCCESS)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1374</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1375</td>
          <td class="coverageCount">164</td>
          <td class="srcCell"><span class="srcLine">        rc = globus_gram_protocol_frame_reply(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1376</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                200,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1377</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                reply,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1378</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                replysize,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1379</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &amp;sendbuf,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1380</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &amp;sendsize);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1381</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1382</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    else</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1383</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1384</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        rc = globus_gram_protocol_frame_reply(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1385</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                400,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1386</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                NULL,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1387</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                0,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1388</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &amp;sendbuf,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1389</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &amp;sendsize);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1390</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1391</td>
          <td class="coverageCount">164</td>
          <td class="srcCell"><span class="srcLine">    if(reply)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1392</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1393</td>
          <td class="coverageCount">164</td>
          <td class="srcCell"><span class="srcLine">        free(reply);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1394</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1395</td>
          <td class="coverageCount">164</td>
          <td class="srcCell"><span class="srcLine">    if(rc == GLOBUS_SUCCESS)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1396</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1397</td>
          <td class="coverageCount">164</td>
          <td class="srcCell"><span class="srcLine">        if (response_context != GSS_C_NO_CONTEXT)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1398</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1399</td>
          <td class="coverageCount">164</td>
          <td class="srcCell"><span class="srcLine">            major_status = globus_gss_assist_wrap_send(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1400</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &amp;minor_status,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1401</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    response_context,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1402</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    (void *) sendbuf,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1403</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    sendsize,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1404</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &amp;token_status,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1405</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    globus_l_gram_gss_send_fd,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1406</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    (void *) (intptr_t) response_fd,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1407</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    NULL);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1408</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1409</td>
          <td class="coverageCount">164</td>
          <td class="srcCell"><span class="srcLine">            if (GSS_ERROR(major_status))</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1410</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1411</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">                char *                  error_string = NULL;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1412</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                char *                  escaped_error_string;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1413</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1414</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">                globus_gss_assist_display_status_str(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1415</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        &amp;error_string,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1416</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        &quot;&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1417</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        major_status,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1418</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        minor_status,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1419</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        0);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1420</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1421</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">                escaped_error_string =</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1422</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        globus_gram_prepare_log_string(error_string);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1423</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1424</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">                globus_gram_job_manager_log(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1425</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        manager,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1426</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        GLOBUS_GRAM_JOB_MANAGER_LOG_ERROR,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1427</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        &quot;event=gram.reply.end &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1428</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        &quot;level=ERROR &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1429</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        &quot;gramid=%s &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1430</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        &quot;status=%d &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1431</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        &quot;major_status=%d &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1432</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        &quot;msg=\&quot;%s\&quot; &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1433</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        &quot;reason=\&quot;%s\&quot; &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1434</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        &quot;\n&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1435</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        request-&gt;job_contact_path,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1436</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        -GLOBUS_GRAM_PROTOCOL_ERROR_PROTOCOL_FAILED,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1437</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        major_status,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1438</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        &quot;Error sending wrapped response&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1439</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        escaped_error_string ? escaped_error_string : &quot;&quot;);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1440</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1441</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">                if (error_string)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1442</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1443</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">                    free(error_string);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1444</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1445</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">                if (escaped_error_string)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1446</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1447</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">                    free(escaped_error_string);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1448</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1449</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1450</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            else</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1451</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1452</td>
          <td class="coverageCount">164</td>
          <td class="srcCell"><span class="srcLine">                globus_gram_job_manager_log(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1453</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        manager,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1454</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        GLOBUS_GRAM_JOB_MANAGER_LOG_DEBUG,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1455</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        &quot;event=gram.reply.end &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1456</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        &quot;level=DEBUG &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1457</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        &quot;gramid=%s &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1458</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        &quot;status=%d &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1459</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        &quot;\n&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1460</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        request ? request-&gt;job_contact_path : &quot;&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1461</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        0);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1462</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1463</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1464</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        else</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1465</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1466</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            printf(&quot;Job Manager Response: %s\n&quot;, sendbuf);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1467</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            major_status = 0;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1468</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1469</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1470</td>
          <td class="coverageCount">164</td>
          <td class="srcCell"><span class="srcLine">        free(sendbuf);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1471</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1472</td>
          <td class="coverageCount">164</td>
          <td class="srcCell"><span class="srcLine">        if (request &amp;&amp; major_status != GSS_S_COMPLETE)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1473</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1474</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            globus_gram_job_manager_request_set_status(request, GLOBUS_GRAM_PROTOCOL_JOB_STATE_FAILED);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1475</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            request-&gt;jobmanager_state = GLOBUS_GRAM_JOB_MANAGER_STATE_FAILED;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1476</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            rc = GLOBUS_GRAM_PROTOCOL_ERROR_PROTOCOL_FAILED;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1477</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1478</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1479</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    else</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1480</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1481</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        globus_gram_job_manager_log(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1482</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                manager,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1483</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                GLOBUS_GRAM_JOB_MANAGER_LOG_ERROR,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1484</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;event=gram.reply.end &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1485</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;level=ERROR &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1486</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;gramid=%s &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1487</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;status=%d &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1488</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;msg=\&quot;%s\&quot; &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1489</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;reason=\&quot;%s\&quot; &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1490</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;\n&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1491</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                request-&gt;job_contact_path,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1492</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                -rc,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1493</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                major_status,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1494</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;Error preparing response&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1495</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                globus_gram_protocol_error_string(rc));</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1496</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1497</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        globus_gram_job_manager_request_set_status(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1498</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                request,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1499</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                GLOBUS_GRAM_PROTOCOL_JOB_STATE_FAILED);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1500</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        request-&gt;jobmanager_state = GLOBUS_GRAM_JOB_MANAGER_STATE_FAILED;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1501</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1502</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1503</td>
          <td class="coverageCount">164</td>
          <td class="srcCell"><span class="srcLine">    if (request &amp;&amp; rc != GLOBUS_SUCCESS)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1504</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1505</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        request-&gt;failure_code = rc;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1506</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1507</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1508</td>
          <td class="coverageCount">164</td>
          <td class="srcCell"><span class="srcLine">extension_insert_failed:</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1509</td>
          <td class="coverageCount">164</td>
          <td class="srcCell"><span class="srcLine">    globus_gram_protocol_hash_destroy(&amp;extensions);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1510</td>
          <td class="coverageCount">164</td>
          <td class="srcCell"><span class="srcLine">extension_create_failed:</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1511</td>
          <td class="coverageCount">164</td>
          <td class="srcCell"><span class="srcLine">    if (extension)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1512</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1513</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        free(extension-&gt;attribute);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1514</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        free(extension-&gt;value);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1515</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        free(extension);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1516</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1517</td>
          <td class="coverageCount">164</td>
          <td class="srcCell"><span class="srcLine">hashtable_init_failed:</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1518</td>
          <td class="coverageCount">164</td>
          <td class="srcCell"><span class="srcLine">    return rc;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1519</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">}</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1520</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">/* globus_gram_job_manager_reply() */</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1521</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1522</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">int</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1523</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">globus_gram_job_manager_read_request(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1524</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    globus_gram_job_manager_t *         manager,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1525</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    int                                 fd,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1526</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    char **                             rsl,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1527</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    char **                             client_contact,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1528</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    int *                               job_state_mask,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1529</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    globus_bool_t *                     version_only)</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1530</td>
          <td class="coverageCount">164</td>
          <td class="srcCell"><span class="srcLine">{</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1531</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    int                                 rc;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1532</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    globus_size_t                       jrbuf_size;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1533</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    globus_hashtable_t                  extensions;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1534</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    globus_gram_protocol_extension_t *  entry;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1535</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    globus_byte_t                       buffer[</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1536</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                                            GLOBUS_GRAM_PROTOCOL_MAX_MSG_SIZE];</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1537</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1538</td>
          <td class="coverageCount">164</td>
          <td class="srcCell"><span class="srcLine">    globus_gram_job_manager_log(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1539</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            manager,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1540</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            GLOBUS_GRAM_JOB_MANAGER_LOG_TRACE,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1541</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;event=gram.read_request.start &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1542</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;level=TRACE &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1543</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;fd=%d\n&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1544</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            fd);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1545</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1546</td>
          <td class="coverageCount">164</td>
          <td class="srcCell"><span class="srcLine">    *rsl = NULL;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1547</td>
          <td class="coverageCount">164</td>
          <td class="srcCell"><span class="srcLine">    *client_contact = NULL;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1548</td>
          <td class="coverageCount">164</td>
          <td class="srcCell"><span class="srcLine">    *job_state_mask = 0;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1549</td>
          <td class="coverageCount">164</td>
          <td class="srcCell"><span class="srcLine">    *version_only = GLOBUS_FALSE;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1550</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1551</td>
          <td class="coverageCount">164</td>
          <td class="srcCell"><span class="srcLine">    jrbuf_size = (globus_size_t) lseek(fd, 0, SEEK_END);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1552</td>
          <td class="coverageCount">164</td>
          <td class="srcCell"><span class="srcLine">    (void) lseek(fd, 0, SEEK_SET);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1553</td>
          <td class="coverageCount">164</td>
          <td class="srcCell"><span class="srcLine">    if (jrbuf_size &gt; GLOBUS_GRAM_PROTOCOL_MAX_MSG_SIZE)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1554</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1555</td>
          <td class="coverageCount">2</td>
          <td class="srcCell"><span class="srcLine">        rc = GLOBUS_GRAM_PROTOCOL_ERROR_PROTOCOL_FAILED;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1556</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1557</td>
          <td class="coverageCount">2</td>
          <td class="srcCell"><span class="srcLine">        globus_gram_job_manager_log(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1558</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                manager,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1559</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                GLOBUS_GRAM_JOB_MANAGER_LOG_ERROR,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1560</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;event=gram.read_request.end &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1561</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;level=ERROR &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1562</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;status=%d&quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1563</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;reason=\&quot;%s\&quot; &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1564</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;\n&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1565</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                -rc,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1566</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;RSL too large&quot;);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1567</td>
          <td class="coverageCount">2</td>
          <td class="srcCell"><span class="srcLine">        return rc;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1568</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1569</td>
          <td class="coverageCount">162</td>
          <td class="srcCell"><span class="srcLine">    if ((rc = read(fd, buffer, jrbuf_size)) != jrbuf_size)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1570</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1571</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        if (rc &lt; 0)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1572</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1573</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            rc = GLOBUS_GRAM_PROTOCOL_ERROR_PROTOCOL_FAILED;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1574</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1575</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            globus_gram_job_manager_log(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1576</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    manager,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1577</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    GLOBUS_GRAM_JOB_MANAGER_LOG_ERROR,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1578</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;event=gram.read_request.end &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1579</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;level=ERROR &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1580</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;status=%d &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1581</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;msg=\&quot;%s\&quot; &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1582</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;errno=%d &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1583</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;reason=\&quot;%s\&quot;\n&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1584</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    -rc,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1585</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;Error reading rsl&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1586</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    errno,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1587</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    strerror(errno));</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1588</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1589</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        else</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1590</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1591</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            globus_gram_job_manager_log(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1592</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    manager,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1593</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    GLOBUS_GRAM_JOB_MANAGER_LOG_ERROR,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1594</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;event=gram.read_request.end &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1595</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;level=ERROR &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1596</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;status=%d &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1597</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;msg=\&quot;%s\&quot; &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1598</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;size=%ld &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1599</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;read=%ld &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1600</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;\n&quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1601</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    -GLOBUS_GRAM_PROTOCOL_ERROR_PROTOCOL_FAILED,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1602</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;Short read of rsl&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1603</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    jrbuf_size,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1604</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    rc);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1605</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            rc = GLOBUS_GRAM_PROTOCOL_ERROR_PROTOCOL_FAILED;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1606</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1607</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        return rc;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1608</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1609</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1610</td>
          <td class="coverageCount">162</td>
          <td class="srcCell"><span class="srcLine">    if (manager-&gt;config-&gt;log_levels &amp; GLOBUS_GRAM_JOB_MANAGER_LOG_TRACE)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1611</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1612</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        char *                          message;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1613</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1614</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        message = globus_gram_prepare_log_string((char *) buffer);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1615</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1616</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        globus_gram_job_manager_log(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1617</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                manager,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1618</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                GLOBUS_GRAM_JOB_MANAGER_LOG_TRACE,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1619</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;event=gram.read_request.info &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1620</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;level=TRACE &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1621</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;request_string=\&quot;%s\&quot; &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1622</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;\n&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1623</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                message ? message : &quot;&quot;);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1624</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1625</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        if (message != NULL)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1626</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1627</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            free(message);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1628</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1629</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1630</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1631</td>
          <td class="coverageCount">162</td>
          <td class="srcCell"><span class="srcLine">    rc = globus_gram_protocol_unpack_job_request(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1632</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            buffer,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1633</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            jrbuf_size,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1634</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            job_state_mask,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1635</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            client_contact,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1636</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            rsl);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1637</td>
          <td class="coverageCount">162</td>
          <td class="srcCell"><span class="srcLine">    if(rc == GLOBUS_GRAM_PROTOCOL_ERROR_HTTP_UNPACK_FAILED)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1638</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1639</td>
          <td class="coverageCount">1</td>
          <td class="srcCell"><span class="srcLine">        rc = globus_gram_protocol_unpack_message(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1640</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                (const char *) buffer,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1641</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                jrbuf_size,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1642</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &amp;extensions);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1643</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1644</td>
          <td class="coverageCount">1</td>
          <td class="srcCell"><span class="srcLine">        if (rc == GLOBUS_SUCCESS)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1645</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1646</td>
          <td class="coverageCount">1</td>
          <td class="srcCell"><span class="srcLine">            globus_gram_job_manager_log(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1647</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    manager,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1648</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    GLOBUS_GRAM_JOB_MANAGER_LOG_TRACE,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1649</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;event=gram.read_request.info &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1650</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;level=TRACE &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1651</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;msg=\&quot;%s\&quot; &quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1652</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;Message is not a job request, checking for version &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1653</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;request&quot;);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1654</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1655</td>
          <td class="coverageCount">1</td>
          <td class="srcCell"><span class="srcLine">            entry = globus_hashtable_lookup(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1656</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &amp;extensions,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1657</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;command&quot;);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1658</td>
          <td class="coverageCount">2</td>
          <td class="srcCell"><span class="srcLine">            if (entry != NULL &amp;&amp; strcmp(entry-&gt;value, &quot;version&quot;) == 0)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1659</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1660</td>
          <td class="coverageCount">1</td>
          <td class="srcCell"><span class="srcLine">                *version_only = GLOBUS_TRUE;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1661</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1662</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            else</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1663</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            {</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1664</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                char * buffer_escaped;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1665</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1666</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">                buffer_escaped = globus_gram_prepare_log_string(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1667</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        (const char *) buffer);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1668</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1669</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">                rc = GLOBUS_GRAM_PROTOCOL_ERROR_HTTP_UNPACK_FAILED;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1670</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">                globus_gram_job_manager_log(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1671</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        manager,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1672</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        GLOBUS_GRAM_JOB_MANAGER_LOG_ERROR,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1673</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        &quot;event=gram.read_request.end &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1674</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        &quot;level=ERROR &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1675</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        &quot;status=%d&quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1676</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        &quot;request=\&quot;%s\&quot; &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1677</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        &quot;msg=\&quot;%s\&quot; &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1678</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        &quot;reason=\&quot;%s\&quot;\n&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1679</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        -rc,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1680</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        buffer_escaped ? buffer_escaped : &quot;&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1681</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        &quot;Message is not a job or version request&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1682</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        globus_gram_protocol_error_string(rc));</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1683</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1684</td>
          <td class="coverageCount">1</td>
          <td class="srcCell"><span class="srcLine">            globus_gram_protocol_hash_destroy(&amp;extensions);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1685</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1686</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1687</td>
          <td class="coverageCount">161</td>
          <td class="srcCell"><span class="srcLine">    else if (rc != GLOBUS_SUCCESS)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1688</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1689</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        char * buffer_escaped;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1690</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1691</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        buffer_escaped = globus_gram_prepare_log_string(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1692</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                (const char *) buffer);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1693</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1694</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        rc = GLOBUS_GRAM_PROTOCOL_ERROR_HTTP_UNPACK_FAILED;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1695</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        globus_gram_job_manager_log(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1696</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                manager,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1697</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                GLOBUS_GRAM_JOB_MANAGER_LOG_ERROR,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1698</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;event=gram.read_request.end level=ERROR status=%d&quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1699</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;request=\&quot;%s\&quot; &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1700</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;msg=\&quot;%s\&quot; reason=\&quot;%s\&quot;\n&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1701</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                -rc,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1702</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                buffer_escaped ? buffer_escaped : &quot;&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1703</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;Error unpacking message&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1704</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                globus_gram_protocol_error_string(rc));</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1705</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        return rc;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1706</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1707</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1708</td>
          <td class="coverageCount">162</td>
          <td class="srcCell"><span class="srcLine">    globus_gram_job_manager_log(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1709</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            manager,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1710</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            GLOBUS_GRAM_JOB_MANAGER_LOG_TRACE,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1711</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;event=gram.read_request.end &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1712</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;level=TRACE &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1713</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;status=%d &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1714</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;\n&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1715</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            0);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1716</td>
          <td class="coverageCount">162</td>
          <td class="srcCell"><span class="srcLine">    return rc;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1717</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">}</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1718</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">/* globus_gram_job_manager_read_request() */</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1719</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1720</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">/**</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1721</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * Do the state transition for handling a job manager restart.</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1722</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> *</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1723</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * @param request</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1724</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> *        The request to changes states.</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1725</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> *</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1726</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * @return</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1727</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> *       Returns GLOBUS_TRUE if if the job manager&#39;s state was</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1728</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> *       changed as a result of this call; GLOBUS_FALSE otherwise.</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1729</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> *</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1730</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * @note This case statement MUST cover all cases where the</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1731</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> *        state file can be written (where</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1732</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> *        globus_gram_job_manager_state_file_write()</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1733</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> *        is called).</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1734</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> */</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1735</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">static</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1736</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">globus_bool_t</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1737</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">globus_l_gram_job_manager_set_restart_state(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1738</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    globus_gram_jobmanager_request_t *  request)</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1739</td>
          <td class="coverageCount">3</td>
          <td class="srcCell"><span class="srcLine">{</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1740</td>
          <td class="coverageCount">3</td>
          <td class="srcCell"><span class="srcLine">    globus_bool_t                       changed = GLOBUS_FALSE;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1741</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1742</td>
          <td class="coverageCount">3</td>
          <td class="srcCell"><span class="srcLine">    globus_gram_job_manager_request_log(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1743</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1744</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            GLOBUS_GRAM_JOB_MANAGER_LOG_TRACE,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1745</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;event=gram.set_restart_state.start &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1746</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;level=TRACE &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1747</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;gramid=%s &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1748</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;jmstate=%s &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1749</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;restart_state=%s &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1750</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;\n&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1751</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request-&gt;job_contact_path,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1752</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            globus_i_gram_job_manager_state_strings[request-&gt;jobmanager_state],</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1753</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            globus_i_gram_job_manager_state_strings[request-&gt;restart_state]);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1754</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1755</td>
          <td class="coverageCount">3</td>
          <td class="srcCell"><span class="srcLine">    switch(request-&gt;restart_state)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1756</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1757</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">      case GLOBUS_GRAM_JOB_MANAGER_STATE_START:</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1758</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">      case GLOBUS_GRAM_JOB_MANAGER_STATE_SUBMIT:</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1759</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">      case GLOBUS_GRAM_JOB_MANAGER_STATE_TWO_PHASE:</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1760</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">      case GLOBUS_GRAM_JOB_MANAGER_STATE_TWO_PHASE_COMMITTED:</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1761</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">      case GLOBUS_GRAM_JOB_MANAGER_STATE_STAGE_IN:</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1762</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        break;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1763</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">      case GLOBUS_GRAM_JOB_MANAGER_STATE_POLL_QUERY1:</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1764</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">      case GLOBUS_GRAM_JOB_MANAGER_STATE_POLL_QUERY2:</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1765</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">      case GLOBUS_GRAM_JOB_MANAGER_STATE_POLL1:</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1766</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">      case GLOBUS_GRAM_JOB_MANAGER_STATE_POLL2:</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1767</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        request-&gt;jobmanager_state = GLOBUS_GRAM_JOB_MANAGER_STATE_SUBMIT;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1768</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        changed = GLOBUS_TRUE;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1769</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        break;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1770</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">      case GLOBUS_GRAM_JOB_MANAGER_STATE_CLOSE_OUTPUT:</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1771</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">      case GLOBUS_GRAM_JOB_MANAGER_STATE_PRE_CLOSE_OUTPUT:</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1772</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">      case GLOBUS_GRAM_JOB_MANAGER_STATE_STAGE_OUT:</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1773</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">      case GLOBUS_GRAM_JOB_MANAGER_STATE_TWO_PHASE_END:</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1774</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">      case GLOBUS_GRAM_JOB_MANAGER_STATE_TWO_PHASE_END_COMMITTED:</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1775</td>
          <td class="coverageCount">1</td>
          <td class="srcCell"><span class="srcLine">        globus_gram_job_manager_request_set_status(request, GLOBUS_GRAM_PROTOCOL_JOB_STATE_DONE);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1776</td>
          <td class="coverageCount">1</td>
          <td class="srcCell"><span class="srcLine">        request-&gt;unsent_status_change = GLOBUS_TRUE;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1777</td>
          <td class="coverageCount">1</td>
          <td class="srcCell"><span class="srcLine">        request-&gt;jobmanager_state = GLOBUS_GRAM_JOB_MANAGER_STATE_POLL1;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1778</td>
          <td class="coverageCount">1</td>
          <td class="srcCell"><span class="srcLine">        changed = GLOBUS_TRUE;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1779</td>
          <td class="coverageCount">1</td>
          <td class="srcCell"><span class="srcLine">        break;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1780</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">      case GLOBUS_GRAM_JOB_MANAGER_STATE_FAILED:</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1781</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        globus_gram_job_manager_request_set_status(request, GLOBUS_GRAM_PROTOCOL_JOB_STATE_FAILED);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1782</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        request-&gt;unsent_status_change = GLOBUS_TRUE;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1783</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        request-&gt;jobmanager_state = GLOBUS_GRAM_JOB_MANAGER_STATE_POLL1;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1784</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        changed = GLOBUS_TRUE;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1785</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        break;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1786</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">      case GLOBUS_GRAM_JOB_MANAGER_STATE_FAILED_TWO_PHASE:</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1787</td>
          <td class="coverageCount">2</td>
          <td class="srcCell"><span class="srcLine">        request-&gt;jobmanager_state = GLOBUS_GRAM_JOB_MANAGER_STATE_FAILED_TWO_PHASE_COMMITTED;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1788</td>
          <td class="coverageCount">2</td>
          <td class="srcCell"><span class="srcLine">        changed = GLOBUS_TRUE;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1789</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        break;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1790</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1791</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    /*request-&gt;restart_state = GLOBUS_GRAM_JOB_MANAGER_STATE_START;*/</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1792</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1793</td>
          <td class="coverageCount">3</td>
          <td class="srcCell"><span class="srcLine">    globus_gram_job_manager_request_log(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1794</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1795</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            GLOBUS_GRAM_JOB_MANAGER_LOG_TRACE,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1796</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;event=gram.set_restart_state.end &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1797</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;level=TRACE &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1798</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;gramid=%s &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1799</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;jmstate=%s &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1800</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;restart_state=%s &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1801</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;changed=%s &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1802</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;\n&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1803</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request-&gt;job_contact_path,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1804</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            globus_i_gram_job_manager_state_strings[request-&gt;jobmanager_state],</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1805</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            globus_i_gram_job_manager_state_strings[request-&gt;restart_state],</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1806</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            changed ? &quot;true&quot; : &quot;false&quot;);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1807</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1808</td>
          <td class="coverageCount">3</td>
          <td class="srcCell"><span class="srcLine">    return changed;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1809</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">}</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1810</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">/* globus_l_gram_job_manager_set_restart_state() */</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1811</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1812</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">static</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1813</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">void</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1814</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">globus_l_gram_job_manager_cancel_queries(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1815</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    globus_gram_jobmanager_request_t *  request)</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1816</td>
          <td class="coverageCount">214</td>
          <td class="srcCell"><span class="srcLine">{</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1817</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    globus_gram_job_manager_query_t *   query;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1818</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1819</td>
          <td class="coverageCount">428</td>
          <td class="srcCell"><span class="srcLine">    while(!globus_fifo_empty(&amp;request-&gt;pending_queries))</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1820</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1821</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        query = globus_fifo_dequeue(&amp;request-&gt;pending_queries);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1822</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        query-&gt;failure_code = GLOBUS_GRAM_PROTOCOL_ERROR_JOB_QUERY_DENIAL;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1823</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1824</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        /* Frees the query */</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1825</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        globus_gram_job_manager_query_reply(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1826</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                request,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1827</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                query);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1828</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1829</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1830</td>
          <td class="coverageCount">214</td>
          <td class="srcCell"><span class="srcLine">}</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1831</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">/* globus_l_gram_job_manager_cancel_queries() */</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1832</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1833</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">/**</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1834</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * Validate that the job manager is running as the username specified in the</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1835</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * RSL if it is present.</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1836</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> *</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1837</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * @param request</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1838</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> *     Request which contains information about the job. We&#39;ll only look at</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1839</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> *     the RSL in the request to check for presence of the username attribute.</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1840</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> *</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1841</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * @retval GLOBUS_SUCCESS</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1842</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> *     Either the username RSL attribute was not present, or it was present</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1843</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> *     and its value matched the account this process is running as.</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1844</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * @retval GLOBUS_GRAM_PROTOCOL_ERROR_MALLOC_FAILED</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1845</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> *     Some system call failed when we tried to look up the user id.</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1846</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * @retval GLOBUS_GRAM_PROTOCOL_ERROR_INVALID_USER_NAME</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1847</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> *     This process is not running as the desired user.</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1848</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> */</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1849</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">int</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1850</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">globus_gram_job_manager_validate_username(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1851</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    globus_gram_jobmanager_request_t *  request)</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1852</td>
          <td class="coverageCount">107</td>
          <td class="srcCell"><span class="srcLine">{</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1853</td>
          <td class="coverageCount">107</td>
          <td class="srcCell"><span class="srcLine">    char *                              tmp_str = NULL;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1854</td>
          <td class="coverageCount">107</td>
          <td class="srcCell"><span class="srcLine">    char *                              buffer = NULL;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1855</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    struct passwd                       pwd;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1856</td>
          <td class="coverageCount">107</td>
          <td class="srcCell"><span class="srcLine">    struct passwd *                     pwd_result = NULL;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1857</td>
          <td class="coverageCount">107</td>
          <td class="srcCell"><span class="srcLine">    int                                 rc = GLOBUS_SUCCESS;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1858</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    uid_t                               uid;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1859</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1860</td>
          <td class="coverageCount">107</td>
          <td class="srcCell"><span class="srcLine">    globus_gram_job_manager_request_log(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1861</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1862</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            GLOBUS_GRAM_JOB_MANAGER_LOG_TRACE,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1863</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;event=gram.validate_user.start &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1864</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;level=TRACE &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1865</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;gramid=%s &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1866</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;\n&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1867</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request-&gt;job_contact_path);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1868</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1869</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    /* Validate username RSL attribute if present */</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1870</td>
          <td class="coverageCount">107</td>
          <td class="srcCell"><span class="srcLine">    rc = globus_gram_job_manager_rsl_eval_one_attribute(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1871</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1872</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            GLOBUS_GRAM_PROTOCOL_USER_NAME,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1873</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &amp;tmp_str);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1874</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1875</td>
          <td class="coverageCount">107</td>
          <td class="srcCell"><span class="srcLine">    if (rc != 0)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1876</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1877</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        globus_gram_job_manager_request_log(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1878</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                request,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1879</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                GLOBUS_GRAM_JOB_MANAGER_LOG_ERROR,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1880</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;event=gram.validate_user.end &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1881</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;level=ERROR &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1882</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;gramid=%s &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1883</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;msg=\&quot;%s\&quot; &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1884</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;attribute=%s &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1885</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;status=%d &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1886</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;reason=\&quot;%s\&quot; &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1887</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;\n&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1888</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                request-&gt;job_contact_path,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1889</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;Error evaluating attribute&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1890</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                GLOBUS_GRAM_PROTOCOL_USER_NAME,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1891</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                -rc,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1892</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                globus_gram_protocol_error_string(rc));</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1893</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1894</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        return rc;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1895</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1896</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1897</td>
          <td class="coverageCount">107</td>
          <td class="srcCell"><span class="srcLine">    if (tmp_str != NULL)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1898</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1899</td>
          <td class="coverageCount">1</td>
          <td class="srcCell"><span class="srcLine">        buffer = malloc(1024);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1900</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1901</td>
          <td class="coverageCount">1</td>
          <td class="srcCell"><span class="srcLine">        if (buffer == NULL)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1902</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1903</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            rc = GLOBUS_GRAM_PROTOCOL_ERROR_MALLOC_FAILED;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1904</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            globus_gram_job_manager_request_log(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1905</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    request,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1906</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    GLOBUS_GRAM_JOB_MANAGER_LOG_ERROR,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1907</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;event=gram.validate_user.end &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1908</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;level=ERROR &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1909</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;gramid=%s &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1910</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;msg=\&quot;%s\&quot; &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1911</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;status=%d &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1912</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;errno=%d &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1913</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;reason=\&quot;%s\&quot;\n&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1914</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    request-&gt;job_contact_path,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1915</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;Malloc failed&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1916</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    -rc,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1917</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    errno,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1918</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    strerror(errno));</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1919</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1920</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            goto free_tmp_str_exit;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1921</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1922</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1923</td>
          <td class="coverageCount">1</td>
          <td class="srcCell"><span class="srcLine">        rc = globus_libc_getpwnam_r(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1924</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                tmp_str,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1925</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &amp;pwd,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1926</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                buffer,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1927</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                1024,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1928</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &amp;pwd_result);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1929</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1930</td>
          <td class="coverageCount">1</td>
          <td class="srcCell"><span class="srcLine">        if (rc != 0 || pwd_result == NULL)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1931</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1932</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            rc = GLOBUS_GRAM_PROTOCOL_ERROR_MALLOC_FAILED;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1933</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            globus_gram_job_manager_request_log(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1934</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    request,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1935</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    GLOBUS_GRAM_JOB_MANAGER_LOG_ERROR,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1936</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;event=gram.validate_user.end &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1937</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;level=ERROR &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1938</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;gramid=%s &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1939</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;msg=\&quot;%s\&quot; &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1940</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;status=%d &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1941</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;errno=%d &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1942</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;reason=\&quot;%s\&quot; &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1943</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;\n&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1944</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    request-&gt;job_contact_path,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1945</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;getpwnam_r failed&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1946</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    -rc,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1947</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    errno,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1948</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    strerror(errno));</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1949</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1950</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            goto free_buffer_exit;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1951</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1952</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1953</td>
          <td class="coverageCount">1</td>
          <td class="srcCell"><span class="srcLine">        uid = getuid();</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1954</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1955</td>
          <td class="coverageCount">1</td>
          <td class="srcCell"><span class="srcLine">        if (pwd.pw_uid != uid)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1956</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1957</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            rc = GLOBUS_GRAM_PROTOCOL_ERROR_INVALID_USER_NAME;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1958</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1959</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            globus_gram_job_manager_request_log(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1960</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    request,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1961</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    GLOBUS_GRAM_JOB_MANAGER_LOG_ERROR,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1962</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;event=gram.validate_user.end &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1963</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;level=ERROR &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1964</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;gramid=%s &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1965</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;msg=\&quot;%s\&quot; &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1966</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;uid=%u &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1967</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;desired_uid=%u &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1968</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;status=%d &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1969</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;reason=\&quot;%s\&quot; &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1970</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;\n&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1971</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    request-&gt;job_contact_path,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1972</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;Job manager not running as desired user&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1973</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    uid,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1974</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    pwd.pw_uid,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1975</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    -rc,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1976</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    globus_gram_protocol_error_string(rc));</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1977</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1978</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            goto free_buffer_exit;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1979</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1980</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1981</td>
          <td class="coverageCount">107</td>
          <td class="srcCell"><span class="srcLine">    globus_gram_job_manager_request_log(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1982</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1983</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            GLOBUS_GRAM_JOB_MANAGER_LOG_TRACE,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1984</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;event=gram.validate_user.end &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1985</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;level=TRACE &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1986</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;gramid=%s &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1987</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;status=%d &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1988</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;\n&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1989</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request-&gt;job_contact_path,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1990</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            0);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1991</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1992</td>
          <td class="coverageCount">107</td>
          <td class="srcCell"><span class="srcLine">free_buffer_exit:</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1993</td>
          <td class="coverageCount">107</td>
          <td class="srcCell"><span class="srcLine">    if (buffer != NULL)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1994</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1995</td>
          <td class="coverageCount">1</td>
          <td class="srcCell"><span class="srcLine">        free(buffer);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1996</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1997</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1998</td>
          <td class="coverageCount">107</td>
          <td class="srcCell"><span class="srcLine">free_tmp_str_exit:</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1999</td>
          <td class="coverageCount">107</td>
          <td class="srcCell"><span class="srcLine">    if (tmp_str != NULL)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2000</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2001</td>
          <td class="coverageCount">1</td>
          <td class="srcCell"><span class="srcLine">        free(tmp_str);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2002</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2003</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2004</td>
          <td class="coverageCount">107</td>
          <td class="srcCell"><span class="srcLine">    return rc;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2005</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">}</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2006</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">/* globus_gram_job_manager_validate_username() */</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2007</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2008</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">static</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2009</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">int</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2010</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">globus_l_gram_job_manager_add_cache_info(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2011</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    globus_gram_jobmanager_request_t *  request)</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2012</td>
          <td class="coverageCount">93</td>
          <td class="srcCell"><span class="srcLine">{</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2013</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    char *                              out_file;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2014</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    char *                              fname;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2015</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    unsigned long                       timestamp;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2016</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    FILE *                              file;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2017</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    char *                              gk_id;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2018</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    int                                 rc;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2019</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> </span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2020</td>
          <td class="coverageCount">93</td>
          <td class="srcCell"><span class="srcLine">    out_file = globus_common_create_string(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2021</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;x-gass-cache://%s/%s/cache-info&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2022</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request-&gt;config-&gt;hostname,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2023</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request-&gt;uniq_id);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2024</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2025</td>
          <td class="coverageCount">93</td>
          <td class="srcCell"><span class="srcLine">    rc = globus_gass_cache_add(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2026</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                request-&gt;cache_handle,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2027</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                out_file,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2028</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                request-&gt;cache_tag,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2029</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                GLOBUS_TRUE,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2030</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &amp;timestamp,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2031</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &amp;fname);   </span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2032</td>
          <td class="coverageCount">93</td>
          <td class="srcCell"><span class="srcLine">    if(rc != GLOBUS_GASS_CACHE_ADD_NEW &amp;&amp;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2033</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">       rc != GLOBUS_GASS_CACHE_ADD_EXISTS)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2034</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2035</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        return GLOBUS_FAILURE;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2036</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2037</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2038</td>
          <td class="coverageCount">93</td>
          <td class="srcCell"><span class="srcLine">    file = fopen(fname,&quot;w&quot;);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2039</td>
          <td class="coverageCount">93</td>
          <td class="srcCell"><span class="srcLine">    if (file != NULL)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2040</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2041</td>
          <td class="coverageCount">93</td>
          <td class="srcCell"><span class="srcLine">        gk_id = getenv(&quot;GATEKEEPER_JM_ID&quot;);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2042</td>
          <td class="coverageCount">93</td>
          <td class="srcCell"><span class="srcLine">        if (gk_id == NULL)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2043</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2044</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            gk_id = &quot;-&quot;;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2045</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2046</td>
          <td class="coverageCount">93</td>
          <td class="srcCell"><span class="srcLine">        fprintf(file,&quot;%s\n%s\n%s\n%s\n&quot;,request-&gt;uniq_id,request-&gt;job_id_string,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2047</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                                        request-&gt;config-&gt;jobmanager_type,gk_id);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2048</td>
          <td class="coverageCount">93</td>
          <td class="srcCell"><span class="srcLine">        fclose(file);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2049</td>
          <td class="coverageCount">93</td>
          <td class="srcCell"><span class="srcLine">        time((time_t *)&amp;timestamp);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2050</td>
          <td class="coverageCount">93</td>
          <td class="srcCell"><span class="srcLine">        globus_gass_cache_add_done(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2051</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                request-&gt;cache_handle,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2052</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                out_file,   </span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2053</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                request-&gt;cache_tag,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2054</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                timestamp);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2055</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2056</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    else</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2057</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2058</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        globus_gass_cache_delete(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2059</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                request-&gt;cache_handle,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2060</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                out_file,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2061</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                request-&gt;cache_tag,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2062</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                timestamp,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2063</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                GLOBUS_TRUE);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2064</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2065</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2066</td>
          <td class="coverageCount">93</td>
          <td class="srcCell"><span class="srcLine">    free(fname);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2067</td>
          <td class="coverageCount">93</td>
          <td class="srcCell"><span class="srcLine">    free(out_file);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2068</td>
          <td class="coverageCount">93</td>
          <td class="srcCell"><span class="srcLine">    return 0;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2069</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">}</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2070</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">/* globus_l_gram_job_manager_add_cache_info() */</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2071</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2072</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">int</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2073</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">globus_i_gram_remote_io_url_update(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2074</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    globus_gram_jobmanager_request_t *  request)</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2075</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">{</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2076</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    FILE *                              fp;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2077</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">    int                                 rc = GLOBUS_SUCCESS;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2078</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2079</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">    fp = fopen(request-&gt;remote_io_url_file, &quot;w&quot;);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2080</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">    if (fp == NULL)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2081</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2082</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        rc = GLOBUS_GRAM_PROTOCOL_ERROR_WRITING_REMOTE_IO_URL;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2083</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2084</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        goto fopen_failed;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2085</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2086</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">    rc = fprintf(fp, &quot;%s\n&quot;, request-&gt;remote_io_url);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2087</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">    if (rc &lt; 0)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2088</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2089</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        rc = GLOBUS_GRAM_PROTOCOL_ERROR_WRITING_REMOTE_IO_URL;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2090</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2091</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        goto fprintf_failed;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2092</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2093</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2094</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">fprintf_failed:</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2095</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">    rc = fclose(fp);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2096</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">    if (rc == EOF)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2097</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2098</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        rc = GLOBUS_GRAM_PROTOCOL_ERROR_WRITING_REMOTE_IO_URL;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2099</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        goto fclose_failed;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2100</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2101</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2102</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">fclose_failed:</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2103</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">fopen_failed:</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2104</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">    return rc;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2105</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">}</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2106</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">/* globus_i_gram_remote_io_url_update() */</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2107</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2108</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2109</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">/**</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2110</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * Write a GSSAPI token to a file descriptor</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2111</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> *</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2112</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * Unlike the functions in globus_gss_assist, this uses file descriptors, not</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2113</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * FILE * values for @a arg. Writes a 4-byte header for the same conditions</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2114</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * as the function in globus_gss_assist.</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2115</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> *</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2116</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * @param arg</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2117</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> *     Void * cast of the file descriptor number</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2118</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * @param buffer</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2119</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> *     GSSAPI token buffer to send</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2120</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * @param length</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2121</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> *     Token length</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2122</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> *     </span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2123</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> */</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2124</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">static</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2125</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">int</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2126</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">globus_l_gram_gss_send_fd(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2127</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    void *                              arg,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2128</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    void *                              buffer,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2129</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    size_t                              length)</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2130</td>
          <td class="coverageCount">164</td>
          <td class="srcCell"><span class="srcLine">{</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2131</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    unsigned char                       lengthbuf[4];</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2132</td>
          <td class="coverageCount">164</td>
          <td class="srcCell"><span class="srcLine">    unsigned char *                     header = buffer;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2133</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    int                                 fd;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2134</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    int                                 rc;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2135</td>
          <td class="coverageCount">164</td>
          <td class="srcCell"><span class="srcLine">    ssize_t                             written = 0;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2136</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    </span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2137</td>
          <td class="coverageCount">164</td>
          <td class="srcCell"><span class="srcLine">    fd = (int) (intptr_t) arg;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2138</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2139</td>
          <td class="coverageCount">164</td>
          <td class="srcCell"><span class="srcLine">    lengthbuf[0] = length &gt;&gt; 24;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2140</td>
          <td class="coverageCount">164</td>
          <td class="srcCell"><span class="srcLine">    lengthbuf[1] = length &gt;&gt; 16;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2141</td>
          <td class="coverageCount">164</td>
          <td class="srcCell"><span class="srcLine">    lengthbuf[2] = length &gt;&gt; 8;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2142</td>
          <td class="coverageCount">164</td>
          <td class="srcCell"><span class="srcLine">    lengthbuf[3] = length;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2143</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    </span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2144</td>
          <td class="coverageCount">164</td>
          <td class="srcCell"><span class="srcLine">    if (!(length &gt; 5 &amp;&amp; header[0] &lt;= 26 &amp;&amp; header[0] &gt;= 20</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2145</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">          &amp;&amp; ((header[1] == 3 &amp;&amp; (header[2] == 0 || header[2] == 1))</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2146</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">          || (header[1] == 2 &amp;&amp; header[2] == 0))))</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2147</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2148</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        written = 0;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2149</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        do</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2150</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2151</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            rc = write((int) fd, lengthbuf + written, (size_t) (4 - written));</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2152</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            if (rc &lt; 0)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2153</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2154</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">                if (errno == EINTR)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2155</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2156</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">                    rc = 0;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2157</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2158</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                else</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2159</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2160</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">                    return GLOBUS_GSS_ASSIST_TOKEN_EOF;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2161</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2162</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2163</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            written += rc;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2164</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2165</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        while (written &lt; 4);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2166</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2167</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2168</td>
          <td class="coverageCount">164</td>
          <td class="srcCell"><span class="srcLine">    written = 0;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2169</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    do</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2170</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2171</td>
          <td class="coverageCount">164</td>
          <td class="srcCell"><span class="srcLine">        rc = write((int) fd, header + written, (size_t) (length - written));</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2172</td>
          <td class="coverageCount">164</td>
          <td class="srcCell"><span class="srcLine">        if (rc &lt; 0)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2173</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2174</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            if (errno == EINTR)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2175</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2176</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">                rc = 0;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2177</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2178</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            else</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2179</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2180</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">                return GLOBUS_GSS_ASSIST_TOKEN_EOF;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2181</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2182</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2183</td>
          <td class="coverageCount">164</td>
          <td class="srcCell"><span class="srcLine">        written += rc;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2184</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2185</td>
          <td class="coverageCount">164</td>
          <td class="srcCell"><span class="srcLine">    while (written &lt; length);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2186</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2187</td>
          <td class="coverageCount">164</td>
          <td class="srcCell"><span class="srcLine">    return 0;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2188</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">}</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2189</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">/* globus_l_gram_gss_send_fd() */</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2190</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2191</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">static</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2192</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">void</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2193</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">globus_l_gram_file_cleanup(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2194</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    globus_gram_jobmanager_request_t *  request)</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2195</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">{</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2196</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    globus_rsl_t *                      relation;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2197</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    globus_rsl_value_t *                value_sequence;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2198</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    globus_list_t *                     value_list;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2199</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    globus_rsl_value_t *                value;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2200</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    char *                              path;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2201</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2202</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">    relation = globus_gram_job_manager_rsl_extract_relation(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2203</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request-&gt;rsl,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2204</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            GLOBUS_GRAM_PROTOCOL_FILE_CLEANUP_PARAM);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2205</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2206</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">    if (!relation)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2207</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2208</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        goto not_found;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2209</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2210</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2211</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">    value_sequence = globus_rsl_relation_get_value_sequence(relation);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2212</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">    if (!value_sequence)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2213</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2214</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        goto no_sequence;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2215</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2216</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2217</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">    value_list = globus_rsl_value_sequence_get_value_list(value_sequence);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2218</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">    while (!globus_list_empty(value_list))</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2219</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2220</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        value = globus_list_remove(&amp;value_list, value_list);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2221</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2222</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        path = globus_rsl_value_literal_get_string(value);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2223</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2224</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        if (path)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2225</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2226</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            unlink(path);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2227</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            free(path);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2228</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2229</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2230</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2231</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">no_sequence:</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2232</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">    globus_rsl_free_recursive(relation);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2233</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">not_found:</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2234</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    return;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2235</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">}</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2236</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">/* globus_l_gram_file_cleanup() */</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2237</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2238</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">/**</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2239</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * Register the state machine callback callback for this request</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2240</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> *</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2241</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * @param manager</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2242</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> *     Job manager state</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2243</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * @param request</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2244</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> *     Locked jobmanager request structure.</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2245</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * @param delay</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2246</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> *     Oneshot delay</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2247</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> */</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2248</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">int</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2249</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">globus_gram_job_manager_state_machine_register(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2250</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    globus_gram_job_manager_t *         manager,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2251</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    globus_gram_jobmanager_request_t *  request,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2252</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    globus_reltime_t *                  delay)</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2253</td>
          <td class="coverageCount">439</td>
          <td class="srcCell"><span class="srcLine">{</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2254</td>
          <td class="coverageCount">439</td>
          <td class="srcCell"><span class="srcLine">    int                                 rc = GLOBUS_SUCCESS;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2255</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    globus_result_t                     result;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2256</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    globus_reltime_t                    nodelay;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2257</td>
          <td class="coverageCount">439</td>
          <td class="srcCell"><span class="srcLine">    if (delay == NULL)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2258</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2259</td>
          <td class="coverageCount">8</td>
          <td class="srcCell"><span class="srcLine">        GlobusTimeReltimeSet(nodelay, 0, 0);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2260</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2261</td>
          <td class="coverageCount">8</td>
          <td class="srcCell"><span class="srcLine">        delay = &amp;nodelay;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2262</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2263</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2264</td>
          <td class="coverageCount">439</td>
          <td class="srcCell"><span class="srcLine">    rc = globus_gram_job_manager_add_reference(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2265</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            manager,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2266</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request-&gt;job_contact_path,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2267</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;state machine&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2268</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            NULL);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2269</td>
          <td class="coverageCount">439</td>
          <td class="srcCell"><span class="srcLine">    if (rc != GLOBUS_SUCCESS)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2270</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2271</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        goto failed_add_reference;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2272</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2273</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2274</td>
          <td class="coverageCount">439</td>
          <td class="srcCell"><span class="srcLine">    result = globus_callback_register_oneshot(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2275</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &amp;request-&gt;poll_timer,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2276</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            delay,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2277</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            globus_gram_job_manager_state_machine_callback,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2278</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2279</td>
          <td class="coverageCount">439</td>
          <td class="srcCell"><span class="srcLine">    if (result != GLOBUS_SUCCESS)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2280</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2281</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        rc = GLOBUS_GRAM_PROTOCOL_ERROR_MALLOC_FAILED;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2282</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        goto oneshot_failed;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2283</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2284</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2285</td>
          <td class="coverageCount">439</td>
          <td class="srcCell"><span class="srcLine">    if (rc != GLOBUS_SUCCESS)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2286</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2287</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">oneshot_failed:</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2288</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        globus_gram_job_manager_remove_reference(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2289</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                manager,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2290</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                request-&gt;job_contact_path,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2291</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;state machine&quot;);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2292</td>
          <td class="coverageCount">439</td>
          <td class="srcCell"><span class="srcLine">failed_add_reference:</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2293</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        ;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2294</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">2295</td>
          <td class="coverageCount">439</td>
          <td class="srcCell"><span class="srcLine">    return rc;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2296</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">}</span></td>
        </tr>
      
      </table>
  </body>
</html>
