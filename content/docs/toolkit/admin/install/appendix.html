<div class="book"><div class="titlepage"><div><div><h1 class="title"><a name="gtadminappendix"></a>GT 6.0 Installation Appendix</h1></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="chapter"><a href="#gtadmin-advanced-build">1. Advanced Installation for GT 6.0</a></span></dt><dd><dl><dt><span class="section"><a href="#gtadmin-install-nondefault">1. Advanced Installation</a></span></dt><dd><dl><dt><span class="section"><a href="#gtadmin-install-build-git">1.1. Building from Git</a></span></dt><dt><span class="section"><a href="#gtadmin-install-build-source">1.2. Building a specific package from source</a></span></dt><dt><span class="section"><a href="#gtadmin-install-components">1.3. Detailed installation instructions for these components</a></span></dt><dt><span class="section"><a href="#gtadmin-install-build-update">1.4. Building an update package without an installer</a></span></dt></dl></dd></dl></dd><dt><span class="appendix"><a href="#gtadmin-packaging">A. Packaging details</a></span></dt><dd><dl><dt><span class="section"><a href="#gtadmin-makefile">1. The makefile</a></span></dt><dt><span class="section"><a href="#idm168723576336">2. Linking with Globus Toolkit Libraries</a></span></dt></dl></dd><dt><span class="appendix"><a href="#gtadmin-env-var">B. Environment Variables in GT 6.0</a></span></dt><dd><dl><dt><span class="section"><a href="#idm168715408496">1. Common Runtime Environmental Variables</a></span></dt><dd><dl><dt><span class="section"><a href="#xio-env-var">1.1. Environmental variables for XIO</a></span></dt><dt><span class="section"><a href="#ccommonlib-env-var">1.2. Environment variables for C Common Libraries</a></span></dt></dl></dd><dt><span class="section"><a href="#idm168718039088">2. Security Environmental Variables</a></span></dt><dd><dl><dt><span class="section"><a href="#gsic-env-var">2.1. Environmental Variables for GSI C</a></span></dt><dd><dl><dt><span class="section"><a href="#gsic-env-credentials">2.1.1. Credentials</a></span></dt><dt><span class="section"><a href="#gsic-env-gridmapfile">2.1.2. Gridmap file</a></span></dt><dt><span class="section"><a href="#gsic-env-trustedca">2.1.3. Trusted CAs directory</a></span></dt><dt><span class="section"><a href="#gsic-env-gsiauthz">2.1.4. GSI authorization callout configuration file</a></span></dt><dt><span class="section"><a href="#gsic-env-gaaauthz">2.1.5. GAA (Generic Authorization and Access control) configuration file</a></span></dt><dt><span class="section"><a href="#gsic-env-gridsecurity">2.1.6. Grid security directory</a></span></dt><dt><span class="section"><a href="#gsic-env-tls">2.1.7. Using TLS</a></span></dt><dt><span class="section"><a href="#gsic-env-name">2.1.8. Name Comparisons</a></span></dt></dl></dd><dt><span class="section"><a href="#myproxy-env-var">2.2. Environmental variables for MyProxy</a></span></dt><dt><span class="section"><a href="#gsiopenssh-env-var">2.3. Environmental variables for GSI-OpenSSH</a></span></dt></dl></dd><dt><span class="section"><a href="#idm168718466224">3. Data Management Environmental Variables</a></span></dt><dd><dl><dt><span class="section"><a href="#gridftp-env-var">3.1. Environment variables for GridFTP</a></span></dt></dl></dd></dl></dd><dt><span class="appendix"><a href="#gtadmin-simpleca">C. Installing SimpleCA</a></span></dt><dd><dl><dt><span class="section"><a href="#simpleca-users">1. Create users </a></span></dt><dt><span class="section"><a href="#simpleca-install">2. Install SimpleCA</a></span></dt><dt><span class="section"><a href="#idm168697278928">3. Create SimpleCA Administrator Account</a></span></dt><dt><span class="section"><a href="#idm168697273936">4. Invoking <span class="command"><strong>grid-ca-create</strong></span></a></span></dt><dt><span class="section"><a href="#simpleca-subjectname">5. Configure the subject name</a></span></dt><dt><span class="section"><a href="#simpleca-email">6. Configure the CA's email</a></span></dt><dt><span class="section"><a href="#simpleca-expiration">7. Configure the expiration date</a></span></dt><dt><span class="section"><a href="#simpleca-passphrase">8. Create a Passphrase to Encrypt the CA's Private Key</a></span></dt><dt><span class="section"><a href="#simpleca-packageoutput">9. SimpleCA Distribution Files</a></span></dt><dt><span class="section"><a href="#simpleca-binarypkgs">10. Generating Binary CA Packages</a></span></dt><dd><dl><dt><span class="section"><a href="#idm168697942416">10.1. Generating RPM Packages</a></span></dt><dt><span class="section"><a href="#idm168697936752">10.2. Generating Debian Packages</a></span></dt><dt><span class="section"><a href="#idm168697931472">10.3. Generating GPT Packages</a></span></dt></dl></dd><dt><span class="section"><a href="#idm168697927440">11. Examining a Certificate Request</a></span></dt><dt><span class="section"><a href="#idm168697920480">12. Signing a Certificate Request</a></span></dt><dt><span class="section"><a href="#idm168697913504">13. Revoking a Certificate</a></span></dt><dt><span class="section"><a href="#idm168697899360">14. Renewing a CA</a></span></dt><dt><span class="section"><a href="#simpleca-security_considerations">15. Security considerations for SimpleCA</a></span></dt></dl></dd><dt><span class="appendix"><a href="#gtadmin-troubleshooting">D. Troubleshooting your installation</a></span></dt><dt><span class="appendix"><a href="#gtadmin-config-details">E. Detailed Configuration by Component</a></span></dt><dt><span class="appendix"><a href="#gtadmin-sec-considerations">F. Security Considerations in GT 6.0</a></span></dt><dd><dl><dt><span class="section"><a href="#gtadmin-sec-consid-common-runtime">1. Common Runtime</a></span></dt><dd><dl><dt><span class="section"><a href="#xio-security-considerations">1.1. Security considerations for XIO</a></span></dt></dl></dd><dt><span class="section"><a href="#gtadmin-sec-consid-security">2. Security</a></span></dt><dd><dl><dt><span class="section"><a href="#gsic-security-considerations">2.1. Security considerations for GSI C</a></span></dt><dt><span class="section"><a href="#myproxy-security-considerations">2.2. MyProxy Security Considerations</a></span></dt><dt><span class="section"><a href="#gsi-openssh-security-considerations">2.3. GSI-OpenSSH Security Considerations</a></span></dt></dl></dd><dt><span class="section"><a href="#gtadmin-sec-consid-data">3. Data Management</a></span></dt><dd><dl><dt><span class="section"><a href="#gridftp-security-considerations">3.1. Security Considerations </a></span></dt><dd><dl><dt><span class="section"><a href="#gridftp-security-config">3.1.1. Ways to configure your server</a></span></dt><dt><span class="section"><a href="#gridftp-security-firewalls">3.1.2. Firewall requirements</a></span></dt></dl></dd></dl></dd><dt><span class="section"><a href="#idm168695565152">4. Execution Management</a></span></dt><dd><dl><dt><span class="section"><a href="#gram5-security-considerations">4.1. Security Considerations</a></span></dt><dd><dl><dt><span class="section"><a href="#idm168695563616">4.1.1. Gatekeeper Security Considerations</a></span></dt><dt><span class="section"><a href="#idm168695509952">4.1.2. Job Manager Security Considerations</a></span></dt><dt><span class="section"><a href="#idm168695506304">4.1.3. Fork SEG Module Security Considerations</a></span></dt></dl></dd></dl></dd></dl></dd><dt><span class="appendix"><a href="#gtadmin-config-usage-stats">G. Usage Statistics</a></span></dt><dd><dl><dt><span class="section"><a href="#idm168697885392">1. Data Management Usage Statistics</a></span></dt><dd><dl><dt><span class="section"><a href="#gridftp-usage-stats">1.1. GridFTP-specific usage statistics</a></span></dt></dl></dd><dt><span class="section"><a href="#idm168723635840">2. Execution Management Usage Statistics</a></span></dt><dd><dl><dt><span class="section"><a href="#gram5-usage-stats">2.1. GRAM5-specific usage statistics</a></span></dt></dl></dd></dl></dd><dt><span class="glossary"><a href="#glossary-gtadminappendix">Glossary</a></span></dt></dl></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="gtadmin-advanced-build"></a>Chapter 1. Advanced Installation for GT 6.0</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="section"><a href="#gtadmin-install-nondefault">1. Advanced Installation</a></span></dt><dd><dl><dt><span class="section"><a href="#gtadmin-install-build-git">1.1. Building from Git</a></span></dt><dt><span class="section"><a href="#gtadmin-install-build-source">1.2. Building a specific package from source</a></span></dt><dt><span class="section"><a href="#gtadmin-install-components">1.3. Detailed installation instructions for these components</a></span></dt><dt><span class="section"><a href="#gtadmin-install-build-update">1.4. Building an update package without an installer</a></span></dt></dl></dd></dl></div><p>This section introduces building from Git, and references the advanced installation sections of component documentation.</p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="gtadmin-install-nondefault"></a>1. Advanced Installation</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="gtadmin-install-build-git"></a>1.1. Building from Git</h3></div></div></div><p>The Globus Toolkit is available for download from github. See
                <a class="ulink" href="https://github.com/globus/globus-toolkit/tree/globus_6_branch" target="_top">https://github.com/globus/globus-toolkit/tree/globus_6_branch</a> to branch or checkout the toolkit source code.
            </p><p>
            After checking out the toolkit, run <span class="command"><strong>autoreconf -i</strong></span>
            in the checkout root to generate configure scripts for building
            the toolkit components.
            </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="gtadmin-install-build-source"></a>1.2. Building a specific package from source</h3></div></div></div><p>If you need to build a specific package from the source installer, you can use the
                per-package make targets that exist in the source installer's Makefile.  Instead of
                simply running "make" in the steps above, you can, for example, run 
                "make globus_common" which will build the globus_common package and its
                dependencies, or "make globus_common-only" which will build exactly and only the
                globus_common package.  Similar targets exist for each package.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="gtadmin-install-components"></a>1.3. Detailed installation instructions for these components</h3></div></div></div><p>The following is a list of links to more detailed installation information
                available for the following components:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        <a href="../../gram5/admin/#gram5-admin-install" class="olink">GRAM5 Installation</a>
                    </p></li><li class="listitem"><p>
                        <a href="../../gridftp/admin/#gridftp-admin-installing" class="olink">Building and installing GridFTP</a>
                    </p></li><li class="listitem"><p>
                        <a href="../../myproxy/admin/#myproxy-admin-installing" class="olink">Building and installing MyProxy</a>
                    </p></li><li class="listitem"><p>
                        <a href="../../gsiopenssh/admin/#gsiopenssh-admin-installing-configure-options" class="olink">Optional Build-Time Configuration for GSI-OpenSSH</a>
                    </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="gtadmin-install-build-update"></a>1.4. Building an update package without an installer</h3></div></div></div><p>If you need to build an updated package that has been released without a source installer (for example, a security update to a package, or a new version of MyProxy,) you can use the familiar <span class="command"><strong>configure; make; make install</strong></span> sequence to rebuild that package.</p></div></div></div><div class="appendix"><div class="titlepage"><div><div><h1 class="title"><a name="gtadmin-packaging"></a>Appendix A. Packaging details</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="section"><a href="#gtadmin-makefile">1. The makefile</a></span></dt><dt><span class="section"><a href="#idm168723576336">2. Linking with Globus Toolkit Libraries</a></span></dt></dl></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="gtadmin-makefile"></a>1. The makefile</h2></div></div></div><p>
You do not have to build every subcomponent of this release.  The
makefile specifies subtargets for different functional subpieces.
</p><div class="itemizedlist"><p class="title"><b>Makefile targets</b></p><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">gram: GRAM5
</li><li class="listitem">gridftp: GridFTP
</li></ul></div><p>
Note that all of these targets require the "install" target also.
So, for instance, to build GridFTP alone, you would run:

</p><pre class="screen">
$ ./configure --prefix=/path/to/install
$ make gridftp install
</pre><p>
</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="idm168723576336"></a>2. Linking with Globus Toolkit Libraries</h2></div></div></div><p>
        
        Since GT 2.0, the toolkit has included a script called globus-makefile-header that can be used to assemble the 
        cflags and link line information when linking a program with libraries included in the toolkit.  This script 
        would walk the package metadata dependency tree to ensure that all needed flags were included, without duplicates.
        This method worked, and continues to work in GT 6.0, but we consider it to be obsolete, as we have added support 
        for using <a class="ulink" href="http://www.freedesktop.org/wiki/Software/pkg-config" target="_top">pkg-config</a>
    </p><p>
        
        Pkg-config is very similar in concept to globus-makefile-header, but it has gained widespread adoption across a range of unix platforms.
    </p><p>
        To get the cflags and link line information to link to the globus-ftp-client library, for example, you could
        </p><pre class="screen"><code class="prompt">$</code><strong class="userinput"><code>pkg-config --cflags --libs globus-ftp-client</code></strong></pre><p>
    </p><p>
        Each Globus Toolkit library has a pkg-config metadata file that is installed as part of its devel package. 
    </p><p>
        For more information about pkg-config, please see <a class="ulink" href="http://www.freedesktop.org/wiki/Software/pkg-config" target="_top">the pkg-config homepage.</a>
    </p></div></div><div class="appendix"><div class="titlepage"><div><div><h1 class="title"><a name="gtadmin-env-var"></a>Appendix B. Environment Variables in GT 6.0</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="section"><a href="#idm168715408496">1. Common Runtime Environmental Variables</a></span></dt><dd><dl><dt><span class="section"><a href="#xio-env-var">1.1. Environmental variables for XIO</a></span></dt><dt><span class="section"><a href="#ccommonlib-env-var">1.2. Environment variables for C Common Libraries</a></span></dt></dl></dd><dt><span class="section"><a href="#idm168718039088">2. Security Environmental Variables</a></span></dt><dd><dl><dt><span class="section"><a href="#gsic-env-var">2.1. Environmental Variables for GSI C</a></span></dt><dd><dl><dt><span class="section"><a href="#gsic-env-credentials">2.1.1. Credentials</a></span></dt><dt><span class="section"><a href="#gsic-env-gridmapfile">2.1.2. Gridmap file</a></span></dt><dt><span class="section"><a href="#gsic-env-trustedca">2.1.3. Trusted CAs directory</a></span></dt><dt><span class="section"><a href="#gsic-env-gsiauthz">2.1.4. GSI authorization callout configuration file</a></span></dt><dt><span class="section"><a href="#gsic-env-gaaauthz">2.1.5. GAA (Generic Authorization and Access control) configuration file</a></span></dt><dt><span class="section"><a href="#gsic-env-gridsecurity">2.1.6. Grid security directory</a></span></dt><dt><span class="section"><a href="#gsic-env-tls">2.1.7. Using TLS</a></span></dt><dt><span class="section"><a href="#gsic-env-name">2.1.8. Name Comparisons</a></span></dt></dl></dd><dt><span class="section"><a href="#myproxy-env-var">2.2. Environmental variables for MyProxy</a></span></dt><dt><span class="section"><a href="#gsiopenssh-env-var">2.3. Environmental variables for GSI-OpenSSH</a></span></dt></dl></dd><dt><span class="section"><a href="#idm168718466224">3. Data Management Environmental Variables</a></span></dt><dd><dl><dt><span class="section"><a href="#gridftp-env-var">3.1. Environment variables for GridFTP</a></span></dt></dl></dd></dl></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="idm168715408496"></a>1. Common Runtime Environmental Variables</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="xio-env-var"></a>1.1. Environmental variables for XIO</h3></div></div></div><p>
  The vast majority of the environment variables that affect the Globus XIO
  framework are defined by the driver in use.  The following are links to descriptions
    of the more common driver environment variables:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
    <a class="ulink" href="http://www.globus.org/api/c-globus-%24%7Bversion%7D/globus_xio/html/group__tcp__driver__envs.html" target="_top">TCP Driver Environment Variables</a></li><li class="listitem">
    <a class="ulink" href="http://www.globus.org/api/c-globus-%24%7Bversion%7D/globus_xio/html/group__file__driver__envs.html" target="_top">File Driver Environment Variables</a>  </li><li class="listitem"><a class="ulink" href="http://www.globus.org/api/c-globus-%24%7Bversion%7D/globus_xio/html/group__gsi__driver__envs.html" target="_top">GSI Driver Environment Variables</a></li><li class="listitem"><a class="ulink" href="http://www.globus.org/api/c-globus-%24%7Bversion%7D/globus_xio/html/group__udp__driver__envs.html" target="_top">UDP Driver Environment Variables</a></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="ccommonlib-env-var"></a>1.2. Environment variables for C Common Libraries</h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">GLOBUS_HOSTNAME</span></dt><dd>Set this variable to the fully qualified name of the local
        machine's hostname.</dd><dt><span class="term">GLOBUS_DOMAIN_NAME</span></dt><dd>Set this variable to the domain name to be used to qualify the local
        machine's hostname.</dd><dt><span class="term">GLOBUS_ERROR_OUTPUT</span></dt><dd>Set this variable to 1 to cause Globus libraries to display error information
        to stderr.</dd><dt><span class="term">GLOBUS_ERROR_VERBOSE</span></dt><dd>Set this variable to 1 to enable verbose error messages.</dd><dt><span class="term">GLOBUS_I18N</span></dt><dd>Set this variable to 1 to attempt to use localized messages.
        (Currently not working)</dd><dt><span class="term">GLOBUS_LOCATION</span></dt><dd>Set this variable to the path where the Globus Toolkit is installed, so
        that Globus tools can find libraries and data files. This is only needed if the
        Globus Toolkit was built with the source installer.</dd><dt><span class="term">GLOBUS_THREAD_MODEL</span></dt><dd>Set to the name of a thread model to control the operation of the Globus
        event driver. Valid values are (depending on the platform) <code class="literal">none</code>
        for non-threaded operation (the default), <code class="literal">pthread</code> for POSIX
        threads, or <code class="literal">windows</code> for Windows threads.</dd></dl></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="idm168718039088"></a>2. Security Environmental Variables</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="gsic-env-var"></a>2.1. Environmental Variables for GSI C</h3></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="gsic-env-credentials"></a>2.1.1. Credentials</h4></div></div></div><p>Credentials are looked for in the following order:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>service credential</p></li><li class="listitem"><p>host credential</p></li><li class="listitem"><p>proxy credential</p></li><li class="listitem"><p>user credential</p></li></ol></div><p><code class="envar">X509_USER_PROXY</code> specifies the path to the 
      <a href="#proxy-cred" class="glossterm"><em class="glossterm">proxy credential</em></a>. If <code class="envar">X509_USER_PROXY</code> is not set, the
      proxy credential is created (by <span class="command"><strong>grid-proxy-init</strong></span>) and searched for (by
      client programs) in an operating-system-dependent local temporary file.</p><p><code class="envar">X509_USER_CERT</code> and <code class="envar">X509_USER_KEY</code> specify the path to the end
      entity (user, service, or host) certificate and corresponding <a href="#priv-key" class="glossterm"><em class="glossterm">private key</em></a>. The paths to the certificate and key files are determined as follows:</p><p>For <a href="#svc-cred" class="glossterm"><em class="glossterm">service credentials</em></a>:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">If <code class="envar">X509_USER_CERT</code> and <code class="envar">X509_USER_KEY</code> exist and contain
          a valid certificate and key, those files are used.</li><li class="listitem">Otherwise, if the files <code class="filename">/etc/grid-security/<em class="replaceable"><code>service/service</code></em>cert.pem</code> and
            <code class="filename">/etc/grid-security/<em class="replaceable"><code>service/service</code></em>key.pem</code>
          exist and contain a valid certificate and key, those files are used.</li><li class="listitem">Otherwise, if the files <code class="filename">$GLOBUS_LOCATION/etc/grid-security/<em class="replaceable"><code>service/service</code></em>cert.pem</code>
          and <code class="filename">$GLOBUS_LOCATION/etc/grid-security/<em class="replaceable"><code>service/service</code></em>key.pem</code>
          exist and contain a valid certificate and key, those files are used.</li><li class="listitem">Otherwise, if the files <code class="filename"><em class="replaceable"><code>service/service</code></em>cert.pem</code> and <code class="filename"><em class="replaceable"><code>service/service</code></em>key.pem</code> in the user's <code class="filename">.globus</code> directory exist and contain a valid certificate and key, those files
          are used.</li></ol></div><p>For <a href="#host-cred" class="glossterm"><em class="glossterm">host credentials</em></a>:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">If <code class="envar">X509_USER_CERT</code> and <code class="envar">X509_USER_KEY</code> exist and
          contain a valid certificate and key, those files are used.</li><li class="listitem">Otherwise, if the files <code class="filename">/etc/grid-security/hostcert.pem</code> and
            <code class="filename">/etc/grid-security/hostkey.pem</code> exist and contain a valid
          certificate and key, those files are used.</li><li class="listitem">Otherwise, if the files <code class="filename">$GLOBUS_LOCATION/etc/hostcert.pem</code> and <code class="filename">$GLOBUS_LOCATION/etc/hostkey.pem</code> exist and contain a valid
          certificate and key, those files are used.</li><li class="listitem">Otherwise, if the files <code class="filename">hostcert.pem</code> and <code class="filename">hostkey.pem</code> in the user's <code class="filename">.globus</code> directory, exist and
          contain a valid certificate and key, those files are used.</li></ol></div><p>For <a href="#user-cred" class="glossterm"><em class="glossterm">user credentials</em></a>:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">If <code class="envar">X509_USER_CERT</code> and <code class="envar">X509_USER_KEY</code> exist and contain
          a valid certificate and key, those files are used.</li><li class="listitem">Otherwise, if the files <code class="filename">usercert.pem</code> and <code class="filename">userkey.pem</code> exist in the user's <code class="filename">.globus</code> directory, those
          files are used.</li><li class="listitem">Otherwise, if a PKCS-12 file called <code class="filename">usercred.p12</code> exists in the
          user's <code class="filename">.globus</code> directory, the certificate and key are read from that
          file.</li></ol></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="gsic-env-gridmapfile"></a>2.1.2. Gridmap file</h4></div></div></div><p><code class="envar">GRIDMAP</code> specifies the path to the <a href="#grid-map-file" class="glossterm"><em class="glossterm">grid map file</em></a>,
      which is used to map distinguished names (found in certificates) to local names (such as login
      accounts). The location of the grid map file is determined as follows: </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">If the <code class="envar">GRIDMAP</code> environment variable is set, the grid map file
            location is the value of that environment variable.</li><li class="listitem"><p>Otherwise: </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">If the user is root (uid 0), then the grid map file is <code class="filename">/etc/grid-security/grid-mapfile</code>.</li><li class="listitem">Otherwise, the grid map file is <code class="filename">$HOME/.gridmap</code>.</li></ul></div></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="gsic-env-trustedca"></a>2.1.3. Trusted CAs directory</h4></div></div></div><p><code class="envar">X509_CERT_DIR</code> is used to specify the path to the trusted certificates
      directory. This directory contains information about which CAs are trusted (including the
        <a href="#ca-cert" class="glossterm"><em class="glossterm">CA certificates</em></a> themselves) and, in some
      cases, configuration information used by <span class="command"><strong>grid-cert-request</strong></span> to formulate
      certificate requests. The location of the trusted certificates directory is determined as
      follows: </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">If the <code class="envar">X509_CERT_DIR</code> environment variable is set, the trusted
            certificates directory is the value of that environment variable.</li><li class="listitem">Otherwise, if <code class="filename">$HOME/.globus/certificates</code> exists, that
            directory is the trusted certificates directory.</li><li class="listitem">Otherwise, if <code class="filename">/etc/grid-security/certificates</code> exists, that
            directory is the trusted certificates directory.</li><li class="listitem">Finally, if <code class="filename">$GLOBUS_LOCATION/share/certificates</code> exists, then
            it is the trusted certificates directory.</li></ol></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="gsic-env-gsiauthz"></a>2.1.4. GSI authorization callout configuration file</h4></div></div></div><p><code class="envar">GSI_AUTHZ_CONF</code> is used to specify the path to the 
      <a href="#gsi-authz-config" class="glossterm"><em class="glossterm">GSI authorization callout configuration file</em></a>. This file is used to configure
      authorization callouts used by both the gridmap and the authorization API. The location of the
      GSI authorization callout configuration file is determined as follows:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">If the <code class="envar">GSI_AUTHZ_CONF</code> environment variable is set, the
            authorization callout configuration file location is the value of this environment
            variable.</li><li class="listitem">Otherwise, if <code class="filename">/etc/grid-security/gsi-authz.conf</code> exists, then
            this file is used.</li><li class="listitem">Otherwise, if <code class="filename">$GLOBUS_LOCATION/etc/gsi-authz.conf</code> exists,
            then this file is used.</li><li class="listitem">Finally, if <code class="filename">$HOME/.gsi-authz.conf</code> exists, then this file is
            used.</li></ol></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="gsic-env-gaaauthz"></a>2.1.5. GAA (Generic Authorization and Access control) configuration file</h4></div></div></div><p><code class="envar">GSI_GAA_CONF</code> is used to specify the path to the GSI <a href="#gaa-config" class="glossterm"><em class="glossterm">GAA (Generic Authorization and Access control)
        configuration file</em></a>. This file is used to configure policy language specific
      plugins to the GAA-API. The location of the GSI GAA configuration file is determined as
        follows:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">If the <code class="envar">GSI_GAA_CONF</code> environment variable is set, the GAA
            configuration file location is the value of this environment variable.</li><li class="listitem">Otherwise, if <code class="filename">/etc/grid-security/gsi-gaa.conf</code> exists, then
            this file is used.</li><li class="listitem">Otherwise, if <code class="filename">$GLOBUS_LOCATION/etc/gsi-gaa.conf</code> exists, then
            this file is used.</li><li class="listitem">Finally, if <code class="filename">$HOME/.gsi-gaa.conf</code> exists, then this file is
            used.</li></ol></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="gsic-env-gridsecurity"></a>2.1.6. Grid security directory</h4></div></div></div><p><code class="envar">GRID_SECURITY_DIR</code> specifies a path to a directory containing configuration
      files that specify default values to be placed in certificate requests. This environment
      variable is used only by the <span class="command"><strong>grid-cert-request</strong></span> and <span class="command"><strong>grid-default-ca</strong></span> commands.</p><p>The location of the <a href="#grid-sec-dir" class="glossterm"><em class="glossterm">grid security directory</em></a> is determined as
      follows: </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">If the <code class="envar">GRID_SECURITY_DIR</code> environment variable is set, the grid
            security directory is the value of that environment variable.</li><li class="listitem">If the configuration files exist in <code class="filename">/etc/grid-security</code>, the
            grid security directory is that directory.</li><li class="listitem">if the configuration files exist in <code class="filename">$GLOBUS_LOCATION/etc</code>,
            the grid security directory is that directory.</li></ol></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="gsic-env-tls"></a>2.1.7. Using TLS</h4></div></div></div><p><code class="envar">GLOBUS_GSSAPI_FORCE_TLS</code> specifies whether to use TLS
     by default when establishing a security context. The default behavior if
     this is not set is to use SSLv3.
     </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="gsic-env-name"></a>2.1.8. Name Comparisons</h4></div></div></div><p><code class="envar">GLOBUS_GSSAPI_NAME_COMPATIBILITY</code> specifies what name
     matching algorithms are supported by GSSAPI for mutual authentication and
     <code class="function">gss_compare_name</code>. This variable may be set to any
     of the following values:

     </p><div class="informaltable"><table border="1" width="700px"><colgroup><col><col></colgroup><tbody><tr><td><code class="literal">STRICT_GT2</code></td><td><p>Strictly backward-compatible with GT 2.0 name
                    matching. X.509 subjectAltName values are ignored. Names
                    with hyphens are treated as wildcarded as described in the
                    <a href="../../gsic/admin/#gsic-security-considerations" class="olink">security
                    considerations</a> documentation. Name matching will
                    rely on canonical host name associated with connection IP
                    addresses.</p>
                    </td></tr><tr><td><p><code class="literal">STRICT_RFC2818</code></p></td><td><p>Support
                    <a class="ulink" href="http://www.ietf.org/rfc/rfc2818.txt" target="_top">RFC
                    2818</a> server identity processing. Hyphen characters
                    are treated as normal part of a host name. DNSName and
                    IPAddress subjectAltName extensions are matched against the
                    host and port passed to GSSAPI. If subjectAltName is
                    present, X.509 SubjectName is ignored.</p>
                    </td></tr><tr><td><p><code class="literal">HYBRID</code></p>
                    </td><td><p>Support a hybrid of the two previous name
                    matching algorithms, liberally matching both hyphen
                    wildcards, canonical names associated with IP addresses,
                    and subjectAltName extensions.</p>
                    </td></tr></tbody></table></div><p>

    If this variable is not set, the <code class="literal">HYBRID</code> behavior is 
    used.
     </p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="myproxy-env-var"></a>2.2. Environmental variables for MyProxy</h3></div></div></div><p>
Please refer to the 
<a class="ulink" href="http://myproxy.ncsa.uiuc.edu/man/" target="_top">MyProxy Reference Manual</a>
for documentation of MyProxy environment variable interfaces.
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="gsiopenssh-env-var"></a>2.3. Environmental variables for GSI-OpenSSH</h3></div></div></div><p>The GSI-enabled OpenSSHD needs to be able to find certain files and
    directories in order to properly function.</p><p>The items that OpenSSHD needs to be able to locate, their default
    location and the environment variable to override the default
    location are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="emphasis"><em>Host key</em></span>
      </p><div class="blockquote"><blockquote class="blockquote"><p>Default location: /etc/grid-security/hostkey.pem</p><p>Override with X509_USER_KEY environment variable </p></blockquote></div></li><li class="listitem"><p><a href="#host-cert" class="glossterm"><em class="glossterm">Host certificate</em></a>
      </p><div class="blockquote"><blockquote class="blockquote"><p>Default location: /etc/grid-security/hostcert.pem</p><p>Override with X509_USER_CERT environment variable</p></blockquote></div></li><li class="listitem"><p><a href="#grid-map-file" class="glossterm"><em class="glossterm">Grid map file</em></a>
      </p><div class="blockquote"><blockquote class="blockquote"><p>Default location: /etc/grid-security/grid-mapfile</p><p>Override with GRIDMAP environment variable</p></blockquote></div><p> </p></li><li class="listitem"><p><span class="emphasis"><em>Certificate directory</em></span>
      </p><div class="blockquote"><blockquote class="blockquote"><p>Default location: /etc/grid-security/certificates</p><p>Override with X509_CERT_DIR environment variable </p></blockquote></div></li></ul></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="idm168718466224"></a>3. Data Management Environmental Variables</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="gridftp-env-var"></a>3.1. Environment variables for GridFTP</h3></div></div></div><a class="indexterm" name="idm168718464688"></a><p>The GridFTP <a href="#server" class="glossterm"><em class="glossterm">server</em></a> or <a href="#client" class="glossterm"><em class="glossterm">client</em></a> libraries do not read any environment variable 
directly, but the security and networking related variables described below 
may be useful.
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a href="../../gsic/pi/#gsic-env-var" class="olink">Non-WS (General) Authentication &amp; Authorization Environment Variables</a>.</li><li class="listitem"><a href="../../xio/pi/#xio-env-var" class="olink">XIO Network Driver Environment Variables</a>.</li></ul></div><p>
 </p></div></div></div><div class="appendix"><div class="titlepage"><div><div><h1 class="title"><a name="gtadmin-simpleca"></a>Appendix C. Installing SimpleCA</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="section"><a href="#simpleca-users">1. Create users </a></span></dt><dt><span class="section"><a href="#simpleca-install">2. Install SimpleCA</a></span></dt><dt><span class="section"><a href="#idm168697278928">3. Create SimpleCA Administrator Account</a></span></dt><dt><span class="section"><a href="#idm168697273936">4. Invoking <span class="command"><strong>grid-ca-create</strong></span></a></span></dt><dt><span class="section"><a href="#simpleca-subjectname">5. Configure the subject name</a></span></dt><dt><span class="section"><a href="#simpleca-email">6. Configure the CA's email</a></span></dt><dt><span class="section"><a href="#simpleca-expiration">7. Configure the expiration date</a></span></dt><dt><span class="section"><a href="#simpleca-passphrase">8. Create a Passphrase to Encrypt the CA's Private Key</a></span></dt><dt><span class="section"><a href="#simpleca-packageoutput">9. SimpleCA Distribution Files</a></span></dt><dt><span class="section"><a href="#simpleca-binarypkgs">10. Generating Binary CA Packages</a></span></dt><dd><dl><dt><span class="section"><a href="#idm168697942416">10.1. Generating RPM Packages</a></span></dt><dt><span class="section"><a href="#idm168697936752">10.2. Generating Debian Packages</a></span></dt><dt><span class="section"><a href="#idm168697931472">10.3. Generating GPT Packages</a></span></dt></dl></dd><dt><span class="section"><a href="#idm168697927440">11. Examining a Certificate Request</a></span></dt><dt><span class="section"><a href="#idm168697920480">12. Signing a Certificate Request</a></span></dt><dt><span class="section"><a href="#idm168697913504">13. Revoking a Certificate</a></span></dt><dt><span class="section"><a href="#idm168697899360">14. Renewing a CA</a></span></dt><dt><span class="section"><a href="#simpleca-security_considerations">15. Security considerations for SimpleCA</a></span></dt></dl></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="simpleca-users"></a>1. Create users </h2></div></div></div><p>Make sure you have the following users on your machine:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">Your <span class="emphasis"><em>user</em></span> account, which
            will be used to run the client programs.
            </li><li class="listitem">A <code class="systemitem">simpleca</code> account,
            which will be used to administer the Simple CA. This is created
            automatically if you install SimpleCA from RPM or Debian
            packages.</li><li class="listitem">A generic <code class="systemitem">globus</code> account,
            if you will be building from the source
            installer.</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="simpleca-install"></a>2. Install SimpleCA</h2></div></div></div><p>SimpleCA can be installed in three ways, from a debian package,
        from an RPM package, and from the source installer. These installation
        methods are described in <a href="#gtadmin" class="olink">Installing GT 6.0</a></p><p>
        To install SimpleCA from binary packages, install the packages
        <span class="package">globus-simple-ca</span> and
        <span class="package">globus-gsi-cert-utils-progs</span> and their dependencies.
        On Debian based systems, use the command
        </p><pre class="screen"><code class="prompt">elephant# </code><span class="command"><strong>apt-get install <span class="package">globus-simple-ca</span> <span class="package">globus-gsi-cert-utils-progs</span></strong></span></pre><p>
        On RPM-based systems, use the command
        </p><pre class="screen"><code class="prompt">elephant# </code><span class="command"><strong>yum install <span class="package">globus-simple-ca</span> <span class="package">globus-gsi-cert-utils-progs</span></strong></span></pre><p>
        </p><p>
        To install SimpleCA from the source installer, build the
        <code class="literal">globus_simple_ca</code> and
        <code class="literal">globus_gsi_cert_utils</code> installer targets with
        the command
        </p><pre class="screen"><code class="prompt">globus@elephant% </code><span class="command"><strong>make <span class="package">globus_simple_ca</span> <span class="package">globus_gsi_cert_utils</span></strong></span></pre><p>

        Afterward, run the command 
        </p><pre class="screen"><code class="prompt">globus@elephant% </code><span class="command"><strong>make install</strong></span></pre><p>
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="idm168697278928"></a>3. Create SimpleCA Administrator Account</h2></div></div></div><p>
            Create a user to adminster the SimpleCA. You can use the the
            <code class="systemitem">globus</code> user you used to build 
            Globus, or another user that you create.  For the purposes of this
            document, we'll assume a user named
            <code class="systemitem">simpleca</code>. Log in
            to that user, and run the
            <span class="command"><strong>grid-ca-create</strong></span> command. This will prompt for
            information needed to name the
            certificate, how to contact the CA administrator, lifetime of the CA
            certificate, and passphrase, and will then generate the new CA
            certificate and private key. Command-line options described in <a href="../../simpleca/admin/#grid-ca-create" class="olink">grid-ca-create</a> can be used to avoid some of these
            prompts.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="idm168697273936"></a>4. Invoking <span class="command"><strong>grid-ca-create</strong></span></h2></div></div></div><p>
            If you are creating a SimpleCA for testing purposes,
            you can use the <code class="option">-noint</code> command-line option
            to <span class="command"><strong>grid-ca-create</strong></span> to use the default values for
            all prompts like this:

            </p><pre class="screen"><code class="prompt">simpleca@elephant% </code><span class="command"><strong>grid-ca-create -noint</strong></span></pre><p>
            
            This will create a SimpleCA in the <code class="systemitem">simpleca</code>'s home
            directory with the passphrase <code class="literal">globus</code>. You can
            then move on to the <a href="../../simpleca/admin/#simplecaAdmin-using" class="olink">Using a SimpleCA</a>
            chapter of this document. For step-by-step details to create
            a customized SimpleCA, continue reading this chapter.
        </p><p>
            As the <code class="systemitem">simpleca</code> user, run the command
            <span class="command"><strong>grid-ca-create</strong></span>, and you'll see
            output like this:

            </p><pre class="screen"><code class="prompt">simpleca@elephant% </code><span class="command"><strong>grid-ca-create</strong></span>
<code class="computeroutput">    C e r t i f i c a t e    A u t h o r i t y    S e t u p

This script will setup a Certificate Authority for signing Globus
users certificates.  It will also generate a simple CA package
that can be distributed to the users of the CA.

The CA information about the certificates it distributes will
be kept in:

/home/simpleca/.globus/simpleCA</code></pre><p>
            This intro screen shows the path that the CA will be created
            into (in this example,
            <code class="filename">/home/simpleca/.globus/simpleCA</code>). The
            other commands needed by SimpleCA will automatically look in that
            path by default when invoked by the <code class="systemitem">simpleca</code>
            user.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="simpleca-subjectname"></a>5. Configure the subject name</h2></div></div></div><p>The <span class="command"><strong>grid-ca-create</strong></span> program next prompts you for information
            about the name of CA you wish to create:
            </p><pre class="screen">
<code class="computeroutput">The unique subject name for this CA is:
cn=Globus Simple CA, ou=simpleCA-elephant.globus.org, ou=GlobusTest, o=Grid

Do you want to keep this as the CA subject (y/n) [y]:</code></pre><p>
            </p><p>
            To accept the default name, enter <strong class="userinput"><code>y</code></strong>.
            To choose a different name, type <strong class="userinput"><code>n</code></strong>,
            after which you will be prompted by
            </p><pre class="screen"><code class="computeroutput">Enter a unique subject name for this CA: </code></pre><p>
            </p><p>The subject name is an X.509 distinguished name. Typical 
            name component type abbreviations used in Grids are:

            </p><div class="table"><a name="idm168697970896"></a><p class="title"><b>Table C.1. CA Name components</b></p><div class="table-contents"><table summary="CA Name components" border="1" width="700px"><colgroup><col><col></colgroup><tbody><tr><td>cn</td><td>Represents "common name".  It identifies
                            this particular certificate as the
                            <a href="#ca-cert" class="glossterm"><em class="glossterm">CA Certificate</em></a> within the 
                            "GlobusTest/simpleCA-elephant.globus.org" domain,
                            which in this case is Globus Simple CA.</td></tr><tr><td>ou</td><td>Represents "organizational unit".  It
                            identifies this CA from other CAs created by
                            SimpleCA by other people. The second "ou" is
                            specific to your hostname (in this case
                            GlobusTest).</td></tr><tr><td>o</td><td>Represents "organization". It identifies the
                            Grid.</td></tr></tbody></table></div></div><p><br class="table-break">
            </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="simpleca-email"></a>6. Configure the CA's email</h2></div></div></div><p>The next prompt looks like this:
            </p><pre class="screen"><code class="computeroutput">Enter the email of the CA (this is the email where certificate
requests will be sent to be signed by the CA) [simpleca@elephant.globus.org]: </code></pre><p>Enter the email address where you intend to receive
            certificate requests.  It should be your real email address that
            you check, not the address of the globus user. When users
            request certificates with <span class="command"><strong>grid-cert-request</strong></span>,
            they will be instructed to send the request to this address.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="simpleca-expiration"></a>7. Configure the expiration date</h2></div></div></div><p>Then you'll see: </p><pre class="screen">
The CA certificate has an expiration date. Keep in mind that 
once the CA certificate has expired, all the certificates 
signed by that CA become invalid.  A CA should regenerate 
the CA certificate and start re-issuing ca-setup packages 
before the actual CA certificate expires.  This can be done 
by re-running this setup script.  Enter the number of DAYS 
the CA certificate should last before it expires.
[default: 5 years 1825 days]:</pre><p>This is the number of days for which the CA certificate is
            valid. Once this time expires, the CA certificate will have to be
            recreated. </p><p>To accept the default, hit <span class="keycap"><strong>enter</strong></span>, or
            otherwise, enter a value in days.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="simpleca-passphrase"></a>8. Create a Passphrase to Encrypt the CA's Private Key</h2></div></div></div><p>The next prompt will be for the passphrase for the CA's
            private key. It will be used to decrypt the CA's private key when
            signing  certificates. 
            It should be hard to guess, as its compromise
            might compromise all the certificates signed by the CA.
            You will be prompted twice for the passphrase, to verify that
            you typed it correctly. Enter the passphrase at these prompts.
            </p><pre class="screen"><code class="computeroutput">Enter PEM pass phrase:
Verifying - Enter PEM pass phrase:</code></pre><p>
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="simpleca-packageoutput"></a>9. SimpleCA Distribution Files</h2></div></div></div><p>Finally <span class="command"><strong>grid-ca-create</strong></span> will create a tarball containing the
            public information about the CA, including its public certificate,
            signing policy, and supported X.509v3 extensions. This information
            is needed on machines that will be trusting the CA, and also on
            machines which will be used to request certificates from this CA.
            </p><p>
             Since we didn't run in this example as root, 
            <span class="command"><strong>grid-ca-create</strong></span> will not be able to write the CA files
            to system paths, so it displays a warning message indicating
            that. We can use the tarball output here, or packages described
            below to install the CA support files on this and other
            machines.</p><p>The package output summary looks like this:

            </p><pre class="screen"><code class="computeroutput">Insufficient permissions to install CA into the trusted certifiicate
directory (tried ${sysconfdir}/grid-security/certificates and
${datadir}/certificates)
Creating RPM source tarball... done
	globus_simple_ca_68ea3306</code></pre><p>
            </p><p>This information will be important for setting up other
            machines in your grid.  The number
            <em class="replaceable"><code>68ea3306</code></em> in the last line is known as
            your <span class="emphasis"><em>CA hash</em></span>.  It is an 8 digit hexadecimal
            string which is a hash of the subject name of the CA
            certificate.</p><p>The tarball contains Debian and RPM package metadata, so
            that it can be compiled to a binary package which can be
            easily installed on this and other systems on your Grid.
            It can also be packaged as a GPT setup package for compatibility
            with older versions of the Globus Toolkit.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="simpleca-binarypkgs"></a>10. Generating Binary CA Packages</h2></div></div></div><p>
        The <a href="../../simpleca/admin/#grid-ca-package" class="olink">grid-ca-package</a> command can be used to
        generate RPM, debian, or legacy GPT packages for a SimpleCA, or for any
        other CA which is installed on a host. These packages can make it
        easy to distribute the CA certificate and policy to other hosts with
        which you want to establish Grid trust relationships.
        </p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="idm168697942416"></a>10.1. Generating RPM Packages</h3></div></div></div><p>
            To generate an RPM package for the CA which we created, use the
            following command:

            </p><pre class="screen"><code class="prompt">simpleca@elephant% </code><span class="command"><strong>grid-ca-package -r -cadir ~/.globus/simpleCA</strong></span>
<code class="computeroutput">Creating RPM source tarball... done
        globus_simple_ca_68ea3306.tar.gz
Creating RPM binary.../home/simpleca/globus-simple-ca-68ea3306</code></pre><p>

            The resulting rpm package will be placed in the current directory.
            As root, you can install this via the <span class="command"><strong>yum</strong></span> or
            <span class="command"><strong>rpm</strong></span> tools. This package can then be installed
            on any RPM-based system.
            </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="idm168697936752"></a>10.2. Generating Debian Packages</h3></div></div></div><p>
            To generate an Debian package for the CA which we created, use the
            following command:

            </p><pre class="screen"><code class="prompt">simpleca@elephant% </code><span class="command"><strong>grid-ca-package -d -cadir ~/.globus/simpleCA</strong></span>
    <code class="computeroutput">Creating RPM source tarball... done
        globus_simple_ca_68ea3306.tar.gz
Creating debian binary...dpkg-buildpackage: export CFLAGS from dpkg-buildflags (origin: vendor): -g -O2
<em class="replaceable"><code>
...
Lots of dpkg-buildpackage output</code></em></code></pre><p>

            The resulting debian package will be placed in the current
            directory.  As root, you can install this via the
            <span class="command"><strong>dpkg</strong></span> tool.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="idm168697931472"></a>10.3. Generating GPT Packages</h3></div></div></div><p>
            The <span class="command"><strong>grid-ca-package</strong></span> command can also
            generate GPT packages in the form similar to previous versions
            of the Globus Toolkit. This is done with the <code class="option">-g</code>
            and <code class="option">-b</code> command-line options. See <a href="../../simpleca/admin/#grid-ca-package" class="olink">grid-ca-package</a> for more
            details.
            </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="idm168697927440"></a>11. Examining a Certificate Request</h2></div></div></div><p>
        To examine a certificate request, use the command <span class="command"><strong>openssl req -text -in <em class="replaceable"><code>REQNAME</code></em></strong></span>, as shown in the following
        example.
        </p><div class="example"><a name="idm168697925280"></a><p class="title"><b>Example C.1. Examine a Certificate Request</b></p><div class="example-contents"><p>
            </p><pre class="screen"><code class="prompt">simpleca@elephant% </code><span class="command"><strong>openssl req -noout -text -in certreq.pem</strong></span>
<code class="computeroutput">Certificate Request:
    Data:
        Version: 0 (0x0)
        Subject: o=Grid, OU=GlobusTest, OU=simpleCA-elephant.globus.org, OU=local, CN=Joe User
        Subject Public Key Info:
            Public Key Algorithm: rsaEncryption
            RSA Public Key: (1024 bit)
                Modulus (1024 bit):
                    79:bd:a7:29:16:77:4c:e9:82:d3:73:a0:25:34:c7:
                    25:07:67:b3:2d:11:c1:e2:c9:b1:ec:41:20:a7:9a:
                    b7:2f:ee:d4:88:78:14:ff:d4:f2:f9:1b:d3:56:bc:
                    37:6f:f0:06:ea:b0:6f:70:12:a8:34:ac:8e:be:98:
                    00:b9:b8:ec:39:b5:6b:23:ad:1b:00:62:4b:cc:79:
                    97:cc:56:fb:54:7b:03:6d:a7:76:27:4e:ce:bd:94:
                    d0:eb:59:6b:25:c5:30:b0:47:15:bc:11:d5:7e:ff:
                    04:13:70:de:3b:8f:80:65:ae:63:82:61:38:f9:c6:
                    03:4a:92:b0:de:6f:bb:0a:bd
                Exponent: 65537 (0x10001)
        Attributes:
        Requested Extensions:
            Netscape Cert Type: 
                SSL CA, S/MIME CA, Object Signing CA
    Signature Algorithm: sha1WithRSAEncryption
        85:70:a6:5d:de:be:61:45:83:48:43:8d:4b:4b:4a:79:79:98:
        0d:6c:d4:a9:96:26:41:a4:c2:94:10:92:ad:eb:ad:c5:3c:bf:
        d6:4e:84:0a:db:46:96:a9:52:5b:90:cc:6a:d1:57:73:27:98:
        9e:e2:8c:9a:7f:b4:ab:a8:28:2b:02:98:a2:d8:69:73:5e:12:
        ad:5b:de:0c:6e:60:e0:0f:2c:ad:8d:b9:59:3b:d3:49:19:52:
        e0:e1:8a:57:f2:c3:a6:4d:b9:2c:5c:58:ef:0e:59:84:55:8e:
        16:fc:f4:39:82:13:6f:28:a9:59:e3:c8:f1:4e:87:75:33:4f:
        ae:be</code></pre><p>
            </p><p>In this case, you see a certificate request with the
            subject distinguished name <code class="literal">o=Grid, OU=GlobusTest,
            OU=simpleCA-elephant.globus.org, OU=local, CN=Joe User</code>.
            </p></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="idm168697920480"></a>12. Signing a Certificate Request</h2></div></div></div><p>If you are satisfied with the certificate request and are
        willing to sign it, use the <span class="command"><strong>grid-ca-sign</strong></span> command to do so. The
        command will store a copy of the newly signed certificate in the
        SimpleCA directory, so that you can keep track of what you've signed,
        and will also write it to the value of the <code class="option">-out</code>
        parameter. Transmit this result file back to the user which requested
        the certificate.
        </p><div class="example"><a name="idm168697917872"></a><p class="title"><b>Example C.2. Sign with <span class="command">grid-ca-sign</span></b></p><div class="example-contents"><pre class="screen"><code class="prompt">simpleca@elephant% </code><span class="command"><strong>grid-ca-sign -in certreq.pem -out cert.pem</strong></span>
<code class="computeroutput">

To sign the request
please enter the password for the CA key: 

The new signed certificate is at: /home/simpleca/.globus/simpleCA/newcerts/01.pem</code></pre></div></div><br class="example-break"><p>
            Once you've signed the certificate, if it is a user certificate,
            you must communicate it back to the user, perhaps via email.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="idm168697913504"></a>13. Revoking a Certificate</h2></div></div></div><p>
        SimpleCA does not yet provide a convenient interface to revoke
        a signed certificate, but it can be done with the
        <span class="command"><strong>openssl</strong></span> command.
        </p><p>
        </p><div class="example"><a name="idm168697911312"></a><p class="title"><b>Example C.3. Revoke a certificate</b></p><div class="example-contents"><pre class="screen"><code class="prompt">simpleca@elephant% </code><span class="command"><strong>openssl ca -config ~/.globus/simpleCA/grid-ca-ssl.conf -revoke ~/.globus/simpleCA/newcerts/01.pem</strong></span>
<code class="computeroutput">Using configuration from /home/simpleca/.globus/simpleCA/grid-ca-ssl.conf
Enter pass phrase for /home/simpleca/.globus/simpleCA/private/cakey.pem:
Revoking Certificate 01.
Data Base Updated</code></pre></div></div><p><br class="example-break">
        </p><p>Once a certificate is revoked, you can generate a Certificate
        Revocation List (CRL) for your CA, which will be a signed list of
        certificates which have been revoked. Sites which use your CA will
        need to keep the CRL up to date to be able to reject revoked
        certificates. This CRL can be generated with an
        <span class="command"><strong>openssl</strong></span> command. See
        <span class="citerefentry"><span class="refentrytitle">ca</span>(1)</span> for details
        about how to control the CRL lifetime and other options.</p><p>
        </p><div class="example"><a name="idm168697905184"></a><p class="title"><b>Example C.4. Create CRL</b></p><div class="example-contents"><pre class="screen"><code class="prompt">simpleca@elephant% </code><span class="command"><strong>openssl ca -config ~/.globus/simpleCA/grid-ca-ssl.conf -gencrl &gt; <code class="filename"><em class="replaceable"><code>CAHASH</code></em>.crl</code></strong></span>
<code class="computeroutput">Using configuration from /home/simpleca/.globus/simpleCA/grid-ca-ssl.conf
Enter pass phrase for /home/simpleca/.globus/simpleCA/private/cakey.pem:
</code></pre></div></div><p><br class="example-break">
        </p><p>
        The output file
        <code class="filename"><em class="replaceable"><code>CAHASH</code></em>.crl</code> (based
        on the hash of your CA subject name) should be distributed to 
        sites which trust your CA, so that they can install it into
        the trusted certificate directory.
        </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="idm168697899360"></a>14. Renewing a CA</h2></div></div></div><p>
        The <span class="command"><strong>openssl</strong></span> command can be used to renew a
        CA certificate. This will generate a new CA certificate with the
        same subject name and private key as before, but valid for a
        different time interval. This new certificate packaged and distributed
        as before using <a href="../../simpleca/admin/#grid-ca-package" class="olink">grid-ca-package</a>.
        </p><div class="example"><a name="idm168697896576"></a><p class="title"><b>Example C.5. Renew CA Certificate</b></p><div class="example-contents"><pre class="screen"><code class="prompt">simpleca@elephant% </code><span class="command"><strong>openssl req -key ~/.globus/simpleCA/private/cakey.pem -new -x509 -days 1825 -out newca.pem -config ~/.globus/simpleCA/grid-ca-ssl.conf</strong></span>
<code class="computeroutput">You are about to be asked to enter information that will be incorporated
into your certificate request.
What you are about to enter is what is called a Distinguished Name or a DN.
There are quite a few fields but you can leave some blank
For some fields there will be a default value,
If you enter '.', the field will be left blank.
-----
Level 0 Organization [Grid]:
Level 0 Organizational Unit [GlobusTest]:
Level 1 Organizational Unit [simpleCA-elephant.globus.org]:
Name (E.g., John M. Smith) []:</code><strong class="userinput"><code>Globus Simple CA</code></strong></pre><p>
            </p><p>
            </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="../../docbook/xsl/docbook-xsl-1.78.1/images/important.png"></td><th align="left">Important</th></tr><tr><td align="left" valign="top"><p>The Subject Name of the new certificate must match
            <span class="emphasis"><em>exactly</em></span> the previous certificate name, or
            clients will not recognize it as the correct certificate.</p></td></tr></table></div><p>
            </p></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="simpleca-security_considerations"></a>15. Security considerations for SimpleCA</h2></div></div></div><p>The operator of a CA must protect the private key of the CA. It should not
be stored unencrypted or on a network filesystem.
</p><p>Simple CA enforces the subject name policies in the simple CA's
configuration files. If modified, the signing_policy file distributed to clients
of the CA must also be modified.
</p></div></div><div class="appendix"><div class="titlepage"><div><div><h1 class="title"><a name="gtadmin-troubleshooting"></a>Appendix D. Troubleshooting your installation</h1></div></div></div><p>The following is a list of links that take you to information about troubleshooting your installation by component</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p class="simpara">Common Runtime components</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><a href="../../xio/admin/#xio-admin-troubleshooting" class="olink">XIO</a></li><li class="listitem"><a href="../../ccommonlib/developer/#ccommonlib-developer-troubleshooting" class="olink">C Common Libraries</a></li></ul></div></li><li class="listitem"><p class="simpara">Security components</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><a href="../../gsic/admin/#gsic-admin-troubleshooting" class="olink">GSI C</a></li><li class="listitem"><a href="../../myproxy/admin/#myproxy-user-troubleshooting" class="olink">MyProxy</a></li><li class="listitem"><a href="../../gsiopenssh/admin/#gsiopenssh-admin-troubleshooting" class="olink">GSI-OpenSSH</a></li></ul></div></li><li class="listitem"><p class="simpara">Data Management components</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><a href="../../gridftp/admin/#gridftp-troubleshooting" class="olink">GridFTP</a></li></ul></div></li><li class="listitem"><p class="simpara">Execution Management components</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><a href="../../gram5/admin/#gram5-admin-troubleshooting" class="olink">GRAM5</a></li></ul></div></li></ul></div></div><div class="appendix"><div class="titlepage"><div><div><h1 class="title"><a name="gtadmin-config-details"></a>Appendix E. Detailed Configuration by Component</h1></div></div></div><p>The following is a list of links that take you to information about detailed configuration for each component.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p class="simpara">Common Runtime components</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><a href="../../xio/admin/#xio-configuring" class="olink">XIO</a></li></ul></div></li><li class="listitem"><p class="simpara">Security components</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><a href="../../gsic/admin/#gsic-configuring" class="olink">GSI C</a></li><li class="listitem"><a href="../../myproxy/admin/#myproxy-configuring" class="olink">MyProxy</a></li><li class="listitem"><a href="../../gsiopenssh/admin/#gsiopenssh-configuring" class="olink">GSI-OpenSSH</a></li></ul></div></li><li class="listitem"><p class="simpara">Data Management components</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><a href="../../gridftp/admin/#gridftp-configuring" class="olink">GridFTP</a></li></ul></div></li><li class="listitem"><p class="simpara">Execution Management components</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><a href="../../gram5/admin/#gram5-configuring" class="olink">GRAM5</a></li></ul></div></li></ul></div></div><div class="appendix"><div class="titlepage"><div><div><h1 class="title"><a name="gtadmin-sec-considerations"></a>Appendix F. Security Considerations in GT 6.0</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="section"><a href="#gtadmin-sec-consid-common-runtime">1. Common Runtime</a></span></dt><dd><dl><dt><span class="section"><a href="#xio-security-considerations">1.1. Security considerations for XIO</a></span></dt></dl></dd><dt><span class="section"><a href="#gtadmin-sec-consid-security">2. Security</a></span></dt><dd><dl><dt><span class="section"><a href="#gsic-security-considerations">2.1. Security considerations for GSI C</a></span></dt><dt><span class="section"><a href="#myproxy-security-considerations">2.2. MyProxy Security Considerations</a></span></dt><dt><span class="section"><a href="#gsi-openssh-security-considerations">2.3. GSI-OpenSSH Security Considerations</a></span></dt></dl></dd><dt><span class="section"><a href="#gtadmin-sec-consid-data">3. Data Management</a></span></dt><dd><dl><dt><span class="section"><a href="#gridftp-security-considerations">3.1. Security Considerations </a></span></dt><dd><dl><dt><span class="section"><a href="#gridftp-security-config">3.1.1. Ways to configure your server</a></span></dt><dt><span class="section"><a href="#gridftp-security-firewalls">3.1.2. Firewall requirements</a></span></dt></dl></dd></dl></dd><dt><span class="section"><a href="#idm168695565152">4. Execution Management</a></span></dt><dd><dl><dt><span class="section"><a href="#gram5-security-considerations">4.1. Security Considerations</a></span></dt><dd><dl><dt><span class="section"><a href="#idm168695563616">4.1.1. Gatekeeper Security Considerations</a></span></dt><dt><span class="section"><a href="#idm168695509952">4.1.2. Job Manager Security Considerations</a></span></dt><dt><span class="section"><a href="#idm168695506304">4.1.3. Fork SEG Module Security Considerations</a></span></dt></dl></dd></dl></dd></dl></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="gtadmin-sec-consid-common-runtime"></a>1. Common Runtime</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="xio-security-considerations"></a>1.1. Security considerations for XIO</h3></div></div></div><p>Globus XIO is a framework for creating network protocols.  Several
      existing protocols, such as TCP, come built into the framework.  XIO
      itself introduces no known security risks. However, all network
      applications expose systems to the risks inherent when outsiders can connect to them.  Also included in the XIO distribution is the GSI
      driver, which provides a driver that allows for secure connections.
</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="gtadmin-sec-consid-security"></a>2. Security</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="gsic-security-considerations"></a>2.1. Security considerations for GSI C</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p class="simpara">During host authorization, the toolkit treats host names of the form
                    "hostname-<em class="replaceable"><code>ANYTHING</code></em>.edu" as equivalent to
                "hostname.edu". This means that if a service was set up to do host
                authorization and hence accept the certificate "hostname.edu", it would
                also accept certificates with DNs
                "hostname-<em class="replaceable"><code>ANYTHING</code></em>.edu". </p><p class="simpara"> The feature is in place to allow a multi-homed host following a
                "hostname-interface" naming convention, to have a single host certificate.
                For example, host "grid.test.edu" would also accept the likes of
                "grid-1.test.edu" or "grid-foo.test.edu". </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../../docbook/xsl/docbook-xsl-1.78.1/images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>The string <em class="replaceable"><code>ANYTHING</code></em> matches only the name of the
                    host and not domain components. This means that "hostname.edu" will
                    not match "hostname-foo.sub.edu", but will match
                    "host-foo.edu".</p></td></tr></table></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../../docbook/xsl/docbook-xsl-1.78.1/images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>If a host was set up to accept "hostname-1.edu", it will not
                    accept "hostname-<em class="replaceable"><code>ANYTHING</code></em>.edu" but will
                    accept "hostname.edu". That is, only one of the names being compared
                    may contain the hyphen character in the host name.</p></td></tr></table></div><p class="simpara">A <a class="ulink" href="http://bugzilla.globus.org/bugzilla/show_bug.cgi?id=2969" target="_top">bug</a> has been opened to see if this feature needs to be modified. </p><p class="simpara">In GT 6.0, it is possible to
                disable this behavior, by setting the enviornment variable
                    <code class="envar">GLOBUS_GSSAPI_NAME_COMPATIBILITY</code> to <code class="literal">STRICT_RFC2818</code>. </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="myproxy-security-considerations"></a>2.2. MyProxy Security Considerations</h3></div></div></div><p>
You should choose a well-protected host to run the myproxy-server
on. Consult with security-aware personnel at your site. You want a host
that is secured to the level of a Kerberos KDC, that has limited user
access, runs limited services, and is well monitored and maintained in
terms of security patches.
</p><p>
For a typical myproxy-server installation, 
the host on which the myproxy-server is running must
    have /etc/grid-security created and a <a href="#host-cert" class="glossterm"><em class="glossterm">host certificate</em></a> installed.
In this case, the myproxy-server will run as root so it can access the
host certificate and key.
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="gsi-openssh-security-considerations"></a>2.3. GSI-OpenSSH Security Considerations</h3></div></div></div><p>
  GSI-OpenSSH is a modified version of
  <a class="ulink" href="http://www.openssh.org/" target="_top">OpenSSH</a>
  and includes full OpenSSH functionality.
  For more information on OpenSSH security, see the 
  <a class="ulink" href="http://www.openssh.org/security.html" target="_top">OpenSSH Security</a>
  page.
</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="gtadmin-sec-consid-data"></a>3. Data Management</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="gridftp-security-considerations"></a>3.1. Security Considerations </h3></div></div></div><a class="indexterm" name="idm168695585584"></a><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="gridftp-security-config"></a>3.1.1. Ways to configure your server</h4></div></div></div><p>There are various ways to configure your GridFTP server that provide varying levels of security. For more information, see <a href="../../gridftp/admin/#gridftpAdmin" class="olink">System Administrator's Guide</a>.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="gridftp-security-firewalls"></a>3.1.2. Firewall requirements</h4></div></div></div><p> If the GridFTP <span class="emphasis"><em>server</em></span> is behind a firewall:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Contact your network administrator to open up port 2811 (for GridFTP control
                    channel connection) and a range of ports (for GridFTP data channel connections)
                    for the incoming connections. If the firewall blocks the outgoing connections,
                    open up a range of ports for outgoing connections as well.</p></li><li class="listitem"><p>Set the environment variable GLOBUS_TCP_PORT_RANGE:
                    </p><pre class="screen">export GLOBUS_TCP_PORT_RANGE=min,max </pre><p> where
                        <code class="option">min</code>,<code class="option">max</code> specify the port range that you
                    have opened for the incoming connections on the firewall. This restricts the
                    listening ports of the GridFTP server to this range. Recommended range is 1000
                    (e.g., 50000-51000) but it really depends on how much use you expect.</p></li><li class="listitem"><p>If you have a firewall blocking the outgoing connections and you have opened a
                    range of (local) ports, set the environment variable GLOBUS_TCP_SOURCE_RANGE:
                    </p><pre class="screen">export GLOBUS_TCP_SOURCE_RANGE=min,max </pre><p> where
                        <code class="option">min</code>,<code class="option">max</code> specify the port range that you
                    have opened for the outgoing connections on the firewall.
		    This restricts the GridFTP server to bind to a local port in this
		    range for outbound connections. Recommended range is twice
                    the range used for GLOBUS_TCP_PORT_RANGE, because if parallel TCP streams are
                    used for transfers, the listening port would remain the same for each connection
                    but the connecting port would be different for each connection.</p></li></ol></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../../docbook/xsl/docbook-xsl-1.78.1/images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>If the server is behind NAT, the <code class="computeroutput">--data-interface &lt;real
                    ip/hostname&gt;</code> option needs to be used on the server.</p></td></tr></table></div><p>If the GridFTP <span class="emphasis"><em>client</em></span> is behind a firewall:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Contact your network administrator to open up a range of ports (for GridFTP
                    data channel connections) for the incoming connections. If the firewall blocks
                    the outgoing connections, open up a range of ports for outgoing connections as
                    well.</p></li><li class="listitem"><p>Set the environment variable GLOBUS_TCP_PORT_RANGE
                    </p><pre class="screen">export GLOBUS_TCP_PORT_RANGE=min,max </pre><p> where min,max specify the
                    port range that you have opened for the incoming connections on the firewall.
                    This restricts the listening ports of the GridFTP client to this range.
                    Recommended range is 1000 (e.g., 50000-51000) but it really depends on how much
                    use you expect.</p></li><li class="listitem"><p>If you have a firewall blocking the outgoing connections and you have opened a
                    range of ports, set the environment variable GLOBUS_TCP_SOURCE_RANGE:
                    </p><pre class="screen">export GLOBUS_TCP_PORT_RANGE=min,max </pre><p> where min,max specify the
                    port range that you have opened for the outgoing connections on the firewall.
                    This restricts the GridFTP client to bind to a local port
		    in this range for outbound connections.
                    Recommended range is twice the range used for GLOBUS_TCP_PORT_RANGE, because if
                    parallel TCP streams are used for transfers, the listening port would remain the
                    same for each connection but the connecting port would be different for each
                    connection.</p></li></ol></div><p>Additional information on Globus Toolkit Firewall Requirements is available <a class="ulink" href="http://www.globus.org/toolkit/security/firewalls/" target="_top">here</a>.</p></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="idm168695565152"></a>4. Execution Management</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="gram5-security-considerations"></a>4.1. Security Considerations</h3></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="idm168695563616"></a>4.1.1. Gatekeeper Security Considerations</h4></div></div></div><p>
GRAM5 runs different parts of itself under different privilege
levels. The <span class="command"><strong>globus-gatekeeper</strong></span> runs as root, and uses its root privilege to access
the host's private key. It uses the <a href="#grid-map-file" class="glossterm"><em class="glossterm">grid map file</em></a> to
map <a href="#cert" class="glossterm"><em class="glossterm">Grid Certificates</em></a> to
local user ids and then uses the <code class="function">setuid()</code> function
to change to that user and execute the <span class="command"><strong>globus-job-manager</strong></span> program
</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="idm168695509952"></a>4.1.2. Job Manager Security Considerations</h4></div></div></div><p>
The  <span class="command"><strong>globus-job-manager</strong></span> program runs as a local non-root account. It receives
a delegated limited <a href="#proxy-cert" class="glossterm"><em class="glossterm">proxy certificate</em></a> from the GRAM5
client which it uses to access Grid storage resources via GridFTP and to
authenticate job signals (such as client cancel requests), and send
job state callbacks to registered clients. This proxy is generally short-lived,
and is automatically removed by the job manager when the job completes.
</p><p>
The <span class="command"><strong>globus-job-manager</strong></span> program uses a publicly-writable directory for job state
files. This directory has the <span class="emphasis"><em>sticky</em></span> bit set, so 
users may not remove other users files. Each file is named by a UUID, so
it should be unique.
</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="idm168695506304"></a>4.1.3. Fork SEG Module Security Considerations</h4></div></div></div><p>
The Fork Scheduler Event Generator module uses a globally writable file
for job state change events. This is not recommended for production use.
</p></div></div></div></div><div class="appendix"><div class="titlepage"><div><div><h1 class="title"><a name="gtadmin-config-usage-stats"></a>Appendix G. Usage Statistics</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="section"><a href="#idm168697885392">1. Data Management Usage Statistics</a></span></dt><dd><dl><dt><span class="section"><a href="#gridftp-usage-stats">1.1. GridFTP-specific usage statistics</a></span></dt></dl></dd><dt><span class="section"><a href="#idm168723635840">2. Execution Management Usage Statistics</a></span></dt><dd><dl><dt><span class="section"><a href="#gram5-usage-stats">2.1. GRAM5-specific usage statistics</a></span></dt></dl></dd></dl></div><p>The following components collect usage statistics as outlined here (along with information
		about how to opt-out): <a class="ulink" href="../../Usage_Stats.html" target="_top">Usage Statistics in
		GT</a></p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="idm168697885392"></a>1. Data Management Usage Statistics</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="gridftp-usage-stats"></a>1.1. GridFTP-specific usage statistics</h3></div></div></div><p>
The following GridFTP-specific usage statistics are sent in a UDP packet at 
the end of each transfer, in addition to the standard header information 
described in the  <a class="ulink" href="/toolkit/docs/6/6.0/Usage_Stats.html" target="_top">Usage Stats</a> section.
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"> Start time of the transfer </li><li class="listitem"> End time of the transfer </li><li class="listitem"> Version string of the server </li><li class="listitem"> TCP buffer size used for the transfer </li><li class="listitem"> Block size used for the transfer </li><li class="listitem"> Total number of bytes transferred </li><li class="listitem"> Number of parallel streams used for the transfer </li><li class="listitem"> Number of stripes used for the transfer </li><li class="listitem"> Type of transfer (STOR, RETR, LIST) </li><li class="listitem"> FTP response code -- Success or failure of the transfer </li></ul></div><p>
</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../../docbook/xsl/docbook-xsl-1.78.1/images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>The client (globus-url-copy) does NOT send any data.  It is the <span class="emphasis"><em>servers</em></span> that send the usage statistics.</p></td></tr></table></div><p> 
We have made a concerted effort to collect only data that is not too intrusive 
or private and yet still provides us with information that will help improve 
and gauge the usage of the GridFTP server.  Nevertheless, if you wish to disable 
this feature for GridFTP only, use the <code class="option">-disable-usage-stats</code> option of <a href="../../gridftp/admin/#globus-gridftp-server" class="olink">globus-gridftp-server</a>.  Note that you can disable transmission
of usage statistics globally for all C components by setting 
"GLOBUS_USAGE_OPTOUT=1" in your environment.  
</p><p>Also, please see our <a class="ulink" href="/toolkit/docs/latest-stable/Usage_Stats.html" target="_top">policy statement</a> on
  the collection of usage statistics. </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="idm168723635840"></a>2. Execution Management Usage Statistics</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="gram5-usage-stats"></a>2.1. GRAM5-specific usage statistics</h3></div></div></div><p>
The following usage statistics are sent by default in a UDP packet (in addition
to the GRAM component code, packet version, timestamp, and source IP address)
at the end of each job.
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">Job Manager Session ID</li><li class="listitem">dryrun used</li><li class="listitem">RSL Host Count</li><li class="listitem">Timestamp when job hit <code class="literal">GLOBUS_GRAM_PROTOCOL_JOB_STATE_UNSUBMITTED</code></li><li class="listitem">Timestamp when job hit <code class="literal">GLOBUS_GRAM_PROTOCOL_JOB_STATE_FILE_STAGE_IN</code></li><li class="listitem">Timestamp when job hit <code class="literal">GLOBUS_GRAM_PROTOCOL_JOB_STATE_PENDING</code></li><li class="listitem">Timestamp when job hit <code class="literal">GLOBUS_GRAM_PROTOCOL_JOB_STATE_ACTIVE</code></li><li class="listitem">Timestamp when job hit <code class="literal">GLOBUS_GRAM_PROTOCOL_JOB_STATE_FAILED</code></li><li class="listitem">Timestamp when job hit <code class="literal">GLOBUS_GRAM_PROTOCOL_JOB_STATE_FILE_STAGE_OUT</code></li><li class="listitem">Timestamp when job hit <code class="literal">GLOBUS_GRAM_PROTOCOL_JOB_STATE_DONE</code></li><li class="listitem">Job Failure Code</li><li class="listitem">Number of times status is called</li><li class="listitem">Number of times register is called</li><li class="listitem">Number of times signal is called</li><li class="listitem">Number of times refresh is called</li><li class="listitem">Number of files named in file_clean_up RSL</li><li class="listitem">Number of files being staged in (including executable, stdin) from http servers</li><li class="listitem">Number of files being staged in (including executable, stdin) from https servers</li><li class="listitem">Number of files being staged in (including executable, stdin) from ftp servers</li><li class="listitem">Number of files being staged in (including executable, stdin) from gsiftp servers</li><li class="listitem">Number of files being staged into the GASS cache from http servers</li><li class="listitem">Number of files being staged into the GASS cache from https servers</li><li class="listitem">Number of files being staged into the GASS cache from ftp servers</li><li class="listitem">Number of files being staged into the GASS cache from gsiftp servers</li><li class="listitem">Number of files being staged out (including stdout and stderr) to http servers</li><li class="listitem">Number of files being staged out (including stdout and stderr) to https servers</li><li class="listitem">Number of files being staged out (including stdout and stderr) to ftp servers</li><li class="listitem">Number of files being staged out (including stdout and stderr) to gsiftp servers</li><li class="listitem">Bitmask of used RSL attributes (values are 2^id from the gram5_rsl_attributes table)</li><li class="listitem">Number of times unregister is called</li><li class="listitem">Value of the <code class="literal">count</code> RSL attribute</li><li class="listitem">Comma-separated list of string names of other RSL attributes not in the set defined in <code class="filename">globus-gram-job-manager.rvf</code></li><li class="listitem">Job type string</li><li class="listitem">Number of times the job was restarted</li><li class="listitem">Total number of state callbacks sent to all clients for this job</li></ul></div><p>
</p><p>The following information can be sent as well in a job status packet but
it is not sent unless explicitly enabled by the system administrator:

</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">Value of the executable RSL attribute</li><li class="listitem">Value of the arguments RSL attribute</li><li class="listitem">IP adddress and port of the client that submitted the job</li><li class="listitem">User DN of the client that submitted the job</li></ul></div><p>
</p><p>In addition to job-related status, the job manager sends information
periodically about its execution status.  The following information is sent by
default in a UDP packet (in addition to the GRAM component code, packet
version, timestamp, and source IP address) at job manager start and every 1
hour during the job manager lifetime:

</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">Job Manager Start Time</li><li class="listitem">Job Manager Session ID</li><li class="listitem">Job Manager Status Time</li><li class="listitem">Job Manager Version</li><li class="listitem">LRM</li><li class="listitem">Poll used</li><li class="listitem">Audit used</li><li class="listitem">Number of restarted jobs</li><li class="listitem">Total number of jobs</li><li class="listitem">Total number of failed jobs</li><li class="listitem">Total number of canceled jobs</li><li class="listitem">Total number of completed jobs</li><li class="listitem">Total number of dry-run jobs</li><li class="listitem">Peak number of concurrently managed jobs</li><li class="listitem">Number of jobs currently being managed</li><li class="listitem">Number of jobs currently in the UNSUBMITTED state</li><li class="listitem">Number of jobs currently in the STAGE_IN state</li><li class="listitem">Number of jobs currently in the PENDING state</li><li class="listitem">Number of jobs currently in the ACTIVE state</li><li class="listitem">Number of jobs currently in the STAGE_OUT state</li><li class="listitem">Number of jobs currently in the FAILED state</li><li class="listitem">Number of jobs currently in the DONE state</li></ul></div><p>
</p><p>
    Also, please see our <a class="ulink" href="/toolkit/docs/latest-stable/Usage_Stats.html" target="_top">policy statement</a>
on the collection of usage statistics.
</p></div></div></div><div class="glossary"><div class="titlepage"><div><div><h1 class="title"><a name="glossary-gtadminappendix"></a>Glossary</h1></div></div></div><div class="glossdiv"><h3 class="title">C</h3><dl><dt><a name="ca-cert"></a><span class="glossterm">CA Certificate</span></dt><dd class="glossdef"><p> The CA's certificate. This certificate is used to verify signature on
                              certificates issued by the CA. GSI typically stores a given CA
                              certificate in
                                          <code class="filename">/etc/grid-security/certificates/<em class="replaceable"><code>&lt;hash&gt;</code></em>.0</code>,
                              where &lt;hash&gt; is the hash code of the CA identity.</p></dd><dt><a name="cert"></a><span class="glossterm">certificate</span></dt><dd class="glossdef"><p> A public key plus information about the certificate owner bound
                              together by the digital signature of a CA. In the case of a CA
                              certificate, the certificate is self signed, i.e. it was signed using
                              its own private key.</p></dd><dt><a name="client"></a><span class="glossterm">client</span></dt><dd class="glossdef"><p>A process that sends commands and receives responses. Note that in GridFTP, the client may or may not take part in the actual movement of data.
                        </p></dd></dl></div><div class="glossdiv"><h3 class="title">G</h3><dl><dt><a name="gaa-config"></a><span class="glossterm">GAA configuration file</span></dt><dd class="glossdef"><p> A file that configures the Generic Authorization and Access control
                                    <acronym class="acronym">GAA</acronym> libraries. When using GSI, this file is typically found in
                                    <code class="filename">/etc/grid-security/gsi-gaa.conf</code>.</p></dd><dt><a name="grid-map-file"></a><span class="glossterm">grid map file</span></dt><dd class="glossdef"><p> A file containing entries mapping certificate subjects to local user
                              names. This file can also serve as a access control list for GSI
                              enabled services and is typically found in
                                    <code class="filename">/etc/grid-security/grid-mapfile</code>. For more
                              information see the Gridmap section <a href="../../gsic/admin/#setting-up-gridmap" class="olink">here</a>.</p></dd><dt><a name="grid-sec-dir"></a><span class="glossterm">grid security directory</span></dt><dd class="glossdef"><p> The directory containing GSI configuration files such as the GSI
                              authorization callout configuration and GAA configuration files.
                              Typically this directory is <code class="filename">/etc/grid-security</code>.
                              For more information see <a href="../../gsic/pi/#gsic-env-gridsecurity" class="olink">this</a>.</p></dd><dt><a name="gsi-authz-config"></a><span class="glossterm">GSI authorization callout configuration file</span></dt><dd class="glossdef"><p> A file that configures authorization callouts to be used for mapping
                              and authorization in GSI enabled services. When using GSI this file is
                              typically found in
                              <code class="filename">/etc/grid-security/gsi-authz.conf</code>.</p></dd></dl></div><div class="glossdiv"><h3 class="title">H</h3><dl><dt><a name="host-cert"></a><span class="glossterm">host certificate</span></dt><dd class="glossdef"><p> An <a class="ulink" href="#EEC" target="_top">EEC</a> belonging to a host. When using GSI this certificate is
                              typically stored in
                              <code class="filename">/etc/grid-security/hostcert.pem</code>. For more
                              information on possible host certificate locations see the <a href="../../gsic/developer/#gsic-env-credentials" class="olink">GSI C Developer's Guide</a>. </p></dd><dt><a name="host-cred"></a><span class="glossterm">host credentials</span></dt><dd class="glossdef"><p> The combination of a host certificate and its corresponding private
                              key.</p></dd></dl></div><div class="glossdiv"><h3 class="title">P</h3><dl><dt><a name="priv-key"></a><span class="glossterm">private key</span></dt><dd class="glossdef"><p>The private part of a key pair. Depending on the type of certificate
                              the key corresponds to it may typically be found in
                                    <code class="filename">$HOME/.globus/userkey.pem</code> (for user
                              certificates), <code class="filename">/etc/grid-security/hostkey.pem</code>
                              (for host certificates) or
                                          <code class="filename">/etc/grid-security/<em class="replaceable"><code>&lt;service&gt;</code></em>/<em class="replaceable"><code>&lt;service&gt;</code></em>key.pem</code>
                              (for service certificates).</p><p>For more information on possible private key locations see
                              <a href="../../gsic/pi/#gsic-env-credentials" class="olink">this</a>.</p></dd><dt><a name="proxy-cert"></a><span class="glossterm">proxy certificate</span></dt><dd class="glossdef"><p> A short lived certificate issued using a EEC. A proxy certificate
                              typically has the same effective subject as the EEC that issued it and
                              can thus be used in its place. GSI uses proxy certificates for single
                              sign on and delegation of rights to other entities.</p><p>For more information about types of proxy certificates and their
                              compatibility in different versions of GT, see <a class="ulink" href="http://dev.globus.org/wiki/Security/ProxyCertTypes" target="_top">http://dev.globus.org/wiki/Security/ProxyCertTypes</a>.</p></dd><dt><a name="proxy-cred"></a><span class="glossterm">proxy credentials</span></dt><dd class="glossdef"><p> The combination of a proxy certificate and its corresponding private
                              key. GSI typically stores proxy credentials in
                                          <code class="filename">/tmp/x509up_u<em class="replaceable"><code>&lt;uid&gt;</code></em>
                              </code>, where &lt;uid&gt; is the user id of the proxy
                              owner.</p></dd></dl></div><div class="glossdiv"><h3 class="title">S</h3><dl><dt><a name="server"></a><span class="glossterm">server</span></dt><dd class="glossdef"><p>A process that receives commands and sends responses to
                              those commands. Since it is a server or service, and it receives
                              commands, it must be listening on a port somewhere to receive the
                              commands. Both FTP and GridFTP have IANA registered ports. For FTP it
                              is port 21, for GridFTP it is port 2811. This is normally handled via
                              inetd or xinetd on Unix variants. However, it is also possible to
                              implement a daemon that listens on the specified port. This is
                              described more fully in in the Architecture section of the GridFTP
                              Developer's Guide.</p></dd><dt><a name="svc-cred"></a><span class="glossterm">service credentials</span></dt><dd class="glossdef"><p> The combination of a service certificate and its corresponding
                              private key.</p></dd></dl></div><div class="glossdiv"><h3 class="title">U</h3><dl><dt><a name="user-cred"></a><span class="glossterm">user credentials</span></dt><dd class="glossdef"><p> The combination of a user certificate and its corresponding private
                              key.</p></dd></dl></div></div></div>
