<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- source.template -->
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
      <title>Code Coverage for globus_gram_job_manager_state_file.c</title>
      <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/>
      <link href="coverage.css" rel="stylesheet" type="text/css" />
  </head>

  <body>
      <table class="srcView">
      
        <tr>
          <td class="lineCount">1</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">/*</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">2</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * Copyright 1999-2009 University of Chicago</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">3</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * </span></td>
        </tr>
      
        <tr>
          <td class="lineCount">4</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">5</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * you may not use this file except in compliance with the License.</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">6</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * You may obtain a copy of the License at</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">7</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * </span></td>
        </tr>
      
        <tr>
          <td class="lineCount">8</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * http://www.apache.org/licenses/LICENSE-2.0</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">9</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * </span></td>
        </tr>
      
        <tr>
          <td class="lineCount">10</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * Unless required by applicable law or agreed to in writing, software</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">11</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">12</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">13</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * See the License for the specific language governing permissions and</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">14</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * limitations under the License.</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">15</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> */</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">16</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">17</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">#include &quot;globus_gram_job_manager.h&quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">18</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">19</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">#include &lt;string.h&gt;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">20</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">21</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">22</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">/**</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">23</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * Compute the name of the state file to use for this job request.</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">24</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> *</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">25</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * Sets the value of the @a job_state_file member of the request structure.</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">26</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> *</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">27</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * @param request</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">28</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> *     The request to create the state file for.</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">29</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * @param state_file</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">30</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> *     Pointer to set to the state file string. The caller is responsible for</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">31</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> *     freeing this.</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">32</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * @param state_lock_file</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">33</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> *     Pointer to set to the state file lockfile string. The caller is</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">34</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> *     responsible for freeing this.</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">35</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> *</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">36</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * @retval GLOBUS_SUCCESS</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">37</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> *     Success.</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">38</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * @retval GLOBUS_GRAM_PROTOCOL_ERROR_MALLOC_FAILED</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">39</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> *     Malloc failed.</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">40</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> */</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">41</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">int</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">42</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">globus_gram_job_manager_state_file_set(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">43</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    globus_gram_jobmanager_request_t *  request,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">44</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    char **                             state_file,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">45</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    char **                             state_lock_file)</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">46</td>
          <td class="coverageCount">167</td>
          <td class="srcCell"><span class="srcLine">{</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">47</td>
          <td class="coverageCount">167</td>
          <td class="srcCell"><span class="srcLine">    int                                 rc = GLOBUS_SUCCESS;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">48</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">49</td>
          <td class="coverageCount">167</td>
          <td class="srcCell"><span class="srcLine">    if(request-&gt;config-&gt;job_state_file_dir == GLOBUS_NULL)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">50</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">51</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        *state_file = globus_common_create_string(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">52</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;%s/tmp/gram_job_state/%s.%s.%s&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">53</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                request-&gt;config-&gt;globus_location,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">54</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                request-&gt;config-&gt;logname,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">55</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                request-&gt;config-&gt;hostname,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">56</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                request-&gt;uniq_id);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">57</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">58</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    else</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">59</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">60</td>
          <td class="coverageCount">167</td>
          <td class="srcCell"><span class="srcLine">        *state_file = globus_common_create_string(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">61</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;%s/job.%s.%s&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">62</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                request-&gt;config-&gt;job_state_file_dir,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">63</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                request-&gt;config-&gt;hostname,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">64</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                request-&gt;uniq_id);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">65</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">66</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">67</td>
          <td class="coverageCount">167</td>
          <td class="srcCell"><span class="srcLine">    if (*state_file == NULL)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">68</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">69</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        rc = GLOBUS_GRAM_PROTOCOL_ERROR_MALLOC_FAILED;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">70</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">71</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        goto create_state_file_failed;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">72</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">73</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">74</td>
          <td class="coverageCount">167</td>
          <td class="srcCell"><span class="srcLine">    *state_lock_file = globus_common_create_string(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">75</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;%s.lock&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">76</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            *state_file);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">77</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">78</td>
          <td class="coverageCount">167</td>
          <td class="srcCell"><span class="srcLine">    if (*state_lock_file == NULL)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">79</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">80</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        rc = GLOBUS_GRAM_PROTOCOL_ERROR_MALLOC_FAILED;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">81</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">82</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        goto create_state_lock_file_failed;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">83</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">84</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">85</td>
          <td class="coverageCount">167</td>
          <td class="srcCell"><span class="srcLine">    if (rc != GLOBUS_SUCCESS)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">86</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">87</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">create_state_lock_file_failed:</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">88</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        free(*state_file);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">89</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        *state_file = NULL;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">90</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">91</td>
          <td class="coverageCount">167</td>
          <td class="srcCell"><span class="srcLine">create_state_file_failed:</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">92</td>
          <td class="coverageCount">167</td>
          <td class="srcCell"><span class="srcLine">    return rc;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">93</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">}</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">94</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">/* globus_gram_job_manager_state_file_set() */</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">95</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">96</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">int</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">97</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">globus_l_gram_state_file_create_lock(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">98</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    globus_gram_jobmanager_request_t *  request)</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">99</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">{</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">100</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">    int                                 rc = GLOBUS_SUCCESS;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">101</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">102</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">    globus_gram_job_manager_request_log(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">103</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">104</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            GLOBUS_GRAM_JOB_MANAGER_LOG_TRACE,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">105</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;event=gram.state_file.create_lock.start &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">106</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;level=TRACE &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">107</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;gramid=%s &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">108</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;path=\&quot;%s\&quot; &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">109</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;\n&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">110</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request-&gt;job_contact_path,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">111</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request-&gt;job_state_lock_file);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">112</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">113</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">    if (request-&gt;manager-&gt;lock_fd == -1)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">114</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">115</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        /* We are not in single job manager mode */</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">116</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        request-&gt;job_state_lock_fd = open( request-&gt;job_state_lock_file,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">117</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                                           O_RDWR | O_CREAT,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">118</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                                           S_IRUSR | S_IWUSR );</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">119</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        if ( request-&gt;job_state_lock_fd &lt; 0 )</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">120</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">121</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            rc = GLOBUS_GRAM_PROTOCOL_ERROR_LOCKING_STATE_LOCK_FILE;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">122</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">123</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            globus_gram_job_manager_request_log(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">124</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    request,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">125</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    GLOBUS_GRAM_JOB_MANAGER_LOG_ERROR,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">126</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;event=gram.state_file.create_lock.end &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">127</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;level=ERROR &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">128</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;gramid=%s &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">129</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;path=\&quot;%s\&quot; &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">130</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;status=%d &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">131</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;msg=\&quot;%s\&quot; &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">132</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;errno=%d &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">133</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;reason=\&quot;%s\&quot; &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">134</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;\n&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">135</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    request-&gt;job_contact_path,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">136</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    request-&gt;job_state_lock_file,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">137</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    -rc,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">138</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;Error opening lock file&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">139</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    errno,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">140</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    strerror(errno));</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">141</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">142</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            goto open_lock_file_failed;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">143</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">144</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">145</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        rc = globus_gram_job_manager_file_lock(request-&gt;job_state_lock_fd);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">146</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        if ( rc != GLOBUS_SUCCESS )</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">147</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">148</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            globus_gram_job_manager_request_log(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">149</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    request,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">150</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    GLOBUS_GRAM_JOB_MANAGER_LOG_ERROR,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">151</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;event=gram.state_file.create_lock.end &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">152</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;level=ERROR &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">153</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;gramid=%s &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">154</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;path=\&quot;%s\&quot; &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">155</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;status=%d &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">156</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;msg=\&quot;%s\&quot; &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">157</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;errno=%d &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">158</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;reason=\&quot;%s\&quot; &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">159</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;\n&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">160</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    request-&gt;job_contact_path,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">161</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    request-&gt;job_state_lock_file,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">162</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    -rc,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">163</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;Error locking state file&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">164</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    errno,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">165</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    strerror(errno));</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">166</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            close(request-&gt;job_state_lock_fd);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">167</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            remove(request-&gt;job_state_lock_file);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">168</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            goto lock_file_failed;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">169</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">170</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">171</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    else</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">172</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">173</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">        (void) unlink(request-&gt;job_state_lock_file);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">174</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">        rc = symlink(request-&gt;manager-&gt;lock_path, request-&gt;job_state_lock_file);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">175</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">        if (rc != GLOBUS_SUCCESS)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">176</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">177</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            rc = GLOBUS_GRAM_PROTOCOL_ERROR_LOCKING_STATE_LOCK_FILE;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">178</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">179</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            globus_gram_job_manager_request_log(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">180</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    request,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">181</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    GLOBUS_GRAM_JOB_MANAGER_LOG_ERROR,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">182</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;event=gram.state_file.create_lock.end &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">183</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;level=ERROR &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">184</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;gramid=%s &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">185</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;path=\&quot;%s\&quot; &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">186</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;manager_lock_path=%s &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">187</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;status=%d &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">188</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;msg=\&quot;%s\&quot; &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">189</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;errno=%d &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">190</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;reason=\&quot;%s\&quot; &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">191</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;\n&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">192</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    request-&gt;job_contact_path,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">193</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    request-&gt;job_state_lock_file,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">194</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    request-&gt;manager-&gt;lock_path,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">195</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    -rc,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">196</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;Error symlinking lock file&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">197</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    errno,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">198</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    strerror(errno));</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">199</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            goto link_failed;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">200</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">201</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">202</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">203</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">open_lock_file_failed:</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">204</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">lock_file_failed:</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">205</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">link_failed:</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">206</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">    if (rc == GLOBUS_SUCCESS)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">207</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">208</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">        globus_gram_job_manager_request_log(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">209</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                request,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">210</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                GLOBUS_GRAM_JOB_MANAGER_LOG_TRACE,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">211</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;event=gram.state_file.create_lock.end &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">212</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;level=TRACE &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">213</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;gramid=%s &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">214</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;path=\&quot;%s\&quot; &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">215</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;status=%d &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">216</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;\n&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">217</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                request-&gt;job_contact_path,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">218</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                request-&gt;job_state_lock_file,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">219</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                rc);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">220</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">221</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">    return rc;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">222</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">}</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">223</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">/* globus_gram_job_manager_state_file_create_lock() */</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">224</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">225</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">int</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">226</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">globus_gram_job_manager_state_file_write(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">227</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    globus_gram_jobmanager_request_t *  request)</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">228</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">{</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">229</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">    int                                 rc = GLOBUS_SUCCESS;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">230</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">    FILE *                              fp = NULL;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">231</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">    char                                tmp_file[1024] = { 0 };</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">232</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">233</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">    globus_gram_job_manager_request_log(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">234</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">235</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            GLOBUS_GRAM_JOB_MANAGER_LOG_TRACE,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">236</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;event=gram.write_state_file.start &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">237</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;level=TRACE &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">238</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;gramid=%s &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">239</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;path=\&quot;%s\&quot; &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">240</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;\n&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">241</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request-&gt;job_contact_path,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">242</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request-&gt;job_state_file);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">243</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">244</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">    rc = globus_l_gram_state_file_create_lock(request);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">245</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">    if (rc != GLOBUS_SUCCESS)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">246</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">247</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        globus_gram_job_manager_request_log(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">248</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                request,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">249</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                GLOBUS_GRAM_JOB_MANAGER_LOG_ERROR,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">250</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;event=gram.write_state_file.end &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">251</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;level=ERROR &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">252</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;gramid=%s &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">253</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;path=\&quot;%s\&quot; &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">254</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;msg=\&quot;%s\&quot; &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">255</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;\n&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">256</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                request-&gt;job_contact_path,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">257</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                request-&gt;job_state_file,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">258</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;Error creating lock file&quot;);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">259</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        goto error_exit;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">260</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">261</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">262</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    /*</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">263</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">     * We want the file update to be atomic, so create a new temp file,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">264</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">     * write the new information, close the new file, then rename the new</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">265</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">     * file on top of the old one. The rename is the atomic update action.</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">266</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">     */</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">267</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">    strcpy( tmp_file, request-&gt;job_state_file );</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">268</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">    strcat( tmp_file, &quot;.tmp&quot; );</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">269</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">270</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">    fp = fopen( tmp_file, &quot;w&quot; );</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">271</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">    if ( fp == NULL )</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">272</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">273</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        rc = GLOBUS_GRAM_PROTOCOL_ERROR_WRITING_STATE_FILE;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">274</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">275</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        globus_gram_job_manager_request_log(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">276</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                request,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">277</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                GLOBUS_GRAM_JOB_MANAGER_LOG_ERROR,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">278</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;event=gram.write_state_file.end &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">279</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;level=ERROR &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">280</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;gramid=%s &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">281</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;path=\&quot;%s\&quot; &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">282</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;status=%d &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">283</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;msg=\&quot;%s\&quot; &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">284</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;errno=%d &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">285</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;reason=\&quot;%s\&quot;\n&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">286</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                request-&gt;job_contact_path,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">287</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                tmp_file,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">288</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                -rc,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">289</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;Error opening state file&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">290</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                errno,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">291</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                strerror(errno));</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">292</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">293</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        return rc;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">294</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">295</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">296</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">    rc = fprintf(fp, &quot;%s\n&quot;, request-&gt;job_contact ? request-&gt;job_contact : &quot; &quot;);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">297</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">    if (rc &lt; 0)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">298</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">299</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        rc = GLOBUS_GRAM_PROTOCOL_ERROR_WRITING_STATE_FILE;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">300</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">301</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        goto error_exit;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">302</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">303</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">    rc = fprintf(fp, &quot;%4d\n&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">304</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            (request-&gt;jobmanager_state == GLOBUS_GRAM_JOB_MANAGER_STATE_STOP)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">305</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    ? (int) request-&gt;restart_state</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">306</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    : (int) request-&gt;jobmanager_state);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">307</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">    if (rc &lt; 0)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">308</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">309</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        goto error_exit;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">310</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">311</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">    rc = fprintf(fp, &quot;%4d\n&quot;, (int) request-&gt;status);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">312</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">    if (rc &lt; 0)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">313</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">314</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        goto error_exit;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">315</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">316</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">    rc = fprintf(fp, &quot;%4d\n&quot;, (int) request-&gt;expected_terminal_state);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">317</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">    if (rc &lt; 0)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">318</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">319</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        goto error_exit;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">320</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">321</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">322</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">    rc = fprintf(fp, &quot;%4d\n&quot;, request-&gt;failure_code);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">323</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">    if (rc &lt; 0)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">324</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">325</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        goto error_exit;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">326</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">327</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">    rc = fprintf(fp, &quot;%s\n&quot;, request-&gt;job_id_string ? request-&gt;job_id_string : &quot; &quot;);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">328</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">    if (rc &lt; 0)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">329</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">330</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        goto error_exit;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">331</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">332</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">    rc = fprintf(fp, &quot;%s\n&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">333</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                request-&gt;original_job_id_string</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">334</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                ? request-&gt;original_job_id_string</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">335</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                : &quot;&quot;);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">336</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">    if (rc &lt; 0)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">337</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">338</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        goto error_exit;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">339</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">340</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">341</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">    rc = fprintf(fp, &quot;%s\n&quot;, request-&gt;rsl_spec);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">342</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">    if (rc &lt; 0)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">343</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">344</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        goto error_exit;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">345</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">346</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">    rc = fprintf(fp, &quot;%s\n&quot;, request-&gt;cache_tag);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">347</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">    if (rc &lt; 0)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">348</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">349</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        goto error_exit;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">350</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">351</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">    rc = fprintf(fp, &quot;%s\n&quot;, request-&gt;config-&gt;jobmanager_type);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">352</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">    if (rc &lt; 0)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">353</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">354</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        goto error_exit;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">355</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">356</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">    rc = fprintf(fp, &quot;%s\n&quot;, request-&gt;config-&gt;service_tag);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">357</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">    if (rc &lt; 0)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">358</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">359</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        goto error_exit;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">360</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">361</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">    rc = fprintf(fp, &quot;%d\n&quot;, request-&gt;two_phase_commit);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">362</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">    if (rc &lt; 0)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">363</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">364</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        goto error_exit;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">365</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">366</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">    rc = fprintf(fp, &quot;%s\n&quot;, request-&gt;scratchdir ? request-&gt;scratchdir : &quot; &quot;);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">367</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">    if (rc &lt; 0)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">368</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">369</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        goto error_exit;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">370</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">371</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">    rc = fprintf(fp, &quot;%lu\n&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">372</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                 (unsigned long) request-&gt;seg_last_timestamp);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">373</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">    if (rc &lt; 0)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">374</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">375</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        goto error_exit;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">376</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">377</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">    rc = fprintf(fp, &quot;%lu\n&quot;, (unsigned long) request-&gt;creation_time);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">378</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">    if (rc &lt; 0)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">379</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">380</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        goto error_exit;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">381</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">382</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">    rc = fprintf(fp, &quot;%lu\n&quot;, (unsigned long) request-&gt;queued_time);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">383</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">    if (rc &lt; 0)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">384</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">385</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        goto error_exit;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">386</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">387</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">    rc = globus_gram_job_manager_staging_write_state(request, fp);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">388</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">    if (rc &lt; 0)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">389</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">390</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        goto error_exit;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">391</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">392</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">    rc = globus_gram_job_manager_write_callback_contacts(request, fp);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">393</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">    if (rc &lt; 0)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">394</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">395</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        goto error_exit;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">396</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">397</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">    rc = fprintf(fp, &quot;%s\n&quot;, request-&gt;gateway_user ? request-&gt;gateway_user : &quot; &quot;);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">398</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">    if (rc &lt; 0)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">399</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">400</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        goto error_exit;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">401</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">402</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">403</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">    rc = fprintf(fp, &quot;%d\n&quot;, request-&gt;exit_code);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">404</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">    if (rc &lt; 0)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">405</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">406</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        goto error_exit;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">407</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">408</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">    rc = fprintf(fp,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">409</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;%ld.%09ld %ld.%09ld %ld.%09ld &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">410</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;%ld.%09ld %ld.%09ld %ld.%09ld %ld.%09ld &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">411</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;%d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d\n&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">412</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request-&gt;job_stats.unsubmitted_timestamp.tv_sec,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">413</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request-&gt;job_stats.unsubmitted_timestamp.tv_nsec,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">414</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request-&gt;job_stats.file_stage_in_timestamp.tv_sec,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">415</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request-&gt;job_stats.file_stage_in_timestamp.tv_nsec,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">416</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request-&gt;job_stats.pending_timestamp.tv_sec,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">417</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request-&gt;job_stats.pending_timestamp.tv_nsec,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">418</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request-&gt;job_stats.active_timestamp.tv_sec,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">419</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request-&gt;job_stats.active_timestamp.tv_nsec,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">420</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request-&gt;job_stats.failed_timestamp.tv_sec,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">421</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request-&gt;job_stats.failed_timestamp.tv_nsec,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">422</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request-&gt;job_stats.file_stage_out_timestamp.tv_sec,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">423</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request-&gt;job_stats.file_stage_out_timestamp.tv_nsec,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">424</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request-&gt;job_stats.done_timestamp.tv_sec,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">425</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request-&gt;job_stats.done_timestamp.tv_nsec,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">426</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request-&gt;job_stats.restart_count,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">427</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request-&gt;job_stats.callback_count,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">428</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request-&gt;job_stats.status_count,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">429</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request-&gt;job_stats.register_count,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">430</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request-&gt;job_stats.unregister_count,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">431</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request-&gt;job_stats.signal_count,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">432</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request-&gt;job_stats.refresh_count,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">433</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request-&gt;job_stats.file_clean_up_count,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">434</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request-&gt;job_stats.file_stage_in_http_count,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">435</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request-&gt;job_stats.file_stage_in_https_count,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">436</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request-&gt;job_stats.file_stage_in_ftp_count,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">437</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request-&gt;job_stats.file_stage_in_gsiftp_count,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">438</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request-&gt;job_stats.file_stage_in_shared_http_count,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">439</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request-&gt;job_stats.file_stage_in_shared_https_count,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">440</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request-&gt;job_stats.file_stage_in_shared_ftp_count,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">441</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request-&gt;job_stats.file_stage_in_shared_gsiftp_count,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">442</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request-&gt;job_stats.file_stage_out_http_count,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">443</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request-&gt;job_stats.file_stage_out_https_count,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">444</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request-&gt;job_stats.file_stage_out_ftp_count,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">445</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request-&gt;job_stats.file_stage_out_gsiftp_count);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">446</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">    if (rc &lt; 0)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">447</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">448</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        goto error_exit;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">449</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">450</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">    rc = fprintf(fp,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">451</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;%s\n%s\n&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">452</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request-&gt;job_stats.client_address</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">453</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                ?  request-&gt;job_stats.client_address</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">454</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                : &quot; &quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">455</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request-&gt;job_stats.user_dn</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">456</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                ? request-&gt;job_stats.user_dn</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">457</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                : &quot; &quot;);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">458</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">    if (rc &lt; 0)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">459</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">460</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        goto error_exit;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">461</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">462</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">463</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">464</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    /*</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">465</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">     * On some filsystems, write + rename is *not* atomic, so we explicitly</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">466</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">     * flush to disk here. fdatasync might be better, but only on systems with</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">467</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">     * POSIX realtime extensions</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">468</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">     */</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">469</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">    fflush(fp);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">470</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">    fsync(fileno(fp));</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">471</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">    fclose( fp );</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">472</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">    fp = NULL;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">473</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">474</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">    rc = rename( tmp_file, request-&gt;job_state_file );</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">475</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">    if (rc != 0)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">476</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">477</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        rc = GLOBUS_FAILURE;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">478</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">479</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        globus_gram_job_manager_request_log(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">480</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                request,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">481</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                GLOBUS_GRAM_JOB_MANAGER_LOG_ERROR,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">482</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;event=gram.write_state_file.end &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">483</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;level=ERROR &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">484</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;gramid=%s &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">485</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;path=%s &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">486</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;status=-1 &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">487</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;msg=\&quot;%s\&quot; &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">488</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;errno=%d &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">489</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;reason=\&quot;%s\&quot; &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">490</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;\n&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">491</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                request-&gt;job_contact_path,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">492</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                request-&gt;job_state_file,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">493</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;Error renaming temporary state file&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">494</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                errno,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">495</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                strerror(errno));</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">496</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        goto rename_failed;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">497</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">498</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">499</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">    globus_gram_job_manager_request_log(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">500</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">501</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            GLOBUS_GRAM_JOB_MANAGER_LOG_TRACE,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">502</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;event=gram.write_state_file.end &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">503</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;level=TRACE &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">504</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;gramid=%s &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">505</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;path=%s &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">506</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;status=0 &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">507</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;\n&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">508</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request-&gt;job_contact_path,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">509</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request-&gt;job_state_file);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">510</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">511</td>
          <td class="coverageCount">853</td>
          <td class="srcCell"><span class="srcLine">    return GLOBUS_SUCCESS;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">512</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">513</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">error_exit:</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">514</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">    globus_gram_job_manager_request_log(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">515</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">516</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            GLOBUS_GRAM_JOB_MANAGER_LOG_ERROR,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">517</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;event=gram.write_state_file.end &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">518</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;level=ERROR &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">519</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;gramid=%s &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">520</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;path=\&quot;%s\&quot; &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">521</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;status=%d &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">522</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;msg=\&quot;%s\&quot;\n&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">523</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request-&gt;job_contact_path,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">524</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            tmp_file,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">525</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            rc,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">526</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;Error writing to state file&quot;);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">527</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">528</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">    if (fp)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">529</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">530</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        fclose(fp);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">531</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">532</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">rename_failed:</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">533</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">    if (tmp_file[0] != 0)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">534</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">535</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        remove(tmp_file);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">536</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">537</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">538</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">    return GLOBUS_FAILURE;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">539</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">}</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">540</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">/* globus_gram_job_manager_state_file_write() */</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">541</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">542</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">int</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">543</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">globus_gram_job_manager_state_file_read(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">544</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    globus_gram_jobmanager_request_t *  request)</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">545</td>
          <td class="coverageCount">10</td>
          <td class="srcCell"><span class="srcLine">{</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">546</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    FILE *                              fp;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">547</td>
          <td class="coverageCount">10</td>
          <td class="srcCell"><span class="srcLine">    char *                              buffer = NULL;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">548</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    size_t                              file_len;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">549</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    struct stat                         statbuf;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">550</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    int                                 rc;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">551</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    int                                 i;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">552</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    unsigned long                       tmp_timestamp;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">553</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    struct stat                         single_lock_stat, job_lock_stat;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">554</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">555</td>
          <td class="coverageCount">10</td>
          <td class="srcCell"><span class="srcLine">    request-&gt;old_job_contact = NULL;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">556</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">557</td>
          <td class="coverageCount">10</td>
          <td class="srcCell"><span class="srcLine">    globus_gram_job_manager_request_log(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">558</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">559</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            GLOBUS_GRAM_JOB_MANAGER_LOG_TRACE,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">560</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;event=gram.state_file_read.start &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">561</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;level=TRACE &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">562</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;gramid=%s &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">563</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;path=%s &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">564</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;\n&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">565</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request-&gt;job_contact_path,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">566</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request-&gt;job_state_file);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">567</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">568</td>
          <td class="coverageCount">10</td>
          <td class="srcCell"><span class="srcLine">    if (stat(request-&gt;job_state_file, &amp;statbuf) != 0)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">569</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">570</td>
          <td class="coverageCount">3</td>
          <td class="srcCell"><span class="srcLine">        rc = GLOBUS_GRAM_PROTOCOL_ERROR_NO_STATE_FILE;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">571</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">572</td>
          <td class="coverageCount">3</td>
          <td class="srcCell"><span class="srcLine">        globus_gram_job_manager_request_log(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">573</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                request,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">574</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                GLOBUS_GRAM_JOB_MANAGER_LOG_ERROR,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">575</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;event=gram.state_file_read.end &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">576</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;level=ERROR &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">577</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;gramid=%s &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">578</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;path=%s &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">579</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;msg=\&quot;%s\&quot; &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">580</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;status=%d &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">581</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;errno=%d &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">582</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;reason=\&quot;%s\&quot; &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">583</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;\n&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">584</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                request-&gt;job_contact_path,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">585</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                request-&gt;job_state_file,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">586</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;Error checking file status&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">587</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                -rc,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">588</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                errno,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">589</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                strerror(errno));</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">590</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">591</td>
          <td class="coverageCount">3</td>
          <td class="srcCell"><span class="srcLine">        return rc;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">592</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">593</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    file_len = (size_t) statbuf.st_size;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">594</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    buffer = malloc(file_len+1);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">595</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    if (buffer == NULL)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">596</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">597</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        rc = GLOBUS_GRAM_PROTOCOL_ERROR_MALLOC_FAILED;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">598</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">599</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        globus_gram_job_manager_request_log(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">600</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                request,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">601</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                GLOBUS_GRAM_JOB_MANAGER_LOG_ERROR,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">602</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;event=gram.state_file_read.end &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">603</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;level=ERROR &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">604</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;gramid=%s &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">605</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;path=%s &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">606</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;msg=\&quot;%s\&quot; &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">607</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;status=%d &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">608</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;errno=%d &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">609</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;reason=\&quot;%s\&quot; &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">610</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;\n&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">611</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                request-&gt;job_contact_path,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">612</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                request-&gt;job_state_file,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">613</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;Malloc failed&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">614</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                -rc,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">615</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                errno,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">616</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                strerror(errno));</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">617</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        goto exit;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">618</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">619</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">620</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    /* Try to obtain a lock on the state lock file */</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">621</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    if ( request-&gt;job_state_lock_file != NULL &amp;&amp;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">622</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">         request-&gt;job_state_lock_fd &lt; 0)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">623</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">624</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">        rc = fstat(request-&gt;manager-&gt;lock_fd, &amp;single_lock_stat);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">625</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">        if (rc &lt; 0)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">626</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">627</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            globus_gram_job_manager_request_log(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">628</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    request,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">629</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    GLOBUS_GRAM_JOB_MANAGER_LOG_DEBUG,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">630</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;event=gram.state_file_read.info &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">631</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;level=DEBUG &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">632</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;gramid=%s &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">633</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;path=%s &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">634</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;fd=%d&quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">635</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;msg=\&quot;%s\&quot; &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">636</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;errno=%d &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">637</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;reason=\&quot;%s\&quot; &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">638</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;\n&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">639</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    request-&gt;job_contact_path,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">640</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    request-&gt;job_state_file,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">641</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    request-&gt;manager-&gt;lock_fd,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">642</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;Unable to check status of single lock file&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">643</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    errno,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">644</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    strerror(errno));</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">645</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            goto skip_single_check;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">646</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">647</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">        rc = stat(request-&gt;job_state_lock_file, &amp;job_lock_stat);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">648</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">        if (rc &lt; 0)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">649</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">650</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            globus_gram_job_manager_request_log(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">651</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    request,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">652</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    GLOBUS_GRAM_JOB_MANAGER_LOG_DEBUG,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">653</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;event=gram.state_file_read.info &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">654</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;level=DEBUG &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">655</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;gramid=%s &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">656</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;path=%s &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">657</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;msg=\&quot;%s\&quot; &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">658</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;errno=%d &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">659</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;reason=\&quot;%s\&quot; &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">660</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;\n&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">661</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    request-&gt;job_contact_path,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">662</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    request-&gt;job_state_file,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">663</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;Unable to check status of job lock file&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">664</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    errno,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">665</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    strerror(errno));</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">666</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            goto skip_single_check;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">667</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">668</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">669</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">        if (single_lock_stat.st_dev == job_lock_stat.st_dev &amp;&amp;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">670</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            single_lock_stat.st_ino == job_lock_stat.st_ino)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">671</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">672</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">            request-&gt;job_state_lock_fd = request-&gt;manager-&gt;lock_fd;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">673</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">674</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">            globus_gram_job_manager_request_log(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">675</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    request,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">676</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    GLOBUS_GRAM_JOB_MANAGER_LOG_DEBUG,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">677</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;event=gram.state_file_read.info &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">678</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;level=DEBUG &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">679</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;gramid=%s &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">680</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;path=%s &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">681</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;msg=\&quot;%s\&quot; &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">682</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;\n&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">683</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    request-&gt;job_contact_path,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">684</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    request-&gt;job_state_file,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">685</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;Using global job manager lock as job lock file&quot;);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">686</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">687</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">688</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">689</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">skip_single_check:</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">690</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    if (request-&gt;job_state_lock_file != NULL &amp;&amp; request-&gt;job_state_lock_fd &lt; 0)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">691</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">692</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        request-&gt;job_state_lock_fd = open( request-&gt;job_state_lock_file,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">693</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                                           O_RDWR );</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">694</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        if ( request-&gt;job_state_lock_fd &lt; 0 )</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">695</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">696</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            rc = GLOBUS_GRAM_PROTOCOL_ERROR_LOCKING_STATE_LOCK_FILE;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">697</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">698</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            globus_gram_job_manager_request_log(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">699</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    request,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">700</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    GLOBUS_GRAM_JOB_MANAGER_LOG_ERROR,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">701</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;event=gram.state_file_read.end &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">702</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;level=ERROR &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">703</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;gramid=%s &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">704</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;status=%d &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">705</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;path=%s &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">706</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;msg=\&quot;%s\&quot; &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">707</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;errno=%d &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">708</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;reason=\&quot;%s\&quot; &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">709</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;\n&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">710</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    request-&gt;job_contact_path,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">711</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    -rc,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">712</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    request-&gt;job_state_file,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">713</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    &quot;Error opening job lock file&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">714</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    errno,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">715</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                    strerror(errno));</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">716</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">717</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            goto free_buffer_exit;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">718</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">719</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">720</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        rc = globus_gram_job_manager_file_lock(request-&gt;job_state_lock_fd);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">721</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        if ( rc != GLOBUS_SUCCESS )</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">722</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">723</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            if ( rc == GLOBUS_GRAM_PROTOCOL_ERROR_OLD_JM_ALIVE )</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">724</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">725</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">                fp = fopen( request-&gt;job_state_file, &quot;r&quot; );</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">726</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">                if(fp)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">727</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">728</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">                    fgets( buffer, file_len, fp );</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">729</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">                    buffer[strlen(buffer)-1] = &#39;\0&#39;;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">730</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">                    request-&gt;old_job_contact = strdup(buffer);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">731</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">                    fclose(fp);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">732</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">733</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">734</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">                globus_gram_job_manager_request_log(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">735</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        request,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">736</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        GLOBUS_GRAM_JOB_MANAGER_LOG_TRACE,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">737</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        &quot;event=gram.state_file_read.end &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">738</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        &quot;level=TRACE &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">739</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        &quot;gramid=%s &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">740</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        &quot;status=%d &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">741</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        &quot;path=%s &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">742</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        &quot;contact=%s &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">743</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        &quot;\n&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">744</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        request-&gt;job_contact_path,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">745</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        -rc,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">746</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        request-&gt;job_state_file,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">747</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        request-&gt;old_job_contact</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">748</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                                ? request-&gt;old_job_contact</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">749</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                                : &quot;&quot;);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">750</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">751</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            else</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">752</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">753</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">                globus_gram_job_manager_request_log(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">754</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        request,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">755</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        GLOBUS_GRAM_JOB_MANAGER_LOG_ERROR,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">756</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        &quot;event=gram.state_file.lock.end &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">757</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        &quot;level=ERROR &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">758</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        &quot;path=%s &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">759</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        &quot;status=%d &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">760</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        &quot;msg=\&quot;%s\&quot; &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">761</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        &quot;reason=\&quot;%s\&quot; &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">762</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        &quot;\n&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">763</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        request-&gt;job_state_lock_file,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">764</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        -rc,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">765</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        &quot;Error locking state lock file&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">766</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                        globus_gram_protocol_error_string(rc));</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">767</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">768</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">769</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            /* unlink here? */</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">770</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            close( request-&gt;job_state_lock_fd );</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">771</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">772</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            free(buffer);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">773</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">774</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            return rc;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">775</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">776</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">777</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">778</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    fp = fopen( request-&gt;job_state_file, &quot;r&quot; );</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">779</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    if(!fp)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">780</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">781</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        rc = GLOBUS_GRAM_PROTOCOL_ERROR_NO_STATE_FILE;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">782</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">783</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        globus_gram_job_manager_request_log(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">784</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                request,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">785</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                GLOBUS_GRAM_JOB_MANAGER_LOG_ERROR,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">786</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;event=gram.state_file.lock.end &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">787</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;level=ERROR &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">788</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;path=%s &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">789</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;status=%d &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">790</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;msg=\&quot;%s\&quot; &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">791</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;errno=%d &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">792</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;reason=\&quot;%s\&quot; &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">793</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;\n&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">794</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                request-&gt;job_state_lock_file,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">795</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                -rc,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">796</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                &quot;Error opening state file&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">797</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                errno,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">798</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                strerror(errno));</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">799</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        return rc;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">800</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">801</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">802</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    if(fgets( buffer, file_len, fp )  == NULL)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">803</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">804</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        goto error_exit;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">805</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">806</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    /* job contact string */</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">807</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    if (fgets( buffer, file_len, fp ) == NULL)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">808</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">809</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        goto error_exit;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">810</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">811</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    request-&gt;restart_state = atoi( buffer );</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">812</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    if (fgets( buffer, file_len, fp ) == NULL)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">813</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">814</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        goto error_exit;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">815</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">816</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    globus_gram_job_manager_request_set_status_time(request,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">817</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">                atoi( buffer ), statbuf.st_mtime);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">818</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    if (fgets( buffer, file_len, fp ) == NULL)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">819</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">820</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        goto error_exit;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">821</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">822</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    request-&gt;expected_terminal_state = atoi( buffer );</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">823</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">824</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    if (fgets( buffer, file_len, fp ) == NULL)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">825</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">826</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        goto error_exit;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">827</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">828</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    request-&gt;failure_code = atoi( buffer );</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">829</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">830</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    if(fgets( buffer, file_len, fp ) == NULL)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">831</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">832</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        goto error_exit;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">833</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">834</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    buffer[strlen(buffer)-1] = &#39;\0&#39;;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">835</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    if(strcmp(buffer, &quot; &quot;) != 0)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">836</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">837</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">        request-&gt;job_id_string = strdup( buffer );</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">838</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">839</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">840</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    if(fgets( buffer, file_len, fp ) == NULL)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">841</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">842</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        goto free_job_id_string;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">843</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">844</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    buffer[strlen(buffer)-1] = &#39;\0&#39;;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">845</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    if(strcmp(buffer, &quot; &quot;) != 0)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">846</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">847</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">        request-&gt;original_job_id_string = strdup(buffer);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">848</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">849</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    if (fgets( buffer, file_len, fp ) == NULL)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">850</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">851</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        goto free_original_job_id_string;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">852</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">853</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    buffer[strlen(buffer)-1] = &#39;\0&#39;;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">854</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    request-&gt;rsl_spec = strdup( buffer );</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">855</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    if (fgets( buffer, file_len, fp ) == NULL)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">856</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">857</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        goto free_rsl_spec;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">858</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">859</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    buffer[strlen(buffer)-1] = &#39;\0&#39;;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">860</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    request-&gt;cache_tag = strdup( buffer );</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">861</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    if (fgets( buffer, file_len, fp ) == NULL)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">862</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">863</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        goto free_cache_tag;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">864</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">865</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    buffer[strlen(buffer)-1] = &#39;\0&#39;;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">866</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    if (strcmp(buffer, request-&gt;config-&gt;jobmanager_type) != 0)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">867</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">868</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        /* Job should be handled by another job manager */</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">869</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        remove(request-&gt;job_state_lock_file);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">870</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        goto free_cache_tag;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">871</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">872</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    if (fgets( buffer, file_len, fp ) == NULL)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">873</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">874</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        goto free_cache_tag;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">875</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">876</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    buffer[strlen(buffer)-1] = &#39;\0&#39;;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">877</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    if (strcmp(buffer, request-&gt;config-&gt;service_tag) != 0)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">878</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">879</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        /* Job should be handled by another job manager */</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">880</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        remove(request-&gt;job_state_lock_file);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">881</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        goto free_cache_tag;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">882</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">883</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    if (fgets( buffer, file_len, fp ) == NULL)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">884</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">885</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        goto free_cache_tag;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">886</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">887</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    buffer[strlen(buffer)-1] = &#39;\0&#39;;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">888</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    if((sscanf(buffer,&quot;%d&quot;,&amp;i)) &lt; 1)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">889</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">890</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        /* The last line we grabbed was the jobmanager_type. Now we</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">891</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">         * need to grab the two_phase_commit number. Older jobmanagers</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">892</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">         * don&#39;t print the jobmanager_type to the state file, hence</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">893</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">         * the check above.</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">894</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">         */</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">895</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        if(fgets( buffer, file_len, fp ) == NULL)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">896</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">897</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            goto free_cache_tag;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">898</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">899</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        buffer[strlen(buffer)-1] = &#39;\0&#39;;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">900</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">901</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    request-&gt;two_phase_commit = atoi(buffer);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">902</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    if (fgets( buffer, file_len, fp ) == NULL)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">903</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">904</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        goto free_cache_tag;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">905</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">906</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    buffer[strlen(buffer)-1] = &#39;\0&#39;;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">907</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    if(strcmp(buffer, &quot; &quot;) != 0)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">908</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">909</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        request-&gt;scratchdir = strdup(buffer);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">910</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">911</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    if (fgets( buffer, file_len, fp ) == NULL)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">912</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">913</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        goto free_scratchdir;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">914</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">915</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    buffer[strlen(buffer)-1] = &#39;\0&#39;;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">916</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    sscanf(buffer, &quot;%lu&quot;, &amp;tmp_timestamp);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">917</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    request-&gt;seg_last_timestamp = (time_t) tmp_timestamp;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">918</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">919</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    if (fgets( buffer, file_len, fp ) == NULL)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">920</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">921</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        goto free_scratchdir;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">922</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">923</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    buffer[strlen(buffer)-1] = &#39;\0&#39;;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">924</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    sscanf(buffer, &quot;%lu&quot;, &amp;tmp_timestamp);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">925</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    request-&gt;creation_time = (time_t) tmp_timestamp;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">926</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    if (fgets( buffer, file_len, fp ) == NULL)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">927</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">928</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        goto free_scratchdir;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">929</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">930</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    buffer[strlen(buffer)-1] = &#39;\0&#39;;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">931</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    sscanf(buffer, &quot;%lu&quot;, &amp;tmp_timestamp);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">932</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    request-&gt;queued_time = (time_t) tmp_timestamp;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">933</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">934</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    request-&gt;stage_in_todo = NULL;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">935</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    request-&gt;stage_in_shared_todo = NULL;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">936</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    request-&gt;stage_out_todo = NULL;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">937</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    request-&gt;stage_stream_todo = NULL;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">938</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">939</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    rc = globus_gram_job_manager_staging_read_state(request,fp);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">940</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    if(rc != GLOBUS_SUCCESS)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">941</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">942</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        goto free_scratchdir;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">943</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">944</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    rc = globus_gram_job_manager_read_callback_contacts(request, fp);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">945</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    if(rc != GLOBUS_SUCCESS)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">946</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">947</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        goto free_scratchdir;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">948</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">949</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">950</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    if (fgets( buffer, file_len, fp ) == NULL)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">951</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">952</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        goto free_scratchdir;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">953</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">954</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    buffer[strlen(buffer)-1] = &#39;\0&#39;;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">955</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    if(strcmp(buffer, &quot; &quot;) != 0)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">956</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">957</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        request-&gt;gateway_user = strdup(buffer);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">958</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">959</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    else</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">960</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">961</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">        request-&gt;gateway_user = NULL;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">962</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">963</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    if (fgets( buffer, file_len, fp ) == NULL)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">964</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">965</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        goto free_gateway_user;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">966</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">967</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    buffer[strlen(buffer)-1] = 0;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">968</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    sscanf(buffer, &quot;%d&quot;, &amp;request-&gt;exit_code);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">969</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">970</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    if (fgets( buffer, file_len, fp ) == NULL)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">971</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">972</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        goto free_gateway_user;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">973</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">974</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    buffer[strlen(buffer)-1] = 0;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">975</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    sscanf(buffer,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">976</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;%ld.%09ld %ld.%09ld %ld.%09ld &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">977</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;%ld.%09ld %ld.%09ld %ld.%09ld %ld.%09ld &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">978</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;%d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">979</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &amp;request-&gt;job_stats.unsubmitted_timestamp.tv_sec,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">980</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &amp;request-&gt;job_stats.unsubmitted_timestamp.tv_nsec,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">981</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &amp;request-&gt;job_stats.file_stage_in_timestamp.tv_sec,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">982</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &amp;request-&gt;job_stats.file_stage_in_timestamp.tv_nsec,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">983</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &amp;request-&gt;job_stats.pending_timestamp.tv_sec,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">984</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &amp;request-&gt;job_stats.pending_timestamp.tv_nsec,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">985</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &amp;request-&gt;job_stats.active_timestamp.tv_sec,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">986</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &amp;request-&gt;job_stats.active_timestamp.tv_nsec,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">987</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &amp;request-&gt;job_stats.failed_timestamp.tv_sec,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">988</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &amp;request-&gt;job_stats.failed_timestamp.tv_nsec,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">989</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &amp;request-&gt;job_stats.file_stage_out_timestamp.tv_sec,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">990</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &amp;request-&gt;job_stats.file_stage_out_timestamp.tv_nsec,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">991</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &amp;request-&gt;job_stats.done_timestamp.tv_sec,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">992</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &amp;request-&gt;job_stats.done_timestamp.tv_nsec,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">993</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &amp;request-&gt;job_stats.restart_count,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">994</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &amp;request-&gt;job_stats.callback_count,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">995</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &amp;request-&gt;job_stats.status_count,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">996</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &amp;request-&gt;job_stats.register_count,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">997</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &amp;request-&gt;job_stats.unregister_count,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">998</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &amp;request-&gt;job_stats.signal_count,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">999</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &amp;request-&gt;job_stats.refresh_count,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1000</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &amp;request-&gt;job_stats.file_clean_up_count,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1001</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &amp;request-&gt;job_stats.file_stage_in_http_count,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1002</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &amp;request-&gt;job_stats.file_stage_in_https_count,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1003</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &amp;request-&gt;job_stats.file_stage_in_ftp_count,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1004</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &amp;request-&gt;job_stats.file_stage_in_gsiftp_count,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1005</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &amp;request-&gt;job_stats.file_stage_in_shared_http_count,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1006</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &amp;request-&gt;job_stats.file_stage_in_shared_https_count,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1007</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &amp;request-&gt;job_stats.file_stage_in_shared_ftp_count,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1008</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &amp;request-&gt;job_stats.file_stage_in_shared_gsiftp_count,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1009</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &amp;request-&gt;job_stats.file_stage_out_http_count,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1010</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &amp;request-&gt;job_stats.file_stage_out_https_count,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1011</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &amp;request-&gt;job_stats.file_stage_out_ftp_count,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1012</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &amp;request-&gt;job_stats.file_stage_out_gsiftp_count);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1013</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    if (fgets( buffer, file_len, fp ) == NULL)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1014</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1015</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        goto free_gateway_user;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1016</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1017</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    buffer[strlen(buffer)-1] = &#39;\0&#39;;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1018</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    if(strcmp(buffer, &quot; &quot;) != 0)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1019</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1020</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">        request-&gt;job_stats.client_address = strdup(buffer);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1021</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1022</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    else</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1023</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1024</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        request-&gt;job_stats.client_address = NULL;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1025</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1026</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1027</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    if (fgets( buffer, file_len, fp ) == NULL)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1028</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1029</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        goto free_client_address;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1030</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1031</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    buffer[strlen(buffer)-1] = 0;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1032</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    if(strcmp(buffer, &quot; &quot;) != 0)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1033</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1034</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">        request-&gt;job_stats.user_dn = strdup(buffer);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1035</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1036</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    else</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1037</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1038</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        request-&gt;job_stats.user_dn = NULL;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1039</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1040</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1041</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    fclose(fp);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1042</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1043</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    free(buffer);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1044</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1045</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    globus_gram_job_manager_request_log(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1046</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1047</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            GLOBUS_GRAM_JOB_MANAGER_LOG_TRACE,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1048</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;event=gram.state_file.lock.end &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1049</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;level=TRACE &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1050</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;path=%s &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1051</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;status=%d &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1052</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;\n&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1053</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request-&gt;job_state_lock_file,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1054</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            0);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1055</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1056</td>
          <td class="coverageCount">7</td>
          <td class="srcCell"><span class="srcLine">    return GLOBUS_SUCCESS;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1057</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1058</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">free_client_address:</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1059</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">    if (request-&gt;job_stats.client_address != NULL)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1060</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1061</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        free(request-&gt;job_stats.client_address);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1062</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        request-&gt;job_stats.client_address = NULL;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1063</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1064</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">free_gateway_user:</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1065</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">    if (request-&gt;gateway_user != NULL)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1066</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1067</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        free(request-&gt;gateway_user);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1068</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        request-&gt;gateway_user = NULL;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1069</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1070</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">free_scratchdir:</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1071</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">    if (request-&gt;scratchdir != NULL)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1072</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1073</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        free(request-&gt;scratchdir);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1074</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        request-&gt;scratchdir = NULL;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1075</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1076</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">free_cache_tag:</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1077</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">    if (request-&gt;cache_tag != NULL)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1078</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1079</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        free(request-&gt;cache_tag);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1080</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        request-&gt;cache_tag = NULL;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1081</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1082</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">free_rsl_spec:</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1083</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">    if (request-&gt;rsl_spec != NULL)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1084</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1085</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        free(request-&gt;rsl_spec);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1086</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        request-&gt;rsl_spec = NULL;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1087</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1088</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">free_original_job_id_string:</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1089</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">    if (request-&gt;original_job_id_string != NULL)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1090</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1091</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        free(request-&gt;original_job_id_string);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1092</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        request-&gt;original_job_id_string = NULL;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1093</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1094</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">free_job_id_string:</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1095</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">    if (request-&gt;job_id_string != NULL)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1096</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1097</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        free(request-&gt;job_id_string);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1098</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        request-&gt;job_id_string = NULL;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1099</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1100</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">error_exit:</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1101</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">    rc = GLOBUS_GRAM_PROTOCOL_ERROR_READING_STATE_FILE;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1102</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1103</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">    globus_gram_job_manager_request_log(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1104</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1105</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            GLOBUS_GRAM_JOB_MANAGER_LOG_ERROR,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1106</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;event=gram.state_file.lock.end &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1107</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;level=ERROR &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1108</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;path=%s &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1109</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;status=%d &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1110</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;msg=\&quot;%s\&quot; &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1111</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;reason=\&quot;%s\&quot; &quot;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1112</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;\n&quot;,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1113</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            request-&gt;job_state_lock_file,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1114</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            -rc,</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1115</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">            &quot;Error reading state file&quot;);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1116</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1117</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">    fclose(fp);</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1118</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">free_buffer_exit:</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1119</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">    if (buffer != NULL)</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1120</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1121</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        free(buffer);</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1122</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1123</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">exit:</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1124</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">    return GLOBUS_GRAM_PROTOCOL_ERROR_READING_STATE_FILE;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1125</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">}</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1126</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1127</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">/**</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1128</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * Try to set an advisory write lock on a file descriptor</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1129</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> *</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1130</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * @param fd</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1131</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> *     Open file descriptor to lock.</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1132</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * </span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1133</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * @retval GLOBUS_SUCCESS</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1134</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> *     Success</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1135</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * @retval GLOBUS_GRAM_PROTOCOL_ERROR_OLD_JM_ALIVE</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1136</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> *     Another process has the file locked.</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1137</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> * @retval GLOBUS_GRAM_PROTOCOL_ERROR_LOCKING_STATE_LOCK_FILE</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1138</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> *     System error locking the file.</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1139</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"> */</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1140</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">int</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1141</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">globus_gram_job_manager_file_lock(</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1142</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    int                                 fd)</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1143</td>
          <td class="coverageCount">318</td>
          <td class="srcCell"><span class="srcLine">{</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1144</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    int                                 rc;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1145</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    struct flock                        fl;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1146</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1147</td>
          <td class="coverageCount">318</td>
          <td class="srcCell"><span class="srcLine">    fl.l_type = F_WRLCK;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1148</td>
          <td class="coverageCount">318</td>
          <td class="srcCell"><span class="srcLine">    fl.l_whence = SEEK_SET;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1149</td>
          <td class="coverageCount">318</td>
          <td class="srcCell"><span class="srcLine">    fl.l_start = 0;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1150</td>
          <td class="coverageCount">318</td>
          <td class="srcCell"><span class="srcLine">    fl.l_len = 0;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1151</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine"></span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1152</td>
          <td class="coverageCount">636</td>
          <td class="srcCell"><span class="srcLine">    while( (rc = fcntl( fd, F_SETLK, &amp;fl )) &lt; 0 )</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1153</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1154</td>
          <td class="coverageCount">315</td>
          <td class="srcCell"><span class="srcLine">        if ( errno == EACCES || errno == EAGAIN )</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1155</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1156</td>
          <td class="coverageCount">315</td>
          <td class="srcCell"><span class="srcLine">            rc = GLOBUS_GRAM_PROTOCOL_ERROR_OLD_JM_ALIVE;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1157</td>
          <td class="coverageCount">315</td>
          <td class="srcCell"><span class="srcLine">            break;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1158</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1159</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">        else if ( errno != EINTR )</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1160</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        {</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1161</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            rc = GLOBUS_GRAM_PROTOCOL_ERROR_LOCKING_STATE_LOCK_FILE;</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1162</td>
          <td class="coverageCountHilight">0</td>
          <td class="srcCell"><span class="srcLineHilight">            break;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1163</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">        }</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1164</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">    }</span></td>
        </tr>
      
        <tr>
          <td class="lineCountHilight">1165</td>
          <td class="coverageCount">318</td>
          <td class="srcCell"><span class="srcLine">    return rc;</span></td>
        </tr>
      
        <tr>
          <td class="lineCount">1166</td>
          <td class="coverageCount"></td>
          <td class="srcCell"><span class="srcLine">}</span></td>
        </tr>
      
      </table>
  </body>
</html>
