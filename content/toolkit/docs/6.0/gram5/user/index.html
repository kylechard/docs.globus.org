<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<div class="book"><div class="titlepage"><div><div><h1 class="title"><a name="gram5User"></a>GT 6.0 GRAM5: User's Guide</h1></div><div><div class="abstract"><p class="title"><b>Introduction</b></p><p>
  GRAM services provide secure, remote job submission to different
  <a href="#local-resource-manager" class="glossterm"><em class="glossterm">local resource
  managers</em></a> in a Grid
  environment. This document describes the features of the GRAM service and
  an overview of tools to use the service.
</p></div></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="chapter"><a href="#gram5-user-overview">1. GRAM5 Overview</a></span></dt><dd><dl><dt><span class="section"><a href="#gram5-user-client-tools">1. GRAM Client Tools</a></span></dt><dd><dl><dt><span class="section"><a href="#idm49871981168">1.1. Condor-G</a></span></dt><dt><span class="section"><a href="#idm49871977456">1.2. Swift</a></span></dt><dt><span class="section"><a href="#idm49871975056">1.3. GridWay</a></span></dt><dt><span class="section"><a href="#idm49871972720">1.4. GRAM APIs</a></span></dt></dl></dd><dt><span class="section"><a href="#idm49871970800">2. Portals and Science Gateways that use GRAM</a></span></dt><dd><dl><dt><span class="section"><a href="#idm49871970288">2.1. XSEDE</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#gram5-user-usagescenarios">2. Using GRAM5</a></span></dt><dd><dl><dt><span class="section"><a href="#gram5-user-prepare">1. Before Getting Started</a></span></dt><dd><dl><dt><span class="section"><a href="#idm49871961584">1.1. GRAM and Security</a></span></dt><dt><span class="section"><a href="#gram5-user-resource-names">1.2. GRAM Resource Names</a></span></dt></dl></dd><dt><span class="section"><a href="#gram5-user-submitting-jobs">2. Basic Client Interace</a></span></dt><dd><dl><dt><span class="section"><a href="#idm49871935408">2.1. Batch and Interactive Use</a></span></dt><dt><span class="section"><a href="#idm49871930208">2.2. Running Basic Jobs with <span class="command"><strong>globus-job-run</strong></span></a></span></dt><dt><span class="section"><a href="#idm49871886240">2.3. Submitting Basic Jobs with <span class="command"><strong>globus-job-submit</strong></span></a></span></dt><dt><span class="section"><a href="#idm49871859488">2.4. Advanced Jobs with globus-job-run</a></span></dt></dl></dd><dt><span class="section"><a href="#gram5-user-globusrun">3. Advanced GRAM Client with the globusrun tool</a></span></dt><dd><dl><dt><span class="section"><a href="#idm49871842144">3.1. Checking RSL Syntax</a></span></dt><dt><span class="section"><a href="#idm49871835616">3.2. Checking Service Contacts</a></span></dt><dt><span class="section"><a href="#idm49871825408">3.3. Checking GRAM service version</a></span></dt><dt><span class="section"><a href="#idm49871817568">3.4. Basic Interactive job with globusrun</a></span></dt><dt><span class="section"><a href="#idm49871811840">3.5. Basic batch job with globusrun</a></span></dt><dt><span class="section"><a href="#idm49871803200">3.6. Refreshing a GRAM5 Credential</a></span></dt><dt><span class="section"><a href="#idm49871795328">3.7. Dealing with credential expiration</a></span></dt><dt><span class="section"><a href="#idm49871783648">3.8. File staging</a></span></dt><dt><span class="section"><a href="#idm49871757440">3.9. Temporary files and cleanup</a></span></dt><dt><span class="section"><a href="#idm49871747584">3.10. Reliable job submit</a></span></dt><dt><span class="section"><a href="#idm49871733744">3.11. Reconnecting to a job</a></span></dt><dt><span class="section"><a href="#idm49871724832">3.12. Submitting a Java job</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#gram5-user-troubleshooting">3. Troubleshooting</a></span></dt><dd><dl><dt><span class="section"><a href="#gram5-troubleshooting-client">1. GRAM Client Troubleshooting</a></span></dt><dd><dl><dt><span class="section"><a href="#idm49869510592">1.1. Credential Problems</a></span></dt><dt><span class="section"><a href="#idm49874509008">1.2. Connection Problems</a></span></dt><dd><dl><dt><span class="section"><a href="#idm49869690064">1.2.1. Invalid Resource Name</a></span></dt><dt><span class="section"><a href="#idm49869717424">1.2.2. Mutual Authentication Failure</a></span></dt><dt><span class="section"><a href="#idm49866998304">1.2.3. Certificate Trust Issues</a></span></dt><dt><span class="section"><a href="#idm49866985632">1.2.4. Authentication with the Remote Server Failed</a></span></dt><dt><span class="section"><a href="#idm49866981152">1.2.5. Unable to Find the Requested Service</a></span></dt><dt><span class="section"><a href="#idm49866975648">1.2.6. Failed to Run the Job Manager</a></span></dt></dl></dd><dt><span class="section"><a href="#idm49866969648">1.3. Jobs are Hanging</a></span></dt><dt><span class="section"><a href="#idm49866959792">1.4. Logs and Debugging</a></span></dt><dt><span class="section"><a href="#idm49866955168">1.5. Diagnosing LRM Errors</a></span></dt><dt><span class="section"><a href="#idm49866947104">1.6. Email Support</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#gram5-user-clientcli">4. Command-line Client Reference Pages</a></span></dt><dd><dl><dt><span class="refentrytitle"><a href="#gram5-cmd-globusrun">globusrun</a></span><span class="refpurpose"> &#8212; Execute and manage jobs via GRAM</span></dt><dt><span class="refentrytitle"><a href="#gram5-cmd-globus-job-cancel">globus-job-cancel</a></span><span class="refpurpose"> &#8212; Cancel a GRAM batch job</span></dt><dt><span class="refentrytitle"><a href="#gram5-cmd-globus-job-clean">globus-job-clean</a></span><span class="refpurpose"> &#8212; Cancel and clean up a GRAM batch job</span></dt><dt><span class="refentrytitle"><a href="#gram5-cmd-globus-job-get-output">globus-job-get-output</a></span><span class="refpurpose"> &#8212; Retrieve the output and error streams from a GRAM job</span></dt><dt><span class="refentrytitle"><a href="#gram5-cmd-globus-job-run">globus-job-run</a></span><span class="refpurpose"> &#8212; Execute a job using GRAM</span></dt><dt><span class="refentrytitle"><a href="#gram5-cmd-globus-job-status">globus-job-status</a></span><span class="refpurpose"> &#8212; Check the status of a GRAM5 job</span></dt><dt><span class="refentrytitle"><a href="#gram5-cmd-globus-job-submit">globus-job-submit</a></span><span class="refpurpose"> &#8212; Submit a batch job using GRAM</span></dt></dl></dd><dt><span class="chapter"><a href="#gram5-user-rsl">5. GRAM RSL Quick Reference</a></span></dt><dt><span class="chapter"><a href="#gram5-user-errors">6. GRAM Error Message Reference</a></span></dt><dd><dl><dt><span class="section"><a href="#gram5-error-codes">1. Errors</a></span></dt></dl></dd><dt><span class="chapter"><a href="#gram5-user-knownproblems">7. Known Problems in GRAM5</a></span></dt><dd><dl><dt><span class="section"><a href="#gram5-outstanding">1. Known Problems in GRAM5</a></span></dt></dl></dd><dt><span class="chapter"><a href="#gram5-usage">8. Usage statistics collection by the Globus Alliance </a></span></dt><dd><dl><dt><span class="section"><a href="#gram5-usage-stats">1. GRAM5-specific usage statistics</a></span></dt></dl></dd><dt><span class="glossary"><a href="#glossary-gram5User">Glossary</a></span></dt><dt><span class="index"><a href="#idm49871698064">Index</a></span></dt></dl></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="gram5-user-overview"></a>Chapter 1. GRAM5 Overview</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="section"><a href="#gram5-user-client-tools">1. GRAM Client Tools</a></span></dt><dd><dl><dt><span class="section"><a href="#idm49871981168">1.1. Condor-G</a></span></dt><dt><span class="section"><a href="#idm49871977456">1.2. Swift</a></span></dt><dt><span class="section"><a href="#idm49871975056">1.3. GridWay</a></span></dt><dt><span class="section"><a href="#idm49871972720">1.4. GRAM APIs</a></span></dt></dl></dd><dt><span class="section"><a href="#idm49871970800">2. Portals and Science Gateways that use GRAM</a></span></dt><dd><dl><dt><span class="section"><a href="#idm49871970288">2.1. XSEDE</a></span></dt></dl></dd></dl></div><p>GRAM provides a uniform, remote interface for executing jobs on
   compute resources.  GRAM jobs consist of file transfers and program
   execution on one or more compute elements managed by a local resource
   manager. The GRAM client can submit the job and then later poll for its status, or
   it can request that the GRAM service notify it when the job changes state or
   completes. While the job is executing, the client may send control messages to the 
   GRAM service to monitor or modify the job.  GRAM provides reliable job
   submission, job recovery in case of service or client failures, file
   staging, and asynchronous notification messages. 
   </p><p>
   GRAM achieves its uniform interface by implementing a domain-specific language
   called the <a href="../developer/#gram5-rsl" class="olink">Resource
   Specification Language</a> (RSL) which provides a simple way to express
   job requirements, environment, and commands in a specification which is
   independent of the local resource manager which will actually execute the
   job.
   </p><p>
   The GRAM protocol is a two-phase protocol, so that when jobs are submitted
   to a GRAM service, they will not start until a client has received a contact
   handle to the job. The GRAM service will not clean up a job until it has
   received acknowledgment from the client that the job completion state has
   been received. In the case of transient errors, GRAM clients can reconnect
   to the GRAM service to determine job state, or to update information the job
   will need to stage output files.
   </p><p>
   The GRAM service has been built to work in the presence of client and
   service failures without losing state information about jobs. If a client
   exits and is restarted, it can request job state information, update URLs
   for output files to be staged to, and register a new address to receive job
   state callbacks. If a service exits and is restarted, it will resume
   processing all existing GRAM jobs from their previous state, and
   continue to send state updates to any clients which are registered for
   them.
   </p><p>
   GRAM provides file staging before and after a job runs, scratch directory
   management, and a cache location for common files. File staging is Grid-aware
   and access remote storage resources via the GridFTP, ftp https, http protocols.
   </p><p>
   Because the GRAM service implements client callbacks for job state changes,
   clients can submit a number of jobs and be notified when each completes.
   This allows clients to be more responsive to changes in state than services
   which require polling for job completion.
   </p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="gram5-user-client-tools"></a>1. GRAM Client Tools</h2></div></div></div><p>
   There are a number of GRAM clients which can be used to interact with the
   GRAM service.  The Globus Toolkit includes <span class="command"><strong>globusrun</strong></span>, 
   <span class="command"><strong>globus-job-submit</strong></span>, and <span class="command"><strong>globus-job-run</strong></span>.
   Other projects provide higher-level tools which can be used to manage
   large sets of jobs.
   </p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="idm49871981168"></a>1.1. Condor-G</h3></div></div></div><p>Condor is a high-throughput job scheduler from the University of Wisconsin.
   It provides a facility called Condor-G to run jobs via GRAM. See the
   <a class="ulink" href="http://research.cs.wisc.edu/condor/manual/latest/index.html" target="_top">Condor
   documentation</a>, especially the section on Grid Universe, which
   describes how to write Condor Classified Ads to run jobs using GRAM services.
   The <code class="literal">gt5</code> Grid type provides the best performance for using
   GRAM with Condor-G.
   </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="idm49871977456"></a>1.2. Swift</h3></div></div></div><p>The <a class="ulink" href="http://www.ci.uchicago.edu/swift/main/" target="_top">Swift</a>
   system from the University of Chicago is a data-oriented
   coarse grained scripting language that supports dataset typing and mapping,
   dataset iteration, conditional branching, and procedural composition. The
   SwiftScript language can be used to create workflows that are executed on
   various services, including GRAM. See the <a class="ulink" href="http://www.ci.uchicago.edu/swift/guides/userguide.php" target="_top">Swift User's
   Guide</a> for information about using Swift.
   </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="idm49871975056"></a>1.3. GridWay</h3></div></div></div><p>
    The <a class="ulink" href="http://www.gridway.org/" target="_top">GridWay Metascheduler</a> enables
    large-scale, reliable and efficient sharing of computing resources: clusters,
    supercomputers, stand-alone servers. It supports different LRM systems (PBS,
    SGE, LSF, Condor) within a single organization or scattered across several
    administrative domains. The <a class="ulink" href="http://www.gridway.org/doku.php?id=documentation" target="_top">GridWay</a> manual
    describes how to use GridWay.
   </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="idm49871972720"></a>1.4. GRAM APIs</h3></div></div></div><p>
   In addition to the tools above, you can write your own GRAM clients, using the 
   public APIs described in the <a href="../developer/#gram5Developer" class="olink">GRAM5
   Developer's Guide</a>. The client APIs there can be used to write custom
   applications that interact with GRAM services in C/C++ or Java.
   </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="idm49871970800"></a>2. Portals and Science Gateways that use GRAM</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="idm49871970288"></a>2.1. XSEDE</h3></div></div></div><p>
   <a class="ulink" href="https://www.xsede.org" target="_top">XSEDE</a> provides a number of
   domain-specific
   <a class="ulink" href="https://www.xsede.org/gateways-overview" target="_top">science gateways and
   portals</a>,
   which provide interfaces to various computation and data resources,
   including some managed by GRAM.</p><p>These include <a class="ulink" href="http://www.cgd.ucar.edu/amp/" target="_top">CGD's Atmospheric Modeling &amp;
   Predictability Section</a> from NCAR, the
   <a class="ulink" href="http://uslims.uthscsa.edu" target="_top">UltraScan LIMS Portal</a> at the
   Bioinformatics Core Facility at the University of Texas Health Science
   Center at San Antonio, the <a class="ulink" href="https://sidgrid.ci.uchicago.edu" target="_top">Social Informatics Data (SID) Grid</a>
   at the University of Chicago, and <a class="ulink" href="http://scec.org" target="_top">Southern
   California Earthquake Center</a> headquarted at the University of
   Southern California.
   </p></div></div></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="gram5-user-usagescenarios"></a>Chapter 2. Using GRAM5</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="section"><a href="#gram5-user-prepare">1. Before Getting Started</a></span></dt><dd><dl><dt><span class="section"><a href="#idm49871961584">1.1. GRAM and Security</a></span></dt><dt><span class="section"><a href="#gram5-user-resource-names">1.2. GRAM Resource Names</a></span></dt></dl></dd><dt><span class="section"><a href="#gram5-user-submitting-jobs">2. Basic Client Interace</a></span></dt><dd><dl><dt><span class="section"><a href="#idm49871935408">2.1. Batch and Interactive Use</a></span></dt><dt><span class="section"><a href="#idm49871930208">2.2. Running Basic Jobs with <span class="command"><strong>globus-job-run</strong></span></a></span></dt><dt><span class="section"><a href="#idm49871886240">2.3. Submitting Basic Jobs with <span class="command"><strong>globus-job-submit</strong></span></a></span></dt><dt><span class="section"><a href="#idm49871859488">2.4. Advanced Jobs with globus-job-run</a></span></dt></dl></dd><dt><span class="section"><a href="#gram5-user-globusrun">3. Advanced GRAM Client with the globusrun tool</a></span></dt><dd><dl><dt><span class="section"><a href="#idm49871842144">3.1. Checking RSL Syntax</a></span></dt><dt><span class="section"><a href="#idm49871835616">3.2. Checking Service Contacts</a></span></dt><dt><span class="section"><a href="#idm49871825408">3.3. Checking GRAM service version</a></span></dt><dt><span class="section"><a href="#idm49871817568">3.4. Basic Interactive job with globusrun</a></span></dt><dt><span class="section"><a href="#idm49871811840">3.5. Basic batch job with globusrun</a></span></dt><dt><span class="section"><a href="#idm49871803200">3.6. Refreshing a GRAM5 Credential</a></span></dt><dt><span class="section"><a href="#idm49871795328">3.7. Dealing with credential expiration</a></span></dt><dt><span class="section"><a href="#idm49871783648">3.8. File staging</a></span></dt><dt><span class="section"><a href="#idm49871757440">3.9. Temporary files and cleanup</a></span></dt><dt><span class="section"><a href="#idm49871747584">3.10. Reliable job submit</a></span></dt><dt><span class="section"><a href="#idm49871733744">3.11. Reconnecting to a job</a></span></dt><dt><span class="section"><a href="#idm49871724832">3.12. Submitting a Java job</a></span></dt></dl></dd></dl></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="gram5-user-prepare"></a>1. Before Getting Started</h2></div></div></div><a class="indexterm" name="idm49871964144"></a><a class="indexterm" name="idm49871962864"></a><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="idm49871961584"></a>1.1. GRAM and Security</h3></div></div></div><p>
    GRAM uses the <a href="../../gsic/#gsic" class="olink">Grid Security Infrastructure</a>
    for its security implementation, based on X.509 certificates and the TLSv1
    protocol to authenticate user identities with GRAM services.  Before using
    GRAM, you must first obtain a security credential. This
    is typically done by requesting a certificate from a site-specific CA, or
    by using a portal to obtain a temporary credential. In typical use, GRAM
    uses a <a class="ulink" href="http://www.ietf.org/rfc/rfc3820.txt" target="_top">proxy certificate</a>
    which is a short-term credential digitally signed by a private key. Please
    read the <a href="../../gsic/user/#gsic-user-basic-procedure" class="olink">Section 1, &#8220;Basic procedure for using GSI C&#8221;</a> to learn more about how to obtain and use a 
    GSI credential before continuing this guide.
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="gram5-user-resource-names"></a>1.2. GRAM Resource Names</h3></div></div></div><p>
    Before interacting with a GRAM service, you must know its contact address.
    GRAM uses a very flexible URL-like syntax to contain information about the
    service's hostname, TCP port number, service name, and security identity.
    In the basic case, you will only need to use the service's hostname to 
    contact the service. However, if the service is configured to run on a 
    non-standard port, or with a custom service name, or credential which
    doesn't match its hostname, you will need to use one of the longer forms.
    </p><p>
    A fully-qualified resource name looks something like
    <code class="literal">grid.example.org:2120/jobmanager-sge:/C=US/O=Example/OU=Grid/CN=host/grid.example.org</code>.
    Breaking this down, the resource name includes:

    </p><div class="informaltable"><table border="1" width="700px"><colgroup><col><col><col><col></colgroup><thead><tr><th>Name Component</th><th>Example</th><th>Meaning</th><th>Default</th></tr></thead><tbody><tr><td><p>Host Name</p></td><td><p><code class="literal">grid.example.org</code></p></td><td><p>Host which the GRAM service is running on.</p></td><td><p>None. This is always a required component.</p></td></tr><tr><td><p>TCP Port</p></td><td><p><code class="literal">2120</code></p></td><td><p>TCP port which the GRAM service is listening on. If multiple GRAM services
            are running on the same machine, they may use alternate TCP ports.</p></td><td><p><code class="literal">2119</code></p></td></tr><tr><td><p>Service Name</p></td><td><p><code class="literal">jobmanager-sge</code></p></td><td><p>The name of the GRAM service on the given host. A
            host may provide access to multiple resources
            using different local resource managers.  This name is used to
            distinguish which service to use for a particular job request. Typically, a host
            will provide a default entry called <code class="literal">jobmanager</code> which will interface
            with a batch computing or high-throughput scheduling system, and another called
            <code class="literal">jobmanager-fork</code> for simple non-compute jobs.</p></td><td><p><code class="literal">jobmanager</code></p></td></tr><tr><td><p>Credential Name</p></td><td><p><code class="literal">/C=US/O=Example/OU=Grid /CN=host/grid.example.org</code></p></td><td><p>The name of the credential which the GRAM service is using. This is only
            needed if the credential's common name does not match the host name.</p></td><td><p><code class="literal">host@</code><em class="replaceable"><code>hostname</code></em></p></td></tr></tbody></table></div><p>
    </p><p>
    Any component of the resource name may be omitted, except for the host name, and defaults will be used.
    The field separator <code class="literal">:</code> must be retained when skipping between name components.
    </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="gram5-user-submitting-jobs"></a>2. Basic Client Interace</h2></div></div></div><p>This section contains the basic command-line interface for
        interacting with gram services. For these examples, we will use the 
        GRAM resource named <code class="literal">grid.example.org:2119/jobmanager-pbs</code>.
        You will need to change that to resources which you have been granted
        access. 
        </p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="idm49871935408"></a>2.1. Batch and Interactive Use</h3></div></div></div><p>
            The tools <span class="command"><strong>globus-job-run</strong></span> and
            <span class="command"><strong>globus-job-submit</strong></span> an both be used to submit jobs
            to GRAM resources. The difference is that
            <span class="command"><strong>globus-job-run</strong></span> will wait until the job terminates
            before exiting and prints job standard output and stderr after the
            job completes, while <span class="command"><strong>globus-job-submit</strong></span> will
            submit the job and then exit immediately, printing the job contact
            to its standard output stream. The job can be then polled for status
            with the <span class="command"><strong>globus-job-status</strong></span> command, its output can
            be fetched with the <span class="command"><strong>globus-job-get-output</strong></span> and cleaned
            up with the <span class="command"><strong>globus-job-clean</strong></span> command.
            </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="idm49871930208"></a>2.2. Running Basic Jobs with <span class="command"><strong>globus-job-run</strong></span></h3></div></div></div><p>
            The <span class="command"><strong>globus-job-run</strong></span> provides a simple
            blocking command-line interface to the GRAM service. The
            <span class="command"><strong>globus-job-run</strong></span> program submits a job to a GRAM
            resource and waits for the job to terminate. After the job
            terminates, the output and error streams of the job are sent to 
            the output and error streams of <span class="command"><strong>globus-job-run</strong></span>. Note that truly interactive
            jobs are not supported with GRAM.
            </p><p>
            The <span class="command"><strong>globus-job-run</strong></span> program has command-line
            options to control most aspects of jobs run by GRAM. However,
            certain behaviors must be specified by definition of an RSL
            string containing various job attributes. A more detailed description
            about the RSL language is included on the section on running
            jobs with <span class="command"><strong>globusrun</strong></span> below.
            </p><p>
            The following examples show some of the common command-line options
            to <span class="command"><strong>globus-job-run</strong></span>. Full <a href="../pi/#gram5-cmd-globus-job-run" class="olink"><span class="command"><strong>globus-job-run</strong></span> documentation</a>
            is available in the <a href="../pi/#gram5PI" class="olink">GRAM5 public interface guide</a>.
            </p><div class="example"><a name="idm49871922176"></a><p class="title"><b>Example 2.1. Minimal job using globus-job-run</b></p><div class="example-contents"><p>
                The following command line submits a single instance of the 
                <code class="filename">/bin/hostname</code> executable to the resource
                named by
                <code class="systemitem">grid.example.org/jobmanager-pbs</code>.

                </p><pre class="screen"><code class="prompt">% </code><span class="command"><strong>globus-job-run <code class="option">grid.example.org/jobmanager-pbs /bin/hostname</code></strong></span>
<code class="computeroutput">node1.grid.example.org</code></pre><p>
                </p></div></div><br class="example-break"><div class="example"><a name="idm49871917536"></a><p class="title"><b>Example 2.2. Multiprocess job using globus-job-run</b></p><div class="example-contents"><p>
                The following command line submits ten instances of an
                executable <code class="filename">/bin/hostname</code>. The output of
                the job is the name of the ten hosts that the job ran on. The
                <code class="option">-np <em class="replaceable"><code>COUNT</code></em></code> option
                causes <span class="command"><strong>globus-job-run</strong></span> to run
                <em class="replaceable"><code>COUNT</code></em> instances of the executable.

                </p><pre class="screen"><code class="prompt">% </code><span class="command"><strong>globus-job-run <code class="option">grid.example.org/jobmanager-pbs -np 4 /bin/hostname</code></strong></span>
<code class="computeroutput">node1.grid.example.org
node3.grid.example.org
node2.grid.example.org
node10.grid.example.org</code></pre><p>
                </p></div></div><br class="example-break"><div class="example"><a name="idm49871912192"></a><p class="title"><b>Example 2.3. Staging an executable file using globus-job-run</b></p><div class="example-contents"><p>
                The following command line submits an executable which is local to the
                submit machine to the GRAM resource, then executes it. The executable
                is removed automatically from the GRAM resource after the job completes.
                The <code class="option">-s</code> option prior to the executable name causes
                <span class="command"><strong>globus-job-run</strong></span> to stage the executable using GASS (an https-based protocol) from
                the machine running <span class="command"><strong>globus-job-run</strong></span> to the GRAM resource.

                </p><pre class="screen"><code class="prompt">% </code><span class="command"><strong>globus-job-run <code class="option">grid.example.org/jobmanager-pbs -s my-executable</code></strong></span>
<code class="computeroutput">node1.grid.example.org</code></pre><p>
                </p></div></div><br class="example-break"><div class="example"><a name="idm49871907312"></a><p class="title"><b>Example 2.4. Providing an input file to a job using globus-job-run</b></p><div class="example-contents"><p>
                The following command line submits a job to a GRAM resource. When
                this job runs, its standard input will read from the file 
                <code class="filename"><em class="replaceable"><code>$HOME</code></em>/inputfile.txt</code>, 
                which is located on the GRAM resource. The <code class="option">-stdin</code>
                command-line option indicates this path.
                
                </p><pre class="screen"><code class="prompt">% </code><span class="command"><strong>globus-job-run <code class="option">grid.example.org/jobmanager-pbs -stdin inputfile.txt /bin/cat</code></strong></span>
<code class="computeroutput">Hello, Grid</code></pre><p>
                </p></div></div><br class="example-break"><div class="example"><a name="idm49871902912"></a><p class="title"><b>Example 2.5. Staging an input file to a job using globus-job-run</b></p><div class="example-contents"><p>
                The following command line submits a job to a GRAM resource. When
                this job runs, its standard input will read from the file 
                <code class="filename">inputfile.txt</code>, 
                which is located on the submit client machine. The <code class="option">-stdin -s</code>
                command-line option combination causes the input to be staged in the above
                executable staging example.
                
                </p><pre class="screen"><code class="prompt">% </code><span class="command"><strong>globus-job-run <code class="option">grid.example.org/jobmanager-pbs -stdin -s inputfile.txt /bin/cat</code></strong></span>
<code class="computeroutput">Hello, staged input on the Grid</code></pre><p>
                </p></div></div><br class="example-break"><div class="example"><a name="idm49871898592"></a><p class="title"><b>Example 2.6. Canceling an interactive job </b></p><div class="example-contents"><p>
                This example shows how using the
                <span class="keycap"><strong>Control</strong></span>+<span class="keycap"><strong>C</strong></span>
                (or other system-specific mechanism for sending the
                <code class="literal">SIGINT</code> signal) can be used to cancel a GRAM
                job.
                </p><pre class="screen"><code class="prompt">% </code><span class="command"><strong>globus-job-run <code class="option">grid.example.org/jobmanager-pbs /bin/sleep 90</code></strong></span>
<strong class="userinput"><code><span class="keycap"><strong>Control</strong></span>+<span class="keycap"><strong>C</strong></span></code></strong>
<code class="computeroutput">GRAM Job failed because the user cancelled the job (error code 8)</code></pre></div></div><br class="example-break"><div class="example"><a name="idm49871892320"></a><p class="title"><b>Example 2.7. Setting job environment variables with globus-job-run</b></p><div class="example-contents"><p>
                The following command line submits one instances of the
                executable <code class="filename">/usr/bin/env</code>, setting some
                environment variables in the job environment beyond those
                set by GRAM5.  The <code class="option">-env <em class="replaceable"><code>VARIABLE</code></em>=<em class="replaceable"><code>VALUE</code></em></code>
                command-line option adds the named variable to the job
                environment. It may be present multiple times in the command-line
                to set multiple environment variables.

                </p><pre class="screen"><code class="prompt">% </code><span class="command"><strong>globus-job-run <code class="option">grid.example.org/jobmanager-pbs -env TEST=1 -env GRID=1 /usr/bin/env</code></strong></span>
<code class="computeroutput">HOME=/home/juser
LOGNAME=juser
GLOBUS_GRAM_JOB_CONTACT=https://client.example.org:3882/16001579536700793196/5295612977485997184/
GLOBUS_LOCATION=/opt/globus-6.0
GLOBUS_GASS_CACHE_DEFAULT=/home/juser/.globus/.gass_cache
TEST=1
X509_USER_PROXY=/home/juser/.globus/job/mactop.local/16001579536700793196.5295612977485997184/x509_user_proxy
GRID=1</code></pre><p>
                </p></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="idm49871886240"></a>2.3. Submitting Basic Jobs with <span class="command"><strong>globus-job-submit</strong></span></h3></div></div></div><p>A related tool to <span class="command"><strong>globus-job-run</strong></span> is
            <a href="../pi/#gram5-cmd-globus-job-submit" class="olink"><span class="command"><strong>globus-job-submit</strong></span></a>.
            This command submits a job to a GRAM5 service then exits without
            waiting for the job to terminate. Other tools
            (<a href="../pi/#gram5-cmd-globus-job-cancel" class="olink"><span class="command"><strong>globus-job-cancel</strong></span></a>,
            <a href="../pi/#gram5-cmd-globus-job-clean" class="olink"><span class="command"><strong>globus-job-clean</strong></span></a>, and
            <a href="../pi/#gram5-cmd-globus-job-get-output" class="olink"><span class="command"><strong>globus-job-get-output</strong></span></a>)
            allow futher interaction
            with the job.
            </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="../../docbook/xsl/docbook-xsl-1.78.1/images/important.png"></td><th align="left">Important</th></tr><tr><td align="left" valign="top"><p>
                When using <span class="command"><strong>globus-job-submit</strong></span>, the job output
                and state will remain on disk on the GRAM resource until one
                of <span class="command"><strong>globus-job-clean</strong></span> or
                <span class="command"><strong>globus-job-cancel</strong></span> is run for that job. Be
                sure to clean up your jobs!
            </p></td></tr></table></div><p>
            The <span class="command"><strong>globus-job-submit</strong></span> program has most of the
            same command-line options as <span class="command"><strong>globus-job-run</strong></span>. 
            When run, instead of displaying the output and error streams of
            the job, it prints the job contact, which is used with the other
            globus-job tools to interact with the job.
            </p><div class="example"><a name="idm49871876512"></a><p class="title"><b>Example 2.8. globus-job-submit</b></p><div class="example-contents"><p>
                This example shows the interaction of submitting a job via 
                <span class="command"><strong>globus-job-submit</strong></span>, checking its status
                with <span class="command"><strong>globus-job-status</strong></span>, getting its
                output with <span class="command"><strong>globus-job-get-output</strong></span>, and then
                cleaning the job with <span class="command"><strong>globus-job-clean</strong></span>. Note
                that this example uses the <code class="literal">jobmanager-fork</code>
                service when retrieving input and cleaning the job. This allows
                those tasks to be done without waiting in the batch system.
                Most sites will allow these sorts of administrative jobs to be
                run on the GRAM node, but consult your system administrator to
                be sure.
                </p><p>Also, note, that the job contact returned from <span class="command"><strong>globus-job-submit</strong></span> can be
                used to get information about the job from any computer,  provided you
                have GRAM tools installed and your security environment set up.
                </p><pre class="screen"><code class="prompt">% </code><span class="command"><strong>globus-job-submit <code class="option">grid.example.org/jobmanager-pbs /bin/hostname</code></strong></span>
<code class="computeroutput">https://grid.example.org:38843/16001600430615223386/5295612977486013582/</code>
<code class="prompt">% </code><span class="command"><strong>globus-job-status <code class="option">https://grid.example.org:38843/16001600430615223386/5295612977486013582/</code></strong></span>
<code class="computeroutput">PENDING</code>
<code class="prompt">% </code><span class="command"><strong>globus-job-status <code class="option">https://grid.example.org:38843/16001600430615223386/5295612977486013582/</code></strong></span>
<code class="computeroutput">ACTIVE</code>
<code class="prompt">% </code><span class="command"><strong>globus-job-status <code class="option">https://grid.example.org:38843/16001600430615223386/5295612977486013582/</code></strong></span>
<code class="computeroutput">DONE</code>
<code class="prompt">% </code><span class="command"><strong>globus-job-get-output <code class="option">-r grid.example.org/jobmanager-fork \
    https://grid.example.org:38843/16001600430615223386/5295612977486013582/</code></strong></span>
<code class="computeroutput">node1.grid.example.org</code>
<code class="prompt">% </code><span class="command"><strong>globus-job-clean <code class="option">-r grid.example.org/jobmanager-fork \
    https://grid.example.org:38843/16001600430615223386/5295612977486013582/</code></strong></span>
<code class="computeroutput">
    WARNING: Cleaning a job means:
        - Kill the job if it still running, and
        - Remove the cached output on the remote resource

    Are you sure you want to cleanup the job now (Y/N) ?
</code>
<strong class="userinput"><code>y</code></strong>
<code class="computeroutput">
Cleanup successful.</code></pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="idm49871859488"></a>2.4. Advanced Jobs with globus-job-run</h3></div></div></div><div class="example"><a name="idm49871858848"></a><p class="title"><b>Example 2.9. Using custom RSL clauses with globus-job-run</b></p><div class="example-contents"><p>
                The following command line submits an mpi job using
                <span class="command"><strong>globus-job-run</strong></span>, setting the
                <code class="literal">jobtype</code> RSL attribute to
                <code class="literal">mpi</code>. Any RSL attribute understood by the
                LRM can be added to a job via this method.
                </p><pre class="screen"><code class="prompt">% </code><span class="command"><strong>globus-job-run <code class="option">grid.example.org/jobmanager-pbs -np 5 -x '&amp;(jobtype=mpi)' a.out</code></strong></span>
<code class="computeroutput">Hello, MPI (rank: 0, count: 5)
Hello, MPI (rank: 3, count: 5)
Hello, MPI (rank: 1, count: 5)
Hello, MPI (rank: 4, count: 5)
Hello, MPI (rank: 2, count: 5)</code>
                </pre></div></div><br class="example-break"><div class="example"><a name="idm49871853824"></a><p class="title"><b>Example 2.10. Constructing RSL strings with globus-job-run</b></p><div class="example-contents"><p>
                The <span class="command"><strong>globus-job-run</strong></span> program can also generate
                the RSL language description of a job based on the command-line
                options given to it. This example combines some of the
                features above and prints out the resulting RSL. This RSL string
                can be passed to tools such as <span class="command"><strong>globusrun</strong></span> to
                be run later.
                </p><pre class="screen"><code class="prompt">% </code><span class="command"><strong>globus-job-run -dumprsl <code class="option">grid.example.org/jobmanager-pbs -np 5 -x '&amp;(jobtype=mpi)' -env GRID=1 -env TEST=1 a.out</code></strong></span>
<code class="computeroutput"> &amp;(jobtype=mpi)
    (executable="a.out")
    (environment= ("GRID" "1") ("TEST" "1"))
    (count=5)</code></pre></div></div><br class="example-break"></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="gram5-user-globusrun"></a>3. Advanced GRAM Client with the globusrun tool</h2></div></div></div><p>The <a href="../pi/#gram5-cmd-globusrun" class="olink"><span class="command"><strong>globusrun</strong></span></a> tool provides a more
            flexible tool for submitting, monitoring, and canceling jobs. With
            this tool, most of the functionality of the GRAM5 APIs are made
            available from the command-line.
            </p><p>
            One major difference between <span class="command"><strong>globusrun</strong></span> and the
            other tools described above is that <span class="command"><strong>globusrun</strong></span>
            uses the <a href="../pi/#gram5-rsl" class="olink">RSL
            language</a> to provide the job description, instead of multiple
            command-line options to describe the various aspects of the job.
            The section on <span class="command"><strong>globus-job-run</strong></span> contained a brief
            example RSL in the <code class="option">-dumprsl</code> example above.
            </p><p>
            The following sections show examples of the different modes that
            <span class="command"><strong>globusrun</strong></span> can run in. Full information about
            <span class="command"><strong>globusrun</strong></span> command-line options is available
            in the public interface guide.
            </p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="idm49871842144"></a>3.1. Checking RSL Syntax</h3></div></div></div><p>
                This example shows how to check that an RSL document contains
                a syntactically correct job description. Note that this mode
                does not do semantic validation of the RSL, so an RSL document
                that passes this test may not work when submitted to a GRAM5
                service.
                </p><div class="example"><a name="idm49871840752"></a><p class="title"><b>Example 2.11. Checking RSL Syntax</b></p><div class="example-contents"><pre class="screen"><code class="prompt">% </code><span class="command"><strong>globusrun</strong></span> <code class="option">-p "&amp;(executable=a.out)"</code>
<code class="computeroutput">
RSL Parsed Successfully...
</code>
<code class="prompt">% </code><span class="command"><strong>globusrun</strong></span> <code class="option">-p "&amp;/executable=a.out)"</code>
<code class="computeroutput">
ERROR: cannot parse RSL &amp;/executable=/adfadf/adf /adf /adf)

Syntax: globusrun [-help] [-f RSL file] [-s][-b][-d][...] [-r RM] [RSL]


Use -help to display full usage</code></pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="idm49871835616"></a>3.2. Checking Service Contacts</h3></div></div></div><p>
                This example shows how to check that a
                <span class="command"><strong>globus-gatekeeper</strong></span> is running at a particular
                contact and that the client and service have mutually-trusted 
                credentials.
                </p><div class="example"><a name="idm49871833920"></a><p class="title"><b>Example 2.12. GRAM Authentication test</b></p><div class="example-contents"><pre class="screen"><code class="prompt">% </code><span class="command"><strong>globusrun</strong></span> <code class="option">-a -r grid.example.org/jobmanager-pbs</code>
<code class="computeroutput">GRAM Authentication test successful</code>
<code class="prompt">% </code><span class="command"><strong>globusrun</strong></span> <code class="option">-a -r grid.example.org/jobmanager-lsf</code>
<code class="computeroutput">GRAM Authentication test failure: the gatekeeper failed to find the requested service</code>
<code class="prompt">% </code><span class="command"><strong>globusrun</strong></span> <code class="option">-a -r grid.example.org/jobmanager-pbs:host@not.example.org</code>
<code class="computeroutput">GRAM Authentication test failure: an authorization operation failed
globus_xio_gsi: gss_init_sec_context failed.
GSS Major Status: Unexpected Gatekeeper or Service Name
globus_gsi_gssapi: Authorization denied: The name of the remote host
(host@not.example.org), and the expected name for the remote host
(grid.example.org) do not match. This happens when the name in the host
certificate does not match the information obtained from DNS and is often a DNS
configuration problem.</code>
                </pre><p>
                    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../../docbook/xsl/docbook-xsl-1.78.1/images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>
                    The DNS configuration problem was a common issue in GRAM2,
                    but GRAM5 will not depend on DNS to resolve names for
                    mutual authentication.
                    </p></td></tr></table></div><p>
                </p></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="idm49871825408"></a>3.3. Checking GRAM service version</h3></div></div></div><p>
                This example shows how to determine what software version of 
                GRAM5 is deployed at a particular service contact.
                </p><div class="example"><a name="idm49871824208"></a><p class="title"><b>Example 2.13. GRAM version check</b></p><div class="example-contents"><pre class="screen"><code class="prompt">% </code><span class="command"><strong>globusrun</strong></span> <code class="option">-j -r grid.example.org/jobmanager-pbs:host@not.example.org</code>
<code class="computeroutput">Toolkit version: 4.3.0-HEAD
Job Manager version: 10.5 (1256257907-0)</code>
                </pre><p>
                    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../../docbook/xsl/docbook-xsl-1.78.1/images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>
                        This example shows the version number for an unreleased
                        development version of GRAM5. The actual numbers
                        returned will be different.
                    </p></td></tr></table></div><p>

                    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../../docbook/xsl/docbook-xsl-1.78.1/images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>
                        This feature is new in GRAM5. When contacting a GRAM2
                        service, <span class="command"><strong>globusrun</strong></span> will display the following error
                        message:

                        </p><pre class="screen"><code class="computeroutput">GRAM version check failed : an incoming HTTP message did not contain the expected information</code></pre><p>
                    </p></td></tr></table></div><p>
                </p></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="idm49871817568"></a>3.4. Basic Interactive job with globusrun</h3></div></div></div><p>
                This example shows how to submit interactive job with
                <span class="command"><strong>globusrun</strong></span>. When the <code class="option">-s</code>
                is used, the output of the job command is returned to the
                client and displayed as if the command ran locally. This
                is similar to the behavior of the
                <span class="command"><strong>globus-job-run</strong></span> program described above.
                </p><div class="example"><a name="idm49871814912"></a><p class="title"><b>Example 2.14. Basic Interactive Job</b></p><div class="example-contents"><pre class="screen"><code class="prompt">% </code><span class="command"><strong>globusrun</strong></span> <code class="option">-s -r example.grid.org/jobmanager-pbs "&amp;(executable=/bin/hostname)(count=5)"</code>
<code class="computeroutput">node03.grid.example.org
node01.grid.example.org
node02.grid.example.urg
node05.grid.example.org
node04.grid.example.org</code></pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="idm49871811840"></a>3.5. Basic batch job with globusrun</h3></div></div></div><p>
                This example shows how to submit, monitor, and cancel a batch
                job using <span class="command"><strong>globusrun</strong></span>. This method is useful
                for the case where the job may run for a long time, the job may
                be queued for a long time, or when there are network
                reliability issues between the client and service.
                </p><div class="example"><a name="idm49871809920"></a><p class="title"><b>Example 2.15. Basic Batch Job</b></p><div class="example-contents"><pre class="screen"><code class="prompt">% </code><span class="command"><strong>globusrun</strong></span> <code class="option">-b -r grid.example.org/jobmanager-pbs "&amp;(executable=/bin/sleep)(arguments=500)"</code>
<code class="computeroutput">globus_gram_client_callback_allow successful
GRAM Job submission successful
https://grid.example.org:38824/16001608125017717261/5295612977486019989/
GLOBUS_GRAM_PROTOCOL_JOB_STATE_PENDING</code>
<code class="prompt">% </code><span class="command"><strong>globusrun</strong></span> <code class="option">-status https://grid.example.org:38824/16001608125017717261/5295612977486019989/</code>
<code class="computeroutput">PENDING</code>
<code class="prompt">% </code><span class="command"><strong>globusrun</strong></span> <code class="option">-k https://grid.example.org:38824/16001608125017717261/5295612977486019989/</code>
<code class="prompt">% </code></pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="idm49871803200"></a>3.6. Refreshing a GRAM5 Credential</h3></div></div></div><p>
                The following example shows how to refresh the credential used
                by a job manager and a job.
                </p><div class="example"><a name="idm49871802032"></a><p class="title"><b>Example 2.16. Refreshing a Credential</b></p><div class="example-contents"><pre class="screen"><code class="prompt">% </code><span class="command"><strong>globusrun</strong></span> <code class="option">-refresh-proxy https://grid.example.org:38824/16001608125017717261/5295612977486019989/</code>
<code class="prompt">% </code><span class="command"><strong>echo $?</strong></span>
<code class="computeroutput">0</code></pre><p>
                        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../../docbook/xsl/docbook-xsl-1.78.1/images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>
                            In GT 6.0,
                            <span class="command"><strong>globusrun</strong></span> does not print any
                            diagnostics when given the
                            <code class="option">-refresh-proxy</code> command-line option.
                            Therefore, check the exit code as above to ensure that
                            the refresh is successful.
                            </p></td></tr></table></div><p>
                    </p></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="idm49871795328"></a>3.7. Dealing with credential expiration</h3></div></div></div><p>
                When the Job Manager's credential is about to expire, it sends
                a message to all clients registered for
                <code class="literal">GLOBUS_GRAM_PROTOCOL_JOB_STATE_FAILED</code>
                notifications that the job manager is terminating and that the
                job will continue to run without the job manager.
                </p><p>
                Any client which receives such a message can (if necessary)
                generate a new proxy as described above and then submit a
                <span class="emphasis"><em>restart request</em></span> to start a job manager
                with a new credential. This job manager will resume monitoring
                the jobs which were started prior to proxy expiration.
                </p><p>
                In this example, the <span class="command"><strong>globusrun</strong></span> displays an
                error message when the job manager's proxy is about to expire.
                The user creates a new proxy and resumes monitoring the job with
                <span class="command"><strong>globusrun</strong></span>.
                </p><div class="example"><a name="idm49871790720"></a><p class="title"><b>Example 2.17. Proxy Expiration Example</b></p><div class="example-contents"><pre class="screen"><code class="prompt">% </code><span class="command"><strong>globusrun</strong></span> <code class="option">-r grid.example.org "&amp;(executable=a.out)"</code>
<code class="computeroutput">globus_gram_client_callback_allow successful
GRAM Job submission successful
GLOBUS_GRAM_PROTOCOL_JOB_STATE_ACTIVE
GLOBUS_GRAM_PROTOCOL_JOB_STATE_FAILED
GRAM Job failed because the user proxy expired (job is still running) (error code 131)</code>
<code class="prompt">% </code><span class="command"><strong>grid-proxy-init</strong></span>
<code class="computeroutput">Your identity: /DC=org/DC=example/OU=grid/CN=Joe User
Enter GRID pass phrase for this identity:
Creating proxy ........................................................................... Done
Your proxy is valid until: Tue Nov 10 04:25:03 2009</code>
<code class="prompt">% </code><span class="command"><strong>globusrun</strong></span> <code class="option">-r grid.example.org "&amp;(restart="https://grid.example.org:1997/16001700477575114131/5295612977486005428/)"</code>
<code class="computeroutput">globus_gram_client_callback_allow successful
GRAM Job submission successful
GLOBUS_GRAM_PROTOCOL_JOB_STATE_ACTIVE
GLOBUS_GRAM_PROTOCOL_JOB_STATE_DONE</code></pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="idm49871783648"></a>3.8. File staging</h3></div></div></div><p>
                In addition to the standard output and error stream 
                output done by <span class="command"><strong>globusrun</strong></span>, GRAM5 can do basic file management
                tasks to stage files to the GRAM5 service node before
                submitting a job and to stage files from the GRAM5 service node
                to a file service after the job completes.
                </p><p>
                GRAM5 file staging supports four URL schemes:
                <code class="literal">ftp</code>, <code class="literal">gsiftp</code>, 
                <code class="literal">http</code>, and <code class="literal">https</code>. Note,
                that for the <code class="literal">https</code> scheme, GRAM expects
                the file server to be running with the same identity as the
                client.
                </p><p>
                General file staging is controlled by three RSL attributes:
                <code class="literal">file_stage_in</code>,
                <code class="literal">file_stage_in_shared</code>, and 
                <code class="literal">file_stage_out</code>. In addition, the files named
                by the RSL attributes <code class="literal">executable</code>,
                <code class="literal">stdin</code> may be staged in and the files named
                by the RSL attributes <code class="literal">stdout</code> and
                <code class="literal">stderr</code> may be staged out.
                </p><p>
                The <code class="literal">file_stage_in_shared</code> RSL attribute
                instructs GRAM to store a local copy of the resource named by
                the URL in the GASS cache. This is useful if multiple
                concurrent jobs will be accessing one or more common files. The
                GASS cache will manage a reference count for files in the cache
                and remove them when all jobs that refer to them complete.
                </p><p>
                The following example shows how to stage a few files from a 
                GridFTP server to the GRAM node. It uses the
                <code class="literal">rsl_substitution</code> mechanism to define a
                subsitution variable to reduce the amount of redundancy in the
                job description.
                </p><div class="example"><a name="idm49871772144"></a><p class="title"><b>Example 2.18. File stage in</b></p><div class="example-contents"><pre class="screen"><code class="prompt">% </code><span class="command"><strong>globusrun</strong></span> <code class="option">-s -r grid.example.org/jobmanager-pbs \
    "&amp;(rsl_substitution = (GRIDFTP_SERVER gsiftp://gridftp.example.org)) \
      (executable=/bin/ls)
      (arguments=/tmp/staged_file)
      (file_stage_in = ($(GRIDFTP_SERVER)/staged_file /tmp/staged_file))"</code>
<code class="computeroutput">/tmp/staged_file</code></pre></div></div><br class="example-break"><p>
                The next example uses the
                <code class="literal">file_stage_in_shared</code> RSL attribute to stage
                a file into the cache. The file is transferred from
                the client using the GASS https server embedded in the
                <span class="command"><strong>globusrun</strong></span> program when the <code class="option">-s</code> option is
                used.
                </p><div class="example"><a name="idm49871766736"></a><p class="title"><b>Example 2.19. File stage in shared</b></p><div class="example-contents"><pre class="screen"><code class="prompt">% </code><span class="command"><strong>globusrun</strong></span> <code class="option">-s -r grid.example.org/jobmanager-pbs \
    "&amp;(executable=/bin/ls) \
      (arguments = -l /tmp/staged_file_link1 /tmp/staged_file_link1) \
      (file_stage_in_shared = \
          (\$(GLOBUSRUN_GASS_URL)/staged_file1 /tmp/staged_file_link1))"</code>
<code class="computeroutput">lrwxr-xr-x  1 juser   juser  120 Nov 11 20:37 /tmp/staged_file1 -&gt; /home/juser/.globus/.gass_cache/local/md5/ff/771bded8a2c7dacc1a1c0fecafa0ce/md5/39/13ab3db7fc002ed54012083ae6ed1c/data</code></pre></div></div><br class="example-break"><p>
                The final staging example uses the
                <code class="literal">file_stage_out</code> RSL attribute to transfer
                a file from the GRAM service to an FTP server using anonymous
                FTP</p><div class="example"><a name="idm49871762112"></a><p class="title"><b>Example 2.20. File stage out</b></p><div class="example-contents"><pre class="screen"><code class="prompt">% </code><span class="command"><strong>globusrun</strong></span> <code class="option">-r grid.example.org/jobmanager-pbs \
    "&amp;(executable=a.out) \
      (file_stage_out = (results.txt ftp://anonymous:nopass@ftp.example.org/incoming/results.txt))"</code>
<code class="prompt">% </code></pre></div></div><br class="example-break"><p>
                </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../../docbook/xsl/docbook-xsl-1.78.1/images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>
                In all of the above cases, multiple files may be staged
                using any combination of the supported URL schemes.
                </p></td></tr></table></div><p>
                </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="idm49871757440"></a>3.9. Temporary files and cleanup</h3></div></div></div><p>
                GRAM5 supports creating a per-job scratch directory which
                can be used as a place to store files that will be
                automatically removed by GRAM when the job completes. It also
                supports an explicit list of files to remove when the job
                completes.
                </p><p>
                This example shows how to stage files into a scratch directory.
                It again uses the embedded GASS https server, stages to the
                GRAM service, then runs /bin/ls in the temporary directory.
                After the job completes, the contents of
                <code class="literal">$(SCRATCH_DIRECTORY)</code> and the directory
                itself are removed.
                </p><div class="example"><a name="idm49871754848"></a><p class="title"><b>Example 2.21. Staging to scratch directory</b></p><div class="example-contents"><pre class="screen"><code class="prompt">% </code><span class="command"><strong>globusrun</strong></span> <code class="option">-s grid.example.org/jobmanager-pbs \
    "&amp;(scratch_dir = \$(HOME)) \
      (directory = \$(SCRATCH_DIRECTORY))
      (file_stage_in = \
          (\$(GLOBUSRUN_GASS_URL)/inputfile $(SCRATCH_DIRECTORY)/inputfile)) \
      (executable = /bin/ls)"</code>
<code class="computeroutput">inputfile</code></pre></div></div><br class="example-break"><p>
                This example shows how to explicitly remove a file that was
                created by the job.
                </p><div class="example"><a name="idm49871750912"></a><p class="title"><b>Example 2.22. Cleaning up a file</b></p><div class="example-contents"><pre class="screen"><code class="prompt">% </code><span class="command"><strong>globusrun</strong></span> <code class="option">-s grid.example.org/jobmanager-pbs \
    "&amp;(executable = /bin/touch) \
      (arguments = temporary_file) \
      (file_clean_up = temporary_file)"</code>
<code class="prompt">% </code></pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="idm49871747584"></a>3.10. Reliable job submit</h3></div></div></div><p>
                The <span class="command"><strong>globusrun</strong></span> command supports a two-phase commit
                protocol to ensure that the client knows the contact of the
                job which has been created so that it can be monitored or 
                canceled in the case of a client or service error. The
                two-phase commit affects both job submission and termination.
                </p><p>
                The two-phase protocol is enabled by using the
                <code class="literal">two_phase</code> RSL attribute, as in the next
                example. When this is enabled, job submission will fail with
                the error
                <code class="literal">GLOBUS_GRAM_PROTOCOL_ERROR_WAITING_FOR_COMMIT</code>.
                The client must respond to this signal with
                either the
                <code class="literal">GLOBUS_GRAM_PROTOCOL_JOB_SIGNAL_COMMIT_REQUEST</code>
                or
                <code class="literal">GLOBUS_GRAM_PROTOCOL_JOB_SIGNAL_COMMIT_EXTEND</code>
                signals to either commit the job to execution or delay the 
                commit timeout. One of these signals must be sent prior to the
                two phase commit timeout, or the job will be discarded by the
                GRAM service.
                </p><p>
                A two phase protocol is also used at job termination if the
                <code class="literal">save_state</code> RSL attribute is used along with
                the <code class="literal">two_phase</code> attribute. When the
                job manager sends a callback with the job state set to
                <code class="literal">GLOBUS_GRAM_PROTOCOL_JOB_STATE_DONE</code> or
                <code class="literal">GLOBUS_GRAM_PROTOCOL_JOB_STATE_DONE</code> it will
                wait to clean up the job until the two phase commit occurs. The
                client must reply with the
                <code class="literal">GLOBUS_GRAM_PROTOCOL_JOB_SIGNAL_COMMIT_END</code>
                signal to cause the job to be cleaned. Otherwise, the job
                will be unloaded from memory until a client restarts the job
                and sends the signal.
                </p><div class="example"><a name="idm49871739264"></a><p class="title"><b>Example 2.23. Two phase commit example</b></p><div class="example-contents"><p>
                    In this example, the user submits a job with a
                    <code class="literal">two_phase</code> timeout of 30 seconds and the
                    <code class="literal">save_state</code> attribute. The client must
                    send commit signals to ensure the job runs.
                    </p><pre class="screen"><code class="prompt">% </code><span class="command"><strong>globusrun</strong></span> <code class="option">-r grid.example.org/jobmanager-pbs \
    "&amp;(two_phase = 30) \
      (save_state = yes) \
      (executable = a.out)"</code>
<code class="computeroutput">
globus_gram_client_callback_allow successful
GRAM Job submission successful
GLOBUS_GRAM_PROTOCOL_JOB_STATE_PENDING
GLOBUS_GRAM_PROTOCOL_JOB_STATE_ACTIVE
GLOBUS_GRAM_PROTOCOL_JOB_STATE_DONE</code>
<code class="prompt">% </code></pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="idm49871733744"></a>3.11. Reconnecting to a job</h3></div></div></div><p>
                If a job manager or client exits before a job has completed,
                the job will continue to run. The client can reconnect to a job
                manager and receive job state notifications and output using
                the <code class="literal">restart</code> RSL attribute.
                </p><div class="example"><a name="idm49871731952"></a><p class="title"><b>Example 2.24. Restart example</b></p><div class="example-contents"><p>
                    This example uses <span class="command"><strong>globus-job-submit</strong></span> to
                    submit a batch job and then <span class="command"><strong>globusrun</strong></span> to reconnect to
                    the job.
                    </p><pre class="screen"><code class="prompt">% </code><span class="command"><strong>globus-job-submit</strong></span> <code class="option">grid.example.org/jobmanager-pbs /bin/sleep 90</code>
<code class="computeroutput">https://grid.example.org:38824/16001746665595486521/5295612977486005662/</code>
<code class="prompt">% </code><span class="command"><strong>globusrun</strong></span> <code class="option">-r grid.example.org/jobmanager-pbs \
    "&amp;(restart = https://grid.example.org:38824/16001746665595486521/5295612977486005662/)"</code>
<code class="computeroutput">globus_gram_client_callback_allow successful
GRAM Job submission successful
GLOBUS_GRAM_PROTOCOL_JOB_STATE_DONE</code>
<code class="prompt">% </code></pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="idm49871724832"></a>3.12. Submitting a Java job</h3></div></div></div><p>
                To submit a job that runs a java program, the client must
                ensure that the job can find the Java interpreter and its
                classes. This example sets the default <code class="envar">PATH</code>
                and <code class="envar">CLASSPATH</code> environment variables and
                uses the shell to locate the path to the <span class="command"><strong>java</strong></span>
                program.
                </p><div class="example"><a name="idm49871722320"></a><p class="title"><b>Example 2.25. Java example</b></p><div class="example-contents"><p>
                    This example uses <span class="command"><strong>globus-job-submit</strong></span> to
                    submit a java job, staging a jar file from a remote
                    service.
                    </p><pre class="screen"><code class="prompt">% </code><span class="command"><strong>globusrun</strong></span> <code class="option">-r grid.example.org/jobmanager-pbs \
    "&amp;(environment = (PATH '/usr/bin:/bin') (CLASSPATH \$(SCRATCH_DIRECTORY)))
      (scratch_dir = \$(HOME)) 
      (directory = \$(SCRATCH_DIRECTORY))
      (rsl_substitution = (JAVA_SERVER http://java.example.org))
      (file_stage_in = 
          (\$(JAVA_SERVER)/example.jar \$(SCRATCH_DIRECTORY)/example.jar) 
          (\$(JAVA_SERVER)/support.jar \$(SCRATCH_DIRECTORY)/support.jar))
      (executable=/bin/sh)
      (arguments=-c 'java -jar example.jar')"</code>
<code class="computeroutput">globus_gram_client_callback_allow successful
GRAM Job submission successful
GLOBUS_GRAM_PROTOCOL_JOB_STATE_PENDING
GLOBUS_GRAM_PROTOCOL_JOB_STATE_ACTIVE
GLOBUS_GRAM_PROTOCOL_JOB_STATE_DONE</code>
<code class="prompt">% </code></pre></div></div><br class="example-break"></div></div></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="gram5-user-troubleshooting"></a>Chapter 3. Troubleshooting</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="section"><a href="#gram5-troubleshooting-client">1. GRAM Client Troubleshooting</a></span></dt><dd><dl><dt><span class="section"><a href="#idm49869510592">1.1. Credential Problems</a></span></dt><dt><span class="section"><a href="#idm49874509008">1.2. Connection Problems</a></span></dt><dd><dl><dt><span class="section"><a href="#idm49869690064">1.2.1. Invalid Resource Name</a></span></dt><dt><span class="section"><a href="#idm49869717424">1.2.2. Mutual Authentication Failure</a></span></dt><dt><span class="section"><a href="#idm49866998304">1.2.3. Certificate Trust Issues</a></span></dt><dt><span class="section"><a href="#idm49866985632">1.2.4. Authentication with the Remote Server Failed</a></span></dt><dt><span class="section"><a href="#idm49866981152">1.2.5. Unable to Find the Requested Service</a></span></dt><dt><span class="section"><a href="#idm49866975648">1.2.6. Failed to Run the Job Manager</a></span></dt></dl></dd><dt><span class="section"><a href="#idm49866969648">1.3. Jobs are Hanging</a></span></dt><dt><span class="section"><a href="#idm49866959792">1.4. Logs and Debugging</a></span></dt><dt><span class="section"><a href="#idm49866955168">1.5. Diagnosing LRM Errors</a></span></dt><dt><span class="section"><a href="#idm49866947104">1.6. Email Support</a></span></dt></dl></dd></dl></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="gram5-troubleshooting-client"></a>1. GRAM Client Troubleshooting</h2></div></div></div><a class="indexterm" name="idm49870910416"></a><a class="indexterm" name="idm49869435264"></a><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="idm49869510592"></a>1.1. Credential Problems</h3></div></div></div><p>
        GRAM requires a client certificate and private key in order
        authenticate with the GRAM service. If these are not available, the
        GRAM client will fail. In typical use, a user will create a temporary
        proxy certificate either derived from their identity certificate issued
        by some certificate authority, or from a service such as myproxy. If a
        GRAM client command returns any error containing the string
        <code class="literal">GSS Major Status</code> you've hit a credential problem.
        Look at the <a href="../../gsic/user/#security-credential-errors" class="olink">Troubleshooting Section</a>
        of the GSI manual for details about how to diagnose and correct these
        errors. The <span class="command"><strong><a href="../../gsic/user/#grid-cert-diagnostics" class="olink">grid-cert-diagnostics</a></strong></span> tool
        with the <code class="option">-p</code> command-line option is especially helpful
        for diagnosing some of these types of problems.
        </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="idm49874509008"></a>1.2. Connection Problems</h3></div></div></div><p>
    There are a few things which can go wrong when trying to contact a GRAM
    service. These have slightly different error types which can help diagnose
    which problem is occurring.
    </p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="idm49869690064"></a>1.2.1. Invalid Resource Name</h4></div></div></div><p>If the hostname or TCP port you are using for a GRAM
    resource name is not correct, then the GRAM client will be
    unable to access the service. Errors of this type will look
    like this:

    </p><pre class="screen"><code class="prompt">% </code><span class="command"><strong>globus-job-run grid.example.org/jobmanager-fork /bin/hostname</strong></span>
<code class="computeroutput">
GRAM Job submission failed because the connection to the server failed (check host and port) (error code 12)</code>
    </pre><p>

    When this occurs, check with the resource administrator for
    correct resource naming so that you can contact the
    service.
    </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="idm49869717424"></a>1.2.2. Mutual Authentication Failure</h4></div></div></div><p>
    GRAM performs mutual authentication, that is, both the client and service
    provide certificates indicating who they are. The service uses the client's
    identity to map the user to a local unix account. The client uses the
    server's identity to verify that the service is running with a host
    credential. The failure of the client to trust the server's certificate
    will generate an error message that looks like this:

    <code class="computeroutput">globus_gsi_gssapi: Authorization denied: The expected name for the remote host (host@alias.example.org) does not match the authenticated name of the remote host (host@grid.example.org). This happens when the name in the host certificate does not match the information obtained from DNS and is often a DNS configuration problem.</code>
    </p><p>
    This mismatch can happen for a number of reasons: a site administrator has
    multiple hosts sharing a certificate, a host has multiple DNS aliases, and
    the client is not aware of which name the server is using for its
    certificate, or a host's name has changed since the certificate was issued.
    The remedy for the client, after confirming with the GRAM administrator
    that the name after "authenticated name of the remote host" is the correct
    certificate name is to use a form of the GRAM resource name which includes
    this name. For example, explicitly adding a name to the abbreviated GRAM 
    contact so that instead of <code class="literal">alias.example.org</code>, you would
    use <code class="literal">alias.example.org::host@grid.example.org</code>.
    </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="idm49866998304"></a>1.2.3. Certificate Trust Issues</h4></div></div></div><p>
    Because of the mutual authentication, both GRAM users and services can hit
    problems if they do not trust their peer's certificate or the Certificate
    Authority which issued it. If the client doesn't trust the server's
    certificate, it is easier to diagnose, because the GRAM service doesn't
    send much information back to the client if it doesn't trust it. However,
    working with the system administrator to get information from the GRAM
    logs will usually fix these problems fairly easily.
    </p><p>
    If the service's certificate is not trusted, the client will receive a
    message like this:

    </p><pre class="screen"><code class="prompt">% </code> <span class="command"><strong>globus-job-run grid.example.org /bin/hostname</strong></span>
<code class="computeroutput">GRAM Job submission failed because an authentication operation failed
OpenSSL Error: s3_clnt.c:915: in library: SSL routines, function SSL3_GET_SERVER_CERTIFICATE: certificate verify failed
globus_gsi_callback_module: Could not verify credential
globus_gsi_callback_module: Can't get the local trusted CA certificate: Untrusted self-signed certificate in chain with hash bbfccedf</code></pre><p>
    </p><p>This error indicates that certificate chain from the service
    certificate to the client contained a self-signed certificate (usually an
    indication that it's a CA certificate), which the client doesn't trust, and
    includes the hash of the certificate name (<code class="literal">bbfccedf</code> in
    this case). If you hit this particular type
    of error, you should send the information to the GRAM administrator and
    determine which CA should be trusted and what its signing policy is, to
    determine if you want to add it to your local set of trust roots.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../../docbook/xsl/docbook-xsl-1.78.1/images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>
    Different versions of OpenSSL produce different hashes for the same
    certificate names. If you upgrade a system (or transfer CA certificates
    between systems) to a different version of OpenSSL, you may hit this
    problem even if you think you have the CA certificate in your trusted
    certificate directory. If so, run the
    <span class="command"><strong>globus-update-certificate-dir</strong></span> program to update your
    hashes.
    </p></td></tr></table></div><p>
    There are other reasons why a certificate might not be trusted (it's in a
    revoked list, it has expired or was issued in the future, etc). For more details look at the 
    <a href="../../gsic/user/#gsic-user-troubleshooting" class="olink">troubleshooting information</a>
    in the GSI user's guide.
    </p><p>
    If for some reason the service does not trust your certificate, you'll get
    a rather cryptic message from GRAM that looks like this:
    </p><pre class="screen"><code class="prompt">% </code><span class="command"><strong>globus-job-run grid.example.org /bin/hostname</strong></span>
<code class="computeroutput">GRAM Job submission failed because an authentication operation failed
globus_gsi_gssapi: Unable to verify remote side's credentials
globus_gsi_gssapi: Unable to verify remote side's credentials: Couldn't verify the remote certificate
OpenSSL Error: s3_pkt.c:1086: in library: SSL routines, function SSL3_READ_BYTES: sslv3 alert bad certificate SSL alert number 42
 (error code 7)</code></pre><p>
    </p><p>
    To remedy this, consult the GRAM administrator to get information from the
    <code class="filename">/var/log/globus-gatekeeper.log</code> file to determine the
    reason why the gatekeeper didn't like your certificate. Again it could be
    CA trust issues, clock skew, or a revoked certificate. The error in the 
    gatekeeper log would typically look like the client-side trust issue above.
    </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="idm49866985632"></a>1.2.4. Authentication with the Remote Server Failed</h4></div></div></div><p>
    Once the GRAM service has authenticated the client, it maps the client's identity
    to a local user account using a grid-mapfile or other mapping service. If this fails,
    the client will receive a message that looks like this:

    </p><pre class="screen"><code class="prompt">% </code><span class="command"><strong>globus-job-run grid.example.org /bin/hostname</strong></span>
<code class="computeroutput">GRAM Job submission failed because authentication with the remote server failed (error code 7)</code></pre><p>
    </p><p>
    To remedy this, consult the system administrator of the GRAM resource to be added to
    the authorized user's list. Be sure to send your credential subject name to make it
    easier for them. To get that information, run the command <span class="command"><strong>grid-cert-info -s</strong></span>.
    </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="idm49866981152"></a>1.2.5. Unable to Find the Requested Service</h4></div></div></div><p>
    Recall that a GRAM resource name includes a component called the
    <code class="literal">service name</code>. The default if not specified is
    <code class="literal">jobmanager</code>, but some sites may not use that
    name, or have a different LRM name than you expect. If you specify
    an incorrect service name, or the default is not present, you'll get
    an error that looks like this:

    </p><pre class="screen"><code class="prompt">% </code><span class="command"><strong>globus-job-run grid.example.org /bin/hostname</strong></span>
<code class="computeroutput">GRAM Job submission failed because the gatekeeper failed to find the requested service (error code 93)</code></pre><p>
    </p><p>
    If you get this error, you'll need to determine which services are
    available on that GRAM resource, either by asking the admin or by looking
    at the entries in <code class="filename">/etc/grid-services</code>
    </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="idm49866975648"></a>1.2.6. Failed to Run the Job Manager</h4></div></div></div><p>
    The GRAM service is split between a priveleged process called the
    <code class="filename">globus-gatekeeper</code> and a non-privileged process called
    the <code class="filename">globus-job-manager</code> which runs as a user process. If the
    <code class="filename">globus-gatekeeper</code> is unable to locate the
    <code class="filename">globus-job-manager</code> process, then this misconfiguration will 
    show up like this:
    </p><pre class="screen"><code class="prompt">% </code><span class="command"><strong>globus-job-run grid.example.org /bin/hostname</strong></span>
<code class="computeroutput">GRAM Job submission failed because the gatekeeper failed to run the job manager (error code 47)</code></pre><p>
    </p><p>
    This is an installation mistake, and the administrator of the GRAM resource must fix this.
    </p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="idm49866969648"></a>1.3. Jobs are Hanging</h3></div></div></div><p>
    One problem GRAM users sometimes encounter is that it looks like jobs
    submitted to GRAM are not making any progress, even though the local
    resource manager thinks they've run. There are a couple of reasons why this
    might occur: GRAM is not getting the information it needs from the local
    resource manager or the GRAM client is not getting the information it
    needs. We'll cover diagnosing and handling the latter case in this
    document, as the other is an system administrator issue.
    </p><p>
    The way <span class="command"><strong>globus-job-run</strong></span> and <span class="command"><strong>globusrun</strong></span>
    determine that jobs have completed is via GRAM job state callbacks. These are
    messages sent by the GRAM service to the client node indicating that something
    significant has happened in the lifecycle of the job. If for some reason the
    GRAM service can not get those messages to the client, the client will not
    be able to detect job state changes.
    </p><p>
    In order to determine if this is the case, submit a job using
    <span class="command"><strong>globus-job-submit</strong></span>, and then use the
    <span class="command"><strong>globus-job-status</strong></span> command to see if the job state
    changes. If it does not, then consult the GRAM administrator---there might be
    some problem with the installation. If it does, then for some reason the
    callbacks are not happening. This might be firewall issues or host naming issues.
    </p><p>
    The GRAM client sends a "callback contact" to the GRAM service when it submits 
    a job, in order that it can receive notifications. This contact is a reference
    to a https server embedded in the GRAM client which only handles GRAM state
    callbacks. As with all web servers, it has a URL which defines how to contact it,
    which in this case consists of the client host name and the service port number.
    If the host name that is used is not resolvable (such as a for a laptop with a 
    dynamic address), then the GRAM service will not be able to contact it. If
    that's the case, you can set the <code class="envar">GLOBUS_HOSTNAME </code>
    environment variable to the IP address that your client can be reached at, and 
    then submit your jobs. This will cause GRAM to publish that address instead of
    what it thinks the client's host name is.
    </p><p>
    Another way that the GRAM service would be unable to send job state updates to
    a client would be if there's a firewall between the service and the client.
    If that's the case, you might need to set the <code class="envar">GLOBUS_TCP_PORT_RANGE</code>
    environment variable to a comma-separated list of numbers which represent a range of 
    minimum and maximum TCP port numbers to listen on. You might have to contact
    your site administrator to determine what TCP ports are allowed. If there are none,
    you can still use <span class="command"><strong>globus-job-submit</strong></span> and
    <span class="command"><strong>globus-job-status</strong></span> to track your job's state changes, or
    use another tool like those mentioned in the <a href="#gram5-user-client-tools" class="olink">section about client tools</a>.
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="idm49866959792"></a>1.4. Logs and Debugging</h3></div></div></div><p>
    The GRAM service has a log file which contains information about the job as
    it is processed. These logs are located by default in
    <code class="filename">/var/log/globus/gram_<em class="replaceable"><code>$USERNAME</code></em>.log</code>.
    There are some different logging levels available, as
    <a href="../admin/#gram5-log-levels" class="olink">described in 
    the GRAM Adminstrator's Guide</a>. These can be controlled on a per-job
    basis by adding the <code class="literal">loglevel</code> RSL attribute to your job
    description. The default is to log only <code class="literal">FATAL</code> and
    <code class="literal">ERROR</code> messages, but other levels can sometimes help
    understand what is going on.
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="idm49866955168"></a>1.5. Diagnosing LRM Errors</h3></div></div></div><p>
    Sometimes, bugs creep into the LRM adapter scripts. When that occurs, the GRAM job will
    usually fail with an error like this: 
    </p><pre class="screen"><code class="computeroutput">GRAM Job failed because the job manager detected an invalid script status (error
code 25)</code></pre><p>
    </p><p>If this occurs, you may have to work with a GRAM administrator to
    help debug this problem. One helpful thing you can do when reporting it is
    to save the GRAM internal script data so that it can be used outside of the
    GRAM service to see what the low-level error looks like. To do this, add the
    RSL fragment <code class="literal">(savejobdescription = yes)</code> to your job
    request. This will cause GRAM to leave a file called something like
    <code class="filename">$HOME/gram_[0-9]*.pl</code> in your home directory. You can use this with
    the internal tool <code class="filename">/usr/share/globus/globus-job-manager-script.pl</code> to
    try to submit the job to the LRM without using the GRAM service. The command line
    <span class="command"><strong>/usr/share/globus/globus-job-manager-script.pl -m <em class="replaceable"><code>LRM</code></em> -c submit -f <em class="replaceable"><code>GRAM-PL-FILE</code></em></strong></span> will attempt to submit the job to the LRM. It will show all the information the LRM
    script sends to the GRAM service, which might include some perl-language error or badly formatted output from the script (which must only output lines which begin with <code class="literal">GRAM_SCRIPT_</code>.
    </p><p>
    In some extreme cases, the savejobdescription option will not generate a
    file. If that's the case, pass <code class="filename">/dev/null</code> as the argument
    to the <code class="option">-f</code> command-line option. The problem is likely a
    perl syntax error which will be reached before the job description is loaded.
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="idm49866947104"></a>1.6. Email Support</h3></div></div></div><p>
    If all else fails, please send information about your problem to <code class="email">&lt;<a class="email" href="mailto:gram-user@globus.org">gram-user@globus.org</a>&gt;</code>.
    You'll have to subscribe to a list before you can send an e-mail to it.
    See <a class="ulink" href="http://dev.globus.org/wiki/Mailing_Lists" target="_top">here</a> for
    general e-mail lists and information on how to subscribe to a list and
    <a class="ulink" href="http://dev.globus.org/wiki/GRAM#Mailing_Lists" target="_top">here</a>
    for GRAM specific lists. Depending on the problem, you may be requested to file a bug report to
    the globus project's <a class="ulink" href="http://jira.globus.org" target="_top">Issue Tracker</a>.
    </p></div></div></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="gram5-user-clientcli"></a>Chapter 4. Command-line Client Reference Pages</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="refentrytitle"><a href="#gram5-cmd-globusrun">globusrun</a></span><span class="refpurpose"> &#8212; Execute and manage jobs via GRAM</span></dt><dt><span class="refentrytitle"><a href="#gram5-cmd-globus-job-cancel">globus-job-cancel</a></span><span class="refpurpose"> &#8212; Cancel a GRAM batch job</span></dt><dt><span class="refentrytitle"><a href="#gram5-cmd-globus-job-clean">globus-job-clean</a></span><span class="refpurpose"> &#8212; Cancel and clean up a GRAM batch job</span></dt><dt><span class="refentrytitle"><a href="#gram5-cmd-globus-job-get-output">globus-job-get-output</a></span><span class="refpurpose"> &#8212; Retrieve the output and error streams from a GRAM job</span></dt><dt><span class="refentrytitle"><a href="#gram5-cmd-globus-job-run">globus-job-run</a></span><span class="refpurpose"> &#8212; Execute a job using GRAM</span></dt><dt><span class="refentrytitle"><a href="#gram5-cmd-globus-job-status">globus-job-status</a></span><span class="refpurpose"> &#8212; Check the status of a GRAM5 job</span></dt><dt><span class="refentrytitle"><a href="#gram5-cmd-globus-job-submit">globus-job-submit</a></span><span class="refpurpose"> &#8212; Submit a batch job using GRAM</span></dt></dl></div><p>
This section contains reference pages for all of the tools described in the
previous section. These pages contain all the command-line options for these
tools. These are available as manpages in the documentation subpackages for 
the globus-gram-client-tools package.
</p><div class="refentry"><a name="gram5-cmd-globusrun"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>globusrun &#8212; Execute and manage jobs via GRAM</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">globusrun</code>  [-help] [-usage] [-version] [-versions]</p></div><div class="cmdsynopsis"><p><code class="command">globusrun</code>  { -p  |   -parse }<br> {  -f <em class="replaceable"><code>RSL_FILENAME</code></em>  |   -file <em class="replaceable"><code>RSL_FILENAME</code></em>   |   RSL_SPECIFICATION }</p></div><div class="cmdsynopsis"><p><code class="command">globusrun</code>  [-n] [-no-interrupt]<br> { -r <em class="replaceable"><code>RESOURCE_CONTACT</code></em>  |   -resource <em class="replaceable"><code>RESOURCE_CONTACT</code></em> }<br> {  -a  |   -authenticate-only  }</p></div><div class="cmdsynopsis"><p><code class="command">globusrun</code>  [-n] [-no-interrupt]<br> { -r <em class="replaceable"><code>RESOURCE_CONTACT</code></em>  |   -resource <em class="replaceable"><code>RESOURCE_CONTACT</code></em> }<br> { -j  |   -jobmanager-version }</p></div><div class="cmdsynopsis"><p><code class="command">globusrun</code>  [-n] [-no-interrupt] { -k  |   -kill } {<em class="replaceable"><code>JOB_ID</code></em>}</p></div><div class="cmdsynopsis"><p><code class="command">globusrun</code>  [-n] [-no-interrupt] [-full-proxy] [-D] { -y  |   -refresh-proxy } {<em class="replaceable"><code>JOB_ID</code></em>}</p></div><div class="cmdsynopsis"><p><code class="command">globusrun</code>  { -status } {<em class="replaceable"><code>JOB_ID</code></em>}</p></div><div class="cmdsynopsis"><p><code class="command">globusrun</code>  [-q] [-quiet] [-o] [-output-enable] [-s] [-server] [-w] [-write-allow] [-n] [-no-interrupt] [-b] [-batch] [-F] [-fast-batch] [-full-proxy] [-D] [-d] [-dryrun]<br> { -r <em class="replaceable"><code>RESOURCE_CONTACT</code></em>  |   -resource <em class="replaceable"><code>RESOURCE_CONTACT</code></em> }<br> {  -f <em class="replaceable"><code>RSL_FILENAME</code></em>  |   -file <em class="replaceable"><code>RSL_FILENAME</code></em>   |   RSL_SPECIFICATION }</p></div></div><div class="refsect1"><a name="idm49853584720"></a><h2>Description</h2><p>
The <span class="command"><strong>globusrun</strong></span> program for submits and manages jobs run on a local or remote job
host. The jobs are controlled by the <span class="command"><strong>globus-job-manager</strong></span>
program which interfaces with a local resource manager that schedules and 
executes the job.
</p><p>
The <span class="command"><strong>globusrun</strong></span> program can be run in a number of different modes chosen by
command-line options.
</p><p>
When <code class="option">-help</code>, <code class="option">-usage</code>,
<code class="option">-version</code>, or <code class="option">-versions</code> command-line options
are used, <span class="command"><strong>globusrun</strong></span> will print out diagnostic information and then exit.
</p><p>
When the <code class="option">-p</code> or <code class="option">-parse</code> command-line option
is present, <span class="command"><strong>globusrun</strong></span> will verify the syntax of the RSL specification and then
terminate. If the syntax is valid, <span class="command"><strong>globusrun</strong></span> will print out the string
"<code class="literal">RSL Parsed Successfully...</code>" and exit with a zero exit code;
otherwise, it will print an error message and terminate with a non-zero exit
code.
</p><p>
When the <code class="option">-a</code> or <code class="option">-authenticate-only</code>
command-line option is present, <span class="command"><strong>globusrun</strong></span> will verify that the service named
by <em class="replaceable"><code>RESOURCE_CONTACT</code></em> exists and the client's
credentials are granted permission to access that service. If authentication
is successful, <span class="command"><strong>globusrun</strong></span> will display the string "<code class="literal">GRAM Authentication test
successful</code>" and exit with a zero exit code; otherwise it will print
an explanation of the problem and will with a non-zero exit code.
</p><p>
When the <code class="option">-j</code> or <code class="option">-jobmanager-version</code>
command-line option is present, <span class="command"><strong>globusrun</strong></span> will attempt to determine the software
version that the service named by
<em class="replaceable"><code>RESOURCE_CONTACT</code></em> is running. If successful, it will
display both the Toolkit version and the Job Manager package version and exit
with a zero exit code; otherwise, it will print an explanation of the problem
and exit with a non-zero exit code.
</p><p>
When the <code class="option">-k</code> or <code class="option">-kill</code>
command-line option is present, <span class="command"><strong>globusrun</strong></span> will attempt to terminate the
job named by <em class="replaceable"><code>JOB_ID</code></em>. If successful, <span class="command"><strong>globusrun</strong></span> will
exit with zero; otherwise it will display an explanation of the problem and
exit with a non-zero exit code.
</p><p>
When the <code class="option">-y</code> or <code class="option">-refresh-proxy</code>
command-line option is present, <span class="command"><strong>globusrun</strong></span> will attempt to delegate a new
X.509 proxy to the job manager which is managing the job named by
<em class="replaceable"><code>JOB_ID</code></em>. If successful, <span class="command"><strong>globusrun</strong></span> will
exit with zero; otherwise it will display an explanation of the problem and
exit with a non-zero exit code. This behavior can be modified by the 
<code class="option">-full-proxy</code> or <code class="option">-D</code> command-line options
to enable full proxy delegation. The default is limited proxy delegation.
</p><p>
When the <code class="option">-status</code> command-line option is present, <span class="command"><strong>globusrun</strong></span> will
attempt to determine the current state of the job. If successful, the state
will be printed to standard output and <span class="command"><strong>globusrun</strong></span> will exit with a zero exit code;
otherwise, a description of the error will be displayed and it will exit
with a non-zero exit code.
</p><p>
Otherwise, <span class="command"><strong>globusrun</strong></span> will submit the job to a GRAM service. By default, <span class="command"><strong>globusrun</strong></span>
waits until the job has terminated or failed before exiting, displaying
information about job state changes and at exit time, the job exit code if it
is provided by the GRAM service.
</p><p>
The <span class="command"><strong>globusrun</strong></span> program can also function as a <span class="application">GASS</span> file
server to allow the <span class="command"><strong>globus-job-manager</strong></span> program to stage files to and from the machine on
which <span class="command"><strong>globusrun</strong></span> is executed to the GRAM service node. This behavior is controlled
by the <code class="option">-s</code>, <code class="option">-o</code>, and <code class="option">-w</code>
command-line options.
</p><p>
Jobs submitted by <span class="command"><strong>globusrun</strong></span> can be monitored interactively or detached. To have
<span class="command"><strong>globusrun</strong></span> detach from the GRAM service after submitting the job, use the
<code class="option">-b</code> or <code class="option">-F</code> command-line options.
</p></div><div class="refsect1"><a name="idm49853555312"></a><h2>Options</h2><p>
The full set of options to <span class="command"><strong>globusrun</strong></span> consist of:

</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">-help</code></span></dt><dd>Display a help message to standard error and
        exit.</dd><dt><span class="term"><code class="option">-usage</code></span></dt><dd>Display a one-line usage summary to standard error
        and exit.</dd><dt><span class="term"><code class="option">-version</code></span></dt><dd>Display the software version of
        <span class="command"><strong>globusrun</strong></span> to standard error and exit.</dd><dt><span class="term"><code class="option">-versions</code></span></dt><dd>Display the software version of all modules used by
        <span class="command"><strong>globusrun</strong></span> (including DiRT information) to standard error and then
        exit.</dd><dt><span class="term"><code class="option">-p</code>, </span><span class="term"><code class="option">-parse</code></span></dt><dd>Do a parse check on the job specification and print
        diagnostics. If a parse error occurs, <span class="command"><strong>globusrun</strong></span> exits with a non-zero exit
        code.</dd><dt><span class="term"><code class="option">-f <em class="replaceable"><code>RSL_FILENAME</code></em></code>, </span><span class="term"><code class="option">-file
        <em class="replaceable"><code>RSL_FILENAME</code></em></code></span></dt><dd>Read job specification from the file named by
        <em class="replaceable"><code>RSL_FILENAME</code></em>.</dd><dt><span class="term"><code class="option">-n</code>, </span><span class="term"><code class="option">-no-interrupt</code></span></dt><dd>Disable handling of the <code class="literal">SIGINT</code>
        signal, so that the interrupt character (typically 
        <span class="keycap"><strong>Control</strong></span>+<span class="keycap"><strong>C</strong></span>) causes
        <span class="command"><strong>globusrun</strong></span> to terminate without canceling the job.</dd><dt><span class="term"><code class="option">-r <em class="replaceable"><code>RESOURCE_CONTACT</code></em></code>, </span><span class="term"><code class="option">-resource <em class="replaceable"><code>RESOURCE_CONTACT</code></em></code></span></dt><dd><p>Submit the request to the resource specified by
        <em class="replaceable"><code>RESOURCE_CONTACT</code></em>. A resource may be specified
        in the following ways:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><em class="replaceable"><code>HOST</code></em></li><li class="listitem"><em class="replaceable"><code>HOST</code></em>:<em class="replaceable"><code>PORT</code></em></li><li class="listitem"><em class="replaceable"><code>HOST</code></em>:<em class="replaceable"><code>PORT</code></em>/<em class="replaceable"><code>SERVICE</code></em></li><li class="listitem"><em class="replaceable"><code>HOST</code></em>/<em class="replaceable"><code>SERVICE</code></em></li><li class="listitem"><em class="replaceable"><code>HOST</code></em>:/<em class="replaceable"><code>SERVICE</code></em></li><li class="listitem"><em class="replaceable"><code>HOST</code></em>::<em class="replaceable"><code>SUBJECT</code></em></li><li class="listitem"><em class="replaceable"><code>HOST</code></em>:<em class="replaceable"><code>PORT</code></em>:<em class="replaceable"><code>SUBJECT</code></em></li><li class="listitem"><em class="replaceable"><code>HOST</code></em>/<em class="replaceable"><code>SERVICE</code></em>:<em class="replaceable"><code>SUBJECT</code></em></li><li class="listitem"><em class="replaceable"><code>HOST</code></em>:/<em class="replaceable"><code>SERVICE</code></em>:<em class="replaceable"><code>SUBJECT</code></em></li><li class="listitem"><em class="replaceable"><code>HOST</code></em>:<em class="replaceable"><code>PORT</code></em>/<em class="replaceable"><code>SERVICE</code></em>:<em class="replaceable"><code>SUBJECT</code></em></li></ul></div><p>
        </p><p>
        If any of <em class="replaceable"><code>PORT</code></em>,
        <em class="replaceable"><code>SERVICE</code></em>, or
        <em class="replaceable"><code>SUBJECT</code></em> is omitted, the defaults of
        <code class="literal">2811</code>, <code class="literal">jobmanager</code>, and
        <code class="literal">host@</code><em class="replaceable"><code>HOST</code></em> are used
        respectively.
        </p></dd><dt><span class="term">-j, </span><span class="term">-jobmanager-version</span></dt><dd>Print the software version being run by the service
        running at
        <em class="replaceable"><code>RESOURCE_CONTACT</code></em>.</dd><dt><span class="term"><code class="option">-k <em class="replaceable"><code>JOB_ID</code></em></code>, </span><span class="term"><code class="option">-kill <em class="replaceable"><code>JOB_ID</code></em></code></span></dt><dd>Kill the job named by
        <em class="replaceable"><code>JOB_ID</code></em></dd><dt><span class="term"><code class="option">-D</code>, </span><span class="term"><code class="option">-full-proxy</code></span></dt><dd>Delegate a full impersonation proxy to the service.
        By default, a limited proxy is delegated when
        needed.</dd><dt><span class="term"><code class="option">-y</code>, </span><span class="term"><code class="option">-refresh-proxy</code></span></dt><dd>Delegate a new proxy to the service processing
        <em class="replaceable"><code>JOB_ID</code></em>.</dd><dt><span class="term"><code class="option">-status</code></span></dt><dd>Display the current status of the job named by
        <em class="replaceable"><code>JOB_ID</code></em>.</dd><dt><span class="term"><code class="option">-q</code>, </span><span class="term"><code class="option">-quiet</code></span></dt><dd>Do not display job state change or exit code
        information.</dd><dt><span class="term"><code class="option">-o</code>, </span><span class="term"><code class="option">-output-enable</code></span></dt><dd>Start a GASS server within the <span class="command"><strong>globusrun</strong></span> application
        that allows access to its standard output and standard error streams
        only. Also, augment the <em class="replaceable"><code>RSL_SPECIFICATION</code></em>
        with a definition of the <code class="varname">GLOBUSRUN_GASS_URL</code> RSL
        substitution and add <code class="literal">stdout</code> and
        <code class="literal">stderr</code> clauses which redirect the output and error
        streams of the job to the output and error streams of the interactive
        <span class="command"><strong>globusrun</strong></span> command. If this is specified, then <span class="command"><strong>globusrun</strong></span> acts as though the
        <code class="option">-q</code> were also specified.</dd><dt><span class="term"><code class="option">-s</code>, </span><span class="term"><code class="option">-server</code></span></dt><dd>Start a GASS server within the <span class="command"><strong>globusrun</strong></span> application
        that allows access to its standard output and standard error streams
        for writing and any file local the the <span class="command"><strong>globusrun</strong></span> invocation for reading.
        Also, augment the <em class="replaceable"><code>RSL_SPECIFICATION</code></em>
        with a definition of the <code class="varname">GLOBUSRUN_GASS_URL</code> RSL
        substitution and add <code class="literal">stdout</code> and
        <code class="literal">stderr</code> clauses which redirect the output and error
        streams of the job to the output and error streams of the interactive
        <span class="command"><strong>globusrun</strong></span> command. If this is specified, then <span class="command"><strong>globusrun</strong></span> acts as though the
        <code class="option">-q</code> were also specified.</dd><dt><span class="term"><code class="option">-w</code>, </span><span class="term"><code class="option">-write-allow</code></span></dt><dd>Start a GASS server within the <span class="command"><strong>globusrun</strong></span> application
        that allows access to its standard output and standard error streams
        for writing and any file local the the <span class="command"><strong>globusrun</strong></span> invocation for reading or
        writing.  Also, augment the <em class="replaceable"><code>RSL_SPECIFICATION</code></em>
        with a definition of the <code class="varname">GLOBUSRUN_GASS_URL</code> RSL
        substitution and add <code class="literal">stdout</code> and
        <code class="literal">stderr</code> clauses which redirect the output and error
        streams of the job to the output and error streams of the interactive
        <span class="command"><strong>globusrun</strong></span> command. If this is specified, then <span class="command"><strong>globusrun</strong></span> acts as though the
        <code class="option">-q</code> were also specified.</dd><dt><span class="term"><code class="option">-b</code>, </span><span class="term"><code class="option">-batch</code></span></dt><dd>Terminate after submitting the job to the GRAM
        service. The <span class="command"><strong>globusrun</strong></span> program will exit after the job hits any of the
        following states: <code class="literal">PENDING</code>,
        <code class="literal">ACTIVE</code>,
        <code class="literal">FAILED</code>, or
        <code class="literal">DONE</code>. The GASS-related options can be used
        to stage input files, but standard output, standard error, and file
        staging after the job completes will not be processed.</dd><dt><span class="term"><code class="option">-F</code>, </span><span class="term"><code class="option">-fast-batch</code></span></dt><dd>Terminate after submitting the job to the GRAM
        service. The <span class="command"><strong>globusrun</strong></span> program will exit after it receives a reply from
        the service. The <em class="replaceable"><code>JOB_ID</code></em> will be displayed
        to standard output before terminating so that the job can be checked
        with the <code class="option">-status</code> command-line option or modified by
        the <code class="option">-refresh-proxy</code> or <code class="option">-kill</code>
        command-line options.</dd><dt><span class="term"><code class="option">-d</code>, </span><span class="term"><code class="option">-dryrun</code></span></dt><dd>Submit the job with the <code class="literal">dryrun</code>
        attribute set to true. When this is done, the job manager will prepare
        to start the job but start short of submitting it to the service. This
        can be used to detect problems with the
        <em class="replaceable"><code>RSL_SPECIFICATION</code></em>.</dd></dl></div><p>
</p></div><div class="refsect1"><a name="idm49853475200"></a><h2>Environment</h2><p>
If the following variables affect the execution of <span class="command"><strong>globusrun</strong></span>

</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="envar">X509_USER_PROXY</code></span></dt><dd>Path to proxy credential.</dd><dt><span class="term"><code class="envar">X509_CERT_DIR</code></span></dt><dd>Path to trusted certificate directory.</dd></dl></div><p>
</p></div><div class="refsect1"><a name="idm49853470464"></a><h2>Bugs</h2><p>
The <span class="command"><strong>globusrun</strong></span> program assumes any failure to contact the job means the
job has terminated. In fact, this may be due to the
<span class="command"><strong>globus-job-manager</strong></span> program exiting after all jobs it is
managing have reached the <code class="literal">DONE</code> or <code class="literal">FAILED</code>
states. In order to reliably detect job termination, the
<code class="literal">two_phase</code> RSL attribute should be used.
</p></div><div class="refsect1"><a name="idm49853466880"></a><h2>See Also</h2><p>
<span class="citerefentry"><span class="refentrytitle">globus-job-submit</span>(1)</span>,
<span class="citerefentry"><span class="refentrytitle">globus-job-run</span>(1)</span>,
<span class="citerefentry"><span class="refentrytitle">globus-job-clean</span>(1)</span>,
<span class="citerefentry"><span class="refentrytitle">globus-job-get-output</span>(1)</span>,
<span class="citerefentry"><span class="refentrytitle">globus-job-cancel</span>(1)</span>
</p></div></div><div class="refentry"><a name="gram5-cmd-globus-job-cancel"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>globus-job-cancel &#8212; Cancel a GRAM batch job</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">globus-job-cancel</code>  [ -f  |   -force ] [ -q  |   -quiet ]  <em class="replaceable"><code>JOBID</code></em> </p></div><div class="cmdsynopsis"><p><code class="command">globus-job-cancel</code>  [-help] [-usage] [-version] [-versions]</p></div></div><div class="refsect1"><a name="idm49856769136"></a><h2>Description</h2><p>
The <span class="command"><strong>globus-job-cancel</strong></span> program cancels the job named by <em class="replaceable"><code>JOBID</code></em>.
Any cached files associated with the job will remain until
<span class="command"><strong>globus-job-clean</strong></span> is executed for the job.
</p><p>
By default, <span class="command"><strong>globus-job-cancel</strong></span> prompts the user prior to canceling the job.  This behavior
can be overridden by specifying the <code class="option">-f</code> or
<code class="option">-force</code> command-line options.

</p></div><div class="refsect1"><a name="idm49856807136"></a><h2>Options</h2><p>
The full set of options to <span class="command"><strong>globus-job-cancel</strong></span> are:

</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">-help</code>, </span><span class="term"><code class="option">-usage</code></span></dt><dd>Display a help message to standard error and
        exit.</dd><dt><span class="term"><code class="option">-version</code></span></dt><dd>Display the software version of the
                <span class="command"><strong>globus-job-cancel</strong></span> program to
                standard output.</dd><dt><span class="term"><code class="option">-version</code></span></dt><dd>Display the software version of the
        <span class="command"><strong>globus-job-cancel</strong></span> program including DiRT
        information to standard output.</dd><dt><span class="term"><code class="option">-force</code>, </span><span class="term"><code class="option">-f</code></span></dt><dd>Do not prompt to confirm job cancel and
        clean-up.</dd><dt><span class="term"><code class="option">-quiet</code>, </span><span class="term"><code class="option">-q</code></span></dt><dd>Do not print diagnostics for succesful cancel.
        Implies <code class="option">-f</code></dd></dl></div><p>
</p></div><div class="refsect1"><a name="idm49856875184"></a><h2>ENVIRONMENT</h2><p>
If the following variables affect the execution of <span class="command"><strong>globus-job-cancel</strong></span>.

</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="envar">X509_USER_PROXY</code></span></dt><dd>Path to proxy credential.</dd><dt><span class="term"><code class="envar">X509_CERT_DIR</code></span></dt><dd>Path to trusted certificate directory.</dd></dl></div><p>
</p></div></div><div class="refentry"><a name="gram5-cmd-globus-job-clean"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>globus-job-clean &#8212; Cancel and clean up a GRAM batch job</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">globus-job-clean</code>  [ -r <em class="replaceable"><code>RESOURCE</code></em>  |   -resource <em class="replaceable"><code>RESOURCE</code></em> ]<br> [ -f  |   -force ] [ -q  |   -quiet ]  <em class="replaceable"><code>JOBID</code></em> </p></div><div class="cmdsynopsis"><p><code class="command">globus-job-clean</code>  [-help] [-usage] [-version] [-versions]</p></div></div><div class="refsect1"><a name="idm49856840992"></a><h2>Description</h2><p>
The <span class="command"><strong>globus-job-clean</strong></span> program cancels the job named by <em class="replaceable"><code>JOBID</code></em> if
it is still running, and then removes any cached files on the GRAM service node
related to that job. In order to do the file clean up, it submits a job which
removes the cache files. By default this cleanup job is submitted to the
default GRAM resource running on the same host as the job. This behavior can be
controlled by specifying a resource manager contact string as the parameter to
the <code class="option">-r</code> or <code class="option">-resource</code> option.
</p><p>
By default, <span class="command"><strong>globus-job-clean</strong></span> prompts the user prior to canceling the job.  This behavior
can be overridden by specifying the <code class="option">-f</code> or
<code class="option">-force</code> command-line options.

</p></div><div class="refsect1"><a name="idm49856836240"></a><h2>Options</h2><p>
The full set of options to <span class="command"><strong>globus-job-clean</strong></span> are:

</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">-help</code>, </span><span class="term"><code class="option">-usage</code></span></dt><dd>Display a help message to standard error and
        exit.</dd><dt><span class="term"><code class="option">-version</code></span></dt><dd>Display the software version of the
                <span class="command"><strong>globus-job-clean</strong></span> program to
                standard output.</dd><dt><span class="term"><code class="option">-version</code></span></dt><dd>Display the software version of the
        <span class="command"><strong>globus-job-clean</strong></span> program including DiRT
        information to standard output.</dd><dt><span class="term"><code class="option">-resource <em class="replaceable"><code>RESOURCE</code></em></code>, </span><span class="term"><code class="option">-r <em class="replaceable"><code>RESOURCE</code></em></code></span></dt><dd>Submit the clean-up job to the resource named by
        <em class="replaceable"><code>RESOURCE</code></em> instead of the default GRAM service
        on the same host as the job contact.</dd><dt><span class="term"><code class="option">-force</code>, </span><span class="term"><code class="option">-f</code></span></dt><dd>Do not prompt to confirm job cancel and
        clean-up.</dd><dt><span class="term"><code class="option">-quiet</code>, </span><span class="term"><code class="option">-q</code></span></dt><dd>Do not print diagnostics for succesful clean-up.
        Implies <code class="option">-f</code></dd></dl></div><p>
</p></div><div class="refsect1"><a name="idm49856821648"></a><h2>ENVIRONMENT</h2><p>
If the following variables affect the execution of <span class="command"><strong>globus-job-clean</strong></span>.

</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="envar">X509_USER_PROXY</code></span></dt><dd>Path to proxy credential.</dd><dt><span class="term"><code class="envar">X509_CERT_DIR</code></span></dt><dd>Path to trusted certificate directory.</dd></dl></div><p>
</p></div></div><div class="refentry"><a name="gram5-cmd-globus-job-get-output"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>globus-job-get-output &#8212; Retrieve the output and error streams from a GRAM job</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">globus-job-get-output</code>  [ -r <em class="replaceable"><code>RESOURCE</code></em>  |   -resource <em class="replaceable"><code>RESOURCE</code></em> ]<br> [ -out  |   -err ] [ -t <em class="replaceable"><code>LINES</code></em>  |   -tail <em class="replaceable"><code>LINES</code></em> ] [ -follow <em class="replaceable"><code>LINES</code></em>  |   -f <em class="replaceable"><code>LINES</code></em> ]  <em class="replaceable"><code>JOBID</code></em> </p></div><div class="cmdsynopsis"><p><code class="command">globus-job-get-output</code>  [-help] [-usage] [-version] [-versions]</p></div></div><div class="refsect1"><a name="idm49855830416"></a><h2>Description</h2><p>
The <span class="command"><strong>globus-job-get-output</strong></span> program retrieves the output and error streams of the job named by
<em class="replaceable"><code>JOBID</code></em>. By default, <span class="command"><strong>globus-job-get-output</strong></span> will retrieve all output
and error data from the job and display them to its own output and error
streams. Other behavior can be controlled by using command-line options.
The data retrieval is implemented by submitting another job which
simply displays the contents of the first job's output and error streams.
By default this retrieval job is submitted to the
default GRAM resource running on the same host as the job. This behavior can be
controlled by specifying a particular resource manager contact string as the
<em class="replaceable"><code>RESOURCE</code></em> parameter to the <code class="option">-r</code> or
<code class="option">-resource</code> option.
</p></div><div class="refsect1"><a name="idm49855841776"></a><h2>Options</h2><p>
The full set of options to <span class="command"><strong>globus-job-get-output</strong></span> are:

</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">-help</code>, </span><span class="term"><code class="option">-usage</code></span></dt><dd>Display a help message to standard error and
        exit.</dd><dt><span class="term"><code class="option">-version</code></span></dt><dd>Display the software version of the
                <span class="command"><strong>globus-job-get-output</strong></span> program to
                standard output.</dd><dt><span class="term"><code class="option">-version</code></span></dt><dd>Display the software version of the
        <span class="command"><strong>globus-job-get-output</strong></span> program including DiRT
        information to standard output.</dd><dt><span class="term"><code class="option">-resource <em class="replaceable"><code>RESOURCE</code></em></code>, </span><span class="term"><code class="option">-r <em class="replaceable"><code>RESOURCE</code></em></code></span></dt><dd>Submit the retrieval job to the resource named by
        <em class="replaceable"><code>RESOURCE</code></em> instead of the default GRAM service
        on the same host as the job contact.</dd><dt><span class="term"><code class="option">-out</code></span></dt><dd>Retrieve only the standard output stream of the
        job. The default is to retrieve both standard output and standard
        error.</dd><dt><span class="term"><code class="option">-err</code></span></dt><dd>Retrieve only the standard error stream of the
        job. The default is to retrieve both standard output and standard
        error.</dd><dt><span class="term"><code class="option">-tail <em class="replaceable"><code>LINES</code></em></code>, </span><span class="term"><code class="option">-t <em class="replaceable"><code>LINES</code></em></code></span></dt><dd>Print only the last <em class="replaceable"><code>LINES</code></em>
        count lines of output from the data streams being retrieved. By default,
        the entire output and error file data is
        retrieved. This option can not be used along with the
        <code class="option">-f</code> or <code class="option">-follow</code>
        options.</dd><dt><span class="term"><code class="option">-follow <em class="replaceable"><code>LINES</code></em></code>, </span><span class="term"><code class="option">-f <em class="replaceable"><code>LINES</code></em></code></span></dt><dd>Print the last <em class="replaceable"><code>LINES</code></em>
        count lines of output from the data streams being retrieved and then
        wait until canceled, printing any subsequent job output that occurs. By
        default, the entire output and error file data is
        retrieved. This option can not be used along with the
        <code class="option">-t</code> or <code class="option">-tail</code>
        options.</dd></dl></div><p>
</p></div><div class="refsect1"><a name="idm49855851968"></a><h2>ENVIRONMENT</h2><p>
If the following variables affect the execution of <span class="command"><strong>globus-job-get-output</strong></span>.

</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="envar">X509_USER_PROXY</code></span></dt><dd>Path to proxy credential.</dd><dt><span class="term"><code class="envar">X509_CERT_DIR</code></span></dt><dd>Path to trusted certificate directory.</dd></dl></div><p>
</p></div></div><div class="refentry"><a name="gram5-cmd-globus-job-run"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>globus-job-run &#8212; Execute a job using GRAM</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">globus-job-run</code>  [-dumprsl] [-dryrun] [-verify]<br> [-file <em class="replaceable"><code>ARGUMENT_FILE</code></em>]<br>  <em class="replaceable"><code>SERVICE_CONTACT</code></em> <br> [ -np <em class="replaceable"><code>PROCESSES</code></em>  |   -count <em class="replaceable"><code>PROCESSES</code></em> ]<br> [ -m <em class="replaceable"><code>MAX_TIME</code></em>  |   -maxtime <em class="replaceable"><code>MAX_TIME</code></em> ]<br> [ -p <em class="replaceable"><code>PROJECT</code></em>  |   -project <em class="replaceable"><code>PROJECT</code></em> ]<br> [ -q <em class="replaceable"><code>QUEUE</code></em>  |   -queue <em class="replaceable"><code>QUEUE</code></em> ]<br> [ -d <em class="replaceable"><code>DIRECTORY</code></em>  |   -directory <em class="replaceable"><code>DIRECTORY</code></em> ]  [-env <em class="replaceable"><code>NAME</code></em>=<em class="replaceable"><code>VALUE</code></em>]... <br> [-stdin
    [ -l  |   -s ]
    <em class="replaceable"><code>STDIN_FILE</code></em>
] [-stdout
    [ -l  |   -s ]
    <em class="replaceable"><code>STDOUT_FILE</code></em>
] [-stderr
    [ -l  |   -s ]
    <em class="replaceable"><code>STDERR_FILE</code></em>
]<br> [-x <em class="replaceable"><code>RSL_CLAUSE</code></em>]<br> [ -l  |   -s ]  <em class="replaceable"><code>EXECUTABLE</code></em>  [ARGUMENT...]</p></div><div class="cmdsynopsis"><p><code class="command">globus-job-run</code>  [-help] [-usage] [-version] [-versions]</p></div></div><div class="refsect1"><a name="idm49857046048"></a><h2>Description</h2><p>
The <span class="command"><strong>globus-job-run</strong></span> program constructs a job description from
its command-line options and then submits the job to the GRAM service running
at <em class="replaceable"><code>SERVICE_CONTACT</code></em>. The executable and arguments to
the executable are provided on the command-line after all other options.
Note that the <code class="option">-dumprsl</code>, <code class="option">-dryrun</code>,
<code class="option">-verify</code>, and <code class="option">-file</code> command-line options must
occur before the first non-option argument, the
<em class="replaceable"><code>SERVICE_CONTACT</code></em>.
</p><p>
The <span class="command"><strong>globus-job-run</strong></span> provides similar functionality to 
<span class="command"><strong>globusrun</strong></span> in that it allows interactive start-up of GRAM
jobs. However, unlike <span class="command"><strong>globusrun</strong></span>, it uses command-line
parameters to define the job instead of RSL expressions.
</p></div><div class="refsect1"><a name="idm49857056096"></a><h2>Options</h2><p>
The full set of options to <span class="command"><strong>globus-job-run</strong></span> are:

</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">-help</code>, </span><span class="term"><code class="option">-usage</code></span></dt><dd>Display a help message to standard error and
        exit.</dd><dt><span class="term"><code class="option">-version</code></span></dt><dd>Display the software version of the
                <span class="command"><strong>globus-job-run</strong></span> program to
                standard output.</dd><dt><span class="term"><code class="option">-version</code></span></dt><dd>Display the software version of the
        <span class="command"><strong>globus-job-run</strong></span> program including DiRT
        information to standard output.</dd><dt><span class="term"><code class="option">-dumprsl</code></span></dt><dd>Translate the command-line options to
        <span class="command"><strong>globus-job-run</strong></span> into an RSL expression
        that can be used with tools such as
        <span class="command"><strong>globusrun</strong></span>.</dd><dt><span class="term"><code class="option">-dryrun</code></span></dt><dd>Submit the job request to the GRAM service
        with the <code class="literal">dryrun</code> option enabled. When this
        option is used, the GRAM service prepares to execute the job
        but stops before submitting the job to the LRM. This can be
        used to diagnose some problems such as missing files.
        </dd><dt><span class="term"><code class="option">-verify</code></span></dt><dd>Submit the job request to the GRAM service
        with the <code class="literal">dryrun</code> option enabled and then
        without it enabled if the dryrun is
        successful.</dd><dt><span class="term"><code class="option">-file <em class="replaceable"><code>ARGUMENT_FILE</code></em></code></span></dt><dd>Read additional command-line options from
        <em class="replaceable"><code>ARGUMENT_FILE</code></em>.</dd><dt><span class="term"><code class="option">-np <em class="replaceable"><code>PROCESSES</code></em></code>, </span><span class="term"><code class="option">-count <em class="replaceable"><code>PROCESSES</code></em></code></span></dt><dd>Start <em class="replaceable"><code>PROCESSES</code></em>
        instances of the executable as a single job.</dd><dt><span class="term"><code class="option">-m <em class="replaceable"><code>MAX_TIME</code></em></code>, </span><span class="term"><code class="option">-maxtime <em class="replaceable"><code>MAX_TIME</code></em></code></span></dt><dd>Schedule the job to run for a maximum of
        <em class="replaceable"><code>MAX_TIME</code></em> minutes.</dd><dt><span class="term"><code class="option">-p <em class="replaceable"><code>PROJECT</code></em></code>, </span><span class="term"><code class="option">-project <em class="replaceable"><code>PROJECT</code></em></code></span></dt><dd>Request that the job use the allocation
        <em class="replaceable"><code>PROJECT</code></em> when submitting the job
        to the LRM.</dd><dt><span class="term"><code class="option">-q <em class="replaceable"><code>QUEUE</code></em></code>, </span><span class="term"><code class="option">-queue <em class="replaceable"><code>QUEUE</code></em></code></span></dt><dd>Request that the job be submitted to the
        LRM using the named <em class="replaceable"><code>QUEUE</code></em>.
        </dd><dt><span class="term"><code class="option">-d <em class="replaceable"><code>DIRECTORY</code></em></code>, </span><span class="term"><code class="option">-directory <em class="replaceable"><code>DIRECTORY</code></em></code></span></dt><dd>Run the job in the directory named by 
        <em class="replaceable"><code>DIRECTORY</code></em>. Input and output files
        will be interpreted relative to this directory. This directory
        must exist on the file system on the LRM-managed
        resource. If not specified, the job will run in the home
        directory of the user the job is running as.</dd><dt><span class="term"><code class="option">-env <em class="replaceable"><code>NAME</code></em>=<em class="replaceable"><code>VALUE</code></em></code></span></dt><dd>Define an environment variable named by 
        <em class="replaceable"><code>NAME</code></em> with the value
        <em class="replaceable"><code>VALUE</code></em> in the job environment. This
        option may be specified multiple times to define multiple 
        environment variables.</dd><dt><span class="term"><code class="option">-stdin [-l | -s] <em class="replaceable"><code>STDIN_FILE</code></em></code></span></dt><dd>Use the file named by
        <em class="replaceable"><code>STDIN_FILE</code></em> as the standard input
        of the job. If the <code class="option">-l</code> option is specified,
        then this file is interpreted to be on a file system local
        to the LRM. If the <code class="option">-s</code> option is specified,
        then this file is interpreted to be on the file system where
        <span class="command"><strong>globus-job-run</strong></span> is being executed, and the
        file will be staged via GASS. If neither is specified, the
        local behavior is assumed.</dd><dt><span class="term"><code class="option">-stdout [-l | -s] <em class="replaceable"><code>STDOUT_FILE</code></em></code></span></dt><dd>Use the file named by
        <em class="replaceable"><code>STDOUT_FILE</code></em> as the destination for
        the standard output of the job. If the <code class="option">-l</code>
        option is specified, then this file is interpreted to be on a
        file system local to the LRM. If the <code class="option">-s</code> option
        is specified, then this file is interpreted to be on the file
        system where <span class="command"><strong>globus-job-run</strong></span> is being
        executed, and the file will be staged via GASS. If neither is
        specified, the local behavior is assumed.</dd><dt><span class="term"><code class="option">-stderr [-l | -s] <em class="replaceable"><code>STDERR_FILE</code></em></code></span></dt><dd>Use the file named by
        <em class="replaceable"><code>STDERR_FILE</code></em> as the destination for
        the standard error of the job. If the <code class="option">-l</code>
        option is specified, then this file is interpreted to be on a
        file system local to the LRM. If the <code class="option">-s</code> option
        is specified, then this file is interpreted to be on the file
        system where <span class="command"><strong>globus-job-run</strong></span> is being
        executed, and the file will be staged via GASS. If neither is
        specified, the local behavior is assumed.</dd><dt><span class="term"><code class="option">-x <em class="replaceable"><code>RSL_CLAUSE</code></em></code></span></dt><dd>Add a set of custom RSL attributes described
        by <em class="replaceable"><code>RSL_CLAUSE</code></em> to the job
        description. The clause must be an RSL conjunction and may
        contain one or more attributes. This can be used to include
        attributes which can not be defined by other command-line
        options of <span class="command"><strong>globus-job-run</strong></span>.</dd><dt><span class="term"><code class="option">-l</code></span></dt><dd>When included outside the context of
        <code class="option">-stdin</code>, <code class="option">-stdout</code>, or
        <code class="option">-stderr</code> command-line options,
        <code class="option">-l</code> option alters the
        interpretation of the executable path. If the
        <code class="option">-l</code> option is specified, then the executable is
        interpreted to be on a file system local to the LRM.</dd><dt><span class="term"><code class="option">-s</code></span></dt><dd>When included outside the context of
        <code class="option">-stdin</code>, <code class="option">-stdout</code>, or
        <code class="option">-stderr</code> command-line options,
        <code class="option">-l</code> option alters the
        interpretation of the executable path. If the <code class="option">-s</code>
        option is specified, then the executable is
        interpreted to be on the file system where
        <span class="command"><strong>globus-job-run</strong></span> is being executed, and the
        file will be staged via GASS. If neither is
        specified, the local behavior is assumed.</dd></dl></div><p>
</p></div><div class="refsect1"><a name="idm49857119344"></a><h2>ENVIRONMENT</h2><p>
If the following variables affect the execution of
<span class="command"><strong>globus-job-run</strong></span>.

</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="envar">X509_USER_PROXY</code></span></dt><dd>Path to proxy credential.</dd><dt><span class="term"><code class="envar">X509_CERT_DIR</code></span></dt><dd>Path to trusted certificate
        directory.</dd></dl></div><p>
</p></div><div class="refsect1"><a name="idm49857114608"></a><h2>See Also</h2><p>
<span class="citerefentry"><span class="refentrytitle">globusrun</span>(1)</span>,
<span class="citerefentry"><span class="refentrytitle">globus-job-submit</span>(1)</span>,
<span class="citerefentry"><span class="refentrytitle">globus-job-clean</span>(1)</span>,
<span class="citerefentry"><span class="refentrytitle">globus-job-get-output</span>(1)</span>,
<span class="citerefentry"><span class="refentrytitle">globus-job-cancel</span>(1)</span>
</p></div></div><div class="refentry"><a name="gram5-cmd-globus-job-status"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>globus-job-status &#8212; Check the status of a GRAM5 job</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">globus-job-status</code>   <em class="replaceable"><code>JOBID</code></em> </p></div><div class="cmdsynopsis"><p><code class="command">globus-job-status</code>  [-help] [-usage] [-version] [-versions]</p></div></div><div class="refsect1"><a name="idm49854217696"></a><h2>Description</h2><p>
The <span class="command"><strong>globus-job-status</strong></span> program checks the status of a GRAM
job by sending a status request to the job manager contact for that job
specifed by the <em class="replaceable"><code>JOBID</code></em> parameter. If
successful, it will print the job status to standard output. The states 
supported by <span class="command"><strong>globus-job-status</strong></span> are:

</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">PENDING</span></dt><dd><p>The job has been submitted to the LRM but has not yet
            begun execution.</p></dd><dt><span class="term">ACTIVE</span></dt><dd><p>The job has begun execution.</p></dd><dt><span class="term">FAILED</span></dt><dd><p>The job has failed.</p></dd><dt><span class="term">SUSPENDED</span></dt><dd><p>The job is currently suspended by the
        LRM.</p></dd><dt><span class="term">DONE</span></dt><dd><p>The job has completed.</p></dd><dt><span class="term">UNSUBMITTED</span></dt><dd><p>The job has been accepted by GRAM, but not yet
        submitted to the LRM.</p></dd><dt><span class="term">STAGE_IN</span></dt><dd><p>The job has been accepted by GRAM and is
        currently staging files prior to being submitted to the
        LRM.</p></dd><dt><span class="term">STAGE_OUT</span></dt><dd><p>The job has completed execution and is
        currently staging files from the service node to other http,
        GASS, or GridFTP servers.</p></dd></dl></div><p>
</p></div><div class="refsect1"><a name="idm49857001472"></a><h2>Options</h2><p>
The full set of options to <span class="command"><strong>globus-job-status</strong></span> are:

</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">-help</code>, </span><span class="term"><code class="option">-usage</code></span></dt><dd>Display a help message to standard error and
        exit.</dd><dt><span class="term"><code class="option">-version</code></span></dt><dd>Display the software version of the
                <span class="command"><strong>globus-job-status</strong></span> program to
                standard output.</dd><dt><span class="term"><code class="option">-versions</code></span></dt><dd>Display the software version of the
        <span class="command"><strong>globus-job-status</strong></span> program including DiRT
        information to standard output.</dd></dl></div><p>
</p></div><div class="refsect1"><a name="idm49856993792"></a><h2>ENVIRONMENT</h2><p>
If the following variables affect the execution of
<span class="command"><strong>globus-job-status</strong></span>.

</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">X509_USER_PROXY</span></dt><dd>Path to proxy credential.</dd><dt><span class="term">X509_CERT_DIR</span></dt><dd>Path to trusted certificate directory.</dd></dl></div><p>
</p></div><div class="refsect1"><a name="idm49856989312"></a><h2>Bugs</h2><p>
The <span class="command"><strong>globus-job-status</strong></span> program can not distinguish between
the case of the job manager terminating for any reason and the job being in the
<code class="literal">DONE</code> state.
</p></div><div class="refsect1"><a name="idm49856987136"></a><h2>See Also</h2><p>
<span class="citerefentry"><span class="refentrytitle">globusrun</span>(1)</span>
</p></div></div><div class="refentry"><a name="gram5-cmd-globus-job-submit"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>globus-job-submit &#8212; Submit a batch job using GRAM</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="cmdsynopsis"><p><code class="command">globus-job-submit</code>  [-dumprsl] [-dryrun] [-verify]<br> [-file <em class="replaceable"><code>ARGUMENT_FILE</code></em>]<br>  <em class="replaceable"><code>SERVICE_CONTACT</code></em> <br> [ -np <em class="replaceable"><code>PROCESSES</code></em>  |   -count <em class="replaceable"><code>PROCESSES</code></em> ]<br> [ -m <em class="replaceable"><code>MAX_TIME</code></em>  |   -maxtime <em class="replaceable"><code>MAX_TIME</code></em> ]<br> [ -p <em class="replaceable"><code>PROJECT</code></em>  |   -project <em class="replaceable"><code>PROJECT</code></em> ]<br> [ -q <em class="replaceable"><code>QUEUE</code></em>  |   -queue <em class="replaceable"><code>QUEUE</code></em> ]<br> [ -d <em class="replaceable"><code>DIRECTORY</code></em>  |   -directory <em class="replaceable"><code>DIRECTORY</code></em> ]  [-env <em class="replaceable"><code>NAME</code></em>=<em class="replaceable"><code>VALUE</code></em>]... <br> [-stdin
    [ -l  |   -s ]
    <em class="replaceable"><code>STDIN_FILE</code></em>
] [-stdout
    [ -l  |   -s ]
    <em class="replaceable"><code>STDOUT_FILE</code></em>
] [-stderr
    [ -l  |   -s ]
    <em class="replaceable"><code>STDERR_FILE</code></em>
]<br> [-x <em class="replaceable"><code>RSL_CLAUSE</code></em>]<br> [ -l  |   -s ]  <em class="replaceable"><code>EXECUTABLE</code></em>  [ARGUMENT...]</p></div><div class="cmdsynopsis"><p><code class="command">globus-job-submit</code>  [-help] [-usage] [-version] [-versions]</p></div></div><div class="refsect1"><a name="idm49857255840"></a><h2>Description</h2><p>
The <span class="command"><strong>globus-job-submit</strong></span> program constructs a job description
from
its command-line options and then submits the job to the GRAM service running
at <em class="replaceable"><code>SERVICE_CONTACT</code></em>. The executable and arguments to
the executable are provided on the command-line after all other options.
Note that the <code class="option">-dumprsl</code>, <code class="option">-dryrun</code>,
<code class="option">-verify</code>, and <code class="option">-file</code> command-line options must
occur before the first non-option argument, the
<em class="replaceable"><code>SERVICE_CONTACT</code></em>.
</p><p>
The <span class="command"><strong>globus-job-submit</strong></span> provides similar functionality to 
<span class="command"><strong>globusrun</strong></span> in that it allows batch submission of GRAM
jobs. However, unlike <span class="command"><strong>globusrun</strong></span>, it uses command-line
parameters to define the job instead of RSL expressions.
</p><p>
To retrieve the output and error streams of the job, use the program
<span class="command"><strong>globus-job-get-output</strong></span>.  To reclaim resources used
by the job by deleting cached files and job state, use the program
<span class="command"><strong>globus-job-clean</strong></span>. To cancel a batch job submitted by
<span class="command"><strong>globus-job-submit</strong></span>, use the program
<span class="command"><strong>globus-job-cancel</strong></span>.
</p></div><div class="refsect1"><a name="idm49857247392"></a><h2>Options</h2><p>
The full set of options to <span class="command"><strong>globus-job-submit</strong></span> are:

</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">-help</code>, </span><span class="term"><code class="option">-usage</code></span></dt><dd>Display a help message to standard error and
        exit.</dd><dt><span class="term"><code class="option">-version</code></span></dt><dd>Display the software version of the
                <span class="command"><strong>globus-job-submit</strong></span> program to
                standard output.</dd><dt><span class="term"><code class="option">-versions</code></span></dt><dd>Display the software version of the
        <span class="command"><strong>globus-job-submit</strong></span> program including DiRT
        information to standard output.</dd><dt><span class="term"><code class="option">-dumprsl</code></span></dt><dd>Translate the command-line options to
        <span class="command"><strong>globus-job-submit</strong></span> into an RSL expression
        that can be used with tools such as
        <span class="command"><strong>globusrun</strong></span>.</dd><dt><span class="term"><code class="option">-dryrun</code></span></dt><dd>Submit the job request to the GRAM service
        with the <code class="literal">dryrun</code> option enabled. When this
        option is used, the GRAM service prepares to execute the job
        but stops before submitting the job to the LRM. This can be
        used to diagnose some problems such as missing files.
        </dd><dt><span class="term"><code class="option">-verify</code></span></dt><dd>Submit the job request to the GRAM service
        with the <code class="literal">dryrun</code> option enabled and then
        without it enabled if the dryrun is
        successful.</dd><dt><span class="term"><code class="option">-file <em class="replaceable"><code>ARGUMENT_FILE</code></em></code></span></dt><dd>Read additional command-line options from
        <em class="replaceable"><code>ARGUMENT_FILE</code></em>.</dd><dt><span class="term"><code class="option">-np <em class="replaceable"><code>PROCESSES</code></em></code>, </span><span class="term"><code class="option">-count <em class="replaceable"><code>PROCESSES</code></em></code></span></dt><dd>Start <em class="replaceable"><code>PROCESSES</code></em>
        instances of the executable as a single job.</dd><dt><span class="term"><code class="option">-m <em class="replaceable"><code>MAX_TIME</code></em></code>, </span><span class="term"><code class="option">-maxtime <em class="replaceable"><code>MAX_TIME</code></em></code></span></dt><dd>Schedule the job to run for a maximum of
        <em class="replaceable"><code>MAX_TIME</code></em> minutes.</dd><dt><span class="term"><code class="option">-p <em class="replaceable"><code>PROJECT</code></em></code>, </span><span class="term"><code class="option">-project <em class="replaceable"><code>PROJECT</code></em></code></span></dt><dd>Request that the job use the allocation
        <em class="replaceable"><code>PROJECT</code></em> when submitting the job
        to the LRM.</dd><dt><span class="term"><code class="option">-q <em class="replaceable"><code>QUEUE</code></em></code>, </span><span class="term"><code class="option">-queue <em class="replaceable"><code>QUEUE</code></em></code></span></dt><dd>Request that the job be submitted to the
        LRM using the named <em class="replaceable"><code>QUEUE</code></em>.
        </dd><dt><span class="term"><code class="option">-d <em class="replaceable"><code>DIRECTORY</code></em></code>, </span><span class="term"><code class="option">-directory <em class="replaceable"><code>DIRECTORY</code></em></code></span></dt><dd>Run the job in the directory named by 
        <em class="replaceable"><code>DIRECTORY</code></em>. Input and output files
        will be interpreted relative to this directory. This directory
        must exist on the file system on the LRM-managed
        resource. If not specified, the job will run in the home
        directory of the user the job is running as.</dd><dt><span class="term"><code class="option">-env <em class="replaceable"><code>NAME</code></em>=<em class="replaceable"><code>VALUE</code></em></code></span></dt><dd>Define an environment variable named by 
        <em class="replaceable"><code>NAME</code></em> with the value
        <em class="replaceable"><code>VALUE</code></em> in the job environment. This
        option may be specified multiple times to define multiple 
        environment variables.</dd><dt><span class="term"><code class="option">-stdin [-l | -s] <em class="replaceable"><code>STDIN_FILE</code></em></code></span></dt><dd>Use the file named by
        <em class="replaceable"><code>STDIN_FILE</code></em> as the standard input
        of the job. If the <code class="option">-l</code> option is specified,
        then this file is interpreted to be on a file system local
        to the LRM. If the <code class="option">-s</code> option is specified,
        then this file is interpreted to be on the file system where
        <span class="command"><strong>globus-job-submit</strong></span> is being executed, and the
        file will be staged via GASS. If neither is specified, the
        local behavior is assumed.</dd><dt><span class="term"><code class="option">-stdout [-l | -s] <em class="replaceable"><code>STDOUT_FILE</code></em></code></span></dt><dd>Use the file named by
        <em class="replaceable"><code>STDOUT_FILE</code></em> as the destination for
        the standard output of the job. If the <code class="option">-l</code>
        option is specified, then this file is interpreted to be on a
        file system local to the LRM. If the <code class="option">-s</code> option
        is specified, then this file is interpreted to be on the file
        system where <span class="command"><strong>globus-job-submit</strong></span> is being
        executed, and the file will be staged via GASS. If neither is
        specified, the local behavior is assumed.</dd><dt><span class="term"><code class="option">-stderr [-l | -s] <em class="replaceable"><code>STDERR_FILE</code></em></code></span></dt><dd>Use the file named by
        <em class="replaceable"><code>STDERR_FILE</code></em> as the destination for
        the standard error of the job. If the <code class="option">-l</code>
        option is specified, then this file is interpreted to be on a
        file system local to the LRM. If the <code class="option">-s</code> option
        is specified, then this file is interpreted to be on the file
        system where <span class="command"><strong>globus-job-submit</strong></span> is being
        executed, and the file will be staged via GASS. If neither is
        specified, the local behavior is assumed.</dd><dt><span class="term"><code class="option">-x <em class="replaceable"><code>RSL_CLAUSE</code></em></code></span></dt><dd>Add a set of custom RSL attributes described
        by <em class="replaceable"><code>RSL_CLAUSE</code></em> to the job
        description. The clause must be an RSL conjunction and may
        contain one or more attributes. This can be used to include
        attributes which can not be defined by other command-line
        options of <span class="command"><strong>globus-job-submit</strong></span>.</dd><dt><span class="term"><code class="option">-l</code></span></dt><dd>When included outside the context of
        <code class="option">-stdin</code>, <code class="option">-stdout</code>, or
        <code class="option">-stderr</code> command-line options,
        <code class="option">-l</code> option alters the
        interpretation of the executable path. If the
        <code class="option">-l</code> option is specified, then the executable is
        interpreted to be on a file system local to the LRM.</dd><dt><span class="term"><code class="option">-s</code></span></dt><dd>When included outside the context of
        <code class="option">-stdin</code>, <code class="option">-stdout</code>, or
        <code class="option">-stderr</code> command-line options,
        <code class="option">-l</code> option alters the
        interpretation of the executable path. If the <code class="option">-s</code>
        option is specified, then the executable is
        interpreted to be on the file system where
        <span class="command"><strong>globus-job-run</strong></span> is being executed, and the
        file will be staged via GASS. If neither is
        specified, the local behavior is assumed.</dd></dl></div><p>
</p></div><div class="refsect1"><a name="idm49857293040"></a><h2>ENVIRONMENT</h2><p>
If the following variables affect the execution of
<span class="command"><strong>globus-job-submit</strong></span>.

</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="envar">X509_USER_PROXY</code></span></dt><dd>Path to proxy credential.</dd><dt><span class="term"><code class="envar">X509_CERT_DIR</code></span></dt><dd>Path to trusted certificate
        directory.</dd></dl></div><p>
</p></div><div class="refsect1"><a name="idm49857326272"></a><h2>See Also</h2><p>
<span class="citerefentry"><span class="refentrytitle">globusrun</span>(1)</span>,
<span class="citerefentry"><span class="refentrytitle">globus-job-run</span>(1)</span>,
<span class="citerefentry"><span class="refentrytitle">globus-job-clean</span>(1)</span>,
<span class="citerefentry"><span class="refentrytitle">globus-job-get-output</span>(1)</span>,
<span class="citerefentry"><span class="refentrytitle">globus-job-cancel</span>(1)</span>
</p></div></div></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="gram5-user-rsl"></a>Chapter 5. GRAM RSL Quick Reference</h1></div></div></div><p>
The GRAM RSL language is described in detail in the <a href="../developer/#gram5-rsl" class="olink">GRAM Developer's Guide</a>. For basic use,
job description RSLs consist of a set of RSL attributes preceded by the &amp; character. The basic
job description looks like:
</p><pre class="programlisting">&amp;
    (<em class="replaceable"><code>attribute</code></em> = <em class="replaceable"><code>value</code></em> )
    (<em class="replaceable"><code>attribute</code></em> = <em class="replaceable"><code>value</code></em> )
    ...
    </pre><p>
</p><p>
The following list contains the RSL attributes which are available in the core
job manager. Other LRM-specific RSL attributes may also be available in some situations.

</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">arguments</code></span></dt><dd>The command line arguments for the executable. Use quotes, if a space is required in a single argument.</dd><dt><span class="term"><code class="literal">count</code></span></dt><dd>The number of executions of the executable.</dd><dt><span class="term"><code class="literal">directory</code></span></dt><dd>Specifies the path of the directory the jobmanager will use as the default directory for the requested job.</dd><dt><span class="term"><code class="literal">dry_run</code></span></dt><dd>If dryrun = yes then the jobmanager will not submit the job for execution and will return success.</dd><dt><span class="term"><code class="literal">environment</code></span></dt><dd>The environment variables that will be defined for the executable in addition to default set that is given to the job by the jobmanager.</dd><dt><span class="term"><code class="literal">executable</code></span></dt><dd>The name of the executable file to run on the remote machine. If the value is a GASS URL, the file is transferred to the remote gass cache before executing the job and removed after the job has terminated.</dd><dt><span class="term"><code class="literal">file_clean_up</code></span></dt><dd>Specifies a list of files which will be removed after the job is completed.</dd><dt><span class="term"><code class="literal">file_stage_in</code></span></dt><dd>Specifies a list of ("remote URL" "local file") pairs which indicate files to be staged to the nodes which will run the job.</dd><dt><span class="term"><code class="literal">file_stage_in_shared</code></span></dt><dd>Specifies a list of ("remote URL" "local file") pairs which indicate files to be staged into the cache. A symlink from the cache to the "local file" path will be made.</dd><dt><span class="term"><code class="literal">file_stage_out</code></span></dt><dd>Specifies a list of ("local file" "remote URL") pairs which indicate files to be staged from the job to a GASS-compatible file server.</dd><dt><span class="term"><code class="literal">gass_cache</code></span></dt><dd>Specifies location to override the GASS cache location.</dd><dt><span class="term"><code class="literal">gram_my_job</code></span></dt><dd>Obsolete and ignored.</dd><dt><span class="term"><code class="literal">host_count</code></span></dt><dd>Only applies to clusters of SMP computers, such as newer IBM SP systems. Defines the number of nodes ("pizza boxes") to distribute the "count" processes across.</dd><dt><span class="term"><code class="literal">job_type</code></span></dt><dd>This specifies how the jobmanager should start the job. Possible values are single (even if the count &gt; 1, only start 1 process or thread), multiple (start count processes or threads), mpi (use the appropriate method (e.g. mpirun) to start a program compiled with a vendor-provided MPI library. Program is started with count nodes), and condor (starts condor jobs in the "condor" universe.)</dd><dt><span class="term"><code class="literal">library_path</code></span></dt><dd>Specifies a list of paths to be appended to the system-specific library path environment variables.</dd><dt><span class="term"><code class="literal">loglevel</code></span></dt><dd>Override the default log level for this job. The value of this attribute consists of a combination of the strings FATAL, ERROR, WARN, INFO, DEBUG, TRACE joined by the | character</dd><dt><span class="term"><code class="literal">logpattern</code></span></dt><dd>Override the default log path pattern for this job. The value of this attribute is a string (potentially containing RSL substitutions) that is evaluated to the path to write the log to. If the resulting string contains the string $(DATE) (or any other RSL substitution), it will be reevaluated at log time.</dd><dt><span class="term"><code class="literal">max_cpu_time</code></span></dt><dd>Explicitly set the maximum cputime for a single execution of the executable. The units is in minutes. The value will go through an atoi() conversion in order to get an integer. If the GRAM scheduler cannot set cputime, then an error will be returned.</dd><dt><span class="term"><code class="literal">max_memory</code></span></dt><dd>Explicitly set the maximum amount of memory for a single execution of the executable. The units is in Megabytes. The value will go through an atoi() conversion in order to get an integer. If the GRAM scheduler cannot set maxMemory, then an error will be returned.</dd><dt><span class="term"><code class="literal">max_time</code></span></dt><dd>The maximum walltime or cputime for a single execution of the executable. Walltime or cputime is selected by the GRAM scheduler being interfaced. The units is in minutes. The value will go through an atoi() conversion in order to get an integer.</dd><dt><span class="term"><code class="literal">max_wall_time</code></span></dt><dd>Explicitly set the maximum walltime for a single execution of the executable. The units is in minutes. The value will go through an atoi() conversion in order to get an integer. If the GRAM scheduler cannot set walltime, then an error will be returned. </dd><dt><span class="term"><code class="literal">min_memory</code></span></dt><dd>Explicitly set the minimum amount of memory for a single execution of the executable. The units is in Megabytes. The value will go through an atoi() conversion in order to get an integer. If the GRAM scheduler cannot set minMemory, then an error will be returned.</dd><dt><span class="term"><code class="literal">project</code></span></dt><dd>Target the job to be allocated to a project account as defined by the scheduler at the defined (remote) resource.</dd><dt><span class="term"><code class="literal">proxy_timeout</code></span></dt><dd>Obsolete and ignored. Now a job-manager-wide setting.</dd><dt><span class="term"><code class="literal">queue</code></span></dt><dd>Target the job to a queue (class) name as defined by the scheduler at the defined (remote) resource.</dd><dt><span class="term"><code class="literal">remote_io_url</code></span></dt><dd>Writes the given value (a URL base string) to a file, and adds the path to that file to the environment throught the GLOBUS_REMOTE_IO_URL environment variable. If this is specified as part of a job restart RSL, the job manager will update the file's contents. This is intended for jobs that want to access files via GASS, but the URL of the GASS server has changed due to a GASS server restart.</dd><dt><span class="term"><code class="literal">restart</code></span></dt><dd>Start a new job manager, but instead of submitting a new job, start managing an existing job. The job manager will search for the job state file created by the original job manager. If it finds the file and successfully reads it, it will become the new manager of the job, sending callbacks on status and streaming stdout/err if appropriate. It will fail if it detects that the old jobmanager is still alive (via a timestamp in the state file). If stdout or stderr was being streamed over the network, new stdout and stderr attributes can be specified in the restart RSL and the jobmanager will stream to the new locations (useful when output is going to a GASS server started by the client that's listening on a dynamic port, and the client was restarted). The new job manager will return a new contact string that should be used to communicate with it. If a jobmanager is restarted multiple times, any of the previous contact strings can be given for the restart attribute.</dd><dt><span class="term"><code class="literal">rsl_substitution</code></span></dt><dd>Specifies a list of values which can be substituted into other rsl attributes' values through the $(SUBSTITUTION) mechanism.</dd><dt><span class="term"><code class="literal">save_state</code></span></dt><dd>Causes the jobmanager to save it's job state information to a persistent file on disk. If the job manager exits or is suspended, the client can later start up a new job manager which can continue monitoring the job.</dd><dt><span class="term"><code class="literal">savejobdescription</code></span></dt><dd>Save a copy of the job description to $HOME</dd><dt><span class="term"><code class="literal">scratch_dir</code></span></dt><dd>Specifies the location to create a scratch subdirectory in. A SCRATCH_DIRECTORY RSL substitution will be filled with the name of the directory which is created.</dd><dt><span class="term"><code class="literal">stderr</code></span></dt><dd>The name of the remote file to store the standard error from the job. If the value is a GASS URL, the standard error from the job is transferred dynamically during the execution of the job. There are two accepted forms of this value. It can consist of a single destination: stderr = URL, or a sequence of destinations: stderr = (DESTINATION) (DESTINATION). In the latter case, the DESTINATION may itself be a URL or a sequence of an x-gass-cache URL followed by a cache tag."</dd><dt><span class="term"><code class="literal">stderr_position</code></span></dt><dd>Specifies where in the file remote standard error streaming should be restarted from. Must be 0.</dd><dt><span class="term"><code class="literal">stdin</code></span></dt><dd>The name of the file to be used as standard input for the executable on the remote machine. If the value is a GASS URL, the file is transferred to the remote gass cache before executing the job and removed after the job has terminated.</dd><dt><span class="term"><code class="literal">stdout</code></span></dt><dd>The name of the remote file to store the standard output from the job. If the value is a GASS URL, the standard output from the job is transferred dynamically during the execution of the job. There are two accepted forms of this value. It can consist of a single destination: stdout = URL, or a sequence of destinations: stdout = (DESTINATION) (DESTINATION). In the latter case, the DESTINATION may itself be a URL or a sequence of an x-gass-cache URL followed by a cache tag.</dd><dt><span class="term"><code class="literal">stdout_position</code></span></dt><dd>Specifies where in the file remote output streaming should be restarted from. Must be 0.</dd><dt><span class="term"><code class="literal">two_phase</code></span></dt><dd>Use a two-phase commit for job submission and completion. The job manager will respond to the initial job request with a WAITING_FOR_COMMIT error. It will then wait for a signal from the client before doing the actual job submission. The integer supplied is the number of seconds the job manager should wait before timing out. If the job manager times out before receiving the commit signal, or if a client issues a cancel signal, the job manager will clean up the job's files and exit, sending a callback with the job status as GLOBUS_GRAM_PROTOCOL_JOB_STATE_FAILED. After the job manager sends a DONE or FAILED callback, it will wait for a commit signal from the client. If it receives one, it cleans up and exits as usual. If it times out and save_state was enabled, it will leave all of the job's files in place and exit (assuming the client is down and will attempt a job restart later). The timeoutvalue can be extended via a signal. When one of the following errors occurs, the job manager does not delete the job state file when it exits: GLOBUS_GRAM_PROTOCOL_ERROR_COMMIT_TIMED_OUT, GLOBUS_GRAM_PROTOCOL_ERROR_TTL_EXPIRED, GLOBUS_GRAM_PROTOCOL_ERROR_JM_STOPPED, GLOBUS_GRAM_PROTOCOL_ERROR_USER_PROXY_EXPIRED. In these cases, it can not be restarted, so the job manager will not wait for the commit signal after sending the FAILED callback</dd><dt><span class="term"><code class="literal">username</code></span></dt><dd>Verify that the job is running as this user.</dd></dl></div><p>

</p></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="gram5-user-errors"></a>Chapter 6. GRAM Error Message Reference</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="section"><a href="#gram5-error-codes">1. Errors</a></span></dt></dl></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="gram5-error-codes"></a>1. Errors</h2></div></div></div><a class="indexterm" name="idm49854676640"></a><div class="table"><a name="gram5-errors-table"></a><p class="title"><b>Table 6.1. GRAM5 Errors</b></p><div class="table-contents"><table summary="GRAM5 Errors" border="1" width="700px"><colgroup><col align="left" class="c1"><col align="left" class="c2"><col align="left" class="c3"></colgroup><thead><tr><th align="left">Error Code</th><th align="left">Reason</th><th align="left">Possible Solutions</th></tr></thead><tbody><tr><td align="left">1</td><td align="left">one of the RSL parameters is not supported</td><td align="left">Check RSL documentation</td></tr><tr><td align="left">2</td><td align="left">the RSL length is greater than the maximum allowed</td><td align="left">Use RSL substitutions to reduce length of RSL strings</td></tr><tr><td align="left">3</td><td align="left">an I/O operation failed</td><td align="left">Enable trace logging and report to gram-dev@globus.org</td></tr><tr><td align="left">4</td><td align="left">jobmanager unable to set default to the directory requested</td><td align="left">Check that RSL <code class="literal">directory</code> attribute refers to a directory that exists on the target system.</td></tr><tr><td align="left">5</td><td align="left">the executable does not exist</td><td align="left">Check that the RSL <code class="literal">executable</code> attribute refers to an executable that exists on the target system.</td></tr><tr><td align="left">6</td><td align="left">of an unused INSUFFICIENT_FUNDS</td><td align="left">Unimplemented feature.</td></tr><tr><td align="left">7</td><td align="left">authentication with the remote server failed</td><td align="left">Check that the contact string contains the proper X.509 DN.</td></tr><tr><td align="left">8</td><td align="left">the user cancelled the job</td><td align="left">Don't cancel jobs you want to complete.</td></tr><tr><td align="left">9</td><td align="left">the system cancelled the job</td><td align="left">Check RSL requirements such as maximum time and memory are valid for the job.</td></tr><tr><td align="left">10</td><td align="left">data transfer to the server failed</td><td align="left">Check gatekeeper and/or job manager logs to see why the process failed.</td></tr><tr><td align="left">11</td><td align="left">the stdin file does not exist</td><td align="left">Check that the RSL <code class="literal">stdin</code> attribute refers to a file that exists on the target system or has a valid ftp, gsiftp, http, or https URL.</td></tr><tr><td align="left">12</td><td align="left">the connection to the server failed (check host and port)</td><td align="left">Check that the service is running on the expected TCP/IP port.
               Check that no firewall prevents contacting that TCP/IP port.
               Check <code class="filename"><code class="envar">$GLOBUS_LOCATION</code>/var/globus-gatekeeper.log</code> for runtme configuration errors.</td></tr><tr><td align="left">13</td><td align="left">the provided RSL 'maxtime' value is not an integer</td><td align="left">Check that the RSL <code class="literal">maxtime</code> value evaluates to an integer.</td></tr><tr><td align="left">14</td><td align="left">the provided RSL 'count' value is not an integer</td><td align="left">Check that the RSL <code class="literal">count</code> value evaluates to an integer.</td></tr><tr><td align="left">15</td><td align="left">the job manager received an invalid RSL</td><td align="left">Check that the RSL string can be parsed by using <span class="command"><strong>globusrun -p <em class="replaceable"><code>RSL</code></em></strong></span>.</td></tr><tr><td align="left">16</td><td align="left">the job manager failed in allowing others to make contact</td><td align="left">Check job manager log.</td></tr><tr><td align="left">17</td><td align="left">the job failed when the job manager attempted to run it</td><td align="left">Verify that the LRM is configured properly.</td></tr><tr><td align="left">18</td><td align="left">an invalid paradyn was specified</td><td align="left">OBSOLETE IN GRAM2</td></tr><tr><td align="left">19</td><td align="left">the provided RSL 'jobtype' value is invalid</td><td align="left">The RSL <code class="literal">jobtype</code> attribute is not indicated as supported by the LRM. Valid <code class="literal">jobtype</code> values are <code class="literal">single</code>,  <code class="literal">multiple</code>, <code class="literal">mpi</code>, and <code class="literal">condor</code>.</td></tr><tr><td align="left">20</td><td align="left">the provided RSL 'myjob' value is invalid</td><td align="left">OBSOLETE IN GRAM5</td></tr><tr><td align="left">21</td><td align="left">the job manager failed to locate an internal script argument file</td><td align="left">Check that <code class="filename"><code class="envar">$GLOBUS_LOCATION</code>/libexec/globus-job-manager-script.pl</code> exists and is executable.
        Check that the LRM-specific perl module is located in <code class="filename"><code class="envar">$GLOBUS_LOCATION</code>/lib/perl/Globus/GRAM/JobManager/</code> directory and is valid. The command <span class="command"><strong>perl -I$GLOBUS_LOCATION/lib/perl $GLOBUS_LOCATION/lib/perl/Globus/GRAM/JobManager/<em class="replaceable"><code>LRM</code></em>.pm</strong></span> can be used to check if there are any syntax errors in the script.</td></tr><tr><td align="left">22</td><td align="left">the job manager failed to create an internal script argument file</td><td align="left">Check that your home directory is writable and not full.</td></tr><tr><td align="left">23</td><td align="left">the job manager detected an invalid job state</td><td align="left">Check job manager logs.</td></tr><tr><td align="left">24</td><td align="left">the job manager detected an invalid script response</td><td align="left">Check job manager logs. This is likely a bug in the LRM script.</td></tr><tr><td align="left">25</td><td align="left">the job manager detected an invalid script status</td><td align="left">Check job manager logs. This is likely a bug in the LRM script.</td></tr><tr><td align="left">26</td><td align="left">the provided RSL 'jobtype' value is not supported by this job manager</td><td align="left">Check that the RSL <code class="literal">jobtype</code> attribute is implemented by the LRM script. Note that some job types require configuration</td></tr><tr><td align="left">27</td><td align="left">unused ERROR_UNIMPLEMENTED</td><td align="left">LRM does not support some feature included in the job request. </td></tr><tr><td align="left">28</td><td align="left">the job manager failed to create an internal script submission file</td><td align="left">Check that the user's home file system is not full. Check job manager log</td></tr><tr><td align="left">29</td><td align="left">the job manager cannot find the user proxy</td><td align="left">Check that client is delegating a proxy when authenticating with the gatekeeper.
        Check that the user's home filesystem and the <code class="filename">/tmp</code> file system are not full.</td></tr><tr><td align="left">30</td><td align="left">the job manager failed to open the user proxy</td><td align="left">Check that the user's home filesystem and the <code class="filename">/tmp</code> file system are not full.</td></tr><tr><td align="left">31</td><td align="left">the job manager failed to cancel the job as requested</td><td align="left">Check that the user's home filesystem and the <code class="filename">/tmp</code> file system are not full.</td></tr><tr><td align="left">32</td><td align="left">system memory allocation failed</td><td align="left">Check job manager log for details.</td></tr><tr><td align="left">33</td><td align="left">the interprocess job communication initialization failed</td><td align="left">OBSOLETE IN GRAM5</td></tr><tr><td align="left">34</td><td align="left">the interprocess job communication setup failed</td><td align="left">OBSOLETE IN GRAM5</td></tr><tr><td align="left">35</td><td align="left">the provided RSL 'host count' value is invalid</td><td align="left">Check that the RSL <code class="literal">host_count</code> attribute evaluates to an integer.</td></tr><tr><td align="left">36</td><td align="left">one of the provided RSL parameters is unsupported</td><td align="left">Check job manager log for details about invalid parameter.</td></tr><tr><td align="left">37</td><td align="left">the provided RSL 'queue' parameter is invalid</td><td align="left">Check that the RSL <code class="literal">queue</code> attribute evaluates to a string that corresponds to an LRM-specific queue name.</td></tr><tr><td align="left">38</td><td align="left">the provided RSL 'project' parameter is invalid</td><td align="left">Check that the RSL <code class="literal">project</code> attribute evaluates to a string that corresponds to an LRM-specific project name.</td></tr><tr><td align="left">39</td><td align="left">the provided RSL string includes variables that could not be identified</td><td align="left">Check that all RSL substitutions are defined before being used in the job description.</td></tr><tr><td align="left">40</td><td align="left">the provided RSL 'environment' parameter is invalid</td><td align="left">Check that the RSL <code class="literal">environment</code> attribute contains a sequence of <em class="replaceable"><code>VARIABLE</code></em> <em class="replaceable"><code>VALUE</code></em> pairs.</td></tr><tr><td align="left">41</td><td align="left">the provided RSL 'dryrun' parameter is invalid</td><td align="left">Remove the RSL <code class="literal">dryrun</code> attribute from the job description.</td></tr><tr><td align="left">42</td><td align="left">the provided RSL is invalid (an empty string)</td><td align="left">Include a non-empty RSL string in your job submission request.</td></tr><tr><td align="left">43</td><td align="left">the job manager failed to stage the executable</td><td align="left">Check that the file service hosting the executable is reachable from the GRAM5 service node.
        Check that the executable exists on the file service node.
        Check that there is sufficient disk space in the user's home directory on the service node to store the executable.</td></tr><tr><td align="left">44</td><td align="left">the job manager failed to stage the stdin file</td><td align="left">Check that the file service hosting the standard input file is reachable from the GRAM5 service node.
        Check that the standard input file exists on the file service node.
        Check that there is sufficient disk space in the user's home directory on the service node to store the standard input file.</td></tr><tr><td align="left">45</td><td align="left">the requested job manager type is invalid</td><td align="left">OBSOLETE IN GRAM5</td></tr><tr><td align="left">46</td><td align="left">the provided RSL 'arguments' parameter is invalid</td><td align="left">OBSOLETE IN GRAM2</td></tr><tr><td align="left">47</td><td align="left">the gatekeeper failed to run the job manager</td><td align="left">Check the gatekeeper or job manager logs for more information.</td></tr><tr><td align="left">48</td><td align="left">the provided RSL could not be properly parsed</td><td align="left">Check that the RSL string can be parsed by using <span class="command"><strong>globusrun -p <em class="replaceable"><code>RSL</code></em></strong></span>.</td></tr><tr><td align="left">49</td><td align="left">there is a version mismatch between GRAM components</td><td align="left">Ask system administrator to upgrade GRAM service to GRAM2 or GRAM5</td></tr><tr><td align="left">50</td><td align="left">the provided RSL 'arguments' parameter is invalid</td><td align="left">Check that the RSL <code class="literal">arguments</code> attribute evaluates to a sequence of strings.</td></tr><tr><td align="left">51</td><td align="left">the provided RSL 'count' parameter is invalid</td><td align="left">Check that the RSL <code class="literal">count</code> attribute evaluates to a positive integer value.</td></tr><tr><td align="left">52</td><td align="left">the provided RSL 'directory' parameter is invalid</td><td align="left">Check that the RSL <code class="literal">directory</code> attribute evaluates to a string.</td></tr><tr><td align="left">53</td><td align="left">the provided RSL 'dryrun' parameter is invalid</td><td align="left">Check that the RSL <code class="literal">dryrun</code> attribute evaluates to either <code class="literal">yes</code> or <code class="literal">no</code>.</td></tr><tr><td align="left">54</td><td align="left">the provided RSL 'environment' parameter is invalid</td><td align="left">Check that the RSL <code class="literal">environment</code> attribute evaluates to a sequence of <em class="replaceable"><code>VARIABLE</code></em>, <em class="replaceable"><code>VALUE</code></em> pairs.</td></tr><tr><td align="left">55</td><td align="left">the provided RSL 'executable' parameter is invalid</td><td align="left">Check that the RSL <code class="literal">executable</code> attribute evaluates to a string value.</td></tr><tr><td align="left">56</td><td align="left">the provided RSL 'host_count' parameter is invalid</td><td align="left">Check that the RSL <code class="literal">host_count</code> attribute evaluates to a positive integer value.</td></tr><tr><td align="left">57</td><td align="left">the provided RSL 'jobtype' parameter is invalid</td><td align="left">Check that the RSL <code class="literal">jobtype</code> attribute evaluates to one of <code class="literal">single</code>, <code class="literal">multiple</code>, <code class="literal">mpi</code>, or <code class="literal">condor</code></td></tr><tr><td align="left">58</td><td align="left">the provided RSL 'maxtime' parameter is invalid</td><td align="left">Check that the RSL <code class="literal">maxtime</code> attribute evaluates to a positive integer value.</td></tr><tr><td align="left">59</td><td align="left">the provided RSL 'myjob' parameter is invalid</td><td align="left">OBSOLETE IN GRAM5.</td></tr><tr><td align="left">60</td><td align="left">the provided RSL 'paradyn' parameter is invalid</td><td align="left">OBSOLETE IN GRAM2.</td></tr><tr><td align="left">61</td><td align="left">the provided RSL 'project' parameter is invalid</td><td align="left">Check that the RSL <code class="literal">project</code> attribute evaluates to a string value.</td></tr><tr><td align="left">62</td><td align="left">the provided RSL 'queue' parameter is invalid</td><td align="left">Check that the RSL <code class="literal">queue</code> attribute evaluates to a string value.</td></tr><tr><td align="left">63</td><td align="left">the provided RSL 'stderr' parameter is invalid</td><td align="left">Check that the RSL <code class="literal">stderr</code> attribute evaluates to a string value or a sequence of <em class="replaceable"><code>DESTINATION</code></em> URLs with optional <em class="replaceable"><code>CACHE_TAG</code></em> string parameters.</td></tr><tr><td align="left">64</td><td align="left">the provided RSL 'stdin' parameter is invalid</td><td align="left">Check that the RSL <code class="literal">stdin</code> attribute evaluates to a string value.</td></tr><tr><td align="left">65</td><td align="left">the provided RSL 'stdout' parameter is invalid</td><td align="left">Check that the RSL <code class="literal">stdout</code> attribute evaluates to a string value or a sequence of <em class="replaceable"><code>DESTINATION</code></em> URLs with optional <em class="replaceable"><code>CACHE_TAG</code></em> string parameters.</td></tr><tr><td align="left">66</td><td align="left">the job manager failed to locate an internal script</td><td align="left">Check job manager log for more details.</td></tr><tr><td align="left">67</td><td align="left">the job manager failed on the system call pipe()</td><td align="left">OBSOLETE IN GRAM5</td></tr><tr><td align="left">68</td><td align="left">the job manager failed on the system call fcntl()</td><td align="left">OBSOLETE IN GRAM2</td></tr><tr><td align="left">69</td><td align="left">the job manager failed to create the temporary stdout filename</td><td align="left">OBSOLETE IN GRAM5</td></tr><tr><td align="left">70</td><td align="left">the job manager failed to create the temporary stderr filename</td><td align="left">OBSOLETE IN GRAM5</td></tr><tr><td align="left">71</td><td align="left">the job manager failed on the system call fork()</td><td align="left">OBSOLETE IN GRAM2</td></tr><tr><td align="left">72</td><td align="left">the executable file permissions do not allow execution</td><td align="left">Check that the RSL <code class="literal">executable</code> attribute refers to an executable program or script.</td></tr><tr><td align="left">73</td><td align="left">the job manager failed to open stdout</td><td align="left">Check that the RSL <code class="literal">stdout</code> attribute refers to one or more valid destination files or URLs.</td></tr><tr><td align="left">74</td><td align="left">the job manager failed to open stderr</td><td align="left">Check that the RSL <code class="literal">stderr</code> attribute refers to one or more valid destination files or URLs.</td></tr><tr><td align="left">75</td><td align="left">the cache file could not be opened in order to relocate the user proxy</td><td align="left">Check that the user's home directory is writable and not full on the GRAM5 service node.</td></tr><tr><td align="left">76</td><td align="left">cannot access cache files in ~/.globus/.gass_cache, check permissions, quota, and disk space</td><td align="left">Check that the user's home directory is writable and not full on the GRAM5 service node.</td></tr><tr><td align="left">77</td><td align="left">the job manager failed to insert the contact in the client contact list</td><td align="left">Check job manager log</td></tr><tr><td align="left">78</td><td align="left">the contact was not found in the job manager's client contact list</td><td align="left">Don't attempt to unregister callback contacts that are not registered</td></tr><tr><td align="left">79</td><td align="left">connecting to the job manager failed.  Possible reasons: job terminated, invalid job contact, network problems, ...</td><td align="left">Check that the job manager process is running.
        Check that the job manager credential has not expired.
        Check that the job manager contact refers to the correct TCP/IP host and port.
        Check that the job manager contact is not blocked by a firewall.</td></tr><tr><td align="left">80</td><td align="left">the syntax of the job contact is invalid</td><td align="left">Check the syntax of job contact string.</td></tr><tr><td align="left">81</td><td align="left">the executable parameter in the RSL is undefined</td><td align="left">Include the RSL <code class="literal">executable</code> in all job requests.</td></tr><tr><td align="left">82</td><td align="left">the job manager service is misconfigured.  condor arch undefined</td><td align="left">Add the <code class="option">-condor-arch</code> to the command-line or configuration file for a job manager configured to use the <code class="literal">condor</code> LRM.</td></tr><tr><td align="left">83</td><td align="left">the job manager service is misconfigured.  condor os undefined</td><td align="left">Add the <code class="option">-condor-os</code> to the command-line or configuration file for a job manager configured to use the <code class="literal">condor</code> LRM.</td></tr><tr><td align="left">84</td><td align="left">the provided RSL 'min_memory' parameter is invalid</td><td align="left">Check that the RSL <code class="literal">min_memory</code> attribute evaluates to a positive integer value.</td></tr><tr><td align="left">85</td><td align="left">the provided RSL 'max_memory' parameter is invalid</td><td align="left">Check that the RSL <code class="literal">max_memory</code> attribute evaluates to a positive integer value.</td></tr><tr><td align="left">86</td><td align="left">the RSL 'min_memory' value is not zero or greater</td><td align="left">Check that the RSL <code class="literal">min_memory</code> attribute evaluates to a positive integer value.</td></tr><tr><td align="left">87</td><td align="left">the RSL 'max_memory' value is not zero or greater</td><td align="left">Check that the RSL <code class="literal">max_memory</code> attribute evaluates to a positive integer value.</td></tr><tr><td align="left">88</td><td align="left">the creation of a HTTP message failed</td><td align="left">Check job manager log.</td></tr><tr><td align="left">89</td><td align="left">parsing incoming HTTP message failed</td><td align="left">Check job manager log.</td></tr><tr><td align="left">90</td><td align="left">the packing of information into a HTTP message failed</td><td align="left">Check job manager log.</td></tr><tr><td align="left">91</td><td align="left">an incoming HTTP message did not contain the expected information</td><td align="left">Check job manager log.</td></tr><tr><td align="left">92</td><td align="left">the job manager does not support the service that the client requested</td><td align="left">Check that the client is talking to the correct servce</td></tr><tr><td align="left">93</td><td align="left">the gatekeeper failed to find the requested service</td><td align="left">OBSOLETE IN GRAM2</td></tr><tr><td align="left">94</td><td align="left">the jobmanager does not accept any new requests (shutting down)</td><td align="left">Execute queries before the job has been cleaned up.</td></tr><tr><td align="left">95</td><td align="left">the client failed to close the listener associated with the callback URL</td><td align="left">Call <code class="function">globus_gram_client_callback_disallow()</code> with a valid the callback contact.</td></tr><tr><td align="left">96</td><td align="left">the gatekeeper contact cannot be parsed</td><td align="left">Check the syntax of the gatekeeper contact string you are attempting to contact.</td></tr><tr><td align="left">97</td><td align="left">the job manager could not find the 'poe' command</td><td align="left">OBSOLETE IN GRAM2</td></tr><tr><td align="left">98</td><td align="left">the job manager could not find the 'mpirun' command</td><td align="left">Configure the LRM script with <code class="filename">mpirun</code> in your path.</td></tr><tr><td align="left">99</td><td align="left">the provided RSL 'start_time' parameter is invalid</td><td align="left">OBSOLETE IN GRAM2</td></tr><tr><td align="left">100</td><td align="left">the provided RSL 'reservation_handle' parameter is invalid</td><td align="left">OBSOLETE IN GRAM2</td></tr><tr><td align="left">101</td><td align="left">the provided RSL 'max_wall_time' parameter is invalid</td><td align="left">Check that the RSL <code class="literal">max_wall_time</code> attribute evaluates to a positive integer.</td></tr><tr><td align="left">102</td><td align="left">the RSL 'max_wall_time' value is not zero or greater</td><td align="left">Check that the RSL <code class="literal">max_wall_time</code> attribute evaluates to a positive integer.</td></tr><tr><td align="left">103</td><td align="left">the provided RSL 'max_cpu_time' parameter is invalid</td><td align="left">Check that the RSL <code class="literal">max_cpu_time</code> attribute evaluates to a positive integer.</td></tr><tr><td align="left">104</td><td align="left">the RSL 'max_cpu_time' value is not zero or greater</td><td align="left">Check that the RSL <code class="literal">max_cpu_time</code> attribute evaluates to a positive integer.</td></tr><tr><td align="left">105</td><td align="left">the job manager is misconfigured, a scheduler script is missing</td><td align="left">Check that the adminstrator has configured the LRM by running its setup script.</td></tr><tr><td align="left">106</td><td align="left">the job manager is misconfigured, a scheduler script has invalid permissions</td><td align="left">Check that the adminstrator has installed the <code class="filename"><code class="envar">GLLOBUS_LOCATION</code>/libexec/globus-job-manager-script.pl</code> script.
        Check that the file system containing that script allows file execution.</td></tr><tr><td align="left">107</td><td align="left">the job manager failed to signal the job</td><td align="left">OBSOLETE IN GRAM2</td></tr><tr><td align="left">108</td><td align="left">the job manager did not recognize/support the signal type</td><td align="left">Check that your signal operation is using the correct signal constant.</td></tr><tr><td align="left">109</td><td align="left">the job manager failed to get the job id from the local scheduler</td><td align="left">OBSOLETE IN GRAM2</td></tr><tr><td align="left">110</td><td align="left">the job manager is waiting for a commit signal</td><td align="left">Send a two-phase commit signal to the job manager to acknowledge receiving the job contact from the job manager.</td></tr><tr><td align="left">111</td><td align="left">the job manager timed out while waiting for a commit signal</td><td align="left">Send a two-phase commit signal to the job manager to acknowledge receiving the job contact from the job manager.
        Increase the two-phase commit time out for your job.
        Check that the job manager contact TCP/IP port is reachable from your client.</td></tr><tr><td align="left">112</td><td align="left">the provided RSL 'save_state' parameter is invalid</td><td align="left">Check that the RSL <code class="literal">save_state</code> attribute is set to <code class="literal">yes</code> or <code class="literal">no</code>.</td></tr><tr><td align="left">113</td><td align="left">the provided RSL 'restart' parameter is invalid</td><td align="left">Check that the RSL <code class="literal">restart</code> attribute evaluates to a string containing a job contact string.</td></tr><tr><td align="left">114</td><td align="left">the provided RSL 'two_phase' parameter is invalid</td><td align="left">Check that the RSL <code class="literal">two_phase</code> attribute evaluates to a positive integer.</td></tr><tr><td align="left">115</td><td align="left">the RSL 'two_phase' value is not zero or greater</td><td align="left">Check that the RSL <code class="literal">two_phase</code> attribute evaluates to a positive integer.</td></tr><tr><td align="left">116</td><td align="left">the provided RSL 'stdout_position' parameter is invalid</td><td align="left">OBSOLETE IN GRAM5</td></tr><tr><td align="left">117</td><td align="left">the RSL 'stdout_position' value is not zero or greater</td><td align="left">OBSOLETE IN GRAM5</td></tr><tr><td align="left">118</td><td align="left">the provided RSL 'stderr_position' parameter is invalid</td><td align="left">OBSOLETE IN GRAM5</td></tr><tr><td align="left">119</td><td align="left">the RSL 'stderr_position' value is not zero or greater</td><td align="left">OBSOLETE IN GRAM5</td></tr><tr><td align="left">120</td><td align="left">the job manager restart attempt failed</td><td align="left">OBSOLETE IN GRAM2</td></tr><tr><td align="left">121</td><td align="left">the job state file doesn't exist</td><td align="left">Check that the job contact you are trying to restart matches one that the job manager returned to you.</td></tr><tr><td align="left">122</td><td align="left">could not read the job state file</td><td align="left">Check that the state file directory is not full.</td></tr><tr><td align="left">123</td><td align="left">could not write the job state file</td><td align="left">Check that the state file directory is not full.</td></tr><tr><td align="left">124</td><td align="left">old job manager is still alive</td><td align="left">Contact the returned job manager contact to manage the job you are trying to restart.</td></tr><tr><td align="left">125</td><td align="left">job manager state file TTL expired</td><td align="left">OBSOLETE in GRAM2</td></tr><tr><td align="left">126</td><td align="left">it is unknown if the job was submitted</td><td align="left">Check job manager log.</td></tr><tr><td align="left">127</td><td align="left">the provided RSL 'remote_io_url' parameter is invalid</td><td align="left">Check that the RSL <code class="literal">remote_io_url</code> attribute evaluates to a string value.</td></tr><tr><td align="left">128</td><td align="left">could not write the remote io url file</td><td align="left">Check that the user's home file system on the job manager service node is writable and not full.</td></tr><tr><td align="left">129</td><td align="left">the standard output/error size is different</td><td align="left">Send a stdio update signal to redirect the job manager output to a new URL</td></tr><tr><td align="left">130</td><td align="left">the job manager was sent a stop signal (job is still running)</td><td align="left">Submit a restart request to monitor the job.</td></tr><tr><td align="left">131</td><td align="left">the user proxy expired (job is still running)</td><td align="left">Generate a new proxy and then submit a restart request to monitor the job.</td></tr><tr><td align="left">132</td><td align="left">the job was not submitted by original jobmanager</td><td align="left">OBSOLETE IN GRAM2</td></tr><tr><td align="left">133</td><td align="left">the job manager is not waiting for that commit signal</td><td align="left">Do not send a commit signal to a job that is not waiting for a commit signal.</td></tr><tr><td align="left">134</td><td align="left">the provided RSL scheduler specific parameter is invalid</td><td align="left">Check the LRM-specific documentation to determine what values are legal for the RSL extensions implemented by the LRM.</td></tr><tr><td align="left">135</td><td align="left">the job manager could not stage in a file</td><td align="left">Check that the file service hosting the file to stage is reachable from the GRAM5 service node.
        Check that the file to stage exists on the file service node.
        Check that there is sufficient disk space in the user's home directory on the service node to store the file to stage.</td></tr><tr><td align="left">136</td><td align="left">the scratch directory could not be created</td><td align="left">Check that the directory named by the RSL <code class="literal">scratch_dir</code> attribute exists and is writable.
        Check that the directory named by the RSL <code class="literal">scratch_dir</code> attribute is not full.</td></tr><tr><td align="left">137</td><td align="left">the provided 'gass_cache' parameter is invalid</td><td align="left">Check that the RSL <code class="literal">gass_cache</code> attribute evaluates to a string.</td></tr><tr><td align="left">138</td><td align="left">the RSL contains attributes which are not valid for job submission</td><td align="left">Do not use restart- or signal-only RSL attributes when submitting a job.</td></tr><tr><td align="left">139</td><td align="left">the RSL contains attributes which are not valid for stdio update</td><td align="left">Do not use submit- or restart-only RSL attributes when sending a stdio update signal to a job.</td></tr><tr><td align="left">140</td><td align="left">the RSL contains attributes which are not valid for job restart</td><td align="left">Do not use submit- or signal-only RSL attributes when restarting a job.</td></tr><tr><td align="left">141</td><td align="left">the provided RSL 'file_stage_in' parameter is invalid</td><td align="left">Check that the RSL <code class="literal">file_stage_in</code> attribute evaluates to a sequence of <em class="replaceable"><code>SOURCE</code></em> <em class="replaceable"><code>DESTINATION</code></em> pairs.</td></tr><tr><td align="left">142</td><td align="left">the provided RSL 'file_stage_in_shared' parameter is invalid</td><td align="left">Check that the RSL <code class="literal">file_stage_in_shared</code> attribute evaluates to a sequence of <em class="replaceable"><code>SOURCE</code></em> <em class="replaceable"><code>DESTINATION</code></em> pairs.</td></tr><tr><td align="left">143</td><td align="left">the provided RSL 'file_stage_out' parameter is invalid</td><td align="left">Check that the RSL <code class="literal">file_stage_out</code> attribute evaluates to a sequence of <em class="replaceable"><code>SOURCE</code></em> <em class="replaceable"><code>DESTINATION</code></em> pairs.</td></tr><tr><td align="left">144</td><td align="left">the provided RSL 'gass_cache' parameter is invalid</td><td align="left">Check that the RSL <code class="literal">gass_cache</code> attribute evaluates to a string.</td></tr><tr><td align="left">145</td><td align="left">the provided RSL 'file_cleanup' parameter is invalid</td><td align="left">Check that the RSL <code class="literal">file_clean_up</code> attribute evaluates to a sequence of strings.</td></tr><tr><td align="left">146</td><td align="left">the provided RSL 'scratch_dir' parameter is invalid</td><td align="left">Check that the RSL <code class="literal">scratch_dir</code> attribute evaluates to a string.</td></tr><tr><td align="left">147</td><td align="left">the provided scheduler-specific RSL parameter is invalid</td><td align="left">Check the LRM-specific documentation to determine what values are legal for the RSL extensions implemented by the LRM.</td></tr><tr><td align="left">148</td><td align="left">a required RSL attribute was not defined in the RSL spec</td><td align="left">Check that the RSL <code class="literal">executable</code> attribute is present in your job request RSL.
        Check that the RSL <code class="literal">restart</code> attributes is present in your restart RSL.</td></tr><tr><td align="left">149</td><td align="left">the gass_cache attribute points to an invalid cache directory</td><td align="left">Check that the RSL <code class="literal">gass_cache</code> attributes evaluates to a directory that exists or can be created.
        Check that the user's home file system is writable and not full.</td></tr><tr><td align="left">150</td><td align="left">the provided RSL 'save_state' parameter has an invalid value</td><td align="left">Check that the RSL <code class="literal">save_state</code> attribute has a value of <code class="literal">yes</code> or <code class="literal">no</code>.</td></tr><tr><td align="left">151</td><td align="left">the job manager could not open the RSL attribute validation file</td><td align="left">Check that <code class="filename"><code class="envar">$GLOBUS_LOCATION</code>/share/globus_gram_job_manager/globus-gram-job-manager.rvf</code> is present and readable on the job manager service node.
        Check that <code class="filename"><code class="envar">$GLOBUS_LOCATION</code>/share/globus_gram_job_manager/<em class="replaceable"><code>LRM</code></em>.rvf</code> is readable on the job manager service node if present.</td></tr><tr><td align="left">152</td><td align="left">the  job manager could not read the RSL attribute validation file</td><td align="left">Check that <code class="filename"><code class="envar">$GLOBUS_LOCATION</code>/share/globus_gram_job_manager/globus-gram-job-manager.rvf</code> is valid.
        Check that <code class="filename"><code class="envar">$GLOBUS_LOCATION</code>/share/globus_gram_job_manager/<em class="replaceable"><code>LRM</code></em>.rvf</code> is valid if present.</td></tr><tr><td align="left">153</td><td align="left">the provided RSL 'proxy_timeout' is invalid</td><td align="left">Check that RSL <code class="literal">proxy_timeout</code> attribute evaluates to a positive integer.</td></tr><tr><td align="left">154</td><td align="left">the RSL 'proxy_timeout' value is not greater than zero</td><td align="left">Check that RSL <code class="literal">proxy_timeout</code> attribute evaluates to a positive integer.</td></tr><tr><td align="left">155</td><td align="left">the job manager could not stage out a file</td><td align="left">Check that the source file being staged exists on the job manager service node.
        Check that the directory of the destination file being staged exists on the file service node.
        Check that the directory of the destination file being staged is writable by the user.
        Check that the destination file service is reachable by the job manager service node.</td></tr><tr><td align="left">156</td><td align="left">the job contact string does not match any which the job manager is handling</td><td align="left">Check that the job contact string matches one returned from a job request.</td></tr><tr><td align="left">157</td><td align="left">proxy delegation failed</td><td align="left">Check that the job manager service node trusts the signer of your credential.
        Check that you trust the signer of the job manager service node's credential. </td></tr><tr><td align="left">158</td><td align="left">the job manager could not lock the state lock file</td><td align="left">Check that the file system holding the job state directory supports POSIX advisory locking.
        Check that the job state directory is writable by the user on the service node.
        Check that the job state directory is not full.</td></tr><tr><td align="left">159</td><td align="left">an invalid globus_io_clientattr_t was used.</td><td align="left">Check that you have initialized the <code class="literal">globus_io_clientattr_t</code> attribute prior to using it with the GRAM client API.</td></tr><tr><td align="left">160</td><td align="left">an null parameter was passed to the gram library</td><td align="left">Check that you are passing legal values to all GRAM API calls.</td></tr><tr><td align="left">161</td><td align="left">the job manager is still streaming output</td><td align="left">OBSOLETE IN GRAM5</td></tr><tr><td align="left">162</td><td align="left">the authorization system denied the request</td><td align="left">Check with your GRAM system administrator to allow a particular certificate to be authorized.</td></tr><tr><td align="left">163</td><td align="left">the authorization system reported a failure</td><td align="left">Check with your system administrator to verify that the authorization system is configured properly.</td></tr><tr><td align="left">164</td><td align="left">the authorization system denied the request - invalid job id</td><td align="left">Check with your system administrator to verify that the authorization system is configured properly.
        Use a credential which is authorized to interact with a particular GRAM job.</td></tr><tr><td align="left">165</td><td align="left">the authorization system denied the request - not authorized to run the specified executable</td><td align="left">Check with your system administrator to verify that the authorization system is configured properly.
        Use a credential which is authorized to interact with a particular GRAM job.</td></tr><tr><td align="left">166</td><td align="left">the provided RSL 'user_name' parameter is invalid.</td><td align="left">Check that the RSL <code class="literal">user_name</code> attribute evaluates to a string.</td></tr><tr><td align="left">167</td><td align="left">the job is not running in the account named by the 'user_name' parameter.</td><td align="left">Ask with the GRAM system administrator to add an authorization entry to allow your credential to run jobs as the specified user account.</td></tr></tbody></table></div></div><br class="table-break"></div></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="gram5-user-knownproblems"></a>Chapter 7. Known Problems in GRAM5</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="section"><a href="#gram5-outstanding">1. Known Problems in GRAM5</a></span></dt></dl></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="gram5-outstanding"></a>1. Known Problems in GRAM5</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="ulink" href="http://jira.globus.org/browse/GT-45" target="_top">GT-45</a>: Manager lock double-locked</li><li class="listitem"><a class="ulink" href="http://jira.globus.org/browse/GT-47" target="_top">GT-47</a>: globus-job-manager null pointer dereference for some call paths</li><li class="listitem"><a class="ulink" href="http://jira.globus.org/browse/GT-52" target="_top">GT-52</a>: SEG may deadlock with threads</li><li class="listitem"><a class="ulink" href="http://jira.globus.org/browse/GT-56" target="_top">GT-56</a>: Tear-down of object requires multiple threads</li><li class="listitem"><a class="ulink" href="http://jira.globus.org/browse/GT-103" target="_top">GT-103</a>: GRAM refresh credentials test sometimes fails because job terminates</li><li class="listitem"><a class="ulink" href="http://jira.globus.org/browse/GT-292" target="_top">GT-292</a>: Service tags may not isolate services completely</li><li class="listitem"><a class="ulink" href="http://jira.globus.org/browse/GT-324" target="_top">GT-324</a>: Behaviour of globus-job-status</li><li class="listitem"><a class="ulink" href="http://jira.globus.org/browse/GT-369" target="_top">GT-369</a>:  GRAM5 skips some SEG events for PBS batch system</li><li class="listitem"><a class="ulink" href="http://jira.globus.org/browse/GT-389" target="_top">GT-389</a>: globusrun and globus-job-run don't report job failures to user</li><li class="listitem"><a class="ulink" href="http://jira.globus.org/browse/GT-418" target="_top">GT-418</a>: globus-gatekeeper leaves stale processes behind if port 2119 is probed</li></ul></div><p>
    
  </p></div></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="gram5-usage"></a>Chapter 8. Usage statistics collection by the Globus Alliance </h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="section"><a href="#gram5-usage-stats">1. GRAM5-specific usage statistics</a></span></dt></dl></div><a class="indexterm" name="idm49853897440"></a><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="gram5-usage-stats"></a>1. GRAM5-specific usage statistics</h2></div></div></div><p>
The following usage statistics are sent by default in a UDP packet (in addition
to the GRAM component code, packet version, timestamp, and source IP address)
at the end of each job.
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">Job Manager Session ID</li><li class="listitem">dryrun used</li><li class="listitem">RSL Host Count</li><li class="listitem">Timestamp when job hit <code class="literal">GLOBUS_GRAM_PROTOCOL_JOB_STATE_UNSUBMITTED</code></li><li class="listitem">Timestamp when job hit <code class="literal">GLOBUS_GRAM_PROTOCOL_JOB_STATE_FILE_STAGE_IN</code></li><li class="listitem">Timestamp when job hit <code class="literal">GLOBUS_GRAM_PROTOCOL_JOB_STATE_PENDING</code></li><li class="listitem">Timestamp when job hit <code class="literal">GLOBUS_GRAM_PROTOCOL_JOB_STATE_ACTIVE</code></li><li class="listitem">Timestamp when job hit <code class="literal">GLOBUS_GRAM_PROTOCOL_JOB_STATE_FAILED</code></li><li class="listitem">Timestamp when job hit <code class="literal">GLOBUS_GRAM_PROTOCOL_JOB_STATE_FILE_STAGE_OUT</code></li><li class="listitem">Timestamp when job hit <code class="literal">GLOBUS_GRAM_PROTOCOL_JOB_STATE_DONE</code></li><li class="listitem">Job Failure Code</li><li class="listitem">Number of times status is called</li><li class="listitem">Number of times register is called</li><li class="listitem">Number of times signal is called</li><li class="listitem">Number of times refresh is called</li><li class="listitem">Number of files named in file_clean_up RSL</li><li class="listitem">Number of files being staged in (including executable, stdin) from http servers</li><li class="listitem">Number of files being staged in (including executable, stdin) from https servers</li><li class="listitem">Number of files being staged in (including executable, stdin) from ftp servers</li><li class="listitem">Number of files being staged in (including executable, stdin) from gsiftp servers</li><li class="listitem">Number of files being staged into the GASS cache from http servers</li><li class="listitem">Number of files being staged into the GASS cache from https servers</li><li class="listitem">Number of files being staged into the GASS cache from ftp servers</li><li class="listitem">Number of files being staged into the GASS cache from gsiftp servers</li><li class="listitem">Number of files being staged out (including stdout and stderr) to http servers</li><li class="listitem">Number of files being staged out (including stdout and stderr) to https servers</li><li class="listitem">Number of files being staged out (including stdout and stderr) to ftp servers</li><li class="listitem">Number of files being staged out (including stdout and stderr) to gsiftp servers</li><li class="listitem">Bitmask of used RSL attributes (values are 2^id from the gram5_rsl_attributes table)</li><li class="listitem">Number of times unregister is called</li><li class="listitem">Value of the <code class="literal">count</code> RSL attribute</li><li class="listitem">Comma-separated list of string names of other RSL attributes not in the set defined in <code class="filename">globus-gram-job-manager.rvf</code></li><li class="listitem">Job type string</li><li class="listitem">Number of times the job was restarted</li><li class="listitem">Total number of state callbacks sent to all clients for this job</li></ul></div><p>
</p><p>The following information can be sent as well in a job status packet but
it is not sent unless explicitly enabled by the system administrator:

</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">Value of the executable RSL attribute</li><li class="listitem">Value of the arguments RSL attribute</li><li class="listitem">IP adddress and port of the client that submitted the job</li><li class="listitem">User DN of the client that submitted the job</li></ul></div><p>
</p><p>In addition to job-related status, the job manager sends information
periodically about its execution status.  The following information is sent by
default in a UDP packet (in addition to the GRAM component code, packet
version, timestamp, and source IP address) at job manager start and every 1
hour during the job manager lifetime:

</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">Job Manager Start Time</li><li class="listitem">Job Manager Session ID</li><li class="listitem">Job Manager Status Time</li><li class="listitem">Job Manager Version</li><li class="listitem">LRM</li><li class="listitem">Poll used</li><li class="listitem">Audit used</li><li class="listitem">Number of restarted jobs</li><li class="listitem">Total number of jobs</li><li class="listitem">Total number of failed jobs</li><li class="listitem">Total number of canceled jobs</li><li class="listitem">Total number of completed jobs</li><li class="listitem">Total number of dry-run jobs</li><li class="listitem">Peak number of concurrently managed jobs</li><li class="listitem">Number of jobs currently being managed</li><li class="listitem">Number of jobs currently in the UNSUBMITTED state</li><li class="listitem">Number of jobs currently in the STAGE_IN state</li><li class="listitem">Number of jobs currently in the PENDING state</li><li class="listitem">Number of jobs currently in the ACTIVE state</li><li class="listitem">Number of jobs currently in the STAGE_OUT state</li><li class="listitem">Number of jobs currently in the FAILED state</li><li class="listitem">Number of jobs currently in the DONE state</li></ul></div><p>
</p><p>
    Also, please see our <a class="ulink" href="/toolkit/docs/latest-stable/Usage_Stats.html" target="_top">policy statement</a>
on the collection of usage statistics.
</p></div></div><div class="glossary"><div class="titlepage"><div><div><h1 class="title"><a name="glossary-gram5User"></a>Glossary</h1></div></div></div><div class="glossdiv"><h3 class="title">C</h3><dl><dt><a name="condor"></a><span class="glossterm">Condor</span></dt><dd class="glossdef"><p>A <a href="#local-resource-manager" class="glossterm"><em class="glossterm">Local Resource Manager</em></a>
                        mechanism supported by GRAM. See the
                        <a class="ulink" href="http://www.cs.wisc.edu/condor/" target="_top">Condor Project Website</a> for more
                        information.</p><p>See Also Local Resource Manager.</p></dd></dl></div><div class="glossdiv"><h3 class="title">L</h3><dl><dt><a name="local-resource-manager"></a><span class="glossterm">Local Resource Manager</span> (LRM)</dt><dd class="glossdef"><p>
                        A system which controls access to a compute resource,
                        such as a compute cluster or parallel computer.
                        Such systems provide batch execution interfaces,
                        which GRAM uses to execute jobs.
                        <a href="#condor" class="glossterm"><em class="glossterm">Condor</em></a>,
                        <a href="#pbs" class="glossterm"><em class="glossterm">Portable Batch System</em></a>,
                        <a href="#Oracle-GridEngine" class="glossterm"><em class="glossterm">GridEngine</em></a> are examples
                        of local resource managers.
                    </p><p>See Also Condor, Portable Batch System, Oracle GridEngine.</p></dd></dl></div><div class="glossdiv"><h3 class="title">O</h3><dl><dt><a name="Oracle-GridEngine"></a><span class="glossterm">Oracle GridEngine</span></dt><dd class="glossdef"><p>
                        A <a href="#local-resource-manager" class="glossterm"><em class="glossterm">Local Resource Manager</em></a>
                        supported by GRAM. See <a class="ulink" href="http://www.oracle.com/us/products/tools/oracle-grid-engine-075549.html" target="_top">Oracle's Web Site</a>
                        for more information.
                    </p><p>See Also Local Resource Manager.</p></dd></dl></div><div class="glossdiv"><h3 class="title">P</h3><dl><dt><a name="pbs"></a><span class="glossterm">Portable Batch System</span> (PBS)</dt><dd class="glossdef"><p>A <a href="#local-resource-manager" class="glossterm"><em class="glossterm">Local Resource Manager</em></a> mechanism supported by GRAM. Multiple implementations of PBS exist: GRAM currently supports TORQUE. See also <a href="#TORQUE" class="glossterm"><em class="glossterm">TORQUE</em></a>.</p><p>See Also Local Resource Manager, TORQUE.</p></dd></dl></div><div class="glossdiv"><h3 class="title">T</h3><dl><dt><a name="TORQUE"></a><span class="glossterm">TORQUE</span></dt><dd class="glossdef"><p>
                    An implementation of the <a href="#pbs" class="glossterm"><em class="glossterm">Portable Batch System</em></a>
                    interface by <a class="ulink" href="http://www.adaptivecomputing.com/products/torque.php" target="_top">Adaptive Computing</a>.
                    </p><p>See Also Portable Batch System.</p></dd></dl></div></div><div class="index"><div class="titlepage"><div><div><h1 class="title"><a name="idm49871698064"></a>Index</h1></div></div></div><div class="index"><div class="indexdiv"><h3>E</h3><dl><dt>errors, <a class="indexterm" href="#gram5-error-codes">Errors</a></dt></dl></div><div class="indexdiv"><h3>J</h3><dl><dt>jobs</dt><dd><dl><dt>preparing</dt><dd><dl><dt>generate valid proxy, <a class="indexterm" href="#gram5-user-prepare">Before Getting Started</a></dt></dl></dd></dl></dd></dl></div><div class="indexdiv"><h3>T</h3><dl><dt>troubleshooting, <a class="indexterm" href="#gram5-troubleshooting-client">GRAM Client Troubleshooting</a></dt><dd><dl><dt>errors, <a class="indexterm" href="#gram5-troubleshooting-client">GRAM Client Troubleshooting</a></dt></dl></dd></dl></div></div></div></div>
