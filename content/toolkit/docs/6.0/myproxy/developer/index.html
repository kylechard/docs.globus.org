<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<div class="book"><div class="titlepage"><div><div><h1 class="title"><a name="myproxyDeveloper"></a> GT 6.0 MyProxy: Developer's Guide</h1></div><div><div class="abstract"><p class="title"><b>Introduction</b></p><p>
Please refer to the 
<a class="ulink" href="http://myproxy.ncsa.uiuc.edu/devguide.html" target="_top">MyProxy Developer's Guide</a>
on the MyProxy web site.
</p></div></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="chapter"><a href="#myproxy-developer-beforeyoubegin">1. Before you begin</a></span></dt><dd><dl><dt><span class="section"><a href="#myproxy-features">1. Feature summary</a></span></dt><dt><span class="section"><a href="#myproxy-platforms">2. Tested platforms</a></span></dt><dt><span class="section"><a href="#myproxy-compatibility">3. Backward compatibility summary</a></span></dt><dt><span class="section"><a href="#myproxy-dependencies">4. Technology dependencies</a></span></dt><dt><span class="section"><a href="#myproxy-security-considerations">5. MyProxy Security Considerations</a></span></dt></dl></dd><dt><span class="chapter"><a href="#myproxy-developer-scenarios">2. Usage scenarios</a></span></dt><dt><span class="chapter"><a href="#myproxy-developer-tutorials">3. Tutorials</a></span></dt><dt><span class="chapter"><a href="#myproxy-developer-archdes">4. Architecture and design overview</a></span></dt><dt><span class="chapter"><a href="#myproxy-user-troubleshooting">5. Troubleshooting</a></span></dt><dd><dl><dt><span class="section"><a href="#myproxy-error-codes">1. Errors</a></span></dt><dt><span class="section"><a href="#myproxy-errors">2. Additional MyProxy Troubleshooting</a></span></dt></dl></dd><dt><span class="chapter"><a href="#myproxy-developer-relateddocs">6. Related Documentation</a></span></dt><dt><span class="glossary"><a href="#glossary-myproxyDeveloper">Glossary</a></span></dt></dl></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="myproxy-developer-beforeyoubegin"></a>Chapter 1. Before you begin</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="section"><a href="#myproxy-features">1. Feature summary</a></span></dt><dt><span class="section"><a href="#myproxy-platforms">2. Tested platforms</a></span></dt><dt><span class="section"><a href="#myproxy-compatibility">3. Backward compatibility summary</a></span></dt><dt><span class="section"><a href="#myproxy-dependencies">4. Technology dependencies</a></span></dt><dt><span class="section"><a href="#myproxy-security-considerations">5. MyProxy Security Considerations</a></span></dt></dl></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="myproxy-features"></a>1. Feature summary</h2></div></div></div><p>Supported Features</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">Users can obtain certificates and trust roots from the MyProxy CA using <span class="command"><strong>myproxy-logon</strong></span>.</li><li class="listitem">Users can store and retrieve multiple X.509 <a href="#proxy-cred" class="glossterm"><em class="glossterm">proxy credentials</em></a> using
      <span class="command"><strong>myproxy-init</strong></span> and <span class="command"><strong>myproxy-logon</strong></span>.</li><li class="listitem">Users can store and retrieve multiple X.509 end-entity credentials using
      <span class="command"><strong>myproxy-store</strong></span> and <span class="command"><strong>myproxy-retrieve</strong></span>.</li><li class="listitem">Users and administrators can manage trustroots (CA certificates and CRLs) using
      <span class="command"><strong>myproxy-logon</strong></span> and <span class="command"><strong>myproxy-get-trustroots</strong></span>.</li><li class="listitem">Administrators can load the repository with X.509 end-entity
    credentials on the users' behalf using <span class="command"><strong>myproxy-admin-load-credential</strong></span>.</li><li class="listitem">Administrators can use
      the <span class="command"><strong>myproxy-admin-adduser</strong></span> command to create
    <a href="#user-cred" class="glossterm"><em class="glossterm">user credentials</em></a> and load them into the MyProxy repository.</li><li class="listitem">Administrators can use
      the <span class="command"><strong>myproxy-admin-addservice</strong></span> command to create
    <a href="#host-cred" class="glossterm"><em class="glossterm">host credentials</em></a> and load them into the MyProxy repository.</li><li class="listitem">Users and administrators can set access control policies on the
    credentials in the repository.</li><li class="listitem">If allowed by policy, job managers (such as Condor-G) can renew
    credentials before they expire.</li><li class="listitem">The MyProxy server enforces local site passphrase policies
      using a configurable external call-out.</li></ul></div><p>Deprecated Features</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">None</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="myproxy-platforms"></a>2. Tested platforms</h2></div></div></div><p>Tested Platforms for MyProxy:</p><div class="table"><a name="tested-platforms"></a><p class="title"><b>Table 1.1. Tested Platforms</b></p><div class="table-contents"><table summary="Tested Platforms" border="1" width="700px"><colgroup><col align="center" class="Operating System"><col align="left" class="Distribution"><col align="left" class="Versions"><col align="left" class="Architectures"></colgroup><thead><tr><th align="center">Operating System</th><th align="left">Distribution</th><th align="left">Version(s)</th><th align="left">Architecture(s)</th></tr></thead><tbody><tr><td class="auto-generated"> </td><td align="left">CentOS</td><td align="left">5</td><td align="left">i386, x86_64</td></tr><tr><td class="auto-generated"> </td><td align="left">Fedora</td><td align="left">18, 19</td><td align="left">i386, x86_64</td></tr><tr><td class="auto-generated"> </td><td align="left">Red Hat Enterprise Linux</td><td align="left">5, 6</td><td align="left">i386, x86_64</td></tr><tr><td class="auto-generated"> </td><td align="left">Scientific Linux</td><td align="left">5, 6</td><td align="left">i386, x86_64</td></tr><tr><td class="auto-generated"> </td><td align="left">Debian</td><td align="left">6, 7</td><td align="left">i386, amd64</td></tr><tr><td class="auto-generated"> </td><td align="left">Ubuntu</td><td align="left">10.04LTS, 12.04LTS, 12.10, 13.04, 13.10</td><td align="left">i386, amd64</td></tr><tr><td colspan="2" align="center">Mac OS X</td><td align="left">10.8 (Mountain Lion)</td><td align="left">x86_64</td></tr><tr><td colspan="2" align="center">Solaris</td><td align="left">11</td><td align="left">x86_64</td></tr></tbody></table></div></div><br class="table-break"></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="myproxy-compatibility"></a>3. Backward compatibility summary</h2></div></div></div><p>All MyProxy versions are fully backwards compatible.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="myproxy-dependencies"></a>4. Technology dependencies</h2></div></div></div><p>MyProxy depends on the following GT component:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a href="../../gsic/#gsic" class="olink">GSI C</a></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="myproxy-security-considerations"></a>5. MyProxy Security Considerations</h2></div></div></div><p>
You should choose a well-protected host to run the myproxy-server
on. Consult with security-aware personnel at your site. You want a host
that is secured to the level of a Kerberos KDC, that has limited user
access, runs limited services, and is well monitored and maintained in
terms of security patches.
</p><p>
For a typical myproxy-server installation, 
the host on which the myproxy-server is running must
    have /etc/grid-security created and a <a href="#host-cert" class="glossterm"><em class="glossterm">host certificate</em></a> installed.
In this case, the myproxy-server will run as root so it can access the
host certificate and key.
</p></div></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="myproxy-developer-scenarios"></a>Chapter 2. Usage scenarios</h1></div></div></div><p>
      Please refer to the 
      <a class="ulink" href="http://myproxy.ncsa.uiuc.edu/userguide.html" target="_top">MyProxy User Guide</a>
      for MyProxy usage scenarios.
    </p></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="myproxy-developer-tutorials"></a>Chapter 3. Tutorials</h1></div></div></div><p>There are no tutorials available at this time.</p></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="myproxy-developer-archdes"></a>Chapter 4. Architecture and design overview</h1></div></div></div><p>
  The MyProxy system architecture and design is described in the
  following two publications:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">J. Basney, M. Humphrey, and V. Welch.
    <a class="ulink" href="http://www.ncsa.uiuc.edu/~jbasney/myproxy-spe.pdf" target="_top">The
      MyProxy Online Credential Repository</a>. 
    Software: Practice and Experience, 2005.</li><li class="listitem">J. Novotny, S. Tuecke, and V. Welch.
    <a class="ulink" href="http://www.globus.org/alliance/publications/papers/myproxy.pdf" target="_top">An Online
      Credential Repository for the Grid: MyProxy</a>.
    Proceedings of the Tenth International Symposium
    on High Performance Distributed Computing (HPDC-10), IEEE Press,
    August 2001.</li></ul></div></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="myproxy-user-troubleshooting"></a>Chapter 5. Troubleshooting</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="section"><a href="#myproxy-error-codes">1. Errors</a></span></dt><dt><span class="section"><a href="#myproxy-errors">2. Additional MyProxy Troubleshooting</a></span></dt></dl></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="myproxy-error-codes"></a>1. Errors</h2></div></div></div><a class="indexterm" name="idm40246743376"></a><div class="table"><a name="myproxy-errors-table"></a><p class="title"><b>Table 5.1. MyProxy Errors</b></p><div class="table-contents"><table summary="MyProxy Errors" border="1" width="700px"><colgroup><col align="left" class="c1"><col align="left" class="c2"><col align="left" class="c3"></colgroup><thead><tr><th align="left">Error Code</th><th align="left">Definition</th><th align="left">Possible Solutions</th></tr></thead><tbody><tr><td align="left"><code class="code"> MyProxy server name does not match expected name</code></td><td align="left"><p>This error appears as a mutual authentication failure or a server authentication failure, and the error message should list two names: 
   the expected name of the MyProxy server and the actual authenticated name.</p> 
   <p>By default, the MyProxy clients expect the MyProxy server to be running with a host certificate that matches the target hostname. 
   This error can occur when running the MyProxy server under a non-host certificate or if the server is running on a machine with multiple hostnames.</p> The MyProxy clients authenticate the identity of the MyProxy server to avoid sending passphrases and credentials to rogue servers.
  <p> If the expected name contains an IP address, your system is unable to do a reverse lookup on that address to get the canonical hostname of the server, indicating either a problem with that machine's DNS record or a problem with the resolver on your system.</p></td><td align="left">
If the server name shown in the error message is acceptable, set the <code class="envar">MYPROXY_SERVER_DN</code> environment variable to that name to resolve the problem.
  </td></tr><tr><td align="left"><code class="code">Error in bind(): Address already in use</code></td><td align="left">This error indicates that the myproxy-server port (default: 7512) is in use by another process, probably another myproxy-server 
   instance. You cannot run multiple instances of the myproxy-server on the same network port.</td><td align="left">
If you want to run multiple instances of the myproxy-server on a machine, you can specify different ports with the <code class="option">-p</code> option, 
   and then give the same <code class="option">-p</code> option to the MyProxy commands to tell them to use the myproxy-server on that port.
  </td></tr><tr><td align="left"><code class="code">grid-proxy-init failed</code></td><td align="left">This error indicates that the grid-proxy-init command failed when myproxy-init attempted to run it, which implies a problem with the 
   underlying Globus installation.</td><td align="left">
Run <pre class="screen">grid-proxy-init -debug -verify</pre> for more information. 
  </td></tr><tr><td align="left"><code class="code">User not authorized</code></td><td align="left">An error from the myproxy-server saying you are "not authorized" to complete an operation typically indicates that the 
   <code class="filename">myproxy-server.config</code> file settings are restricting your access to the myproxy-server. It is possible that the 
   myproxy-server is running with the default <code class="filename">myproxy-server.config</code> file, which does not authorize any operations.</td><td align="left">
See <a href="../admin/#myproxy-configuring" class="olink">Configuring MyProxy</a>  for more information.
  </td></tr><tr><td align="left"><code class="code">Unable to verify remote side's credentials</code></td><td align="left">
    An error saying "Unable to verify remote side's credentials,"
    "Couldn't verify the remote certificate," or "alert bad certificate"
    often indicates that the client or server's certificate is signed by
    an untrusted Certification Authority (CA). The client must have a CA
    certificate and signing policy file installed in
    <code class="filename">/etc/grid-security/certificates</code> for the CA that signed the server's
    certificate. Likewise, the server must have a CA certificate and
    signing policy file installed in <code class="filename">/etc/grid-security/certificates</code> for
    the CA that signed the client's certificate.
  </td><td align="left">
    See <a href="../../gsic/admin/#gsic-configuring" class="olink">Configuring Certificates</a> for more information.
  </td></tr></tbody></table></div></div><br class="table-break"></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="myproxy-errors"></a>2. Additional MyProxy Troubleshooting</h2></div></div></div><p>For additional information, see the
  <a class="ulink" href="http://myproxy.ncsa.uiuc.edu/troubleshooting.html" target="_top">MyProxy Troubleshooting Page</a> at NCSA.
</p></div></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="myproxy-developer-relateddocs"></a>Chapter 6. Related Documentation</h1></div></div></div><p>For additional information about MyProxy, see the
  <a class="ulink" href="http://myproxy.ncsa.uiuc.edu/" target="_top">MyProxy Project Home
  Page</a> at NCSA.
</p></div><div class="glossary"><div class="titlepage"><div><div><h1 class="title"><a name="glossary-myproxyDeveloper"></a>Glossary</h1></div></div></div><div class="glossdiv"><h3 class="title">H</h3><dl><dt><a name="host-cert"></a><span class="glossterm">host certificate</span></dt><dd class="glossdef"><p> An <a class="ulink" href="#EEC" target="_top">EEC</a> belonging to a host. When using GSI this certificate is
                              typically stored in
                              <code class="filename">/etc/grid-security/hostcert.pem</code>. For more
                              information on possible host certificate locations see the <a href="../../gsic/developer/#gsic-env-credentials" class="olink">GSI C Developer's Guide</a>. </p></dd><dt><a name="host-cred"></a><span class="glossterm">host credentials</span></dt><dd class="glossdef"><p> The combination of a host certificate and its corresponding private
                              key.</p></dd></dl></div><div class="glossdiv"><h3 class="title">P</h3><dl><dt><a name="proxy-cred"></a><span class="glossterm">proxy credentials</span></dt><dd class="glossdef"><p> The combination of a proxy certificate and its corresponding private
                              key. GSI typically stores proxy credentials in
                                          <code class="filename">/tmp/x509up_u<em class="replaceable"><code>&lt;uid&gt;</code></em>
                              </code>, where &lt;uid&gt; is the user id of the proxy
                              owner.</p></dd></dl></div><div class="glossdiv"><h3 class="title">U</h3><dl><dt><a name="user-cred"></a><span class="glossterm">user credentials</span></dt><dd class="glossdef"><p> The combination of a user certificate and its corresponding private
                              key.</p></dd></dl></div></div></div>
