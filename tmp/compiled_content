{:	data{I"/:ET{:default{	:	lastI"<!DOCTYPE HTML>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>A Brand New nanoc Site - Home</title>
    <link href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/styles/styles.css">

    <meta name="viewport" content="width=device-width">
    <!-- you don't need to keep this, but it's cool for stats! -->
    <meta name="generator" content="nanoc 3.6.11">
  </head>
  <body>
    <header id="masthead">
  <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
      <!-- Brand and toggle get grouped for better mobile display -->
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="/">
          <img src="//www.globus.org/sites/all/themes/globus_bootstrap_theme/logo.png" alt="Home">
          globus developer
        </a>
      </div>

      <!-- Collect the nav links, forms, and other content for toggling -->
      <div class="collapse navbar-collapse">
        <form class="navbar-form navbar-right" role="search">
          <div class="form-group">
            <input type="text" class="form-control" placeholder="Search">
          </div>
          <!-- <button type="submit" class="btn btn-default">Submit</button> -->
        </form>

        <ul class="nav navbar-nav navbar-right">
          <li>
            <a href="/about">About</a>
          </li>
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Docs <b class="caret"></b></a>
            <ul class="dropdown-menu">
              <li><a href="/docs/transfer-api">Transfer API</a></li>
            </ul>
          </li>
        </ul>
      </div><!-- /.navbar-collapse -->
    </div><!-- /.container-fluid -->
  </nav>
</header>

    <div class="content container">
      
        <header class="page-header"><h1>Home</h1></header>
      

      <h1>A Brand New nanoc Site</h1>

<p>You‚Äôve just created a new nanoc site. The page you are looking at right now is the home page for your site. To get started, consider replacing this default homepage with your own customized homepage. Some pointers on how to do so:</p>

<ul>
  <li><p><strong>Change this page‚Äôs content</strong> by editing the ‚Äúindex.html‚Äù file in the ‚Äúcontent‚Äù directory. This is the actual page content, and therefore doesn‚Äôt include the header, sidebar or style information (those are part of the layout).</p></li>
  <li><p><strong>Change the layout</strong>, which is the ‚Äúdefault.html‚Äù file in the ‚Äúlayouts‚Äù directory, and create something unique (and hopefully less bland).</p></li>
</ul>

<p>If you need any help with customizing your nanoc web site, be sure to check out the documentation (see sidebar), and be sure to subscribe to the discussion group (also see sidebar). Enjoy!</p>

<p>Another nanoc convert! Master will be pleased.</p>
    </div>

    <footer>
  <div class="container">
    <p>¬© 2010-2014 Computation Institute, University of Chicago, Argonne National Laboratory <a href="//globus.org/legal">Legal</a></p>
  </div>
</footer>

<script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
<script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
  </body>
</html>
;T:rawI"⁄<h1>A Brand New nanoc Site</h1>

<p>You‚Äôve just created a new nanoc site. The page you are looking at right now is the home page for your site. To get started, consider replacing this default homepage with your own customized homepage. Some pointers on how to do so:</p>

<ul>
  <li><p><strong>Change this page‚Äôs content</strong> by editing the ‚Äúindex.html‚Äù file in the ‚Äúcontent‚Äù directory. This is the actual page content, and therefore doesn‚Äôt include the header, sidebar or style information (those are part of the layout).</p></li>
  <li><p><strong>Change the layout</strong>, which is the ‚Äúdefault.html‚Äù file in the ‚Äúlayouts‚Äù directory, and create something unique (and hopefully less bland).</p></li>
</ul>

<p>If you need any help with customizing your nanoc web site, be sure to check out the documentation (see sidebar), and be sure to subscribe to the discussion group (also see sidebar). Enjoy!</p>

<p>Another nanoc convert! Master will be pleased.</p>;T:preI"⁄<h1>A Brand New nanoc Site</h1>

<p>You‚Äôve just created a new nanoc site. The page you are looking at right now is the home page for your site. To get started, consider replacing this default homepage with your own customized homepage. Some pointers on how to do so:</p>

<ul>
  <li><p><strong>Change this page‚Äôs content</strong> by editing the ‚Äúindex.html‚Äù file in the ‚Äúcontent‚Äù directory. This is the actual page content, and therefore doesn‚Äôt include the header, sidebar or style information (those are part of the layout).</p></li>
  <li><p><strong>Change the layout</strong>, which is the ‚Äúdefault.html‚Äù file in the ‚Äúlayouts‚Äù directory, and create something unique (and hopefully less bland).</p></li>
</ul>

<p>If you need any help with customizing your nanoc web site, be sure to check out the documentation (see sidebar), and be sure to subscribe to the discussion group (also see sidebar). Enjoy!</p>

<p>Another nanoc convert! Master will be pleased.</p>;T:	post@
I"/stylesheet/;T{;{;I"(/*

#main {
  position: absolute;

  top: 40px;
  left: 280px;

  width: 500px;
}

#main h1 {
  font-size: 40px;
  font-weight: normal;

  line-height: 40px;

  letter-spacing: -1px;
}

#main p {
  margin: 20px 0;

  font-size: 15px;

  line-height: 20px;
}

#main ul, #main ol {
  margin: 20px;
}

#main li {
  font-size: 15px;

  line-height: 20px;
}

#main ul li {
  list-style-type: square;
}

#sidebar {
  position: absolute;

  top: 40px;
  left: 20px;
  width: 200px;

  padding: 20px 20px 0 0;

  border-right: 1px solid #ccc;

  text-align: right;
}

#sidebar h2 {
  text-transform: uppercase;

  font-size: 13px;

  color: #333;

  letter-spacing: 1px;

  line-height: 20px;
}

#sidebar ul {
  list-style-type: none;

  margin: 20px 0;
}

#sidebar li {
  font-size: 14px;

  line-height: 20px;
}
*/;T;	@;
@I"/about/;T{;{	;I"b
<!DOCTYPE HTML>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>A Brand New nanoc Site - About Globus</title>
    <link href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/styles/styles.css">

    <meta name="viewport" content="width=device-width">
    <!-- you don't need to keep this, but it's cool for stats! -->
    <meta name="generator" content="nanoc 3.6.11">
  </head>
  <body>
    <header id="masthead">
  <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
      <!-- Brand and toggle get grouped for better mobile display -->
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="/">
          <img src="//www.globus.org/sites/all/themes/globus_bootstrap_theme/logo.png" alt="Home">
          globus developer
        </a>
      </div>

      <!-- Collect the nav links, forms, and other content for toggling -->
      <div class="collapse navbar-collapse">
        <form class="navbar-form navbar-right" role="search">
          <div class="form-group">
            <input type="text" class="form-control" placeholder="Search">
          </div>
          <!-- <button type="submit" class="btn btn-default">Submit</button> -->
        </form>

        <ul class="nav navbar-nav navbar-right">
          <li>
            <a href="/about">About</a>
          </li>
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Docs <b class="caret"></b></a>
            <ul class="dropdown-menu">
              <li><a href="/docs/transfer-api">Transfer API</a></li>
            </ul>
          </li>
        </ul>
      </div><!-- /.navbar-collapse -->
    </div><!-- /.container-fluid -->
  </nav>
</header>

    <div class="content container">
      
        <header class="page-header"><h1>About Globus</h1></header>
      

      About globus developer here.
    </div>

    <footer>
  <div class="container">
    <p>¬© 2010-2014 Computation Institute, University of Chicago, Argonne National Laboratory <a href="//globus.org/legal">Legal</a></p>
  </div>
</footer>

<script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
<script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
  </body>
</html>
;T;	I"!About globus developer here.;T;
I"!About globus developer here.;T;@I"	/s3/;T{;{	;I"aS<!DOCTYPE HTML>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>A Brand New nanoc Site - </title>
    <link href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/styles/styles.css">

    <meta name="viewport" content="width=device-width">
    <!-- you don't need to keep this, but it's cool for stats! -->
    <meta name="generator" content="nanoc 3.6.11">
  </head>
  <body>
    <header id="masthead">
  <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
      <!-- Brand and toggle get grouped for better mobile display -->
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="/">
          <img src="//www.globus.org/sites/all/themes/globus_bootstrap_theme/logo.png" alt="Home">
          globus developer
        </a>
      </div>

      <!-- Collect the nav links, forms, and other content for toggling -->
      <div class="collapse navbar-collapse">
        <form class="navbar-form navbar-right" role="search">
          <div class="form-group">
            <input type="text" class="form-control" placeholder="Search">
          </div>
          <!-- <button type="submit" class="btn btn-default">Submit</button> -->
        </form>

        <ul class="nav navbar-nav navbar-right">
          <li>
            <a href="/about">About</a>
          </li>
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Docs <b class="caret"></b></a>
            <ul class="dropdown-menu">
              <li><a href="/docs/transfer-api">Transfer API</a></li>
            </ul>
          </li>
        </ul>
      </div><!-- /.navbar-collapse -->
    </div><!-- /.container-fluid -->
  </nav>
</header>

    <div class="content container">
      

      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.6.9" />
<title>S3 Integration</title>
<style type="text/css">
/* Shared CSS for AsciiDoc xhtml11 and html5 backends */

/* Default font. */
body {
  font-family: Georgia,serif;
}

/* Title font. */
h1, h2, h3, h4, h5, h6,
div.title, caption.title,
thead, p.table.header,
#toctitle,
#author, #revnumber, #revdate, #revremark,
#footer {
  font-family: Arial,Helvetica,sans-serif;
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
  color: navy;
}

strong {
  font-weight: bold;
  color: #083194;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}
h2 {
  padding-top: 0.5em;
}
h3 {
  float: left;
}
h3 + * {
  clear: left;
}
h5 {
  font-size: 1.0em;
}

div.sectionbody {
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

ul, ol, li > p {
  margin-top: 0;
}
ul > li     { color: #aaa; }
ul > li > * { color: black; }

.monospaced, code, pre {
  font-family: "Courier New", Courier, monospace;
  font-size: inherit;
  color: navy;
  padding: 0;
  margin: 0;
}
pre {
  white-space: pre-wrap;
}

#author {
  color: #527bbd;
  font-weight: bold;
  font-size: 1.1em;
}
#email {
}
#revnumber, #revdate, #revremark {
}

#footer {
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

#preamble {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.0em;
  margin-bottom: 2.0em;
  margin-right: 10%;
  color: #606060;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  color: #527bbd;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid #dddddd;
  border-left: 4px solid #f0f0f0;
  padding: 0.5em;
}

div.listingblock > div.content {
  border: 1px solid #dddddd;
  border-left: 5px solid #f0f0f0;
  background: #f8f8f8;
  padding: 0.5em;
}

div.quoteblock, div.verseblock {
  padding-left: 1.0em;
  margin-left: 1.0em;
  margin-right: 10%;
  border-left: 5px solid #f0f0f0;
  color: #888;
}

div.quoteblock > div.attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock > pre.content {
  font-family: inherit;
  font-size: inherit;
}
div.verseblock > div.attribution {
  padding-top: 0.75em;
  text-align: left;
}
/* DEPRECATED: Pre version 8.2.7 verse style literal block. */
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 3px solid #dddddd;
}

div.exampleblock > div.content {
  border-left: 3px solid #dddddd;
  padding-left: 0.5em;
}

div.imageblock div.content { padding-left: 0; }
span.image img { border-style: none; vertical-align: text-bottom; }
a.image:visited { color: white; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: normal;
  color: navy;
}
dd > *:first-child {
  margin-top: 0.1em;
}

ul, ol {
    list-style-position: outside;
}
ol.arabic {
  list-style-type: decimal;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}

div.compact ul, div.compact ol,
div.compact p, div.compact p,
div.compact div, div.compact div {
  margin-top: 0.1em;
  margin-bottom: 0.1em;
}

tfoot {
  font-weight: bold;
}
td > div.verse {
  white-space: pre;
}

div.hdlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hdlist tr {
  padding-bottom: 15px;
}
dt.hdlist1.strong, td.hdlist1.strong {
  font-weight: bold;
}
td.hdlist1 {
  vertical-align: top;
  font-style: normal;
  padding-right: 0.8em;
  color: navy;
}
td.hdlist2 {
  vertical-align: top;
}
div.hdlist.compact tr {
  margin: 0;
  padding-bottom: 0;
}

.comment {
  background: yellow;
}

.footnote, .footnoteref {
  font-size: 0.8em;
}

span.footnote, span.footnoteref {
  vertical-align: super;
}

#footnotes {
  margin: 20px 0 20px 0;
  padding: 7px 0 0 0;
}

#footnotes div.footnote {
  margin: 0 0 5px 0;
}

#footnotes hr {
  border: none;
  border-top: 1px solid silver;
  height: 1px;
  text-align: left;
  margin-left: 0;
  width: 20%;
  min-width: 100px;
}

div.colist td {
  padding-right: 0.5em;
  padding-bottom: 0.3em;
  vertical-align: top;
}
div.colist td img {
  margin-top: 0.3em;
}

@media print {
  #footer-badges { display: none; }
}

#toc {
  margin-bottom: 2.5em;
}

#toctitle {
  color: #527bbd;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel0, div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}

span.aqua { color: aqua; }
span.black { color: black; }
span.blue { color: blue; }
span.fuchsia { color: fuchsia; }
span.gray { color: gray; }
span.green { color: green; }
span.lime { color: lime; }
span.maroon { color: maroon; }
span.navy { color: navy; }
span.olive { color: olive; }
span.purple { color: purple; }
span.red { color: red; }
span.silver { color: silver; }
span.teal { color: teal; }
span.white { color: white; }
span.yellow { color: yellow; }

span.aqua-background { background: aqua; }
span.black-background { background: black; }
span.blue-background { background: blue; }
span.fuchsia-background { background: fuchsia; }
span.gray-background { background: gray; }
span.green-background { background: green; }
span.lime-background { background: lime; }
span.maroon-background { background: maroon; }
span.navy-background { background: navy; }
span.olive-background { background: olive; }
span.purple-background { background: purple; }
span.red-background { background: red; }
span.silver-background { background: silver; }
span.teal-background { background: teal; }
span.white-background { background: white; }
span.yellow-background { background: yellow; }

span.big { font-size: 2em; }
span.small { font-size: 0.6em; }

span.underline { text-decoration: underline; }
span.overline { text-decoration: overline; }
span.line-through { text-decoration: line-through; }

div.unbreakable { page-break-inside: avoid; }


/*
 * xhtml11 specific
 *
 * */

div.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.tableblock > table {
  border: 3px solid #527bbd;
}
thead, p.table.header {
  font-weight: bold;
  color: #527bbd;
}
p.table {
  margin-top: 0;
}
/* Because the table frame attribute is overriden by CSS in most browsers. */
div.tableblock > table[frame="void"] {
  border-style: none;
}
div.tableblock > table[frame="hsides"] {
  border-left-style: none;
  border-right-style: none;
}
div.tableblock > table[frame="vsides"] {
  border-top-style: none;
  border-bottom-style: none;
}


/*
 * html5 specific
 *
 * */

table.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
thead, p.tableblock.header {
  font-weight: bold;
  color: #527bbd;
}
p.tableblock {
  margin-top: 0;
}
table.tableblock {
  border-width: 3px;
  border-spacing: 0px;
  border-style: solid;
  border-color: #527bbd;
  border-collapse: collapse;
}
th.tableblock, td.tableblock {
  border-width: 1px;
  padding: 4px;
  border-style: solid;
  border-color: #527bbd;
}

table.tableblock.frame-topbot {
  border-left-style: hidden;
  border-right-style: hidden;
}
table.tableblock.frame-sides {
  border-top-style: hidden;
  border-bottom-style: hidden;
}
table.tableblock.frame-none {
  border-style: hidden;
}

th.tableblock.halign-left, td.tableblock.halign-left {
  text-align: left;
}
th.tableblock.halign-center, td.tableblock.halign-center {
  text-align: center;
}
th.tableblock.halign-right, td.tableblock.halign-right {
  text-align: right;
}

th.tableblock.valign-top, td.tableblock.valign-top {
  vertical-align: top;
}
th.tableblock.valign-middle, td.tableblock.valign-middle {
  vertical-align: middle;
}
th.tableblock.valign-bottom, td.tableblock.valign-bottom {
  vertical-align: bottom;
}


/*
 * manpage specific
 *
 * */

body.manpage h1 {
  padding-top: 0.5em;
  padding-bottom: 0.5em;
  border-top: 2px solid silver;
  border-bottom: 2px solid silver;
}
body.manpage h2 {
  border-style: none;
}
body.manpage div.sectionbody {
  margin-left: 3em;
}

@media print {
  body.manpage div#toc { display: none; }
}


</style>
<script type="text/javascript">
/*<![CDATA[*/
var asciidoc = {  // Namespace.

/////////////////////////////////////////////////////////////////////
// Table Of Contents generator
/////////////////////////////////////////////////////////////////////

/* Author: Mihai Bazon, September 2002
 * http://students.infoiasi.ro/~mishoo
 *
 * Table Of Content generator
 * Version: 0.4
 *
 * Feel free to use this script under the terms of the GNU General Public
 * License, as long as you do not remove or alter this notice.
 */

 /* modified by Troy D. Hanson, September 2006. License: GPL */
 /* modified by Stuart Rackham, 2006, 2009. License: GPL */

// toclevels = 1..4.
toc: function (toclevels) {

  function getText(el) {
    var text = "";
    for (var i = el.firstChild; i != null; i = i.nextSibling) {
      if (i.nodeType == 3 /* Node.TEXT_NODE */) // IE doesn't speak constants.
        text += i.data;
      else if (i.firstChild != null)
        text += getText(i);
    }
    return text;
  }

  function TocEntry(el, text, toclevel) {
    this.element = el;
    this.text = text;
    this.toclevel = toclevel;
  }

  function tocEntries(el, toclevels) {
    var result = new Array;
    var re = new RegExp('[hH]([1-'+(toclevels+1)+'])');
    // Function that scans the DOM tree for header elements (the DOM2
    // nodeIterator API would be a better technique but not supported by all
    // browsers).
    var iterate = function (el) {
      for (var i = el.firstChild; i != null; i = i.nextSibling) {
        if (i.nodeType == 1 /* Node.ELEMENT_NODE */) {
          var mo = re.exec(i.tagName);
          if (mo && (i.getAttribute("class") || i.getAttribute("className")) != "float") {
            result[result.length] = new TocEntry(i, getText(i), mo[1]-1);
          }
          iterate(i);
        }
      }
    }
    iterate(el);
    return result;
  }

  var toc = document.getElementById("toc");
  if (!toc) {
    return;
  }

  // Delete existing TOC entries in case we're reloading the TOC.
  var tocEntriesToRemove = [];
  var i;
  for (i = 0; i < toc.childNodes.length; i++) {
    var entry = toc.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div'
     && entry.getAttribute("class")
     && entry.getAttribute("class").match(/^toclevel/))
      tocEntriesToRemove.push(entry);
  }
  for (i = 0; i < tocEntriesToRemove.length; i++) {
    toc.removeChild(tocEntriesToRemove[i]);
  }

  // Rebuild TOC entries.
  var entries = tocEntries(document.getElementById("content"), toclevels);
  for (var i = 0; i < entries.length; ++i) {
    var entry = entries[i];
    if (entry.element.id == "")
      entry.element.id = "_toc_" + i;
    var a = document.createElement("a");
    a.href = "#" + entry.element.id;
    a.appendChild(document.createTextNode(entry.text));
    var div = document.createElement("div");
    div.appendChild(a);
    div.className = "toclevel" + entry.toclevel;
    toc.appendChild(div);
  }
  if (entries.length == 0)
    toc.parentNode.removeChild(toc);
},


/////////////////////////////////////////////////////////////////////
// Footnotes generator
/////////////////////////////////////////////////////////////////////

/* Based on footnote generation code from:
 * http://www.brandspankingnew.net/archive/2005/07/format_footnote.html
 */

footnotes: function () {
  // Delete existing footnote entries in case we're reloading the footnodes.
  var i;
  var noteholder = document.getElementById("footnotes");
  if (!noteholder) {
    return;
  }
  var entriesToRemove = [];
  for (i = 0; i < noteholder.childNodes.length; i++) {
    var entry = noteholder.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div' && entry.getAttribute("class") == "footnote")
      entriesToRemove.push(entry);
  }
  for (i = 0; i < entriesToRemove.length; i++) {
    noteholder.removeChild(entriesToRemove[i]);
  }

  // Rebuild footnote entries.
  var cont = document.getElementById("content");
  var spans = cont.getElementsByTagName("span");
  var refs = {};
  var n = 0;
  for (i=0; i<spans.length; i++) {
    if (spans[i].className == "footnote") {
      n++;
      var note = spans[i].getAttribute("data-note");
      if (!note) {
        // Use [\s\S] in place of . so multi-line matches work.
        // Because JavaScript has no s (dotall) regex flag.
        note = spans[i].innerHTML.match(/\s*\[([\s\S]*)]\s*/)[1];
        spans[i].innerHTML =
          "[<a id='_footnoteref_" + n + "' href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
        spans[i].setAttribute("data-note", note);
      }
      noteholder.innerHTML +=
        "<div class='footnote' id='_footnote_" + n + "'>" +
        "<a href='#_footnoteref_" + n + "' title='Return to text'>" +
        n + "</a>. " + note + "</div>";
      var id =spans[i].getAttribute("id");
      if (id != null) refs["#"+id] = n;
    }
  }
  if (n == 0)
    noteholder.parentNode.removeChild(noteholder);
  else {
    // Process footnoterefs.
    for (i=0; i<spans.length; i++) {
      if (spans[i].className == "footnoteref") {
        var href = spans[i].getElementsByTagName("a")[0].getAttribute("href");
        href = href.match(/#.*/)[0];  // Because IE return full URL.
        n = refs[href];
        spans[i].innerHTML =
          "[<a href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
      }
    }
  }
},

install: function(toclevels) {
  var timerId;

  function reinstall() {
    asciidoc.footnotes();
    if (toclevels) {
      asciidoc.toc(toclevels);
    }
  }

  function reinstallAndRemoveTimer() {
    clearInterval(timerId);
    reinstall();
  }

  timerId = setInterval(reinstall, 500);
  if (document.addEventListener)
    document.addEventListener("DOMContentLoaded", reinstallAndRemoveTimer, false);
  else
    window.onload = reinstallAndRemoveTimer;
}

}
asciidoc.install();
/*]]>*/
</script>
</head>
<body class="article">
<div id="header">
<h1>S3 Integration</h1>
</div>
<div id="content">
<div class="sect1">
<h2 id="_overview">Overview</h2>
<div class="sectionbody">
<div class="paragraph"><p>Globus Transfer supports using an Amazon S3 bucket as an endpoint to store
files.  The bucket can be in any region.</p></div>
<div class="paragraph"><p>Globus Transfer supports the following features on S3 endpoints:</p></div>
<div class="ulist"><ul>
<li>
<p>
You may transfer files to and from S3 endpoints, as long as
the other side is an updated GridFTP server.  Transfers from an S3 endpoint to
another S3 endpoint are not supported.
</p>
</li>
<li>
<p>
You may create ACLs on the endpoint to give other GO users
access to directories.   These ACLs are created and stored in Globus Transfer,
not S3.
</p>
</li>
<li>
<p>
Interactive directory listings
</p>
</li>
<li>
<p>
Interactive directory creation (mkdir)
</p>
</li>
<li>
<p>
Deleting files and directories
</p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">A Managed Endpoint subscription is required in order to create S3
endpoints.  Please contact <a href="mailto:support@globus.org">support@globus.org</a> for more information.</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">Amazon S3 is an eventually-consistent system by design and Globus Transfer
can not guarantee stronger levels of consistency.</td>
</tr></table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_installing_gridftp">Installing GridFTP</h2>
<div class="sectionbody">
<div class="paragraph"><p>You need to build and/or install the latest GT beta.  That has the Verisign CA
automatically bundled (in source code) and is used if GO does not override it.
There is no CA cert management required by the endpoint admin to use S3
buckets, either in http:// or https:// mode.</p></div>
<div class="paragraph"><p>The following GridFTP installation types are supported:</p></div>
<div class="ulist"><ul>
<li>
<p>
Regular
</p>
</li>
<li>
<p>
Globus Shared Endpoint
</p>
</li>
<li>
<p>
Globus Connect Personal
</p>
</li>
<li>
<p>
Globus Connect Server
</p>
</li>
</ul></div>
</div>
</div>
</div>
<div id="footnotes"><hr /></div>
<div id="footer">
<div id="footer-text">
Last updated 2014-06-03 11:05:22 CDT
</div>
</div>
</body>
</html>

    </div>

    <footer>
  <div class="container">
    <p>¬© 2010-2014 Computation Institute, University of Chicago, Argonne National Laboratory <a href="//globus.org/legal">Legal</a></p>
  </div>
</footer>

<script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
<script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
  </body>
</html>
;T;	I"ù= S3 Integration


:product-name: Globus Transfer

////
Todos can come here
////


== Overview

{product-name} supports using an Amazon S3 bucket as an endpoint to store
files.  The bucket can be in any region.  

{product-name} supports the following features on S3 endpoints:

* You may transfer files to and from S3 endpoints, as long as
the other side is an updated GridFTP server.  Transfers from an S3 endpoint to
another S3 endpoint are not supported.

* You may create ACLs on the endpoint to give other GO users
access to directories.   These ACLs are created and stored in {product-name},
not S3.

* Interactive directory listings

* Interactive directory creation (mkdir)

* Deleting files and directories

NOTE: A Managed Endpoint subscription is required in order to create S3
endpoints.  Please contact support@globus.org for more information. 

NOTE: Amazon S3 is an eventually-consistent system by design and {product-name}
can not guarantee stronger levels of consistency.




== Installing GridFTP

You need to build and/or install the latest GT beta.  That has the Verisign CA
automatically bundled (in source code) and is used if GO does not override it.
There is no CA cert management required by the endpoint admin to use S3
buckets, either in http:// or https:// mode.

The following GridFTP installation types are supported:

* Regular
* Globus Shared Endpoint
* Globus Connect Personal
* Globus Connect Server


;T;
I"qI<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.6.9" />
<title>S3 Integration</title>
<style type="text/css">
/* Shared CSS for AsciiDoc xhtml11 and html5 backends */

/* Default font. */
body {
  font-family: Georgia,serif;
}

/* Title font. */
h1, h2, h3, h4, h5, h6,
div.title, caption.title,
thead, p.table.header,
#toctitle,
#author, #revnumber, #revdate, #revremark,
#footer {
  font-family: Arial,Helvetica,sans-serif;
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
  color: navy;
}

strong {
  font-weight: bold;
  color: #083194;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}
h2 {
  padding-top: 0.5em;
}
h3 {
  float: left;
}
h3 + * {
  clear: left;
}
h5 {
  font-size: 1.0em;
}

div.sectionbody {
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

ul, ol, li > p {
  margin-top: 0;
}
ul > li     { color: #aaa; }
ul > li > * { color: black; }

.monospaced, code, pre {
  font-family: "Courier New", Courier, monospace;
  font-size: inherit;
  color: navy;
  padding: 0;
  margin: 0;
}
pre {
  white-space: pre-wrap;
}

#author {
  color: #527bbd;
  font-weight: bold;
  font-size: 1.1em;
}
#email {
}
#revnumber, #revdate, #revremark {
}

#footer {
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

#preamble {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.0em;
  margin-bottom: 2.0em;
  margin-right: 10%;
  color: #606060;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  color: #527bbd;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid #dddddd;
  border-left: 4px solid #f0f0f0;
  padding: 0.5em;
}

div.listingblock > div.content {
  border: 1px solid #dddddd;
  border-left: 5px solid #f0f0f0;
  background: #f8f8f8;
  padding: 0.5em;
}

div.quoteblock, div.verseblock {
  padding-left: 1.0em;
  margin-left: 1.0em;
  margin-right: 10%;
  border-left: 5px solid #f0f0f0;
  color: #888;
}

div.quoteblock > div.attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock > pre.content {
  font-family: inherit;
  font-size: inherit;
}
div.verseblock > div.attribution {
  padding-top: 0.75em;
  text-align: left;
}
/* DEPRECATED: Pre version 8.2.7 verse style literal block. */
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 3px solid #dddddd;
}

div.exampleblock > div.content {
  border-left: 3px solid #dddddd;
  padding-left: 0.5em;
}

div.imageblock div.content { padding-left: 0; }
span.image img { border-style: none; vertical-align: text-bottom; }
a.image:visited { color: white; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: normal;
  color: navy;
}
dd > *:first-child {
  margin-top: 0.1em;
}

ul, ol {
    list-style-position: outside;
}
ol.arabic {
  list-style-type: decimal;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}

div.compact ul, div.compact ol,
div.compact p, div.compact p,
div.compact div, div.compact div {
  margin-top: 0.1em;
  margin-bottom: 0.1em;
}

tfoot {
  font-weight: bold;
}
td > div.verse {
  white-space: pre;
}

div.hdlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hdlist tr {
  padding-bottom: 15px;
}
dt.hdlist1.strong, td.hdlist1.strong {
  font-weight: bold;
}
td.hdlist1 {
  vertical-align: top;
  font-style: normal;
  padding-right: 0.8em;
  color: navy;
}
td.hdlist2 {
  vertical-align: top;
}
div.hdlist.compact tr {
  margin: 0;
  padding-bottom: 0;
}

.comment {
  background: yellow;
}

.footnote, .footnoteref {
  font-size: 0.8em;
}

span.footnote, span.footnoteref {
  vertical-align: super;
}

#footnotes {
  margin: 20px 0 20px 0;
  padding: 7px 0 0 0;
}

#footnotes div.footnote {
  margin: 0 0 5px 0;
}

#footnotes hr {
  border: none;
  border-top: 1px solid silver;
  height: 1px;
  text-align: left;
  margin-left: 0;
  width: 20%;
  min-width: 100px;
}

div.colist td {
  padding-right: 0.5em;
  padding-bottom: 0.3em;
  vertical-align: top;
}
div.colist td img {
  margin-top: 0.3em;
}

@media print {
  #footer-badges { display: none; }
}

#toc {
  margin-bottom: 2.5em;
}

#toctitle {
  color: #527bbd;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel0, div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}

span.aqua { color: aqua; }
span.black { color: black; }
span.blue { color: blue; }
span.fuchsia { color: fuchsia; }
span.gray { color: gray; }
span.green { color: green; }
span.lime { color: lime; }
span.maroon { color: maroon; }
span.navy { color: navy; }
span.olive { color: olive; }
span.purple { color: purple; }
span.red { color: red; }
span.silver { color: silver; }
span.teal { color: teal; }
span.white { color: white; }
span.yellow { color: yellow; }

span.aqua-background { background: aqua; }
span.black-background { background: black; }
span.blue-background { background: blue; }
span.fuchsia-background { background: fuchsia; }
span.gray-background { background: gray; }
span.green-background { background: green; }
span.lime-background { background: lime; }
span.maroon-background { background: maroon; }
span.navy-background { background: navy; }
span.olive-background { background: olive; }
span.purple-background { background: purple; }
span.red-background { background: red; }
span.silver-background { background: silver; }
span.teal-background { background: teal; }
span.white-background { background: white; }
span.yellow-background { background: yellow; }

span.big { font-size: 2em; }
span.small { font-size: 0.6em; }

span.underline { text-decoration: underline; }
span.overline { text-decoration: overline; }
span.line-through { text-decoration: line-through; }

div.unbreakable { page-break-inside: avoid; }


/*
 * xhtml11 specific
 *
 * */

div.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.tableblock > table {
  border: 3px solid #527bbd;
}
thead, p.table.header {
  font-weight: bold;
  color: #527bbd;
}
p.table {
  margin-top: 0;
}
/* Because the table frame attribute is overriden by CSS in most browsers. */
div.tableblock > table[frame="void"] {
  border-style: none;
}
div.tableblock > table[frame="hsides"] {
  border-left-style: none;
  border-right-style: none;
}
div.tableblock > table[frame="vsides"] {
  border-top-style: none;
  border-bottom-style: none;
}


/*
 * html5 specific
 *
 * */

table.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
thead, p.tableblock.header {
  font-weight: bold;
  color: #527bbd;
}
p.tableblock {
  margin-top: 0;
}
table.tableblock {
  border-width: 3px;
  border-spacing: 0px;
  border-style: solid;
  border-color: #527bbd;
  border-collapse: collapse;
}
th.tableblock, td.tableblock {
  border-width: 1px;
  padding: 4px;
  border-style: solid;
  border-color: #527bbd;
}

table.tableblock.frame-topbot {
  border-left-style: hidden;
  border-right-style: hidden;
}
table.tableblock.frame-sides {
  border-top-style: hidden;
  border-bottom-style: hidden;
}
table.tableblock.frame-none {
  border-style: hidden;
}

th.tableblock.halign-left, td.tableblock.halign-left {
  text-align: left;
}
th.tableblock.halign-center, td.tableblock.halign-center {
  text-align: center;
}
th.tableblock.halign-right, td.tableblock.halign-right {
  text-align: right;
}

th.tableblock.valign-top, td.tableblock.valign-top {
  vertical-align: top;
}
th.tableblock.valign-middle, td.tableblock.valign-middle {
  vertical-align: middle;
}
th.tableblock.valign-bottom, td.tableblock.valign-bottom {
  vertical-align: bottom;
}


/*
 * manpage specific
 *
 * */

body.manpage h1 {
  padding-top: 0.5em;
  padding-bottom: 0.5em;
  border-top: 2px solid silver;
  border-bottom: 2px solid silver;
}
body.manpage h2 {
  border-style: none;
}
body.manpage div.sectionbody {
  margin-left: 3em;
}

@media print {
  body.manpage div#toc { display: none; }
}


</style>
<script type="text/javascript">
/*<![CDATA[*/
var asciidoc = {  // Namespace.

/////////////////////////////////////////////////////////////////////
// Table Of Contents generator
/////////////////////////////////////////////////////////////////////

/* Author: Mihai Bazon, September 2002
 * http://students.infoiasi.ro/~mishoo
 *
 * Table Of Content generator
 * Version: 0.4
 *
 * Feel free to use this script under the terms of the GNU General Public
 * License, as long as you do not remove or alter this notice.
 */

 /* modified by Troy D. Hanson, September 2006. License: GPL */
 /* modified by Stuart Rackham, 2006, 2009. License: GPL */

// toclevels = 1..4.
toc: function (toclevels) {

  function getText(el) {
    var text = "";
    for (var i = el.firstChild; i != null; i = i.nextSibling) {
      if (i.nodeType == 3 /* Node.TEXT_NODE */) // IE doesn't speak constants.
        text += i.data;
      else if (i.firstChild != null)
        text += getText(i);
    }
    return text;
  }

  function TocEntry(el, text, toclevel) {
    this.element = el;
    this.text = text;
    this.toclevel = toclevel;
  }

  function tocEntries(el, toclevels) {
    var result = new Array;
    var re = new RegExp('[hH]([1-'+(toclevels+1)+'])');
    // Function that scans the DOM tree for header elements (the DOM2
    // nodeIterator API would be a better technique but not supported by all
    // browsers).
    var iterate = function (el) {
      for (var i = el.firstChild; i != null; i = i.nextSibling) {
        if (i.nodeType == 1 /* Node.ELEMENT_NODE */) {
          var mo = re.exec(i.tagName);
          if (mo && (i.getAttribute("class") || i.getAttribute("className")) != "float") {
            result[result.length] = new TocEntry(i, getText(i), mo[1]-1);
          }
          iterate(i);
        }
      }
    }
    iterate(el);
    return result;
  }

  var toc = document.getElementById("toc");
  if (!toc) {
    return;
  }

  // Delete existing TOC entries in case we're reloading the TOC.
  var tocEntriesToRemove = [];
  var i;
  for (i = 0; i < toc.childNodes.length; i++) {
    var entry = toc.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div'
     && entry.getAttribute("class")
     && entry.getAttribute("class").match(/^toclevel/))
      tocEntriesToRemove.push(entry);
  }
  for (i = 0; i < tocEntriesToRemove.length; i++) {
    toc.removeChild(tocEntriesToRemove[i]);
  }

  // Rebuild TOC entries.
  var entries = tocEntries(document.getElementById("content"), toclevels);
  for (var i = 0; i < entries.length; ++i) {
    var entry = entries[i];
    if (entry.element.id == "")
      entry.element.id = "_toc_" + i;
    var a = document.createElement("a");
    a.href = "#" + entry.element.id;
    a.appendChild(document.createTextNode(entry.text));
    var div = document.createElement("div");
    div.appendChild(a);
    div.className = "toclevel" + entry.toclevel;
    toc.appendChild(div);
  }
  if (entries.length == 0)
    toc.parentNode.removeChild(toc);
},


/////////////////////////////////////////////////////////////////////
// Footnotes generator
/////////////////////////////////////////////////////////////////////

/* Based on footnote generation code from:
 * http://www.brandspankingnew.net/archive/2005/07/format_footnote.html
 */

footnotes: function () {
  // Delete existing footnote entries in case we're reloading the footnodes.
  var i;
  var noteholder = document.getElementById("footnotes");
  if (!noteholder) {
    return;
  }
  var entriesToRemove = [];
  for (i = 0; i < noteholder.childNodes.length; i++) {
    var entry = noteholder.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div' && entry.getAttribute("class") == "footnote")
      entriesToRemove.push(entry);
  }
  for (i = 0; i < entriesToRemove.length; i++) {
    noteholder.removeChild(entriesToRemove[i]);
  }

  // Rebuild footnote entries.
  var cont = document.getElementById("content");
  var spans = cont.getElementsByTagName("span");
  var refs = {};
  var n = 0;
  for (i=0; i<spans.length; i++) {
    if (spans[i].className == "footnote") {
      n++;
      var note = spans[i].getAttribute("data-note");
      if (!note) {
        // Use [\s\S] in place of . so multi-line matches work.
        // Because JavaScript has no s (dotall) regex flag.
        note = spans[i].innerHTML.match(/\s*\[([\s\S]*)]\s*/)[1];
        spans[i].innerHTML =
          "[<a id='_footnoteref_" + n + "' href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
        spans[i].setAttribute("data-note", note);
      }
      noteholder.innerHTML +=
        "<div class='footnote' id='_footnote_" + n + "'>" +
        "<a href='#_footnoteref_" + n + "' title='Return to text'>" +
        n + "</a>. " + note + "</div>";
      var id =spans[i].getAttribute("id");
      if (id != null) refs["#"+id] = n;
    }
  }
  if (n == 0)
    noteholder.parentNode.removeChild(noteholder);
  else {
    // Process footnoterefs.
    for (i=0; i<spans.length; i++) {
      if (spans[i].className == "footnoteref") {
        var href = spans[i].getElementsByTagName("a")[0].getAttribute("href");
        href = href.match(/#.*/)[0];  // Because IE return full URL.
        n = refs[href];
        spans[i].innerHTML =
          "[<a href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
      }
    }
  }
},

install: function(toclevels) {
  var timerId;

  function reinstall() {
    asciidoc.footnotes();
    if (toclevels) {
      asciidoc.toc(toclevels);
    }
  }

  function reinstallAndRemoveTimer() {
    clearInterval(timerId);
    reinstall();
  }

  timerId = setInterval(reinstall, 500);
  if (document.addEventListener)
    document.addEventListener("DOMContentLoaded", reinstallAndRemoveTimer, false);
  else
    window.onload = reinstallAndRemoveTimer;
}

}
asciidoc.install();
/*]]>*/
</script>
</head>
<body class="article">
<div id="header">
<h1>S3 Integration</h1>
</div>
<div id="content">
<div class="sect1">
<h2 id="_overview">Overview</h2>
<div class="sectionbody">
<div class="paragraph"><p>Globus Transfer supports using an Amazon S3 bucket as an endpoint to store
files.  The bucket can be in any region.</p></div>
<div class="paragraph"><p>Globus Transfer supports the following features on S3 endpoints:</p></div>
<div class="ulist"><ul>
<li>
<p>
You may transfer files to and from S3 endpoints, as long as
the other side is an updated GridFTP server.  Transfers from an S3 endpoint to
another S3 endpoint are not supported.
</p>
</li>
<li>
<p>
You may create ACLs on the endpoint to give other GO users
access to directories.   These ACLs are created and stored in Globus Transfer,
not S3.
</p>
</li>
<li>
<p>
Interactive directory listings
</p>
</li>
<li>
<p>
Interactive directory creation (mkdir)
</p>
</li>
<li>
<p>
Deleting files and directories
</p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">A Managed Endpoint subscription is required in order to create S3
endpoints.  Please contact <a href="mailto:support@globus.org">support@globus.org</a> for more information.</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">Amazon S3 is an eventually-consistent system by design and Globus Transfer
can not guarantee stronger levels of consistency.</td>
</tr></table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_installing_gridftp">Installing GridFTP</h2>
<div class="sectionbody">
<div class="paragraph"><p>You need to build and/or install the latest GT beta.  That has the Verisign CA
automatically bundled (in source code) and is used if GO does not override it.
There is no CA cert management required by the endpoint admin to use S3
buckets, either in http:// or https:// mode.</p></div>
<div class="paragraph"><p>The following GridFTP installation types are supported:</p></div>
<div class="ulist"><ul>
<li>
<p>
Regular
</p>
</li>
<li>
<p>
Globus Shared Endpoint
</p>
</li>
<li>
<p>
Globus Connect Personal
</p>
</li>
<li>
<p>
Globus Connect Server
</p>
</li>
</ul></div>
</div>
</div>
</div>
<div id="footnotes"><hr /></div>
<div id="footer">
<div id="footer-text">
Last updated 2014-06-03 11:05:22 CDT
</div>
</div>
</body>
</html>
;T;@I"/styles/styles/;T{;{;I"”
@font-face {
	font-family: 'museosans';
	src: url('//www.globus.org/sites/all/themes/globus_bootstrap_theme/fonts/221E91_4_0.woff') format('woff');
	font-weight: 100 ;
}
@font-face {
	font-family: 'museosans';
	src: url('//www.globus.org/sites/all/themes/globus_bootstrap_theme/fonts/221E91_3_0.woff') format('woff');
	font-weight: 500 ;
}
@font-face {
	font-family: 'museosans';
	src: url('//www.globus.org/sites/all/themes/globus_bootstrap_theme/fonts/221E91_1_0.woff') format('woff');
	font-weight: 300 ;
}
@font-face {
	font-family: 'museosans';
	src: url('//www.globus.org/sites/all/themes/globus_bootstrap_theme/nts/221E91_0_0.woff') format('woff');
	font-weight: 700 ;
}

body {
	padding-top: 60px;
  font-family: museosans,"Helvetica Neue",Helvetica,Arial,sans-serif;
  font-weight: 300;
  font-size: 16px;
}

/* Site header */
header#masthead {
	
}
header#masthead .navbar {
	background-color: #3560A0;
  background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzM1NjBhMCIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjQyJSIgc3RvcC1jb2xvcj0iIzI3NTE4ZiIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiMyNzUxOGYiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);
  background: -moz-linear-gradient(top,  #3560a0 0%, #27518f 42%, #27518f 100%);
  background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#3560a0), color-stop(42%,#27518f), color-stop(100%,#27518f));
  background: -webkit-linear-gradient(top,  #3560a0 0%,#27518f 42%,#27518f 100%);
  background: -o-linear-gradient(top,  #3560a0 0%,#27518f 42%,#27518f 100%);
  background: -ms-linear-gradient(top,  #3560a0 0%,#27518f 42%,#27518f 100%);
  background: linear-gradient(to bottom,  #3560a0 0%,#27518f 42%,#27518f 100%);
  filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#3560a0', endColorstr='#27518f',GradientType=0 );
}
header#masthead .navbar .navbar-header .navbar-brand {
	vertical-align: middle;
	color: #FFFFFF;
	font-weight: 100;
	font-size: 26px;
}
header#masthead .navbar .navbar-header .navbar-brand img {
	height: 30px;
	margin-top: -5px;
	margin-right: 10px;
}

/*Content*/
.content {}
.content .page-header h1 {
	font-weight: 100;
}

/*Site Footer*/
footer {
	font-size: 13px;
	border-top: 1px solid #E8E8E8;
	margin-top: 60px;
	padding: 30px 0;
};T;	@ ;
@ I"'/docs/transfer_api/acl_management/;T{;{	;I"'Ω<!DOCTYPE HTML>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>A Brand New nanoc Site - </title>
    <link href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/styles/styles.css">

    <meta name="viewport" content="width=device-width">
    <!-- you don't need to keep this, but it's cool for stats! -->
    <meta name="generator" content="nanoc 3.6.11">
  </head>
  <body>
    <header id="masthead">
  <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
      <!-- Brand and toggle get grouped for better mobile display -->
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="/">
          <img src="//www.globus.org/sites/all/themes/globus_bootstrap_theme/logo.png" alt="Home">
          globus developer
        </a>
      </div>

      <!-- Collect the nav links, forms, and other content for toggling -->
      <div class="collapse navbar-collapse">
        <form class="navbar-form navbar-right" role="search">
          <div class="form-group">
            <input type="text" class="form-control" placeholder="Search">
          </div>
          <!-- <button type="submit" class="btn btn-default">Submit</button> -->
        </form>

        <ul class="nav navbar-nav navbar-right">
          <li>
            <a href="/about">About</a>
          </li>
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Docs <b class="caret"></b></a>
            <ul class="dropdown-menu">
              <li><a href="/docs/transfer-api">Transfer API</a></li>
              <a href="#">Transfer API</a>
            </ul>
          </li>
        </ul>
      </div><!-- /.navbar-collapse -->
    </div><!-- /.container-fluid -->
  </nav>
</header>

    <div class="content container">
      

      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.6.9" />
<title>Endpoint ACL Management</title>
<style type="text/css">
/* Shared CSS for AsciiDoc xhtml11 and html5 backends */

/* Default font. */
body {
  font-family: Georgia,serif;
}

/* Title font. */
h1, h2, h3, h4, h5, h6,
div.title, caption.title,
thead, p.table.header,
#toctitle,
#author, #revnumber, #revdate, #revremark,
#footer {
  font-family: Arial,Helvetica,sans-serif;
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
  color: navy;
}

strong {
  font-weight: bold;
  color: #083194;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}
h2 {
  padding-top: 0.5em;
}
h3 {
  float: left;
}
h3 + * {
  clear: left;
}
h5 {
  font-size: 1.0em;
}

div.sectionbody {
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

ul, ol, li > p {
  margin-top: 0;
}
ul > li     { color: #aaa; }
ul > li > * { color: black; }

.monospaced, code, pre {
  font-family: "Courier New", Courier, monospace;
  font-size: inherit;
  color: navy;
  padding: 0;
  margin: 0;
}
pre {
  white-space: pre-wrap;
}

#author {
  color: #527bbd;
  font-weight: bold;
  font-size: 1.1em;
}
#email {
}
#revnumber, #revdate, #revremark {
}

#footer {
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

#preamble {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.0em;
  margin-bottom: 2.0em;
  margin-right: 10%;
  color: #606060;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  color: #527bbd;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid #dddddd;
  border-left: 4px solid #f0f0f0;
  padding: 0.5em;
}

div.listingblock > div.content {
  border: 1px solid #dddddd;
  border-left: 5px solid #f0f0f0;
  background: #f8f8f8;
  padding: 0.5em;
}

div.quoteblock, div.verseblock {
  padding-left: 1.0em;
  margin-left: 1.0em;
  margin-right: 10%;
  border-left: 5px solid #f0f0f0;
  color: #888;
}

div.quoteblock > div.attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock > pre.content {
  font-family: inherit;
  font-size: inherit;
}
div.verseblock > div.attribution {
  padding-top: 0.75em;
  text-align: left;
}
/* DEPRECATED: Pre version 8.2.7 verse style literal block. */
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 3px solid #dddddd;
}

div.exampleblock > div.content {
  border-left: 3px solid #dddddd;
  padding-left: 0.5em;
}

div.imageblock div.content { padding-left: 0; }
span.image img { border-style: none; vertical-align: text-bottom; }
a.image:visited { color: white; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: normal;
  color: navy;
}
dd > *:first-child {
  margin-top: 0.1em;
}

ul, ol {
    list-style-position: outside;
}
ol.arabic {
  list-style-type: decimal;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}

div.compact ul, div.compact ol,
div.compact p, div.compact p,
div.compact div, div.compact div {
  margin-top: 0.1em;
  margin-bottom: 0.1em;
}

tfoot {
  font-weight: bold;
}
td > div.verse {
  white-space: pre;
}

div.hdlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hdlist tr {
  padding-bottom: 15px;
}
dt.hdlist1.strong, td.hdlist1.strong {
  font-weight: bold;
}
td.hdlist1 {
  vertical-align: top;
  font-style: normal;
  padding-right: 0.8em;
  color: navy;
}
td.hdlist2 {
  vertical-align: top;
}
div.hdlist.compact tr {
  margin: 0;
  padding-bottom: 0;
}

.comment {
  background: yellow;
}

.footnote, .footnoteref {
  font-size: 0.8em;
}

span.footnote, span.footnoteref {
  vertical-align: super;
}

#footnotes {
  margin: 20px 0 20px 0;
  padding: 7px 0 0 0;
}

#footnotes div.footnote {
  margin: 0 0 5px 0;
}

#footnotes hr {
  border: none;
  border-top: 1px solid silver;
  height: 1px;
  text-align: left;
  margin-left: 0;
  width: 20%;
  min-width: 100px;
}

div.colist td {
  padding-right: 0.5em;
  padding-bottom: 0.3em;
  vertical-align: top;
}
div.colist td img {
  margin-top: 0.3em;
}

@media print {
  #footer-badges { display: none; }
}

#toc {
  margin-bottom: 2.5em;
}

#toctitle {
  color: #527bbd;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel0, div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}

span.aqua { color: aqua; }
span.black { color: black; }
span.blue { color: blue; }
span.fuchsia { color: fuchsia; }
span.gray { color: gray; }
span.green { color: green; }
span.lime { color: lime; }
span.maroon { color: maroon; }
span.navy { color: navy; }
span.olive { color: olive; }
span.purple { color: purple; }
span.red { color: red; }
span.silver { color: silver; }
span.teal { color: teal; }
span.white { color: white; }
span.yellow { color: yellow; }

span.aqua-background { background: aqua; }
span.black-background { background: black; }
span.blue-background { background: blue; }
span.fuchsia-background { background: fuchsia; }
span.gray-background { background: gray; }
span.green-background { background: green; }
span.lime-background { background: lime; }
span.maroon-background { background: maroon; }
span.navy-background { background: navy; }
span.olive-background { background: olive; }
span.purple-background { background: purple; }
span.red-background { background: red; }
span.silver-background { background: silver; }
span.teal-background { background: teal; }
span.white-background { background: white; }
span.yellow-background { background: yellow; }

span.big { font-size: 2em; }
span.small { font-size: 0.6em; }

span.underline { text-decoration: underline; }
span.overline { text-decoration: overline; }
span.line-through { text-decoration: line-through; }

div.unbreakable { page-break-inside: avoid; }


/*
 * xhtml11 specific
 *
 * */

div.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.tableblock > table {
  border: 3px solid #527bbd;
}
thead, p.table.header {
  font-weight: bold;
  color: #527bbd;
}
p.table {
  margin-top: 0;
}
/* Because the table frame attribute is overriden by CSS in most browsers. */
div.tableblock > table[frame="void"] {
  border-style: none;
}
div.tableblock > table[frame="hsides"] {
  border-left-style: none;
  border-right-style: none;
}
div.tableblock > table[frame="vsides"] {
  border-top-style: none;
  border-bottom-style: none;
}


/*
 * html5 specific
 *
 * */

table.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
thead, p.tableblock.header {
  font-weight: bold;
  color: #527bbd;
}
p.tableblock {
  margin-top: 0;
}
table.tableblock {
  border-width: 3px;
  border-spacing: 0px;
  border-style: solid;
  border-color: #527bbd;
  border-collapse: collapse;
}
th.tableblock, td.tableblock {
  border-width: 1px;
  padding: 4px;
  border-style: solid;
  border-color: #527bbd;
}

table.tableblock.frame-topbot {
  border-left-style: hidden;
  border-right-style: hidden;
}
table.tableblock.frame-sides {
  border-top-style: hidden;
  border-bottom-style: hidden;
}
table.tableblock.frame-none {
  border-style: hidden;
}

th.tableblock.halign-left, td.tableblock.halign-left {
  text-align: left;
}
th.tableblock.halign-center, td.tableblock.halign-center {
  text-align: center;
}
th.tableblock.halign-right, td.tableblock.halign-right {
  text-align: right;
}

th.tableblock.valign-top, td.tableblock.valign-top {
  vertical-align: top;
}
th.tableblock.valign-middle, td.tableblock.valign-middle {
  vertical-align: middle;
}
th.tableblock.valign-bottom, td.tableblock.valign-bottom {
  vertical-align: bottom;
}


/*
 * manpage specific
 *
 * */

body.manpage h1 {
  padding-top: 0.5em;
  padding-bottom: 0.5em;
  border-top: 2px solid silver;
  border-bottom: 2px solid silver;
}
body.manpage h2 {
  border-style: none;
}
body.manpage div.sectionbody {
  margin-left: 3em;
}

@media print {
  body.manpage div#toc { display: none; }
}


@media screen {
  body {
    max-width: 50em; /* approximately 80 characters wide */
    margin-left: 16em;
  }

  #toc {
    position: fixed;
    top: 0;
    left: 0;
    bottom: 0;
    width: 13em;
    padding: 0.5em;
    padding-bottom: 1.5em;
    margin: 0;
    overflow: auto;
    border-right: 3px solid #f8f8f8;
    background-color: white;
  }

  #toc .toclevel1 {
    margin-top: 0.5em;
  }

  #toc .toclevel2 {
    margin-top: 0.25em;
    display: list-item;
    color: #aaaaaa;
  }

  #toctitle {
    margin-top: 0.5em;
  }
}
</style>
<script type="text/javascript">
/*<![CDATA[*/
var asciidoc = {  // Namespace.

/////////////////////////////////////////////////////////////////////
// Table Of Contents generator
/////////////////////////////////////////////////////////////////////

/* Author: Mihai Bazon, September 2002
 * http://students.infoiasi.ro/~mishoo
 *
 * Table Of Content generator
 * Version: 0.4
 *
 * Feel free to use this script under the terms of the GNU General Public
 * License, as long as you do not remove or alter this notice.
 */

 /* modified by Troy D. Hanson, September 2006. License: GPL */
 /* modified by Stuart Rackham, 2006, 2009. License: GPL */

// toclevels = 1..4.
toc: function (toclevels) {

  function getText(el) {
    var text = "";
    for (var i = el.firstChild; i != null; i = i.nextSibling) {
      if (i.nodeType == 3 /* Node.TEXT_NODE */) // IE doesn't speak constants.
        text += i.data;
      else if (i.firstChild != null)
        text += getText(i);
    }
    return text;
  }

  function TocEntry(el, text, toclevel) {
    this.element = el;
    this.text = text;
    this.toclevel = toclevel;
  }

  function tocEntries(el, toclevels) {
    var result = new Array;
    var re = new RegExp('[hH]([1-'+(toclevels+1)+'])');
    // Function that scans the DOM tree for header elements (the DOM2
    // nodeIterator API would be a better technique but not supported by all
    // browsers).
    var iterate = function (el) {
      for (var i = el.firstChild; i != null; i = i.nextSibling) {
        if (i.nodeType == 1 /* Node.ELEMENT_NODE */) {
          var mo = re.exec(i.tagName);
          if (mo && (i.getAttribute("class") || i.getAttribute("className")) != "float") {
            result[result.length] = new TocEntry(i, getText(i), mo[1]-1);
          }
          iterate(i);
        }
      }
    }
    iterate(el);
    return result;
  }

  var toc = document.getElementById("toc");
  if (!toc) {
    return;
  }

  // Delete existing TOC entries in case we're reloading the TOC.
  var tocEntriesToRemove = [];
  var i;
  for (i = 0; i < toc.childNodes.length; i++) {
    var entry = toc.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div'
     && entry.getAttribute("class")
     && entry.getAttribute("class").match(/^toclevel/))
      tocEntriesToRemove.push(entry);
  }
  for (i = 0; i < tocEntriesToRemove.length; i++) {
    toc.removeChild(tocEntriesToRemove[i]);
  }

  // Rebuild TOC entries.
  var entries = tocEntries(document.getElementById("content"), toclevels);
  for (var i = 0; i < entries.length; ++i) {
    var entry = entries[i];
    if (entry.element.id == "")
      entry.element.id = "_toc_" + i;
    var a = document.createElement("a");
    a.href = "#" + entry.element.id;
    a.appendChild(document.createTextNode(entry.text));
    var div = document.createElement("div");
    div.appendChild(a);
    div.className = "toclevel" + entry.toclevel;
    toc.appendChild(div);
  }
  if (entries.length == 0)
    toc.parentNode.removeChild(toc);
},


/////////////////////////////////////////////////////////////////////
// Footnotes generator
/////////////////////////////////////////////////////////////////////

/* Based on footnote generation code from:
 * http://www.brandspankingnew.net/archive/2005/07/format_footnote.html
 */

footnotes: function () {
  // Delete existing footnote entries in case we're reloading the footnodes.
  var i;
  var noteholder = document.getElementById("footnotes");
  if (!noteholder) {
    return;
  }
  var entriesToRemove = [];
  for (i = 0; i < noteholder.childNodes.length; i++) {
    var entry = noteholder.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div' && entry.getAttribute("class") == "footnote")
      entriesToRemove.push(entry);
  }
  for (i = 0; i < entriesToRemove.length; i++) {
    noteholder.removeChild(entriesToRemove[i]);
  }

  // Rebuild footnote entries.
  var cont = document.getElementById("content");
  var spans = cont.getElementsByTagName("span");
  var refs = {};
  var n = 0;
  for (i=0; i<spans.length; i++) {
    if (spans[i].className == "footnote") {
      n++;
      var note = spans[i].getAttribute("data-note");
      if (!note) {
        // Use [\s\S] in place of . so multi-line matches work.
        // Because JavaScript has no s (dotall) regex flag.
        note = spans[i].innerHTML.match(/\s*\[([\s\S]*)]\s*/)[1];
        spans[i].innerHTML =
          "[<a id='_footnoteref_" + n + "' href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
        spans[i].setAttribute("data-note", note);
      }
      noteholder.innerHTML +=
        "<div class='footnote' id='_footnote_" + n + "'>" +
        "<a href='#_footnoteref_" + n + "' title='Return to text'>" +
        n + "</a>. " + note + "</div>";
      var id =spans[i].getAttribute("id");
      if (id != null) refs["#"+id] = n;
    }
  }
  if (n == 0)
    noteholder.parentNode.removeChild(noteholder);
  else {
    // Process footnoterefs.
    for (i=0; i<spans.length; i++) {
      if (spans[i].className == "footnoteref") {
        var href = spans[i].getElementsByTagName("a")[0].getAttribute("href");
        href = href.match(/#.*/)[0];  // Because IE return full URL.
        n = refs[href];
        spans[i].innerHTML =
          "[<a href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
      }
    }
  }
},

install: function(toclevels) {
  var timerId;

  function reinstall() {
    asciidoc.footnotes();
    if (toclevels) {
      asciidoc.toc(toclevels);
    }
  }

  function reinstallAndRemoveTimer() {
    clearInterval(timerId);
    reinstall();
  }

  timerId = setInterval(reinstall, 500);
  if (document.addEventListener)
    document.addEventListener("DOMContentLoaded", reinstallAndRemoveTimer, false);
  else
    window.onload = reinstallAndRemoveTimer;
}

}
asciidoc.install(2);
/*]]>*/
</script>
</head>
<body class="article">
<div id="header">
<h1>Endpoint ACL Management</h1>
<div id="toc">
  <div id="toctitle">Table of Contents</div>
  <noscript><p><b>JavaScript must be enabled in your browser to display the table of contents.</b></p></noscript>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph"><p>Shared endpoints and S3 endpoints have an associated Access Control List
(ACL), and the API provides methods for reading, creating, updating and
deleting access rules in the ACL. The ACL for each endpoint can have at
most 100 access rules.</p></div>
<div class="paragraph"><p>The owner of the endpoint always has full read and write access to the endpoint.
This is not included as a rule in the ACL, as it is always present and can&#8217;t
be removed.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">Access is still subject to the local filesystem or S3 bucket
permissions. Globus ACLs provide an additional layer on top of local
permissions to simplify collaboration among Globus users.</td>
</tr></table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_document_type">Document Type</h2>
<div class="sectionbody">
<div class="paragraph"><p>All ACL management resources use the <code>access</code> document type, which represents
a single access rule in the ACL.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">The id is now a string, to allow for more implementation options for
different types of access rules.</td>
</tr></table>
</div>
<div class="listingblock">
<div class="title">Access Document Example</div>
<div class="content">
<pre><code>{
    "DATA_TYPE": "access",
    "id": "12345",
    "principal_type": "user",
    "principal": "bob",
    "path": "/",
    "permissions": "r"
}</code></pre>
</div></div>
<div class="sect2">
<h3 id="_fields">Fields</h3>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="10%" />
<col width="10%" />
<col width="80%" />
<thead>
<tr>
<th align="left" valign="top"> Field Name     </th>
<th align="left" valign="top"> JSON Type </th>
<th align="left" valign="top"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">DATA_TYPE</p></td>
<td align="left" valign="top"><p class="table">string</p></td>
<td align="left" valign="top"><p class="table">Always has value "access" to indicate this document type.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">id</p></td>
<td align="left" valign="top"><p class="table">string</p></td>
<td align="left" valign="top"><p class="table">Globally unique id for this access rule.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">principal_type</p></td>
<td align="left" valign="top"><p class="table">string</p></td>
<td align="left" valign="top"><p class="table">Type of principal that the rule applies to.
                   One of "user", "group", "email",
                   or "all_authenticated_users".</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">principal</p></td>
<td align="left" valign="top"><p class="table">string</p></td>
<td align="left" valign="top"><p class="table">Name or id of the entity the rule applies to.
                   For type "user", this will be the Globus username.
                   For type "group", this will be the Globus group uuid.
                   For type "email", this will be a user&#8217;s email address.
                   For type "all_authenticated_users", this is always an
                   empty string.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">path</p></td>
<td align="left" valign="top"><p class="table">string</p></td>
<td align="left" valign="top"><p class="table">Absolute path to a directory the access rule applies to.
                   The path must begin and end with a slash, and can&#8217;t
                   contain un-normalized components "/../" or "/./".
                   GridFTP endpoints and shared endpoints hosted on GridFTP
                   endpoints also support home directory relative paths
                   beginning with "/~/". The path is limited to 2000
                   characters after encoding; in practice this means
                   2000 ascii characters and slightly less when unicode
                   is present and must be encoded.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">permissions</p></td>
<td align="left" valign="top"><p class="table">string</p></td>
<td align="left" valign="top"><p class="table">How much permission to grant the principal specified in
                   <code>principal_type</code> and <code>principal</code>.
                   Either read-only, specified as "r",
                   or read-write, specified as "rw".</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_access_rule_types">Access Rule Types</h3>
<div class="sect3">
<h4 id="_user_access_rule">User Access Rule</h4>
<div class="paragraph"><p>User access rules apply to a single Globus user, indicated by Globus username.
The Nexus API provides resources for searching for users by full name and other
attributes.</p></div>
</div>
<div class="sect3">
<h4 id="_group_access_rule">Group Access Rule</h4>
<div class="paragraph"><p>Group access rules apply to all Globus users in a Globus group. Groups can
be created and discovered with the Nexus API. In the access rules, they
are indicated by the group id, not by the group name which is non necessarily
unique.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">Group ids are not validated; it is the responsibility of the client to
ensure the id is correct via the Group API in Nexus. Also if the group is
deleted, the rule will no longer provide any access but will stay in the ACL
until deleted by the user or client application.</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="_all_authenticated_users_access_rule">All Authenticated Users Access Rule</h4>
<div class="paragraph"><p>These rules grant access to all Globus users. This can be used to share data
with everyone, but still allows monitoring of how many people are accessing
the data.</p></div>
</div>
<div class="sect3">
<h4 id="_email_access_rule">Email Access Rule</h4>
<div class="paragraph"><p>If you&#8217;re trying to share with someone and don&#8217;t know their Globus user name or
they don&#8217;t yet have an account, you may create an "email" access rule. When an
"email" rule is created, Globus sends an email invitation to the email address
specified in principal. Once claimed, the access rule will be replaced by one
with <code>principal_type</code> "user" and <code>principal</code> equal to the username of the
Globus user who claimed the access rule. Each email access rule can be claimed
by only one Globus user account.</p></div>
<div class="paragraph"><p>Before the email access rule is claimed, it can be manipulated like any other
access rule - the permission can be updated and it can be deleted. If deleted
before claimed, any attempt to claim it will fail with an error.</p></div>
<div class="paragraph"><p>See the "Claim" section below for details on how to claim an email access rule.
In most cases this will be handled by the user following a link in the
invitation email to the <a href="http://www.globus.org">Globus</a> website.</p></div>
<div class="paragraph"><p>If the recipient of an email access rule did not receive the email, it&#8217;s
recommended that the old rule be deleted and a new rule for the same email
and path be added to resend a new invitation. This will revoke the original
invitation which is presumed to have been lost. If the user eventually receives
both, they should attempt to claim the newer one.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">(NICE TO HAVE) enforce uniqueness on (endpoint, email,
path) for email access rules.</td>
</tr></table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_common_query_parameters">Common Query Parameters</h2>
<div class="sectionbody">
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="11%" />
<col width="88%" />
<thead>
<tr>
<th align="left" valign="top"> Name   </th>
<th align="left" valign="top"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">fields</p></td>
<td align="left" valign="top"><p class="table">Comma separated list of fields to include in the response. This can
           be used to save bandwidth on large list respones when not all
           fields are needed.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">format</p></td>
<td align="left" valign="top"><p class="table">"json" or "html". Note that the "html" format is subject to change
           and should not be relied upon for programs. It is used to render
           the self-hosted, auto-generated API documentation.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_common_errors">Common Errors</h2>
<div class="sectionbody">
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">Current codes are more messy. TODO: update this with the actual codes used
today, and possibly another section with what we want them to be long term.</td>
</tr></table>
</div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="10%" />
<col width="10%" />
<col width="80%" />
<thead>
<tr>
<th align="left" valign="top"> Code              </th>
<th align="left" valign="top"> HTTP Status  </th>
<th align="left" valign="top"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">EndpointNotFound</p></td>
<td align="left" valign="top"><p class="table">404</p></td>
<td align="left" valign="top"><p class="table">If &lt;endpoint_name&gt; not found</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">AccessRuleNotFound</p></td>
<td align="left" valign="top"><p class="table">404</p></td>
<td align="left" valign="top"><p class="table">If access rule specified by &lt;id&gt; is not found</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">InvalidPath</p></td>
<td align="left" valign="top"><p class="table">400</p></td>
<td align="left" valign="top"><p class="table">If the path specified in an access rule is not
                            valid or too long.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Conflict</p></td>
<td align="left" valign="top"><p class="table">409</p></td>
<td align="left" valign="top"><p class="table">If &lt;endpoint_name&gt; does not support ACLs.
                            See the <code>acl_available</code> field of <code>endpoint</code> to
                            determine if an endpoint supports ACLs.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">PermissionDenied</p></td>
<td align="left" valign="top"><p class="table">403</p></td>
<td align="left" valign="top"><p class="table">If you do not have permissions to view or modify
                            ACLs on &lt;endpoint_name&gt;.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_operations">Operations</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_read_all">Read All</h3>
<div class="paragraph"><p>Get the list of access rules in the ACL for a specified endpoint.</p></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="16%" />
<col width="83%" />
<tbody>
<tr>
<td align="left" valign="top"><p class="table header">URL</p></td>
<td align="left" valign="top"><div><div class="literalblock">
<div class="content">
<pre><code>/endpoint/&lt;endpoint_name&gt;/access_list</code></pre>
</div></div></div></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table header">Method</p></td>
<td align="left" valign="top"><div><div class="literalblock">
<div class="content">
<pre><code>GET</code></pre>
</div></div></div></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table header">Response Body</p></td>
<td align="left" valign="top"><div><div class="listingblock">
<div class="content">
<pre><code>{
    "length": 2,
    "endpoint": "alice#myshare",
    "DATA": [
        {
            "DATA_TYPE": "access",
            "principal_type": "user",
            "path": "/",
            "principal": "bob",
            "id": "12345",
            "permissions": "r"
        },
        {
            "DATA_TYPE": "access",
            "principal_type": "group",
            "path": "/project1",
            "principal": "a2e662ac-d4bc-4ab7-aceb-8a12d2205326",
            "id": "743565",
            "permissions": "rw"
        }
    ],
    "DATA_TYPE": "access_list"
}</code></pre>
</div></div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_read_one">Read One</h3>
<div class="paragraph"><p>Get a single access rule for a specified endpoint by id.</p></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="16%" />
<col width="83%" />
<tbody>
<tr>
<td align="left" valign="top"><p class="table header">URL</p></td>
<td align="left" valign="top"><div><div class="literalblock">
<div class="content">
<pre><code>/endpoint/&lt;endpoint_name&gt;/access/&lt;id&gt;</code></pre>
</div></div></div></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table header">Method</p></td>
<td align="left" valign="top"><div><div class="literalblock">
<div class="content">
<pre><code>GET</code></pre>
</div></div></div></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table header">Response Body</p></td>
<td align="left" valign="top"><div><div class="literalblock">
<div class="content">
<pre><code>Access document (see above).</code></pre>
</div></div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_create">Create</h3>
<div class="paragraph"><p>Create a new access rule. The response contains the id of the newly created
rule in the <code>access_id</code> field.</p></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="16%" />
<col width="83%" />
<tbody>
<tr>
<td align="left" valign="top"><p class="table header">URL</p></td>
<td align="left" valign="top"><div><div class="literalblock">
<div class="content">
<pre><code>/endpoint/&lt;endpoint_name&gt;/access</code></pre>
</div></div></div></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table header">Method</p></td>
<td align="left" valign="top"><div><div class="literalblock">
<div class="content">
<pre><code>POST</code></pre>
</div></div></div></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table header">Request Body</p></td>
<td align="left" valign="top"><div><div class="literalblock">
<div class="content">
<pre><code>Access document to add to the endpoint's ACL (see above).</code></pre>
</div></div></div></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table header">Response Body</p></td>
<td align="left" valign="top"><div><div class="listingblock">
<div class="content">
<pre><code>{
    "code": "Created",
    "resource": "/endpoint/epname/access",
    "DATA_TYPE": "access_create_result",
    "request_id": "abc123",
    "access_id": 12345,
    "message": "Access rule created successfully."
}</code></pre>
</div></div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_errors">Errors</h4>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="10%" />
<col width="10%" />
<col width="80%" />
<thead>
<tr>
<th align="left" valign="top"> Code     </th>
<th align="left" valign="top"> HTTP Status </th>
<th align="left" valign="top"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">Conflict</p></td>
<td align="left" valign="top"><p class="table">409</p></td>
<td align="left" valign="top"><p class="table">If the endpoint ACL already has the maximum of 100 access
                     rules.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Conflict</p></td>
<td align="left" valign="top"><p class="table">409</p></td>
<td align="left" valign="top"><p class="table">(NICE TO HAVE) If an <code>email</code> access rule with the same
                     (<code>principal</code>, <code>path</code>) already exists in the endpoint&#8217;s
                     ACL.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_update">Update</h3>
<div class="paragraph"><p>Update the permissions on an existing access rule. Other fields (besides
<code>DATA_TYPE</code> which must always be present) may be omitted. If the id is present
it must match the id in the URL.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">This may support updating <code>path</code> or other fields in the future, so
clients should make sure to use the correct value for the other fields
or omit them entirely.</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">If an <code>email</code> access rule has been claimed since the client fetched
it and become a <code>user</code> access rule, this will update the <code>user</code> access rule,
which has the same id. Because the other fields are ignored, no error will
be raised if they are included in the request, even though they no longer
match.</td>
</tr></table>
</div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="16%" />
<col width="83%" />
<tbody>
<tr>
<td align="left" valign="top"><p class="table header">URL</p></td>
<td align="left" valign="top"><div><div class="literalblock">
<div class="content">
<pre><code>/endpoint/&lt;endpoint_name&gt;/access/&lt;id&gt;</code></pre>
</div></div></div></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table header">Method</p></td>
<td align="left" valign="top"><div><div class="literalblock">
<div class="content">
<pre><code>PUT</code></pre>
</div></div></div></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table header">Request Body</p></td>
<td align="left" valign="top"><div><div class="literalblock">
<div class="content">
<pre><code>Access document</code></pre>
</div></div></div></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table header">Response Body</p></td>
<td align="left" valign="top"><div><div class="listingblock">
<div class="content">
<pre><code>{
    "message": "Access rule '123' permissions updated successfully",
    "code": "Updated",
    "resource": "/endpoint/user#ep1/access/123",
    "DATA_TYPE": "result",
    "request_id": "ABCdef789"
}</code></pre>
</div></div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_delete">Delete</h3>
<div class="paragraph"><p>Delete a single access rule, specified by id.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">If an <code>email</code> access rule has been claimed since the client fetched
it and become a <code>user</code> access rule, this will delete the <code>user</code> access rule,
which has the same id.</td>
</tr></table>
</div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="16%" />
<col width="83%" />
<tbody>
<tr>
<td align="left" valign="top"><p class="table header">URL</p></td>
<td align="left" valign="top"><div><div class="literalblock">
<div class="content">
<pre><code>/endpoint/&lt;endpoint_name&gt;/access/&lt;id&gt;</code></pre>
</div></div></div></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table header">Method</p></td>
<td align="left" valign="top"><div><div class="literalblock">
<div class="content">
<pre><code>DELETE</code></pre>
</div></div></div></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table header">Request Body</p></td>
<td align="left" valign="top"><div><div class="literalblock">
<div class="content">
<pre><code>Empty</code></pre>
</div></div></div></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table header">Response Body</p></td>
<td align="left" valign="top"><div><div class="listingblock">
<div class="content">
<pre><code>{
    "message": "Access rule '123' deleted successfully",
    "code": "Deleted",
    "resource": "/endpoint/user#ep1/access/123",
    "DATA_TYPE": "result",
    "request_id": "ABCdef789"
}</code></pre>
</div></div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_claim">Claim</h3>
<div class="paragraph"><p>Claim an email access rule as the authenticated user. The email access rule
will be converted to a user access rule. Returns the user access rule, with an
additional <code>endpoint_name</code> field which can be used to redirect the user to
that endpoint with the access rule path displayed in a file browser.</p></div>
<div class="paragraph"><p>Once claimed, the user who claimed the access rule can continue to call this
method and get the same success response. This can be used to generate
the redirect URL if the user loads the link from the email again
after claiming the access rule.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">The access rule id does not change when claiming, but the
<code>principal_type</code> and <code>principal</code> will change to "user" and
"&lt;username of claimant&gt;".</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">The owner of the endpoint (creator of the email access rule)
can&#8217;t claim it for themselves.</td>
</tr></table>
</div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="16%" />
<col width="83%" />
<tbody>
<tr>
<td align="left" valign="top"><p class="table header">URL</p></td>
<td align="left" valign="top"><div><div class="literalblock">
<div class="content">
<pre><code>/claim_access/&lt;token&gt;</code></pre>
</div></div></div></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table header">Method</p></td>
<td align="left" valign="top"><div><div class="literalblock">
<div class="content">
<pre><code>POST</code></pre>
</div></div></div></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table header">Response Body</p></td>
<td align="left" valign="top"><div><div class="listingblock">
<div class="content">
<pre><code>{
    "DATA_TYPE": "claim_response",
    "endpoint_name": "alice#myshare",
    "id": "12345",
    "principal_type": "user",
    "principal": "bob",
    "path": "/",
    "permissions": "r"
}</code></pre>
</div></div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_errors_2">Errors</h4>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="10%" />
<col width="10%" />
<col width="80%" />
<thead>
<tr>
<th align="left" valign="top"> Code             </th>
<th align="left" valign="top"> HTTP Status </th>
<th align="left" valign="top"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">Conflict</p></td>
<td align="left" valign="top"><p class="table">409</p></td>
<td align="left" valign="top"><p class="table">If &lt;token&gt; has already been claimed by a different user.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Conflict</p></td>
<td align="left" valign="top"><p class="table">409</p></td>
<td align="left" valign="top"><p class="table">If the authenticated user is the endpoint owner.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">EndpointNotFound</p></td>
<td align="left" valign="top"><p class="table">404</p></td>
<td align="left" valign="top"><p class="table">If the endpoint containing the access rule has been deleted.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">AccessRuleNotFound</p></td>
<td align="left" valign="top"><p class="table">404</p></td>
<td align="left" valign="top"><p class="table">If the owner of the endpoint has deleted the access rule
  (basically revoking the email invitation).</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">BadRequest</p></td>
<td align="left" valign="top"><p class="table">400</p></td>
<td align="left" valign="top"><p class="table">If &lt;token&gt; is invalid, e.g. if the user&#8217;s email client
  corrupts it or if the end got chopped off. This won&#8217;t
  catch all possible corruptions - AccessRuleNotFound
  may be returned in some cases.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_change_history">Change History</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_may_30">May 30</h3>
<div class="ulist"><ul>
<li>
<p>
List illegal path components in <code>path</code> fields description
</p>
</li>
<li>
<p>
Add PermissionDenied common error
</p>
</li>
<li>
<p>
Make "all_authenticated_users" principal empty string instead of null
</p>
</li>
<li>
<p>
Add note about not checking nexus group ids and deleted groups
</p>
</li>
<li>
<p>
Remove claim error for token referencing non email acl
</p>
</li>
<li>
<p>
Improve email acl description
</p>
</li>
<li>
<p>
Misc wording improvements/typo fixes
</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="_may_29">May 29</h3>
<div class="ulist"><ul>
<li>
<p>
Mark uniqueness for email access rules as a "nice to have".
</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="_may_27">May 27</h3>
<div class="ulist"><ul>
<li>
<p>
Add Create
</p>
</li>
<li>
<p>
Require uniqueness for email access rules on (ep, email, path).
</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="_may_16">May 16</h3>
<div class="ulist"><ul>
<li>
<p>
Make claim idempotent - if the user who claims the access rule calls again,
  return the same success result.
</p>
</li>
<li>
<p>
Specify that the access rule id does not change when claiming. This makes
  the delete and update behavior simpler to understand and document.
</p>
</li>
<li>
<p>
Change claim result to access rule with <code>endpoint_name</code> added.
</p>
</li>
<li>
<p>
Document behavior of operations delete and update email access rules in
  case of concurrent claim.
</p>
</li>
<li>
<p>
Re-document NotFound errors for claim, which are not obvious based on the
  common errors because of the difference in URL structure.
</p>
</li>
<li>
<p>
Use BadRequest for invalid tokens
</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="_may_14">May 14</h3>
<div class="ulist"><ul>
<li>
<p>
Change claim to accept a token as input, and not require the endpoint name
</p>
</li>
<li>
<p>
Remove filtering on Read All, it&#8217;s overly complex and nobody is using it
</p>
</li>
<li>
<p>
Added note about 2000 character path limit and how encoding affects this
</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="_may_13">May 13</h3>
<div class="ulist"><ul>
<li>
<p>
Update Claim docs
</p>
</li>
<li>
<p>
Add detailed description of each access rule type (especially email).
</p>
</li>
<li>
<p>
Remove <em>status</em> field
</p>
</li>
<li>
<p>
Add Common Errors section
</p>
</li>
<li>
<p>
Update Read All with filtering docs
</p>
</li>
</ul></div>
</div>
</div>
</div>
</div>
<div id="footnotes"><hr /></div>
<div id="footer">
<div id="footer-text">
Last updated 2014-06-03 09:35:36 CDT
</div>
</div>
</body>
</html>

    </div>

    <footer>
  <div class="container">
    <p>¬© 2010-2014 Computation Institute, University of Chicago, Argonne National Laboratory <a href="//globus.org/legal">Legal</a></p>
  </div>
</footer>

<script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
<script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
  </body>
</html>
;T;	I"≠7= Endpoint ACL Management
:toc2:

Shared endpoints and S3 endpoints have an associated Access Control List
(ACL), and the API provides methods for reading, creating, updating and
deleting access rules in the ACL. The ACL for each endpoint can have at
most 100 access rules.

The owner of the endpoint always has full read and write access to the endpoint.
This is not included as a rule in the ACL, as it is always present and can't
be removed.

NOTE: Access is still subject to the local filesystem or S3 bucket
permissions. Globus ACLs provide an additional layer on top of local
permissions to simplify collaboration among Globus users.

== Document Type

All ACL management resources use the +access+ document type, which represents
a single access rule in the ACL.

NOTE: The id is now a string, to allow for more implementation options for
different types of access rules.

.Access Document Example
------------------------
{
    "DATA_TYPE": "access",
    "id": "12345",
    "principal_type": "user",
    "principal": "bob",
    "path": "/",
    "permissions": "r"
}
------------------------

=== Fields

[cols="1,1,8",options="header"]
|===================
| Field Name     | JSON Type | Description
| DATA_TYPE      | string
                 | Always has value "access" to indicate this document type.
| id             | string
                 | Globally unique id for this access rule.
| principal_type | string
                 | Type of principal that the rule applies to.
                   One of "user", "group", "email",
                   or "all_authenticated_users".
| principal      | string
                 | Name or id of the entity the rule applies to.
                   For type "user", this will be the Globus username.
                   For type "group", this will be the Globus group uuid.
                   For type "email", this will be a user's email address.
                   For type "all_authenticated_users", this is always an
                   empty string.
| path           | string
                 | Absolute path to a directory the access rule applies to.
                   The path must begin and end with a slash, and can't
                   contain un-normalized components "/../" or "/./".
                   GridFTP endpoints and shared endpoints hosted on GridFTP
                   endpoints also support home directory relative paths
                   beginning with "/~/". The path is limited to 2000
                   characters after encoding; in practice this means
                   2000 ascii characters and slightly less when unicode
                   is present and must be encoded.
| permissions    | string
                 | How much permission to grant the principal specified in
                   +principal_type+ and +principal+.
                   Either read-only, specified as "r",
                   or read-write, specified as "rw".
|===================


=== Access Rule Types

==== User Access Rule

User access rules apply to a single Globus user, indicated by Globus username.
The Nexus API provides resources for searching for users by full name and other
attributes.

==== Group Access Rule

Group access rules apply to all Globus users in a Globus group. Groups can
be created and discovered with the Nexus API. In the access rules, they
are indicated by the group id, not by the group name which is non necessarily
unique.

NOTE: Group ids are not validated; it is the responsibility of the client to
ensure the id is correct via the Group API in Nexus. Also if the group is
deleted, the rule will no longer provide any access but will stay in the ACL
until deleted by the user or client application.

==== All Authenticated Users Access Rule

These rules grant access to all Globus users. This can be used to share data
with everyone, but still allows monitoring of how many people are accessing
the data.

==== Email Access Rule

If you're trying to share with someone and don't know their Globus user name or
they don't yet have an account, you may create an "email" access rule. When an
"email" rule is created, Globus sends an email invitation to the email address
specified in principal. Once claimed, the access rule will be replaced by one
with +principal_type+ "user" and +principal+ equal to the username of the
Globus user who claimed the access rule. Each email access rule can be claimed
by only one Globus user account.

Before the email access rule is claimed, it can be manipulated like any other
access rule - the permission can be updated and it can be deleted. If deleted
before claimed, any attempt to claim it will fail with an error.

See the "Claim" section below for details on how to claim an email access rule.
In most cases this will be handled by the user following a link in the
invitation email to the http://www.globus.org[Globus] website.

If the recipient of an email access rule did not receive the email, it's
recommended that the old rule be deleted and a new rule for the same email
and path be added to resend a new invitation. This will revoke the original
invitation which is presumed to have been lost. If the user eventually receives
both, they should attempt to claim the newer one.

NOTE: (NICE TO HAVE) enforce uniqueness on (endpoint, email,
path) for email access rules.


== Common Query Parameters

[cols="1,8",options="header"]
|===================
| Name   | Description
| fields | Comma separated list of fields to include in the response. This can
           be used to save bandwidth on large list respones when not all
           fields are needed.
| format | "json" or "html". Note that the "html" format is subject to change
           and should not be relied upon for programs. It is used to render
           the self-hosted, auto-generated API documentation.
|===================


== Common Errors

NOTE: Current codes are more messy. TODO: update this with the actual codes used
today, and possibly another section with what we want them to be long term.

[cols="1,1,8",options="header"]
|===================
| Code              | HTTP Status  | Description
| EndpointNotFound  |404  | If <endpoint_name> not found
| AccessRuleNotFound|404  | If access rule specified by <id> is not found
| InvalidPath       |400  | If the path specified in an access rule is not
                            valid or too long.
| Conflict          |409  | If <endpoint_name> does not support ACLs.
                            See the +acl_available+ field of +endpoint+ to
                            determine if an endpoint supports ACLs.
| PermissionDenied  |403  | If you do not have permissions to view or modify
                            ACLs on <endpoint_name>.
|===================


== Operations

=== Read All

Get the list of access rules in the ACL for a specified endpoint.

[cols="h,5a"]
|============
| URL
| /endpoint/<endpoint_name>/access_list

| Method
| GET

| Response Body | 
------------------------------------
{
    "length": 2,
    "endpoint": "alice#myshare",
    "DATA": [
        {
            "DATA_TYPE": "access",
            "principal_type": "user",
            "path": "/",
            "principal": "bob",
            "id": "12345",
            "permissions": "r"
        },
        {
            "DATA_TYPE": "access",
            "principal_type": "group",
            "path": "/project1",
            "principal": "a2e662ac-d4bc-4ab7-aceb-8a12d2205326",
            "id": "743565",
            "permissions": "rw"
        }
    ],
    "DATA_TYPE": "access_list"
}
------------------------------------
|============


=== Read One

Get a single access rule for a specified endpoint by id.

[cols="h,5a"]
|============
| URL
| /endpoint/<endpoint_name>/access/<id>

| Method
| GET

| Response Body | Access document (see above).
|============


=== Create

Create a new access rule. The response contains the id of the newly created
rule in the +access_id+ field.

[cols="h,5a"]
|============
| URL
| /endpoint/<endpoint_name>/access

| Method
| POST

| Request Body | Access document to add to the endpoint's ACL (see above).
| Response Body|
---------------------------------------------------
{
    "code": "Created",
    "resource": "/endpoint/epname/access",
    "DATA_TYPE": "access_create_result",
    "request_id": "abc123",
    "access_id": 12345,
    "message": "Access rule created successfully."
}
---------------------------------------------------
|============

==== Errors

[cols="1,1,8",options="header"]
|===================
| Code     | HTTP Status | Description
| Conflict | 409   | If the endpoint ACL already has the maximum of 100 access
                     rules.
| Conflict | 409   | (NICE TO HAVE) If an +email+ access rule with the same
                     (+principal+, +path+) already exists in the endpoint's
                     ACL.
|===================


=== Update

Update the permissions on an existing access rule. Other fields (besides
+DATA_TYPE+ which must always be present) may be omitted. If the id is present
it must match the id in the URL.

NOTE: This may support updating +path+ or other fields in the future, so
clients should make sure to use the correct value for the other fields
or omit them entirely.

NOTE: If an +email+ access rule has been claimed since the client fetched
it and become a +user+ access rule, this will update the +user+ access rule,
which has the same id. Because the other fields are ignored, no error will
be raised if they are included in the request, even though they no longer
match.

[cols="h,5a"]
|============
| URL
| /endpoint/<endpoint_name>/access/<id>

| Method
| PUT

| Request Body
| Access document

| Response Body |
-------------------------------------------------------------------
{
    "message": "Access rule '123' permissions updated successfully",
    "code": "Updated",
    "resource": "/endpoint/user#ep1/access/123",
    "DATA_TYPE": "result",
    "request_id": "ABCdef789"
}
-------------------------------------------------------------------
|============


=== Delete

Delete a single access rule, specified by id.

NOTE: If an +email+ access rule has been claimed since the client fetched
it and become a +user+ access rule, this will delete the +user+ access rule,
which has the same id.

[cols="h,5a"]
|============
| URL
| /endpoint/<endpoint_name>/access/<id>

| Method
| DELETE

| Request Body  | Empty
| Response Body |
-------------------------------------------------------------------
{
    "message": "Access rule '123' deleted successfully",
    "code": "Deleted",
    "resource": "/endpoint/user#ep1/access/123",
    "DATA_TYPE": "result",
    "request_id": "ABCdef789"
}
-------------------------------------------------------------------
|============


=== Claim

Claim an email access rule as the authenticated user. The email access rule
will be converted to a user access rule. Returns the user access rule, with an
additional +endpoint_name+ field which can be used to redirect the user to
that endpoint with the access rule path displayed in a file browser.

Once claimed, the user who claimed the access rule can continue to call this
method and get the same success response. This can be used to generate
the redirect URL if the user loads the link from the email again
after claiming the access rule.

NOTE: The access rule id does not change when claiming, but the
+principal_type+ and +principal+ will change to "user" and
"<username of claimant>".

NOTE: The owner of the endpoint (creator of the email access rule)
can't claim it for themselves.

[cols="h,5a"]
|============
| URL
| /claim_access/<token>

| Method
| POST

| Response Body | 
------------------------------------
{
    "DATA_TYPE": "claim_response",
    "endpoint_name": "alice#myshare",
    "id": "12345",
    "principal_type": "user",
    "principal": "bob",
    "path": "/",
    "permissions": "r"
}
------------------------------------
|============

==== Errors

[cols="1,1,8",options="header"]
|===================
| Code             | HTTP Status | Description

| Conflict | 409 
| If <token> has already been claimed by a different user.

| Conflict | 409
| If the authenticated user is the endpoint owner.

| EndpointNotFound | 404
| If the endpoint containing the access rule has been deleted.

| AccessRuleNotFound | 404
| If the owner of the endpoint has deleted the access rule
  (basically revoking the email invitation).

| BadRequest | 400
| If <token> is invalid, e.g. if the user's email client
  corrupts it or if the end got chopped off. This won't
  catch all possible corruptions - AccessRuleNotFound
  may be returned in some cases.
|===================



== Change History

=== May 30

- List illegal path components in +path+ fields description
- Add PermissionDenied common error
- Make "all_authenticated_users" principal empty string instead of null
- Add note about not checking nexus group ids and deleted groups
- Remove claim error for token referencing non email acl
- Improve email acl description
- Misc wording improvements/typo fixes

=== May 29

- Mark uniqueness for email access rules as a "nice to have".

=== May 27

- Add Create
- Require uniqueness for email access rules on (ep, email, path).

=== May 16

- Make claim idempotent - if the user who claims the access rule calls again,
  return the same success result.
- Specify that the access rule id does not change when claiming. This makes
  the delete and update behavior simpler to understand and document.
- Change claim result to access rule with +endpoint_name+ added.
- Document behavior of operations delete and update email access rules in
  case of concurrent claim.
- Re-document NotFound errors for claim, which are not obvious based on the
  common errors because of the difference in URL structure.
- Use BadRequest for invalid tokens

=== May 14

- Change claim to accept a token as input, and not require the endpoint name
- Remove filtering on Read All, it's overly complex and nobody is using it
- Added note about 2000 character path limit and how encoding affects this

=== May 13

- Update Claim docs
- Add detailed description of each access rule type (especially email).
- Remove 'status' field
- Add Common Errors section
- Update Read All with filtering docs;T;
I"≥<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.6.9" />
<title>Endpoint ACL Management</title>
<style type="text/css">
/* Shared CSS for AsciiDoc xhtml11 and html5 backends */

/* Default font. */
body {
  font-family: Georgia,serif;
}

/* Title font. */
h1, h2, h3, h4, h5, h6,
div.title, caption.title,
thead, p.table.header,
#toctitle,
#author, #revnumber, #revdate, #revremark,
#footer {
  font-family: Arial,Helvetica,sans-serif;
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
  color: navy;
}

strong {
  font-weight: bold;
  color: #083194;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}
h2 {
  padding-top: 0.5em;
}
h3 {
  float: left;
}
h3 + * {
  clear: left;
}
h5 {
  font-size: 1.0em;
}

div.sectionbody {
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

ul, ol, li > p {
  margin-top: 0;
}
ul > li     { color: #aaa; }
ul > li > * { color: black; }

.monospaced, code, pre {
  font-family: "Courier New", Courier, monospace;
  font-size: inherit;
  color: navy;
  padding: 0;
  margin: 0;
}
pre {
  white-space: pre-wrap;
}

#author {
  color: #527bbd;
  font-weight: bold;
  font-size: 1.1em;
}
#email {
}
#revnumber, #revdate, #revremark {
}

#footer {
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

#preamble {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.0em;
  margin-bottom: 2.0em;
  margin-right: 10%;
  color: #606060;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  color: #527bbd;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid #dddddd;
  border-left: 4px solid #f0f0f0;
  padding: 0.5em;
}

div.listingblock > div.content {
  border: 1px solid #dddddd;
  border-left: 5px solid #f0f0f0;
  background: #f8f8f8;
  padding: 0.5em;
}

div.quoteblock, div.verseblock {
  padding-left: 1.0em;
  margin-left: 1.0em;
  margin-right: 10%;
  border-left: 5px solid #f0f0f0;
  color: #888;
}

div.quoteblock > div.attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock > pre.content {
  font-family: inherit;
  font-size: inherit;
}
div.verseblock > div.attribution {
  padding-top: 0.75em;
  text-align: left;
}
/* DEPRECATED: Pre version 8.2.7 verse style literal block. */
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 3px solid #dddddd;
}

div.exampleblock > div.content {
  border-left: 3px solid #dddddd;
  padding-left: 0.5em;
}

div.imageblock div.content { padding-left: 0; }
span.image img { border-style: none; vertical-align: text-bottom; }
a.image:visited { color: white; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: normal;
  color: navy;
}
dd > *:first-child {
  margin-top: 0.1em;
}

ul, ol {
    list-style-position: outside;
}
ol.arabic {
  list-style-type: decimal;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}

div.compact ul, div.compact ol,
div.compact p, div.compact p,
div.compact div, div.compact div {
  margin-top: 0.1em;
  margin-bottom: 0.1em;
}

tfoot {
  font-weight: bold;
}
td > div.verse {
  white-space: pre;
}

div.hdlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hdlist tr {
  padding-bottom: 15px;
}
dt.hdlist1.strong, td.hdlist1.strong {
  font-weight: bold;
}
td.hdlist1 {
  vertical-align: top;
  font-style: normal;
  padding-right: 0.8em;
  color: navy;
}
td.hdlist2 {
  vertical-align: top;
}
div.hdlist.compact tr {
  margin: 0;
  padding-bottom: 0;
}

.comment {
  background: yellow;
}

.footnote, .footnoteref {
  font-size: 0.8em;
}

span.footnote, span.footnoteref {
  vertical-align: super;
}

#footnotes {
  margin: 20px 0 20px 0;
  padding: 7px 0 0 0;
}

#footnotes div.footnote {
  margin: 0 0 5px 0;
}

#footnotes hr {
  border: none;
  border-top: 1px solid silver;
  height: 1px;
  text-align: left;
  margin-left: 0;
  width: 20%;
  min-width: 100px;
}

div.colist td {
  padding-right: 0.5em;
  padding-bottom: 0.3em;
  vertical-align: top;
}
div.colist td img {
  margin-top: 0.3em;
}

@media print {
  #footer-badges { display: none; }
}

#toc {
  margin-bottom: 2.5em;
}

#toctitle {
  color: #527bbd;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel0, div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}

span.aqua { color: aqua; }
span.black { color: black; }
span.blue { color: blue; }
span.fuchsia { color: fuchsia; }
span.gray { color: gray; }
span.green { color: green; }
span.lime { color: lime; }
span.maroon { color: maroon; }
span.navy { color: navy; }
span.olive { color: olive; }
span.purple { color: purple; }
span.red { color: red; }
span.silver { color: silver; }
span.teal { color: teal; }
span.white { color: white; }
span.yellow { color: yellow; }

span.aqua-background { background: aqua; }
span.black-background { background: black; }
span.blue-background { background: blue; }
span.fuchsia-background { background: fuchsia; }
span.gray-background { background: gray; }
span.green-background { background: green; }
span.lime-background { background: lime; }
span.maroon-background { background: maroon; }
span.navy-background { background: navy; }
span.olive-background { background: olive; }
span.purple-background { background: purple; }
span.red-background { background: red; }
span.silver-background { background: silver; }
span.teal-background { background: teal; }
span.white-background { background: white; }
span.yellow-background { background: yellow; }

span.big { font-size: 2em; }
span.small { font-size: 0.6em; }

span.underline { text-decoration: underline; }
span.overline { text-decoration: overline; }
span.line-through { text-decoration: line-through; }

div.unbreakable { page-break-inside: avoid; }


/*
 * xhtml11 specific
 *
 * */

div.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.tableblock > table {
  border: 3px solid #527bbd;
}
thead, p.table.header {
  font-weight: bold;
  color: #527bbd;
}
p.table {
  margin-top: 0;
}
/* Because the table frame attribute is overriden by CSS in most browsers. */
div.tableblock > table[frame="void"] {
  border-style: none;
}
div.tableblock > table[frame="hsides"] {
  border-left-style: none;
  border-right-style: none;
}
div.tableblock > table[frame="vsides"] {
  border-top-style: none;
  border-bottom-style: none;
}


/*
 * html5 specific
 *
 * */

table.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
thead, p.tableblock.header {
  font-weight: bold;
  color: #527bbd;
}
p.tableblock {
  margin-top: 0;
}
table.tableblock {
  border-width: 3px;
  border-spacing: 0px;
  border-style: solid;
  border-color: #527bbd;
  border-collapse: collapse;
}
th.tableblock, td.tableblock {
  border-width: 1px;
  padding: 4px;
  border-style: solid;
  border-color: #527bbd;
}

table.tableblock.frame-topbot {
  border-left-style: hidden;
  border-right-style: hidden;
}
table.tableblock.frame-sides {
  border-top-style: hidden;
  border-bottom-style: hidden;
}
table.tableblock.frame-none {
  border-style: hidden;
}

th.tableblock.halign-left, td.tableblock.halign-left {
  text-align: left;
}
th.tableblock.halign-center, td.tableblock.halign-center {
  text-align: center;
}
th.tableblock.halign-right, td.tableblock.halign-right {
  text-align: right;
}

th.tableblock.valign-top, td.tableblock.valign-top {
  vertical-align: top;
}
th.tableblock.valign-middle, td.tableblock.valign-middle {
  vertical-align: middle;
}
th.tableblock.valign-bottom, td.tableblock.valign-bottom {
  vertical-align: bottom;
}


/*
 * manpage specific
 *
 * */

body.manpage h1 {
  padding-top: 0.5em;
  padding-bottom: 0.5em;
  border-top: 2px solid silver;
  border-bottom: 2px solid silver;
}
body.manpage h2 {
  border-style: none;
}
body.manpage div.sectionbody {
  margin-left: 3em;
}

@media print {
  body.manpage div#toc { display: none; }
}


@media screen {
  body {
    max-width: 50em; /* approximately 80 characters wide */
    margin-left: 16em;
  }

  #toc {
    position: fixed;
    top: 0;
    left: 0;
    bottom: 0;
    width: 13em;
    padding: 0.5em;
    padding-bottom: 1.5em;
    margin: 0;
    overflow: auto;
    border-right: 3px solid #f8f8f8;
    background-color: white;
  }

  #toc .toclevel1 {
    margin-top: 0.5em;
  }

  #toc .toclevel2 {
    margin-top: 0.25em;
    display: list-item;
    color: #aaaaaa;
  }

  #toctitle {
    margin-top: 0.5em;
  }
}
</style>
<script type="text/javascript">
/*<![CDATA[*/
var asciidoc = {  // Namespace.

/////////////////////////////////////////////////////////////////////
// Table Of Contents generator
/////////////////////////////////////////////////////////////////////

/* Author: Mihai Bazon, September 2002
 * http://students.infoiasi.ro/~mishoo
 *
 * Table Of Content generator
 * Version: 0.4
 *
 * Feel free to use this script under the terms of the GNU General Public
 * License, as long as you do not remove or alter this notice.
 */

 /* modified by Troy D. Hanson, September 2006. License: GPL */
 /* modified by Stuart Rackham, 2006, 2009. License: GPL */

// toclevels = 1..4.
toc: function (toclevels) {

  function getText(el) {
    var text = "";
    for (var i = el.firstChild; i != null; i = i.nextSibling) {
      if (i.nodeType == 3 /* Node.TEXT_NODE */) // IE doesn't speak constants.
        text += i.data;
      else if (i.firstChild != null)
        text += getText(i);
    }
    return text;
  }

  function TocEntry(el, text, toclevel) {
    this.element = el;
    this.text = text;
    this.toclevel = toclevel;
  }

  function tocEntries(el, toclevels) {
    var result = new Array;
    var re = new RegExp('[hH]([1-'+(toclevels+1)+'])');
    // Function that scans the DOM tree for header elements (the DOM2
    // nodeIterator API would be a better technique but not supported by all
    // browsers).
    var iterate = function (el) {
      for (var i = el.firstChild; i != null; i = i.nextSibling) {
        if (i.nodeType == 1 /* Node.ELEMENT_NODE */) {
          var mo = re.exec(i.tagName);
          if (mo && (i.getAttribute("class") || i.getAttribute("className")) != "float") {
            result[result.length] = new TocEntry(i, getText(i), mo[1]-1);
          }
          iterate(i);
        }
      }
    }
    iterate(el);
    return result;
  }

  var toc = document.getElementById("toc");
  if (!toc) {
    return;
  }

  // Delete existing TOC entries in case we're reloading the TOC.
  var tocEntriesToRemove = [];
  var i;
  for (i = 0; i < toc.childNodes.length; i++) {
    var entry = toc.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div'
     && entry.getAttribute("class")
     && entry.getAttribute("class").match(/^toclevel/))
      tocEntriesToRemove.push(entry);
  }
  for (i = 0; i < tocEntriesToRemove.length; i++) {
    toc.removeChild(tocEntriesToRemove[i]);
  }

  // Rebuild TOC entries.
  var entries = tocEntries(document.getElementById("content"), toclevels);
  for (var i = 0; i < entries.length; ++i) {
    var entry = entries[i];
    if (entry.element.id == "")
      entry.element.id = "_toc_" + i;
    var a = document.createElement("a");
    a.href = "#" + entry.element.id;
    a.appendChild(document.createTextNode(entry.text));
    var div = document.createElement("div");
    div.appendChild(a);
    div.className = "toclevel" + entry.toclevel;
    toc.appendChild(div);
  }
  if (entries.length == 0)
    toc.parentNode.removeChild(toc);
},


/////////////////////////////////////////////////////////////////////
// Footnotes generator
/////////////////////////////////////////////////////////////////////

/* Based on footnote generation code from:
 * http://www.brandspankingnew.net/archive/2005/07/format_footnote.html
 */

footnotes: function () {
  // Delete existing footnote entries in case we're reloading the footnodes.
  var i;
  var noteholder = document.getElementById("footnotes");
  if (!noteholder) {
    return;
  }
  var entriesToRemove = [];
  for (i = 0; i < noteholder.childNodes.length; i++) {
    var entry = noteholder.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div' && entry.getAttribute("class") == "footnote")
      entriesToRemove.push(entry);
  }
  for (i = 0; i < entriesToRemove.length; i++) {
    noteholder.removeChild(entriesToRemove[i]);
  }

  // Rebuild footnote entries.
  var cont = document.getElementById("content");
  var spans = cont.getElementsByTagName("span");
  var refs = {};
  var n = 0;
  for (i=0; i<spans.length; i++) {
    if (spans[i].className == "footnote") {
      n++;
      var note = spans[i].getAttribute("data-note");
      if (!note) {
        // Use [\s\S] in place of . so multi-line matches work.
        // Because JavaScript has no s (dotall) regex flag.
        note = spans[i].innerHTML.match(/\s*\[([\s\S]*)]\s*/)[1];
        spans[i].innerHTML =
          "[<a id='_footnoteref_" + n + "' href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
        spans[i].setAttribute("data-note", note);
      }
      noteholder.innerHTML +=
        "<div class='footnote' id='_footnote_" + n + "'>" +
        "<a href='#_footnoteref_" + n + "' title='Return to text'>" +
        n + "</a>. " + note + "</div>";
      var id =spans[i].getAttribute("id");
      if (id != null) refs["#"+id] = n;
    }
  }
  if (n == 0)
    noteholder.parentNode.removeChild(noteholder);
  else {
    // Process footnoterefs.
    for (i=0; i<spans.length; i++) {
      if (spans[i].className == "footnoteref") {
        var href = spans[i].getElementsByTagName("a")[0].getAttribute("href");
        href = href.match(/#.*/)[0];  // Because IE return full URL.
        n = refs[href];
        spans[i].innerHTML =
          "[<a href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
      }
    }
  }
},

install: function(toclevels) {
  var timerId;

  function reinstall() {
    asciidoc.footnotes();
    if (toclevels) {
      asciidoc.toc(toclevels);
    }
  }

  function reinstallAndRemoveTimer() {
    clearInterval(timerId);
    reinstall();
  }

  timerId = setInterval(reinstall, 500);
  if (document.addEventListener)
    document.addEventListener("DOMContentLoaded", reinstallAndRemoveTimer, false);
  else
    window.onload = reinstallAndRemoveTimer;
}

}
asciidoc.install(2);
/*]]>*/
</script>
</head>
<body class="article">
<div id="header">
<h1>Endpoint ACL Management</h1>
<div id="toc">
  <div id="toctitle">Table of Contents</div>
  <noscript><p><b>JavaScript must be enabled in your browser to display the table of contents.</b></p></noscript>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph"><p>Shared endpoints and S3 endpoints have an associated Access Control List
(ACL), and the API provides methods for reading, creating, updating and
deleting access rules in the ACL. The ACL for each endpoint can have at
most 100 access rules.</p></div>
<div class="paragraph"><p>The owner of the endpoint always has full read and write access to the endpoint.
This is not included as a rule in the ACL, as it is always present and can&#8217;t
be removed.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">Access is still subject to the local filesystem or S3 bucket
permissions. Globus ACLs provide an additional layer on top of local
permissions to simplify collaboration among Globus users.</td>
</tr></table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_document_type">Document Type</h2>
<div class="sectionbody">
<div class="paragraph"><p>All ACL management resources use the <code>access</code> document type, which represents
a single access rule in the ACL.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">The id is now a string, to allow for more implementation options for
different types of access rules.</td>
</tr></table>
</div>
<div class="listingblock">
<div class="title">Access Document Example</div>
<div class="content">
<pre><code>{
    "DATA_TYPE": "access",
    "id": "12345",
    "principal_type": "user",
    "principal": "bob",
    "path": "/",
    "permissions": "r"
}</code></pre>
</div></div>
<div class="sect2">
<h3 id="_fields">Fields</h3>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="10%" />
<col width="10%" />
<col width="80%" />
<thead>
<tr>
<th align="left" valign="top"> Field Name     </th>
<th align="left" valign="top"> JSON Type </th>
<th align="left" valign="top"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">DATA_TYPE</p></td>
<td align="left" valign="top"><p class="table">string</p></td>
<td align="left" valign="top"><p class="table">Always has value "access" to indicate this document type.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">id</p></td>
<td align="left" valign="top"><p class="table">string</p></td>
<td align="left" valign="top"><p class="table">Globally unique id for this access rule.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">principal_type</p></td>
<td align="left" valign="top"><p class="table">string</p></td>
<td align="left" valign="top"><p class="table">Type of principal that the rule applies to.
                   One of "user", "group", "email",
                   or "all_authenticated_users".</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">principal</p></td>
<td align="left" valign="top"><p class="table">string</p></td>
<td align="left" valign="top"><p class="table">Name or id of the entity the rule applies to.
                   For type "user", this will be the Globus username.
                   For type "group", this will be the Globus group uuid.
                   For type "email", this will be a user&#8217;s email address.
                   For type "all_authenticated_users", this is always an
                   empty string.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">path</p></td>
<td align="left" valign="top"><p class="table">string</p></td>
<td align="left" valign="top"><p class="table">Absolute path to a directory the access rule applies to.
                   The path must begin and end with a slash, and can&#8217;t
                   contain un-normalized components "/../" or "/./".
                   GridFTP endpoints and shared endpoints hosted on GridFTP
                   endpoints also support home directory relative paths
                   beginning with "/~/". The path is limited to 2000
                   characters after encoding; in practice this means
                   2000 ascii characters and slightly less when unicode
                   is present and must be encoded.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">permissions</p></td>
<td align="left" valign="top"><p class="table">string</p></td>
<td align="left" valign="top"><p class="table">How much permission to grant the principal specified in
                   <code>principal_type</code> and <code>principal</code>.
                   Either read-only, specified as "r",
                   or read-write, specified as "rw".</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_access_rule_types">Access Rule Types</h3>
<div class="sect3">
<h4 id="_user_access_rule">User Access Rule</h4>
<div class="paragraph"><p>User access rules apply to a single Globus user, indicated by Globus username.
The Nexus API provides resources for searching for users by full name and other
attributes.</p></div>
</div>
<div class="sect3">
<h4 id="_group_access_rule">Group Access Rule</h4>
<div class="paragraph"><p>Group access rules apply to all Globus users in a Globus group. Groups can
be created and discovered with the Nexus API. In the access rules, they
are indicated by the group id, not by the group name which is non necessarily
unique.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">Group ids are not validated; it is the responsibility of the client to
ensure the id is correct via the Group API in Nexus. Also if the group is
deleted, the rule will no longer provide any access but will stay in the ACL
until deleted by the user or client application.</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="_all_authenticated_users_access_rule">All Authenticated Users Access Rule</h4>
<div class="paragraph"><p>These rules grant access to all Globus users. This can be used to share data
with everyone, but still allows monitoring of how many people are accessing
the data.</p></div>
</div>
<div class="sect3">
<h4 id="_email_access_rule">Email Access Rule</h4>
<div class="paragraph"><p>If you&#8217;re trying to share with someone and don&#8217;t know their Globus user name or
they don&#8217;t yet have an account, you may create an "email" access rule. When an
"email" rule is created, Globus sends an email invitation to the email address
specified in principal. Once claimed, the access rule will be replaced by one
with <code>principal_type</code> "user" and <code>principal</code> equal to the username of the
Globus user who claimed the access rule. Each email access rule can be claimed
by only one Globus user account.</p></div>
<div class="paragraph"><p>Before the email access rule is claimed, it can be manipulated like any other
access rule - the permission can be updated and it can be deleted. If deleted
before claimed, any attempt to claim it will fail with an error.</p></div>
<div class="paragraph"><p>See the "Claim" section below for details on how to claim an email access rule.
In most cases this will be handled by the user following a link in the
invitation email to the <a href="http://www.globus.org">Globus</a> website.</p></div>
<div class="paragraph"><p>If the recipient of an email access rule did not receive the email, it&#8217;s
recommended that the old rule be deleted and a new rule for the same email
and path be added to resend a new invitation. This will revoke the original
invitation which is presumed to have been lost. If the user eventually receives
both, they should attempt to claim the newer one.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">(NICE TO HAVE) enforce uniqueness on (endpoint, email,
path) for email access rules.</td>
</tr></table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_common_query_parameters">Common Query Parameters</h2>
<div class="sectionbody">
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="11%" />
<col width="88%" />
<thead>
<tr>
<th align="left" valign="top"> Name   </th>
<th align="left" valign="top"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">fields</p></td>
<td align="left" valign="top"><p class="table">Comma separated list of fields to include in the response. This can
           be used to save bandwidth on large list respones when not all
           fields are needed.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">format</p></td>
<td align="left" valign="top"><p class="table">"json" or "html". Note that the "html" format is subject to change
           and should not be relied upon for programs. It is used to render
           the self-hosted, auto-generated API documentation.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_common_errors">Common Errors</h2>
<div class="sectionbody">
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">Current codes are more messy. TODO: update this with the actual codes used
today, and possibly another section with what we want them to be long term.</td>
</tr></table>
</div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="10%" />
<col width="10%" />
<col width="80%" />
<thead>
<tr>
<th align="left" valign="top"> Code              </th>
<th align="left" valign="top"> HTTP Status  </th>
<th align="left" valign="top"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">EndpointNotFound</p></td>
<td align="left" valign="top"><p class="table">404</p></td>
<td align="left" valign="top"><p class="table">If &lt;endpoint_name&gt; not found</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">AccessRuleNotFound</p></td>
<td align="left" valign="top"><p class="table">404</p></td>
<td align="left" valign="top"><p class="table">If access rule specified by &lt;id&gt; is not found</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">InvalidPath</p></td>
<td align="left" valign="top"><p class="table">400</p></td>
<td align="left" valign="top"><p class="table">If the path specified in an access rule is not
                            valid or too long.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Conflict</p></td>
<td align="left" valign="top"><p class="table">409</p></td>
<td align="left" valign="top"><p class="table">If &lt;endpoint_name&gt; does not support ACLs.
                            See the <code>acl_available</code> field of <code>endpoint</code> to
                            determine if an endpoint supports ACLs.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">PermissionDenied</p></td>
<td align="left" valign="top"><p class="table">403</p></td>
<td align="left" valign="top"><p class="table">If you do not have permissions to view or modify
                            ACLs on &lt;endpoint_name&gt;.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_operations">Operations</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_read_all">Read All</h3>
<div class="paragraph"><p>Get the list of access rules in the ACL for a specified endpoint.</p></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="16%" />
<col width="83%" />
<tbody>
<tr>
<td align="left" valign="top"><p class="table header">URL</p></td>
<td align="left" valign="top"><div><div class="literalblock">
<div class="content">
<pre><code>/endpoint/&lt;endpoint_name&gt;/access_list</code></pre>
</div></div></div></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table header">Method</p></td>
<td align="left" valign="top"><div><div class="literalblock">
<div class="content">
<pre><code>GET</code></pre>
</div></div></div></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table header">Response Body</p></td>
<td align="left" valign="top"><div><div class="listingblock">
<div class="content">
<pre><code>{
    "length": 2,
    "endpoint": "alice#myshare",
    "DATA": [
        {
            "DATA_TYPE": "access",
            "principal_type": "user",
            "path": "/",
            "principal": "bob",
            "id": "12345",
            "permissions": "r"
        },
        {
            "DATA_TYPE": "access",
            "principal_type": "group",
            "path": "/project1",
            "principal": "a2e662ac-d4bc-4ab7-aceb-8a12d2205326",
            "id": "743565",
            "permissions": "rw"
        }
    ],
    "DATA_TYPE": "access_list"
}</code></pre>
</div></div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_read_one">Read One</h3>
<div class="paragraph"><p>Get a single access rule for a specified endpoint by id.</p></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="16%" />
<col width="83%" />
<tbody>
<tr>
<td align="left" valign="top"><p class="table header">URL</p></td>
<td align="left" valign="top"><div><div class="literalblock">
<div class="content">
<pre><code>/endpoint/&lt;endpoint_name&gt;/access/&lt;id&gt;</code></pre>
</div></div></div></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table header">Method</p></td>
<td align="left" valign="top"><div><div class="literalblock">
<div class="content">
<pre><code>GET</code></pre>
</div></div></div></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table header">Response Body</p></td>
<td align="left" valign="top"><div><div class="literalblock">
<div class="content">
<pre><code>Access document (see above).</code></pre>
</div></div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_create">Create</h3>
<div class="paragraph"><p>Create a new access rule. The response contains the id of the newly created
rule in the <code>access_id</code> field.</p></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="16%" />
<col width="83%" />
<tbody>
<tr>
<td align="left" valign="top"><p class="table header">URL</p></td>
<td align="left" valign="top"><div><div class="literalblock">
<div class="content">
<pre><code>/endpoint/&lt;endpoint_name&gt;/access</code></pre>
</div></div></div></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table header">Method</p></td>
<td align="left" valign="top"><div><div class="literalblock">
<div class="content">
<pre><code>POST</code></pre>
</div></div></div></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table header">Request Body</p></td>
<td align="left" valign="top"><div><div class="literalblock">
<div class="content">
<pre><code>Access document to add to the endpoint's ACL (see above).</code></pre>
</div></div></div></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table header">Response Body</p></td>
<td align="left" valign="top"><div><div class="listingblock">
<div class="content">
<pre><code>{
    "code": "Created",
    "resource": "/endpoint/epname/access",
    "DATA_TYPE": "access_create_result",
    "request_id": "abc123",
    "access_id": 12345,
    "message": "Access rule created successfully."
}</code></pre>
</div></div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_errors">Errors</h4>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="10%" />
<col width="10%" />
<col width="80%" />
<thead>
<tr>
<th align="left" valign="top"> Code     </th>
<th align="left" valign="top"> HTTP Status </th>
<th align="left" valign="top"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">Conflict</p></td>
<td align="left" valign="top"><p class="table">409</p></td>
<td align="left" valign="top"><p class="table">If the endpoint ACL already has the maximum of 100 access
                     rules.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Conflict</p></td>
<td align="left" valign="top"><p class="table">409</p></td>
<td align="left" valign="top"><p class="table">(NICE TO HAVE) If an <code>email</code> access rule with the same
                     (<code>principal</code>, <code>path</code>) already exists in the endpoint&#8217;s
                     ACL.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_update">Update</h3>
<div class="paragraph"><p>Update the permissions on an existing access rule. Other fields (besides
<code>DATA_TYPE</code> which must always be present) may be omitted. If the id is present
it must match the id in the URL.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">This may support updating <code>path</code> or other fields in the future, so
clients should make sure to use the correct value for the other fields
or omit them entirely.</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">If an <code>email</code> access rule has been claimed since the client fetched
it and become a <code>user</code> access rule, this will update the <code>user</code> access rule,
which has the same id. Because the other fields are ignored, no error will
be raised if they are included in the request, even though they no longer
match.</td>
</tr></table>
</div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="16%" />
<col width="83%" />
<tbody>
<tr>
<td align="left" valign="top"><p class="table header">URL</p></td>
<td align="left" valign="top"><div><div class="literalblock">
<div class="content">
<pre><code>/endpoint/&lt;endpoint_name&gt;/access/&lt;id&gt;</code></pre>
</div></div></div></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table header">Method</p></td>
<td align="left" valign="top"><div><div class="literalblock">
<div class="content">
<pre><code>PUT</code></pre>
</div></div></div></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table header">Request Body</p></td>
<td align="left" valign="top"><div><div class="literalblock">
<div class="content">
<pre><code>Access document</code></pre>
</div></div></div></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table header">Response Body</p></td>
<td align="left" valign="top"><div><div class="listingblock">
<div class="content">
<pre><code>{
    "message": "Access rule '123' permissions updated successfully",
    "code": "Updated",
    "resource": "/endpoint/user#ep1/access/123",
    "DATA_TYPE": "result",
    "request_id": "ABCdef789"
}</code></pre>
</div></div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_delete">Delete</h3>
<div class="paragraph"><p>Delete a single access rule, specified by id.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">If an <code>email</code> access rule has been claimed since the client fetched
it and become a <code>user</code> access rule, this will delete the <code>user</code> access rule,
which has the same id.</td>
</tr></table>
</div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="16%" />
<col width="83%" />
<tbody>
<tr>
<td align="left" valign="top"><p class="table header">URL</p></td>
<td align="left" valign="top"><div><div class="literalblock">
<div class="content">
<pre><code>/endpoint/&lt;endpoint_name&gt;/access/&lt;id&gt;</code></pre>
</div></div></div></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table header">Method</p></td>
<td align="left" valign="top"><div><div class="literalblock">
<div class="content">
<pre><code>DELETE</code></pre>
</div></div></div></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table header">Request Body</p></td>
<td align="left" valign="top"><div><div class="literalblock">
<div class="content">
<pre><code>Empty</code></pre>
</div></div></div></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table header">Response Body</p></td>
<td align="left" valign="top"><div><div class="listingblock">
<div class="content">
<pre><code>{
    "message": "Access rule '123' deleted successfully",
    "code": "Deleted",
    "resource": "/endpoint/user#ep1/access/123",
    "DATA_TYPE": "result",
    "request_id": "ABCdef789"
}</code></pre>
</div></div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_claim">Claim</h3>
<div class="paragraph"><p>Claim an email access rule as the authenticated user. The email access rule
will be converted to a user access rule. Returns the user access rule, with an
additional <code>endpoint_name</code> field which can be used to redirect the user to
that endpoint with the access rule path displayed in a file browser.</p></div>
<div class="paragraph"><p>Once claimed, the user who claimed the access rule can continue to call this
method and get the same success response. This can be used to generate
the redirect URL if the user loads the link from the email again
after claiming the access rule.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">The access rule id does not change when claiming, but the
<code>principal_type</code> and <code>principal</code> will change to "user" and
"&lt;username of claimant&gt;".</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">The owner of the endpoint (creator of the email access rule)
can&#8217;t claim it for themselves.</td>
</tr></table>
</div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="16%" />
<col width="83%" />
<tbody>
<tr>
<td align="left" valign="top"><p class="table header">URL</p></td>
<td align="left" valign="top"><div><div class="literalblock">
<div class="content">
<pre><code>/claim_access/&lt;token&gt;</code></pre>
</div></div></div></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table header">Method</p></td>
<td align="left" valign="top"><div><div class="literalblock">
<div class="content">
<pre><code>POST</code></pre>
</div></div></div></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table header">Response Body</p></td>
<td align="left" valign="top"><div><div class="listingblock">
<div class="content">
<pre><code>{
    "DATA_TYPE": "claim_response",
    "endpoint_name": "alice#myshare",
    "id": "12345",
    "principal_type": "user",
    "principal": "bob",
    "path": "/",
    "permissions": "r"
}</code></pre>
</div></div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_errors_2">Errors</h4>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="10%" />
<col width="10%" />
<col width="80%" />
<thead>
<tr>
<th align="left" valign="top"> Code             </th>
<th align="left" valign="top"> HTTP Status </th>
<th align="left" valign="top"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">Conflict</p></td>
<td align="left" valign="top"><p class="table">409</p></td>
<td align="left" valign="top"><p class="table">If &lt;token&gt; has already been claimed by a different user.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Conflict</p></td>
<td align="left" valign="top"><p class="table">409</p></td>
<td align="left" valign="top"><p class="table">If the authenticated user is the endpoint owner.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">EndpointNotFound</p></td>
<td align="left" valign="top"><p class="table">404</p></td>
<td align="left" valign="top"><p class="table">If the endpoint containing the access rule has been deleted.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">AccessRuleNotFound</p></td>
<td align="left" valign="top"><p class="table">404</p></td>
<td align="left" valign="top"><p class="table">If the owner of the endpoint has deleted the access rule
  (basically revoking the email invitation).</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">BadRequest</p></td>
<td align="left" valign="top"><p class="table">400</p></td>
<td align="left" valign="top"><p class="table">If &lt;token&gt; is invalid, e.g. if the user&#8217;s email client
  corrupts it or if the end got chopped off. This won&#8217;t
  catch all possible corruptions - AccessRuleNotFound
  may be returned in some cases.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_change_history">Change History</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_may_30">May 30</h3>
<div class="ulist"><ul>
<li>
<p>
List illegal path components in <code>path</code> fields description
</p>
</li>
<li>
<p>
Add PermissionDenied common error
</p>
</li>
<li>
<p>
Make "all_authenticated_users" principal empty string instead of null
</p>
</li>
<li>
<p>
Add note about not checking nexus group ids and deleted groups
</p>
</li>
<li>
<p>
Remove claim error for token referencing non email acl
</p>
</li>
<li>
<p>
Improve email acl description
</p>
</li>
<li>
<p>
Misc wording improvements/typo fixes
</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="_may_29">May 29</h3>
<div class="ulist"><ul>
<li>
<p>
Mark uniqueness for email access rules as a "nice to have".
</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="_may_27">May 27</h3>
<div class="ulist"><ul>
<li>
<p>
Add Create
</p>
</li>
<li>
<p>
Require uniqueness for email access rules on (ep, email, path).
</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="_may_16">May 16</h3>
<div class="ulist"><ul>
<li>
<p>
Make claim idempotent - if the user who claims the access rule calls again,
  return the same success result.
</p>
</li>
<li>
<p>
Specify that the access rule id does not change when claiming. This makes
  the delete and update behavior simpler to understand and document.
</p>
</li>
<li>
<p>
Change claim result to access rule with <code>endpoint_name</code> added.
</p>
</li>
<li>
<p>
Document behavior of operations delete and update email access rules in
  case of concurrent claim.
</p>
</li>
<li>
<p>
Re-document NotFound errors for claim, which are not obvious based on the
  common errors because of the difference in URL structure.
</p>
</li>
<li>
<p>
Use BadRequest for invalid tokens
</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="_may_14">May 14</h3>
<div class="ulist"><ul>
<li>
<p>
Change claim to accept a token as input, and not require the endpoint name
</p>
</li>
<li>
<p>
Remove filtering on Read All, it&#8217;s overly complex and nobody is using it
</p>
</li>
<li>
<p>
Added note about 2000 character path limit and how encoding affects this
</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="_may_13">May 13</h3>
<div class="ulist"><ul>
<li>
<p>
Update Claim docs
</p>
</li>
<li>
<p>
Add detailed description of each access rule type (especially email).
</p>
</li>
<li>
<p>
Remove <em>status</em> field
</p>
</li>
<li>
<p>
Add Common Errors section
</p>
</li>
<li>
<p>
Update Read All with filtering docs
</p>
</li>
</ul></div>
</div>
</div>
</div>
</div>
<div id="footnotes"><hr /></div>
<div id="footer">
<div id="footer-text">
Last updated 2014-06-03 09:35:36 CDT
</div>
</div>
</body>
</html>
;T;@$I"'/docs/transfer-api/acl_management/;T{;{	;I"¸º<!DOCTYPE HTML>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>A Brand New nanoc Site - </title>
    <link href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/styles/styles.css">

    <meta name="viewport" content="width=device-width">
    <!-- you don't need to keep this, but it's cool for stats! -->
    <meta name="generator" content="nanoc 3.6.11">
  </head>
  <body>
    <header id="masthead">
  <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
      <!-- Brand and toggle get grouped for better mobile display -->
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="/">
          <img src="//www.globus.org/sites/all/themes/globus_bootstrap_theme/logo.png" alt="Home">
          globus developer
        </a>
      </div>

      <!-- Collect the nav links, forms, and other content for toggling -->
      <div class="collapse navbar-collapse">
        <form class="navbar-form navbar-right" role="search">
          <div class="form-group">
            <input type="text" class="form-control" placeholder="Search">
          </div>
          <!-- <button type="submit" class="btn btn-default">Submit</button> -->
        </form>

        <ul class="nav navbar-nav navbar-right">
          <li>
            <a href="/about">About</a>
          </li>
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Docs <b class="caret"></b></a>
            <ul class="dropdown-menu">
              <li><a href="/docs/transfer-api">Transfer API</a></li>
            </ul>
          </li>
        </ul>
      </div><!-- /.navbar-collapse -->
    </div><!-- /.container-fluid -->
  </nav>
</header>

    <div class="content container">
      

      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.6.9" />
<title>Endpoint ACL Management</title>
<style type="text/css">
/* Shared CSS for AsciiDoc xhtml11 and html5 backends */

/* Default font. */
body {
  font-family: Georgia,serif;
}

/* Title font. */
h1, h2, h3, h4, h5, h6,
div.title, caption.title,
thead, p.table.header,
#toctitle,
#author, #revnumber, #revdate, #revremark,
#footer {
  font-family: Arial,Helvetica,sans-serif;
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
  color: navy;
}

strong {
  font-weight: bold;
  color: #083194;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}
h2 {
  padding-top: 0.5em;
}
h3 {
  float: left;
}
h3 + * {
  clear: left;
}
h5 {
  font-size: 1.0em;
}

div.sectionbody {
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

ul, ol, li > p {
  margin-top: 0;
}
ul > li     { color: #aaa; }
ul > li > * { color: black; }

.monospaced, code, pre {
  font-family: "Courier New", Courier, monospace;
  font-size: inherit;
  color: navy;
  padding: 0;
  margin: 0;
}
pre {
  white-space: pre-wrap;
}

#author {
  color: #527bbd;
  font-weight: bold;
  font-size: 1.1em;
}
#email {
}
#revnumber, #revdate, #revremark {
}

#footer {
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

#preamble {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.0em;
  margin-bottom: 2.0em;
  margin-right: 10%;
  color: #606060;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  color: #527bbd;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid #dddddd;
  border-left: 4px solid #f0f0f0;
  padding: 0.5em;
}

div.listingblock > div.content {
  border: 1px solid #dddddd;
  border-left: 5px solid #f0f0f0;
  background: #f8f8f8;
  padding: 0.5em;
}

div.quoteblock, div.verseblock {
  padding-left: 1.0em;
  margin-left: 1.0em;
  margin-right: 10%;
  border-left: 5px solid #f0f0f0;
  color: #888;
}

div.quoteblock > div.attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock > pre.content {
  font-family: inherit;
  font-size: inherit;
}
div.verseblock > div.attribution {
  padding-top: 0.75em;
  text-align: left;
}
/* DEPRECATED: Pre version 8.2.7 verse style literal block. */
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 3px solid #dddddd;
}

div.exampleblock > div.content {
  border-left: 3px solid #dddddd;
  padding-left: 0.5em;
}

div.imageblock div.content { padding-left: 0; }
span.image img { border-style: none; vertical-align: text-bottom; }
a.image:visited { color: white; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: normal;
  color: navy;
}
dd > *:first-child {
  margin-top: 0.1em;
}

ul, ol {
    list-style-position: outside;
}
ol.arabic {
  list-style-type: decimal;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}

div.compact ul, div.compact ol,
div.compact p, div.compact p,
div.compact div, div.compact div {
  margin-top: 0.1em;
  margin-bottom: 0.1em;
}

tfoot {
  font-weight: bold;
}
td > div.verse {
  white-space: pre;
}

div.hdlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hdlist tr {
  padding-bottom: 15px;
}
dt.hdlist1.strong, td.hdlist1.strong {
  font-weight: bold;
}
td.hdlist1 {
  vertical-align: top;
  font-style: normal;
  padding-right: 0.8em;
  color: navy;
}
td.hdlist2 {
  vertical-align: top;
}
div.hdlist.compact tr {
  margin: 0;
  padding-bottom: 0;
}

.comment {
  background: yellow;
}

.footnote, .footnoteref {
  font-size: 0.8em;
}

span.footnote, span.footnoteref {
  vertical-align: super;
}

#footnotes {
  margin: 20px 0 20px 0;
  padding: 7px 0 0 0;
}

#footnotes div.footnote {
  margin: 0 0 5px 0;
}

#footnotes hr {
  border: none;
  border-top: 1px solid silver;
  height: 1px;
  text-align: left;
  margin-left: 0;
  width: 20%;
  min-width: 100px;
}

div.colist td {
  padding-right: 0.5em;
  padding-bottom: 0.3em;
  vertical-align: top;
}
div.colist td img {
  margin-top: 0.3em;
}

@media print {
  #footer-badges { display: none; }
}

#toc {
  margin-bottom: 2.5em;
}

#toctitle {
  color: #527bbd;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel0, div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}

span.aqua { color: aqua; }
span.black { color: black; }
span.blue { color: blue; }
span.fuchsia { color: fuchsia; }
span.gray { color: gray; }
span.green { color: green; }
span.lime { color: lime; }
span.maroon { color: maroon; }
span.navy { color: navy; }
span.olive { color: olive; }
span.purple { color: purple; }
span.red { color: red; }
span.silver { color: silver; }
span.teal { color: teal; }
span.white { color: white; }
span.yellow { color: yellow; }

span.aqua-background { background: aqua; }
span.black-background { background: black; }
span.blue-background { background: blue; }
span.fuchsia-background { background: fuchsia; }
span.gray-background { background: gray; }
span.green-background { background: green; }
span.lime-background { background: lime; }
span.maroon-background { background: maroon; }
span.navy-background { background: navy; }
span.olive-background { background: olive; }
span.purple-background { background: purple; }
span.red-background { background: red; }
span.silver-background { background: silver; }
span.teal-background { background: teal; }
span.white-background { background: white; }
span.yellow-background { background: yellow; }

span.big { font-size: 2em; }
span.small { font-size: 0.6em; }

span.underline { text-decoration: underline; }
span.overline { text-decoration: overline; }
span.line-through { text-decoration: line-through; }

div.unbreakable { page-break-inside: avoid; }


/*
 * xhtml11 specific
 *
 * */

div.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.tableblock > table {
  border: 3px solid #527bbd;
}
thead, p.table.header {
  font-weight: bold;
  color: #527bbd;
}
p.table {
  margin-top: 0;
}
/* Because the table frame attribute is overriden by CSS in most browsers. */
div.tableblock > table[frame="void"] {
  border-style: none;
}
div.tableblock > table[frame="hsides"] {
  border-left-style: none;
  border-right-style: none;
}
div.tableblock > table[frame="vsides"] {
  border-top-style: none;
  border-bottom-style: none;
}


/*
 * html5 specific
 *
 * */

table.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
thead, p.tableblock.header {
  font-weight: bold;
  color: #527bbd;
}
p.tableblock {
  margin-top: 0;
}
table.tableblock {
  border-width: 3px;
  border-spacing: 0px;
  border-style: solid;
  border-color: #527bbd;
  border-collapse: collapse;
}
th.tableblock, td.tableblock {
  border-width: 1px;
  padding: 4px;
  border-style: solid;
  border-color: #527bbd;
}

table.tableblock.frame-topbot {
  border-left-style: hidden;
  border-right-style: hidden;
}
table.tableblock.frame-sides {
  border-top-style: hidden;
  border-bottom-style: hidden;
}
table.tableblock.frame-none {
  border-style: hidden;
}

th.tableblock.halign-left, td.tableblock.halign-left {
  text-align: left;
}
th.tableblock.halign-center, td.tableblock.halign-center {
  text-align: center;
}
th.tableblock.halign-right, td.tableblock.halign-right {
  text-align: right;
}

th.tableblock.valign-top, td.tableblock.valign-top {
  vertical-align: top;
}
th.tableblock.valign-middle, td.tableblock.valign-middle {
  vertical-align: middle;
}
th.tableblock.valign-bottom, td.tableblock.valign-bottom {
  vertical-align: bottom;
}


/*
 * manpage specific
 *
 * */

body.manpage h1 {
  padding-top: 0.5em;
  padding-bottom: 0.5em;
  border-top: 2px solid silver;
  border-bottom: 2px solid silver;
}
body.manpage h2 {
  border-style: none;
}
body.manpage div.sectionbody {
  margin-left: 3em;
}

@media print {
  body.manpage div#toc { display: none; }
}


@media screen {
  body {
    max-width: 50em; /* approximately 80 characters wide */
    margin-left: 16em;
  }

  #toc {
    position: fixed;
    top: 0;
    left: 0;
    bottom: 0;
    width: 13em;
    padding: 0.5em;
    padding-bottom: 1.5em;
    margin: 0;
    overflow: auto;
    border-right: 3px solid #f8f8f8;
    background-color: white;
  }

  #toc .toclevel1 {
    margin-top: 0.5em;
  }

  #toc .toclevel2 {
    margin-top: 0.25em;
    display: list-item;
    color: #aaaaaa;
  }

  #toctitle {
    margin-top: 0.5em;
  }
}
</style>
<script type="text/javascript">
/*<![CDATA[*/
var asciidoc = {  // Namespace.

/////////////////////////////////////////////////////////////////////
// Table Of Contents generator
/////////////////////////////////////////////////////////////////////

/* Author: Mihai Bazon, September 2002
 * http://students.infoiasi.ro/~mishoo
 *
 * Table Of Content generator
 * Version: 0.4
 *
 * Feel free to use this script under the terms of the GNU General Public
 * License, as long as you do not remove or alter this notice.
 */

 /* modified by Troy D. Hanson, September 2006. License: GPL */
 /* modified by Stuart Rackham, 2006, 2009. License: GPL */

// toclevels = 1..4.
toc: function (toclevels) {

  function getText(el) {
    var text = "";
    for (var i = el.firstChild; i != null; i = i.nextSibling) {
      if (i.nodeType == 3 /* Node.TEXT_NODE */) // IE doesn't speak constants.
        text += i.data;
      else if (i.firstChild != null)
        text += getText(i);
    }
    return text;
  }

  function TocEntry(el, text, toclevel) {
    this.element = el;
    this.text = text;
    this.toclevel = toclevel;
  }

  function tocEntries(el, toclevels) {
    var result = new Array;
    var re = new RegExp('[hH]([1-'+(toclevels+1)+'])');
    // Function that scans the DOM tree for header elements (the DOM2
    // nodeIterator API would be a better technique but not supported by all
    // browsers).
    var iterate = function (el) {
      for (var i = el.firstChild; i != null; i = i.nextSibling) {
        if (i.nodeType == 1 /* Node.ELEMENT_NODE */) {
          var mo = re.exec(i.tagName);
          if (mo && (i.getAttribute("class") || i.getAttribute("className")) != "float") {
            result[result.length] = new TocEntry(i, getText(i), mo[1]-1);
          }
          iterate(i);
        }
      }
    }
    iterate(el);
    return result;
  }

  var toc = document.getElementById("toc");
  if (!toc) {
    return;
  }

  // Delete existing TOC entries in case we're reloading the TOC.
  var tocEntriesToRemove = [];
  var i;
  for (i = 0; i < toc.childNodes.length; i++) {
    var entry = toc.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div'
     && entry.getAttribute("class")
     && entry.getAttribute("class").match(/^toclevel/))
      tocEntriesToRemove.push(entry);
  }
  for (i = 0; i < tocEntriesToRemove.length; i++) {
    toc.removeChild(tocEntriesToRemove[i]);
  }

  // Rebuild TOC entries.
  var entries = tocEntries(document.getElementById("content"), toclevels);
  for (var i = 0; i < entries.length; ++i) {
    var entry = entries[i];
    if (entry.element.id == "")
      entry.element.id = "_toc_" + i;
    var a = document.createElement("a");
    a.href = "#" + entry.element.id;
    a.appendChild(document.createTextNode(entry.text));
    var div = document.createElement("div");
    div.appendChild(a);
    div.className = "toclevel" + entry.toclevel;
    toc.appendChild(div);
  }
  if (entries.length == 0)
    toc.parentNode.removeChild(toc);
},


/////////////////////////////////////////////////////////////////////
// Footnotes generator
/////////////////////////////////////////////////////////////////////

/* Based on footnote generation code from:
 * http://www.brandspankingnew.net/archive/2005/07/format_footnote.html
 */

footnotes: function () {
  // Delete existing footnote entries in case we're reloading the footnodes.
  var i;
  var noteholder = document.getElementById("footnotes");
  if (!noteholder) {
    return;
  }
  var entriesToRemove = [];
  for (i = 0; i < noteholder.childNodes.length; i++) {
    var entry = noteholder.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div' && entry.getAttribute("class") == "footnote")
      entriesToRemove.push(entry);
  }
  for (i = 0; i < entriesToRemove.length; i++) {
    noteholder.removeChild(entriesToRemove[i]);
  }

  // Rebuild footnote entries.
  var cont = document.getElementById("content");
  var spans = cont.getElementsByTagName("span");
  var refs = {};
  var n = 0;
  for (i=0; i<spans.length; i++) {
    if (spans[i].className == "footnote") {
      n++;
      var note = spans[i].getAttribute("data-note");
      if (!note) {
        // Use [\s\S] in place of . so multi-line matches work.
        // Because JavaScript has no s (dotall) regex flag.
        note = spans[i].innerHTML.match(/\s*\[([\s\S]*)]\s*/)[1];
        spans[i].innerHTML =
          "[<a id='_footnoteref_" + n + "' href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
        spans[i].setAttribute("data-note", note);
      }
      noteholder.innerHTML +=
        "<div class='footnote' id='_footnote_" + n + "'>" +
        "<a href='#_footnoteref_" + n + "' title='Return to text'>" +
        n + "</a>. " + note + "</div>";
      var id =spans[i].getAttribute("id");
      if (id != null) refs["#"+id] = n;
    }
  }
  if (n == 0)
    noteholder.parentNode.removeChild(noteholder);
  else {
    // Process footnoterefs.
    for (i=0; i<spans.length; i++) {
      if (spans[i].className == "footnoteref") {
        var href = spans[i].getElementsByTagName("a")[0].getAttribute("href");
        href = href.match(/#.*/)[0];  // Because IE return full URL.
        n = refs[href];
        spans[i].innerHTML =
          "[<a href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
      }
    }
  }
},

install: function(toclevels) {
  var timerId;

  function reinstall() {
    asciidoc.footnotes();
    if (toclevels) {
      asciidoc.toc(toclevels);
    }
  }

  function reinstallAndRemoveTimer() {
    clearInterval(timerId);
    reinstall();
  }

  timerId = setInterval(reinstall, 500);
  if (document.addEventListener)
    document.addEventListener("DOMContentLoaded", reinstallAndRemoveTimer, false);
  else
    window.onload = reinstallAndRemoveTimer;
}

}
asciidoc.install(2);
/*]]>*/
</script>
</head>
<body class="article">
<div id="header">
<h1>Endpoint ACL Management</h1>
<div id="toc">
  <div id="toctitle">Table of Contents</div>
  <noscript><p><b>JavaScript must be enabled in your browser to display the table of contents.</b></p></noscript>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph"><p>Shared endpoints and S3 endpoints have an associated Access Control List
(ACL), and the API provides methods for reading, creating, updating and
deleting access rules in the ACL. The ACL for each endpoint can have at
most 100 access rules.</p></div>
<div class="paragraph"><p>The owner of the endpoint always has full read and write access to the endpoint.
This is not included as a rule in the ACL, as it is always present and can&#8217;t
be removed.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">Access is still subject to the local filesystem or S3 bucket
permissions. Globus ACLs provide an additional layer on top of local
permissions to simplify collaboration among Globus users.</td>
</tr></table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_document_type">Document Type</h2>
<div class="sectionbody">
<div class="paragraph"><p>All ACL management resources use the <code>access</code> document type, which represents
a single access rule in the ACL.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">The id is now a string, to allow for more implementation options for
different types of access rules.</td>
</tr></table>
</div>
<div class="listingblock">
<div class="title">Access Document Example</div>
<div class="content">
<pre><code>{
    "DATA_TYPE": "access",
    "id": "12345",
    "principal_type": "user",
    "principal": "bob",
    "path": "/",
    "permissions": "r"
}</code></pre>
</div></div>
<div class="sect2">
<h3 id="_fields">Fields</h3>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="10%" />
<col width="10%" />
<col width="80%" />
<thead>
<tr>
<th align="left" valign="top"> Field Name     </th>
<th align="left" valign="top"> JSON Type </th>
<th align="left" valign="top"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">DATA_TYPE</p></td>
<td align="left" valign="top"><p class="table">string</p></td>
<td align="left" valign="top"><p class="table">Always has value "access" to indicate this document type.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">id</p></td>
<td align="left" valign="top"><p class="table">string</p></td>
<td align="left" valign="top"><p class="table">Globally unique id for this access rule.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">principal_type</p></td>
<td align="left" valign="top"><p class="table">string</p></td>
<td align="left" valign="top"><p class="table">Type of principal that the rule applies to.
                   One of "user", "group", "email",
                   or "all_authenticated_users".</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">principal</p></td>
<td align="left" valign="top"><p class="table">string</p></td>
<td align="left" valign="top"><p class="table">Name or id of the entity the rule applies to.
                   For type "user", this will be the Globus username.
                   For type "group", this will be the Globus group uuid.
                   For type "email", this will be a user&#8217;s email address.
                   For type "all_authenticated_users", this is always an
                   empty string.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">path</p></td>
<td align="left" valign="top"><p class="table">string</p></td>
<td align="left" valign="top"><p class="table">Absolute path to a directory the access rule applies to.
                   The path must begin and end with a slash, and can&#8217;t
                   contain un-normalized components "/../" or "/./".
                   GridFTP endpoints and shared endpoints hosted on GridFTP
                   endpoints also support home directory relative paths
                   beginning with "/~/". The path is limited to 2000
                   characters after encoding; in practice this means
                   2000 ascii characters and slightly less when unicode
                   is present and must be encoded.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">permissions</p></td>
<td align="left" valign="top"><p class="table">string</p></td>
<td align="left" valign="top"><p class="table">How much permission to grant the principal specified in
                   <code>principal_type</code> and <code>principal</code>.
                   Either read-only, specified as "r",
                   or read-write, specified as "rw".</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_access_rule_types">Access Rule Types</h3>
<div class="sect3">
<h4 id="_user_access_rule">User Access Rule</h4>
<div class="paragraph"><p>User access rules apply to a single Globus user, indicated by Globus username.
The Nexus API provides resources for searching for users by full name and other
attributes.</p></div>
</div>
<div class="sect3">
<h4 id="_group_access_rule">Group Access Rule</h4>
<div class="paragraph"><p>Group access rules apply to all Globus users in a Globus group. Groups can
be created and discovered with the Nexus API. In the access rules, they
are indicated by the group id, not by the group name which is non necessarily
unique.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">Group ids are not validated; it is the responsibility of the client to
ensure the id is correct via the Group API in Nexus. Also if the group is
deleted, the rule will no longer provide any access but will stay in the ACL
until deleted by the user or client application.</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="_all_authenticated_users_access_rule">All Authenticated Users Access Rule</h4>
<div class="paragraph"><p>These rules grant access to all Globus users. This can be used to share data
with everyone, but still allows monitoring of how many people are accessing
the data.</p></div>
</div>
<div class="sect3">
<h4 id="_email_access_rule">Email Access Rule</h4>
<div class="paragraph"><p>If you&#8217;re trying to share with someone and don&#8217;t know their Globus user name or
they don&#8217;t yet have an account, you may create an "email" access rule. When an
"email" rule is created, Globus sends an email invitation to the email address
specified in principal. Once claimed, the access rule will be replaced by one
with <code>principal_type</code> "user" and <code>principal</code> equal to the username of the
Globus user who claimed the access rule. Each email access rule can be claimed
by only one Globus user account.</p></div>
<div class="paragraph"><p>Before the email access rule is claimed, it can be manipulated like any other
access rule - the permission can be updated and it can be deleted. If deleted
before claimed, any attempt to claim it will fail with an error.</p></div>
<div class="paragraph"><p>See the "Claim" section below for details on how to claim an email access rule.
In most cases this will be handled by the user following a link in the
invitation email to the <a href="http://www.globus.org">Globus</a> website.</p></div>
<div class="paragraph"><p>If the recipient of an email access rule did not receive the email, it&#8217;s
recommended that the old rule be deleted and a new rule for the same email
and path be added to resend a new invitation. This will revoke the original
invitation which is presumed to have been lost. If the user eventually receives
both, they should attempt to claim the newer one.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">(NICE TO HAVE) enforce uniqueness on (endpoint, email,
path) for email access rules.</td>
</tr></table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_common_query_parameters">Common Query Parameters</h2>
<div class="sectionbody">
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="11%" />
<col width="88%" />
<thead>
<tr>
<th align="left" valign="top"> Name   </th>
<th align="left" valign="top"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">fields</p></td>
<td align="left" valign="top"><p class="table">Comma separated list of fields to include in the response. This can
           be used to save bandwidth on large list respones when not all
           fields are needed.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">format</p></td>
<td align="left" valign="top"><p class="table">"json" or "html". Note that the "html" format is subject to change
           and should not be relied upon for programs. It is used to render
           the self-hosted, auto-generated API documentation.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_common_errors">Common Errors</h2>
<div class="sectionbody">
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">Current codes are more messy. TODO: update this with the actual codes used
today, and possibly another section with what we want them to be long term.</td>
</tr></table>
</div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="10%" />
<col width="10%" />
<col width="80%" />
<thead>
<tr>
<th align="left" valign="top"> Code              </th>
<th align="left" valign="top"> HTTP Status  </th>
<th align="left" valign="top"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">EndpointNotFound</p></td>
<td align="left" valign="top"><p class="table">404</p></td>
<td align="left" valign="top"><p class="table">If &lt;endpoint_name&gt; not found</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">AccessRuleNotFound</p></td>
<td align="left" valign="top"><p class="table">404</p></td>
<td align="left" valign="top"><p class="table">If access rule specified by &lt;id&gt; is not found</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">InvalidPath</p></td>
<td align="left" valign="top"><p class="table">400</p></td>
<td align="left" valign="top"><p class="table">If the path specified in an access rule is not
                            valid or too long.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Conflict</p></td>
<td align="left" valign="top"><p class="table">409</p></td>
<td align="left" valign="top"><p class="table">If &lt;endpoint_name&gt; does not support ACLs.
                            See the <code>acl_available</code> field of <code>endpoint</code> to
                            determine if an endpoint supports ACLs.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">PermissionDenied</p></td>
<td align="left" valign="top"><p class="table">403</p></td>
<td align="left" valign="top"><p class="table">If you do not have permissions to view or modify
                            ACLs on &lt;endpoint_name&gt;.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_operations">Operations</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_read_all">Read All</h3>
<div class="paragraph"><p>Get the list of access rules in the ACL for a specified endpoint.</p></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="16%" />
<col width="83%" />
<tbody>
<tr>
<td align="left" valign="top"><p class="table header">URL</p></td>
<td align="left" valign="top"><div><div class="literalblock">
<div class="content">
<pre><code>/endpoint/&lt;endpoint_name&gt;/access_list</code></pre>
</div></div></div></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table header">Method</p></td>
<td align="left" valign="top"><div><div class="literalblock">
<div class="content">
<pre><code>GET</code></pre>
</div></div></div></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table header">Response Body</p></td>
<td align="left" valign="top"><div><div class="listingblock">
<div class="content">
<pre><code>{
    "length": 2,
    "endpoint": "alice#myshare",
    "DATA": [
        {
            "DATA_TYPE": "access",
            "principal_type": "user",
            "path": "/",
            "principal": "bob",
            "id": "12345",
            "permissions": "r"
        },
        {
            "DATA_TYPE": "access",
            "principal_type": "group",
            "path": "/project1",
            "principal": "a2e662ac-d4bc-4ab7-aceb-8a12d2205326",
            "id": "743565",
            "permissions": "rw"
        }
    ],
    "DATA_TYPE": "access_list"
}</code></pre>
</div></div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_read_one">Read One</h3>
<div class="paragraph"><p>Get a single access rule for a specified endpoint by id.</p></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="16%" />
<col width="83%" />
<tbody>
<tr>
<td align="left" valign="top"><p class="table header">URL</p></td>
<td align="left" valign="top"><div><div class="literalblock">
<div class="content">
<pre><code>/endpoint/&lt;endpoint_name&gt;/access/&lt;id&gt;</code></pre>
</div></div></div></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table header">Method</p></td>
<td align="left" valign="top"><div><div class="literalblock">
<div class="content">
<pre><code>GET</code></pre>
</div></div></div></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table header">Response Body</p></td>
<td align="left" valign="top"><div><div class="literalblock">
<div class="content">
<pre><code>Access document (see above).</code></pre>
</div></div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_create">Create</h3>
<div class="paragraph"><p>Create a new access rule. The response contains the id of the newly created
rule in the <code>access_id</code> field.</p></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="16%" />
<col width="83%" />
<tbody>
<tr>
<td align="left" valign="top"><p class="table header">URL</p></td>
<td align="left" valign="top"><div><div class="literalblock">
<div class="content">
<pre><code>/endpoint/&lt;endpoint_name&gt;/access</code></pre>
</div></div></div></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table header">Method</p></td>
<td align="left" valign="top"><div><div class="literalblock">
<div class="content">
<pre><code>POST</code></pre>
</div></div></div></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table header">Request Body</p></td>
<td align="left" valign="top"><div><div class="literalblock">
<div class="content">
<pre><code>Access document to add to the endpoint's ACL (see above).</code></pre>
</div></div></div></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table header">Response Body</p></td>
<td align="left" valign="top"><div><div class="listingblock">
<div class="content">
<pre><code>{
    "code": "Created",
    "resource": "/endpoint/epname/access",
    "DATA_TYPE": "access_create_result",
    "request_id": "abc123",
    "access_id": 12345,
    "message": "Access rule created successfully."
}</code></pre>
</div></div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_errors">Errors</h4>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="10%" />
<col width="10%" />
<col width="80%" />
<thead>
<tr>
<th align="left" valign="top"> Code     </th>
<th align="left" valign="top"> HTTP Status </th>
<th align="left" valign="top"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">Conflict</p></td>
<td align="left" valign="top"><p class="table">409</p></td>
<td align="left" valign="top"><p class="table">If the endpoint ACL already has the maximum of 100 access
                     rules.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Conflict</p></td>
<td align="left" valign="top"><p class="table">409</p></td>
<td align="left" valign="top"><p class="table">(NICE TO HAVE) If an <code>email</code> access rule with the same
                     (<code>principal</code>, <code>path</code>) already exists in the endpoint&#8217;s
                     ACL.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_update">Update</h3>
<div class="paragraph"><p>Update the permissions on an existing access rule. Other fields (besides
<code>DATA_TYPE</code> which must always be present) may be omitted. If the id is present
it must match the id in the URL.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">This may support updating <code>path</code> or other fields in the future, so
clients should make sure to use the correct value for the other fields
or omit them entirely.</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">If an <code>email</code> access rule has been claimed since the client fetched
it and become a <code>user</code> access rule, this will update the <code>user</code> access rule,
which has the same id. Because the other fields are ignored, no error will
be raised if they are included in the request, even though they no longer
match.</td>
</tr></table>
</div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="16%" />
<col width="83%" />
<tbody>
<tr>
<td align="left" valign="top"><p class="table header">URL</p></td>
<td align="left" valign="top"><div><div class="literalblock">
<div class="content">
<pre><code>/endpoint/&lt;endpoint_name&gt;/access/&lt;id&gt;</code></pre>
</div></div></div></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table header">Method</p></td>
<td align="left" valign="top"><div><div class="literalblock">
<div class="content">
<pre><code>PUT</code></pre>
</div></div></div></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table header">Request Body</p></td>
<td align="left" valign="top"><div><div class="literalblock">
<div class="content">
<pre><code>Access document</code></pre>
</div></div></div></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table header">Response Body</p></td>
<td align="left" valign="top"><div><div class="listingblock">
<div class="content">
<pre><code>{
    "message": "Access rule '123' permissions updated successfully",
    "code": "Updated",
    "resource": "/endpoint/user#ep1/access/123",
    "DATA_TYPE": "result",
    "request_id": "ABCdef789"
}</code></pre>
</div></div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_delete">Delete</h3>
<div class="paragraph"><p>Delete a single access rule, specified by id.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">If an <code>email</code> access rule has been claimed since the client fetched
it and become a <code>user</code> access rule, this will delete the <code>user</code> access rule,
which has the same id.</td>
</tr></table>
</div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="16%" />
<col width="83%" />
<tbody>
<tr>
<td align="left" valign="top"><p class="table header">URL</p></td>
<td align="left" valign="top"><div><div class="literalblock">
<div class="content">
<pre><code>/endpoint/&lt;endpoint_name&gt;/access/&lt;id&gt;</code></pre>
</div></div></div></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table header">Method</p></td>
<td align="left" valign="top"><div><div class="literalblock">
<div class="content">
<pre><code>DELETE</code></pre>
</div></div></div></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table header">Request Body</p></td>
<td align="left" valign="top"><div><div class="literalblock">
<div class="content">
<pre><code>Empty</code></pre>
</div></div></div></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table header">Response Body</p></td>
<td align="left" valign="top"><div><div class="listingblock">
<div class="content">
<pre><code>{
    "message": "Access rule '123' deleted successfully",
    "code": "Deleted",
    "resource": "/endpoint/user#ep1/access/123",
    "DATA_TYPE": "result",
    "request_id": "ABCdef789"
}</code></pre>
</div></div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_claim">Claim</h3>
<div class="paragraph"><p>Claim an email access rule as the authenticated user. The email access rule
will be converted to a user access rule. Returns the user access rule, with an
additional <code>endpoint_name</code> field which can be used to redirect the user to
that endpoint with the access rule path displayed in a file browser.</p></div>
<div class="paragraph"><p>Once claimed, the user who claimed the access rule can continue to call this
method and get the same success response. This can be used to generate
the redirect URL if the user loads the link from the email again
after claiming the access rule.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">The access rule id does not change when claiming, but the
<code>principal_type</code> and <code>principal</code> will change to "user" and
"&lt;username of claimant&gt;".</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">The owner of the endpoint (creator of the email access rule)
can&#8217;t claim it for themselves.</td>
</tr></table>
</div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="16%" />
<col width="83%" />
<tbody>
<tr>
<td align="left" valign="top"><p class="table header">URL</p></td>
<td align="left" valign="top"><div><div class="literalblock">
<div class="content">
<pre><code>/claim_access/&lt;token&gt;</code></pre>
</div></div></div></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table header">Method</p></td>
<td align="left" valign="top"><div><div class="literalblock">
<div class="content">
<pre><code>POST</code></pre>
</div></div></div></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table header">Response Body</p></td>
<td align="left" valign="top"><div><div class="listingblock">
<div class="content">
<pre><code>{
    "DATA_TYPE": "claim_response",
    "endpoint_name": "alice#myshare",
    "id": "12345",
    "principal_type": "user",
    "principal": "bob",
    "path": "/",
    "permissions": "r"
}</code></pre>
</div></div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_errors_2">Errors</h4>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="10%" />
<col width="10%" />
<col width="80%" />
<thead>
<tr>
<th align="left" valign="top"> Code             </th>
<th align="left" valign="top"> HTTP Status </th>
<th align="left" valign="top"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">Conflict</p></td>
<td align="left" valign="top"><p class="table">409</p></td>
<td align="left" valign="top"><p class="table">If &lt;token&gt; has already been claimed by a different user.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Conflict</p></td>
<td align="left" valign="top"><p class="table">409</p></td>
<td align="left" valign="top"><p class="table">If the authenticated user is the endpoint owner.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">EndpointNotFound</p></td>
<td align="left" valign="top"><p class="table">404</p></td>
<td align="left" valign="top"><p class="table">If the endpoint containing the access rule has been deleted.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">AccessRuleNotFound</p></td>
<td align="left" valign="top"><p class="table">404</p></td>
<td align="left" valign="top"><p class="table">If the owner of the endpoint has deleted the access rule
  (basically revoking the email invitation).</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">BadRequest</p></td>
<td align="left" valign="top"><p class="table">400</p></td>
<td align="left" valign="top"><p class="table">If &lt;token&gt; is invalid, e.g. if the user&#8217;s email client
  corrupts it or if the end got chopped off. This won&#8217;t
  catch all possible corruptions - AccessRuleNotFound
  may be returned in some cases.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_change_history">Change History</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_may_30">May 30</h3>
<div class="ulist"><ul>
<li>
<p>
List illegal path components in <code>path</code> fields description
</p>
</li>
<li>
<p>
Add PermissionDenied common error
</p>
</li>
<li>
<p>
Make "all_authenticated_users" principal empty string instead of null
</p>
</li>
<li>
<p>
Add note about not checking nexus group ids and deleted groups
</p>
</li>
<li>
<p>
Remove claim error for token referencing non email acl
</p>
</li>
<li>
<p>
Improve email acl description
</p>
</li>
<li>
<p>
Misc wording improvements/typo fixes
</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="_may_29">May 29</h3>
<div class="ulist"><ul>
<li>
<p>
Mark uniqueness for email access rules as a "nice to have".
</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="_may_27">May 27</h3>
<div class="ulist"><ul>
<li>
<p>
Add Create
</p>
</li>
<li>
<p>
Require uniqueness for email access rules on (ep, email, path).
</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="_may_16">May 16</h3>
<div class="ulist"><ul>
<li>
<p>
Make claim idempotent - if the user who claims the access rule calls again,
  return the same success result.
</p>
</li>
<li>
<p>
Specify that the access rule id does not change when claiming. This makes
  the delete and update behavior simpler to understand and document.
</p>
</li>
<li>
<p>
Change claim result to access rule with <code>endpoint_name</code> added.
</p>
</li>
<li>
<p>
Document behavior of operations delete and update email access rules in
  case of concurrent claim.
</p>
</li>
<li>
<p>
Re-document NotFound errors for claim, which are not obvious based on the
  common errors because of the difference in URL structure.
</p>
</li>
<li>
<p>
Use BadRequest for invalid tokens
</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="_may_14">May 14</h3>
<div class="ulist"><ul>
<li>
<p>
Change claim to accept a token as input, and not require the endpoint name
</p>
</li>
<li>
<p>
Remove filtering on Read All, it&#8217;s overly complex and nobody is using it
</p>
</li>
<li>
<p>
Added note about 2000 character path limit and how encoding affects this
</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="_may_13">May 13</h3>
<div class="ulist"><ul>
<li>
<p>
Update Claim docs
</p>
</li>
<li>
<p>
Add detailed description of each access rule type (especially email).
</p>
</li>
<li>
<p>
Remove <em>status</em> field
</p>
</li>
<li>
<p>
Add Common Errors section
</p>
</li>
<li>
<p>
Update Read All with filtering docs
</p>
</li>
</ul></div>
</div>
</div>
</div>
</div>
<div id="footnotes"><hr /></div>
<div id="footer">
<div id="footer-text">
Last updated 2014-06-03 11:05:16 CDT
</div>
</div>
</body>
</html>

    </div>

    <footer>
  <div class="container">
    <p>¬© 2010-2014 Computation Institute, University of Chicago, Argonne National Laboratory <a href="//globus.org/legal">Legal</a></p>
  </div>
</footer>

<script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
<script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
  </body>
</html>
;T;	I"≠7= Endpoint ACL Management
:toc2:

Shared endpoints and S3 endpoints have an associated Access Control List
(ACL), and the API provides methods for reading, creating, updating and
deleting access rules in the ACL. The ACL for each endpoint can have at
most 100 access rules.

The owner of the endpoint always has full read and write access to the endpoint.
This is not included as a rule in the ACL, as it is always present and can't
be removed.

NOTE: Access is still subject to the local filesystem or S3 bucket
permissions. Globus ACLs provide an additional layer on top of local
permissions to simplify collaboration among Globus users.

== Document Type

All ACL management resources use the +access+ document type, which represents
a single access rule in the ACL.

NOTE: The id is now a string, to allow for more implementation options for
different types of access rules.

.Access Document Example
------------------------
{
    "DATA_TYPE": "access",
    "id": "12345",
    "principal_type": "user",
    "principal": "bob",
    "path": "/",
    "permissions": "r"
}
------------------------

=== Fields

[cols="1,1,8",options="header"]
|===================
| Field Name     | JSON Type | Description
| DATA_TYPE      | string
                 | Always has value "access" to indicate this document type.
| id             | string
                 | Globally unique id for this access rule.
| principal_type | string
                 | Type of principal that the rule applies to.
                   One of "user", "group", "email",
                   or "all_authenticated_users".
| principal      | string
                 | Name or id of the entity the rule applies to.
                   For type "user", this will be the Globus username.
                   For type "group", this will be the Globus group uuid.
                   For type "email", this will be a user's email address.
                   For type "all_authenticated_users", this is always an
                   empty string.
| path           | string
                 | Absolute path to a directory the access rule applies to.
                   The path must begin and end with a slash, and can't
                   contain un-normalized components "/../" or "/./".
                   GridFTP endpoints and shared endpoints hosted on GridFTP
                   endpoints also support home directory relative paths
                   beginning with "/~/". The path is limited to 2000
                   characters after encoding; in practice this means
                   2000 ascii characters and slightly less when unicode
                   is present and must be encoded.
| permissions    | string
                 | How much permission to grant the principal specified in
                   +principal_type+ and +principal+.
                   Either read-only, specified as "r",
                   or read-write, specified as "rw".
|===================


=== Access Rule Types

==== User Access Rule

User access rules apply to a single Globus user, indicated by Globus username.
The Nexus API provides resources for searching for users by full name and other
attributes.

==== Group Access Rule

Group access rules apply to all Globus users in a Globus group. Groups can
be created and discovered with the Nexus API. In the access rules, they
are indicated by the group id, not by the group name which is non necessarily
unique.

NOTE: Group ids are not validated; it is the responsibility of the client to
ensure the id is correct via the Group API in Nexus. Also if the group is
deleted, the rule will no longer provide any access but will stay in the ACL
until deleted by the user or client application.

==== All Authenticated Users Access Rule

These rules grant access to all Globus users. This can be used to share data
with everyone, but still allows monitoring of how many people are accessing
the data.

==== Email Access Rule

If you're trying to share with someone and don't know their Globus user name or
they don't yet have an account, you may create an "email" access rule. When an
"email" rule is created, Globus sends an email invitation to the email address
specified in principal. Once claimed, the access rule will be replaced by one
with +principal_type+ "user" and +principal+ equal to the username of the
Globus user who claimed the access rule. Each email access rule can be claimed
by only one Globus user account.

Before the email access rule is claimed, it can be manipulated like any other
access rule - the permission can be updated and it can be deleted. If deleted
before claimed, any attempt to claim it will fail with an error.

See the "Claim" section below for details on how to claim an email access rule.
In most cases this will be handled by the user following a link in the
invitation email to the http://www.globus.org[Globus] website.

If the recipient of an email access rule did not receive the email, it's
recommended that the old rule be deleted and a new rule for the same email
and path be added to resend a new invitation. This will revoke the original
invitation which is presumed to have been lost. If the user eventually receives
both, they should attempt to claim the newer one.

NOTE: (NICE TO HAVE) enforce uniqueness on (endpoint, email,
path) for email access rules.


== Common Query Parameters

[cols="1,8",options="header"]
|===================
| Name   | Description
| fields | Comma separated list of fields to include in the response. This can
           be used to save bandwidth on large list respones when not all
           fields are needed.
| format | "json" or "html". Note that the "html" format is subject to change
           and should not be relied upon for programs. It is used to render
           the self-hosted, auto-generated API documentation.
|===================


== Common Errors

NOTE: Current codes are more messy. TODO: update this with the actual codes used
today, and possibly another section with what we want them to be long term.

[cols="1,1,8",options="header"]
|===================
| Code              | HTTP Status  | Description
| EndpointNotFound  |404  | If <endpoint_name> not found
| AccessRuleNotFound|404  | If access rule specified by <id> is not found
| InvalidPath       |400  | If the path specified in an access rule is not
                            valid or too long.
| Conflict          |409  | If <endpoint_name> does not support ACLs.
                            See the +acl_available+ field of +endpoint+ to
                            determine if an endpoint supports ACLs.
| PermissionDenied  |403  | If you do not have permissions to view or modify
                            ACLs on <endpoint_name>.
|===================


== Operations

=== Read All

Get the list of access rules in the ACL for a specified endpoint.

[cols="h,5a"]
|============
| URL
| /endpoint/<endpoint_name>/access_list

| Method
| GET

| Response Body | 
------------------------------------
{
    "length": 2,
    "endpoint": "alice#myshare",
    "DATA": [
        {
            "DATA_TYPE": "access",
            "principal_type": "user",
            "path": "/",
            "principal": "bob",
            "id": "12345",
            "permissions": "r"
        },
        {
            "DATA_TYPE": "access",
            "principal_type": "group",
            "path": "/project1",
            "principal": "a2e662ac-d4bc-4ab7-aceb-8a12d2205326",
            "id": "743565",
            "permissions": "rw"
        }
    ],
    "DATA_TYPE": "access_list"
}
------------------------------------
|============


=== Read One

Get a single access rule for a specified endpoint by id.

[cols="h,5a"]
|============
| URL
| /endpoint/<endpoint_name>/access/<id>

| Method
| GET

| Response Body | Access document (see above).
|============


=== Create

Create a new access rule. The response contains the id of the newly created
rule in the +access_id+ field.

[cols="h,5a"]
|============
| URL
| /endpoint/<endpoint_name>/access

| Method
| POST

| Request Body | Access document to add to the endpoint's ACL (see above).
| Response Body|
---------------------------------------------------
{
    "code": "Created",
    "resource": "/endpoint/epname/access",
    "DATA_TYPE": "access_create_result",
    "request_id": "abc123",
    "access_id": 12345,
    "message": "Access rule created successfully."
}
---------------------------------------------------
|============

==== Errors

[cols="1,1,8",options="header"]
|===================
| Code     | HTTP Status | Description
| Conflict | 409   | If the endpoint ACL already has the maximum of 100 access
                     rules.
| Conflict | 409   | (NICE TO HAVE) If an +email+ access rule with the same
                     (+principal+, +path+) already exists in the endpoint's
                     ACL.
|===================


=== Update

Update the permissions on an existing access rule. Other fields (besides
+DATA_TYPE+ which must always be present) may be omitted. If the id is present
it must match the id in the URL.

NOTE: This may support updating +path+ or other fields in the future, so
clients should make sure to use the correct value for the other fields
or omit them entirely.

NOTE: If an +email+ access rule has been claimed since the client fetched
it and become a +user+ access rule, this will update the +user+ access rule,
which has the same id. Because the other fields are ignored, no error will
be raised if they are included in the request, even though they no longer
match.

[cols="h,5a"]
|============
| URL
| /endpoint/<endpoint_name>/access/<id>

| Method
| PUT

| Request Body
| Access document

| Response Body |
-------------------------------------------------------------------
{
    "message": "Access rule '123' permissions updated successfully",
    "code": "Updated",
    "resource": "/endpoint/user#ep1/access/123",
    "DATA_TYPE": "result",
    "request_id": "ABCdef789"
}
-------------------------------------------------------------------
|============


=== Delete

Delete a single access rule, specified by id.

NOTE: If an +email+ access rule has been claimed since the client fetched
it and become a +user+ access rule, this will delete the +user+ access rule,
which has the same id.

[cols="h,5a"]
|============
| URL
| /endpoint/<endpoint_name>/access/<id>

| Method
| DELETE

| Request Body  | Empty
| Response Body |
-------------------------------------------------------------------
{
    "message": "Access rule '123' deleted successfully",
    "code": "Deleted",
    "resource": "/endpoint/user#ep1/access/123",
    "DATA_TYPE": "result",
    "request_id": "ABCdef789"
}
-------------------------------------------------------------------
|============


=== Claim

Claim an email access rule as the authenticated user. The email access rule
will be converted to a user access rule. Returns the user access rule, with an
additional +endpoint_name+ field which can be used to redirect the user to
that endpoint with the access rule path displayed in a file browser.

Once claimed, the user who claimed the access rule can continue to call this
method and get the same success response. This can be used to generate
the redirect URL if the user loads the link from the email again
after claiming the access rule.

NOTE: The access rule id does not change when claiming, but the
+principal_type+ and +principal+ will change to "user" and
"<username of claimant>".

NOTE: The owner of the endpoint (creator of the email access rule)
can't claim it for themselves.

[cols="h,5a"]
|============
| URL
| /claim_access/<token>

| Method
| POST

| Response Body | 
------------------------------------
{
    "DATA_TYPE": "claim_response",
    "endpoint_name": "alice#myshare",
    "id": "12345",
    "principal_type": "user",
    "principal": "bob",
    "path": "/",
    "permissions": "r"
}
------------------------------------
|============

==== Errors

[cols="1,1,8",options="header"]
|===================
| Code             | HTTP Status | Description

| Conflict | 409 
| If <token> has already been claimed by a different user.

| Conflict | 409
| If the authenticated user is the endpoint owner.

| EndpointNotFound | 404
| If the endpoint containing the access rule has been deleted.

| AccessRuleNotFound | 404
| If the owner of the endpoint has deleted the access rule
  (basically revoking the email invitation).

| BadRequest | 400
| If <token> is invalid, e.g. if the user's email client
  corrupts it or if the end got chopped off. This won't
  catch all possible corruptions - AccessRuleNotFound
  may be returned in some cases.
|===================



== Change History

=== May 30

- List illegal path components in +path+ fields description
- Add PermissionDenied common error
- Make "all_authenticated_users" principal empty string instead of null
- Add note about not checking nexus group ids and deleted groups
- Remove claim error for token referencing non email acl
- Improve email acl description
- Misc wording improvements/typo fixes

=== May 29

- Mark uniqueness for email access rules as a "nice to have".

=== May 27

- Add Create
- Require uniqueness for email access rules on (ep, email, path).

=== May 16

- Make claim idempotent - if the user who claims the access rule calls again,
  return the same success result.
- Specify that the access rule id does not change when claiming. This makes
  the delete and update behavior simpler to understand and document.
- Change claim result to access rule with +endpoint_name+ added.
- Document behavior of operations delete and update email access rules in
  case of concurrent claim.
- Re-document NotFound errors for claim, which are not obvious based on the
  common errors because of the difference in URL structure.
- Use BadRequest for invalid tokens

=== May 14

- Change claim to accept a token as input, and not require the endpoint name
- Remove filtering on Read All, it's overly complex and nobody is using it
- Added note about 2000 character path limit and how encoding affects this

=== May 13

- Update Claim docs
- Add detailed description of each access rule type (especially email).
- Remove 'status' field
- Add Common Errors section
- Update Read All with filtering docs;T;
I"≥<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.6.9" />
<title>Endpoint ACL Management</title>
<style type="text/css">
/* Shared CSS for AsciiDoc xhtml11 and html5 backends */

/* Default font. */
body {
  font-family: Georgia,serif;
}

/* Title font. */
h1, h2, h3, h4, h5, h6,
div.title, caption.title,
thead, p.table.header,
#toctitle,
#author, #revnumber, #revdate, #revremark,
#footer {
  font-family: Arial,Helvetica,sans-serif;
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
  color: navy;
}

strong {
  font-weight: bold;
  color: #083194;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}
h2 {
  padding-top: 0.5em;
}
h3 {
  float: left;
}
h3 + * {
  clear: left;
}
h5 {
  font-size: 1.0em;
}

div.sectionbody {
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

ul, ol, li > p {
  margin-top: 0;
}
ul > li     { color: #aaa; }
ul > li > * { color: black; }

.monospaced, code, pre {
  font-family: "Courier New", Courier, monospace;
  font-size: inherit;
  color: navy;
  padding: 0;
  margin: 0;
}
pre {
  white-space: pre-wrap;
}

#author {
  color: #527bbd;
  font-weight: bold;
  font-size: 1.1em;
}
#email {
}
#revnumber, #revdate, #revremark {
}

#footer {
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

#preamble {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.0em;
  margin-bottom: 2.0em;
  margin-right: 10%;
  color: #606060;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  color: #527bbd;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid #dddddd;
  border-left: 4px solid #f0f0f0;
  padding: 0.5em;
}

div.listingblock > div.content {
  border: 1px solid #dddddd;
  border-left: 5px solid #f0f0f0;
  background: #f8f8f8;
  padding: 0.5em;
}

div.quoteblock, div.verseblock {
  padding-left: 1.0em;
  margin-left: 1.0em;
  margin-right: 10%;
  border-left: 5px solid #f0f0f0;
  color: #888;
}

div.quoteblock > div.attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock > pre.content {
  font-family: inherit;
  font-size: inherit;
}
div.verseblock > div.attribution {
  padding-top: 0.75em;
  text-align: left;
}
/* DEPRECATED: Pre version 8.2.7 verse style literal block. */
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 3px solid #dddddd;
}

div.exampleblock > div.content {
  border-left: 3px solid #dddddd;
  padding-left: 0.5em;
}

div.imageblock div.content { padding-left: 0; }
span.image img { border-style: none; vertical-align: text-bottom; }
a.image:visited { color: white; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: normal;
  color: navy;
}
dd > *:first-child {
  margin-top: 0.1em;
}

ul, ol {
    list-style-position: outside;
}
ol.arabic {
  list-style-type: decimal;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}

div.compact ul, div.compact ol,
div.compact p, div.compact p,
div.compact div, div.compact div {
  margin-top: 0.1em;
  margin-bottom: 0.1em;
}

tfoot {
  font-weight: bold;
}
td > div.verse {
  white-space: pre;
}

div.hdlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hdlist tr {
  padding-bottom: 15px;
}
dt.hdlist1.strong, td.hdlist1.strong {
  font-weight: bold;
}
td.hdlist1 {
  vertical-align: top;
  font-style: normal;
  padding-right: 0.8em;
  color: navy;
}
td.hdlist2 {
  vertical-align: top;
}
div.hdlist.compact tr {
  margin: 0;
  padding-bottom: 0;
}

.comment {
  background: yellow;
}

.footnote, .footnoteref {
  font-size: 0.8em;
}

span.footnote, span.footnoteref {
  vertical-align: super;
}

#footnotes {
  margin: 20px 0 20px 0;
  padding: 7px 0 0 0;
}

#footnotes div.footnote {
  margin: 0 0 5px 0;
}

#footnotes hr {
  border: none;
  border-top: 1px solid silver;
  height: 1px;
  text-align: left;
  margin-left: 0;
  width: 20%;
  min-width: 100px;
}

div.colist td {
  padding-right: 0.5em;
  padding-bottom: 0.3em;
  vertical-align: top;
}
div.colist td img {
  margin-top: 0.3em;
}

@media print {
  #footer-badges { display: none; }
}

#toc {
  margin-bottom: 2.5em;
}

#toctitle {
  color: #527bbd;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel0, div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}

span.aqua { color: aqua; }
span.black { color: black; }
span.blue { color: blue; }
span.fuchsia { color: fuchsia; }
span.gray { color: gray; }
span.green { color: green; }
span.lime { color: lime; }
span.maroon { color: maroon; }
span.navy { color: navy; }
span.olive { color: olive; }
span.purple { color: purple; }
span.red { color: red; }
span.silver { color: silver; }
span.teal { color: teal; }
span.white { color: white; }
span.yellow { color: yellow; }

span.aqua-background { background: aqua; }
span.black-background { background: black; }
span.blue-background { background: blue; }
span.fuchsia-background { background: fuchsia; }
span.gray-background { background: gray; }
span.green-background { background: green; }
span.lime-background { background: lime; }
span.maroon-background { background: maroon; }
span.navy-background { background: navy; }
span.olive-background { background: olive; }
span.purple-background { background: purple; }
span.red-background { background: red; }
span.silver-background { background: silver; }
span.teal-background { background: teal; }
span.white-background { background: white; }
span.yellow-background { background: yellow; }

span.big { font-size: 2em; }
span.small { font-size: 0.6em; }

span.underline { text-decoration: underline; }
span.overline { text-decoration: overline; }
span.line-through { text-decoration: line-through; }

div.unbreakable { page-break-inside: avoid; }


/*
 * xhtml11 specific
 *
 * */

div.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.tableblock > table {
  border: 3px solid #527bbd;
}
thead, p.table.header {
  font-weight: bold;
  color: #527bbd;
}
p.table {
  margin-top: 0;
}
/* Because the table frame attribute is overriden by CSS in most browsers. */
div.tableblock > table[frame="void"] {
  border-style: none;
}
div.tableblock > table[frame="hsides"] {
  border-left-style: none;
  border-right-style: none;
}
div.tableblock > table[frame="vsides"] {
  border-top-style: none;
  border-bottom-style: none;
}


/*
 * html5 specific
 *
 * */

table.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
thead, p.tableblock.header {
  font-weight: bold;
  color: #527bbd;
}
p.tableblock {
  margin-top: 0;
}
table.tableblock {
  border-width: 3px;
  border-spacing: 0px;
  border-style: solid;
  border-color: #527bbd;
  border-collapse: collapse;
}
th.tableblock, td.tableblock {
  border-width: 1px;
  padding: 4px;
  border-style: solid;
  border-color: #527bbd;
}

table.tableblock.frame-topbot {
  border-left-style: hidden;
  border-right-style: hidden;
}
table.tableblock.frame-sides {
  border-top-style: hidden;
  border-bottom-style: hidden;
}
table.tableblock.frame-none {
  border-style: hidden;
}

th.tableblock.halign-left, td.tableblock.halign-left {
  text-align: left;
}
th.tableblock.halign-center, td.tableblock.halign-center {
  text-align: center;
}
th.tableblock.halign-right, td.tableblock.halign-right {
  text-align: right;
}

th.tableblock.valign-top, td.tableblock.valign-top {
  vertical-align: top;
}
th.tableblock.valign-middle, td.tableblock.valign-middle {
  vertical-align: middle;
}
th.tableblock.valign-bottom, td.tableblock.valign-bottom {
  vertical-align: bottom;
}


/*
 * manpage specific
 *
 * */

body.manpage h1 {
  padding-top: 0.5em;
  padding-bottom: 0.5em;
  border-top: 2px solid silver;
  border-bottom: 2px solid silver;
}
body.manpage h2 {
  border-style: none;
}
body.manpage div.sectionbody {
  margin-left: 3em;
}

@media print {
  body.manpage div#toc { display: none; }
}


@media screen {
  body {
    max-width: 50em; /* approximately 80 characters wide */
    margin-left: 16em;
  }

  #toc {
    position: fixed;
    top: 0;
    left: 0;
    bottom: 0;
    width: 13em;
    padding: 0.5em;
    padding-bottom: 1.5em;
    margin: 0;
    overflow: auto;
    border-right: 3px solid #f8f8f8;
    background-color: white;
  }

  #toc .toclevel1 {
    margin-top: 0.5em;
  }

  #toc .toclevel2 {
    margin-top: 0.25em;
    display: list-item;
    color: #aaaaaa;
  }

  #toctitle {
    margin-top: 0.5em;
  }
}
</style>
<script type="text/javascript">
/*<![CDATA[*/
var asciidoc = {  // Namespace.

/////////////////////////////////////////////////////////////////////
// Table Of Contents generator
/////////////////////////////////////////////////////////////////////

/* Author: Mihai Bazon, September 2002
 * http://students.infoiasi.ro/~mishoo
 *
 * Table Of Content generator
 * Version: 0.4
 *
 * Feel free to use this script under the terms of the GNU General Public
 * License, as long as you do not remove or alter this notice.
 */

 /* modified by Troy D. Hanson, September 2006. License: GPL */
 /* modified by Stuart Rackham, 2006, 2009. License: GPL */

// toclevels = 1..4.
toc: function (toclevels) {

  function getText(el) {
    var text = "";
    for (var i = el.firstChild; i != null; i = i.nextSibling) {
      if (i.nodeType == 3 /* Node.TEXT_NODE */) // IE doesn't speak constants.
        text += i.data;
      else if (i.firstChild != null)
        text += getText(i);
    }
    return text;
  }

  function TocEntry(el, text, toclevel) {
    this.element = el;
    this.text = text;
    this.toclevel = toclevel;
  }

  function tocEntries(el, toclevels) {
    var result = new Array;
    var re = new RegExp('[hH]([1-'+(toclevels+1)+'])');
    // Function that scans the DOM tree for header elements (the DOM2
    // nodeIterator API would be a better technique but not supported by all
    // browsers).
    var iterate = function (el) {
      for (var i = el.firstChild; i != null; i = i.nextSibling) {
        if (i.nodeType == 1 /* Node.ELEMENT_NODE */) {
          var mo = re.exec(i.tagName);
          if (mo && (i.getAttribute("class") || i.getAttribute("className")) != "float") {
            result[result.length] = new TocEntry(i, getText(i), mo[1]-1);
          }
          iterate(i);
        }
      }
    }
    iterate(el);
    return result;
  }

  var toc = document.getElementById("toc");
  if (!toc) {
    return;
  }

  // Delete existing TOC entries in case we're reloading the TOC.
  var tocEntriesToRemove = [];
  var i;
  for (i = 0; i < toc.childNodes.length; i++) {
    var entry = toc.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div'
     && entry.getAttribute("class")
     && entry.getAttribute("class").match(/^toclevel/))
      tocEntriesToRemove.push(entry);
  }
  for (i = 0; i < tocEntriesToRemove.length; i++) {
    toc.removeChild(tocEntriesToRemove[i]);
  }

  // Rebuild TOC entries.
  var entries = tocEntries(document.getElementById("content"), toclevels);
  for (var i = 0; i < entries.length; ++i) {
    var entry = entries[i];
    if (entry.element.id == "")
      entry.element.id = "_toc_" + i;
    var a = document.createElement("a");
    a.href = "#" + entry.element.id;
    a.appendChild(document.createTextNode(entry.text));
    var div = document.createElement("div");
    div.appendChild(a);
    div.className = "toclevel" + entry.toclevel;
    toc.appendChild(div);
  }
  if (entries.length == 0)
    toc.parentNode.removeChild(toc);
},


/////////////////////////////////////////////////////////////////////
// Footnotes generator
/////////////////////////////////////////////////////////////////////

/* Based on footnote generation code from:
 * http://www.brandspankingnew.net/archive/2005/07/format_footnote.html
 */

footnotes: function () {
  // Delete existing footnote entries in case we're reloading the footnodes.
  var i;
  var noteholder = document.getElementById("footnotes");
  if (!noteholder) {
    return;
  }
  var entriesToRemove = [];
  for (i = 0; i < noteholder.childNodes.length; i++) {
    var entry = noteholder.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div' && entry.getAttribute("class") == "footnote")
      entriesToRemove.push(entry);
  }
  for (i = 0; i < entriesToRemove.length; i++) {
    noteholder.removeChild(entriesToRemove[i]);
  }

  // Rebuild footnote entries.
  var cont = document.getElementById("content");
  var spans = cont.getElementsByTagName("span");
  var refs = {};
  var n = 0;
  for (i=0; i<spans.length; i++) {
    if (spans[i].className == "footnote") {
      n++;
      var note = spans[i].getAttribute("data-note");
      if (!note) {
        // Use [\s\S] in place of . so multi-line matches work.
        // Because JavaScript has no s (dotall) regex flag.
        note = spans[i].innerHTML.match(/\s*\[([\s\S]*)]\s*/)[1];
        spans[i].innerHTML =
          "[<a id='_footnoteref_" + n + "' href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
        spans[i].setAttribute("data-note", note);
      }
      noteholder.innerHTML +=
        "<div class='footnote' id='_footnote_" + n + "'>" +
        "<a href='#_footnoteref_" + n + "' title='Return to text'>" +
        n + "</a>. " + note + "</div>";
      var id =spans[i].getAttribute("id");
      if (id != null) refs["#"+id] = n;
    }
  }
  if (n == 0)
    noteholder.parentNode.removeChild(noteholder);
  else {
    // Process footnoterefs.
    for (i=0; i<spans.length; i++) {
      if (spans[i].className == "footnoteref") {
        var href = spans[i].getElementsByTagName("a")[0].getAttribute("href");
        href = href.match(/#.*/)[0];  // Because IE return full URL.
        n = refs[href];
        spans[i].innerHTML =
          "[<a href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
      }
    }
  }
},

install: function(toclevels) {
  var timerId;

  function reinstall() {
    asciidoc.footnotes();
    if (toclevels) {
      asciidoc.toc(toclevels);
    }
  }

  function reinstallAndRemoveTimer() {
    clearInterval(timerId);
    reinstall();
  }

  timerId = setInterval(reinstall, 500);
  if (document.addEventListener)
    document.addEventListener("DOMContentLoaded", reinstallAndRemoveTimer, false);
  else
    window.onload = reinstallAndRemoveTimer;
}

}
asciidoc.install(2);
/*]]>*/
</script>
</head>
<body class="article">
<div id="header">
<h1>Endpoint ACL Management</h1>
<div id="toc">
  <div id="toctitle">Table of Contents</div>
  <noscript><p><b>JavaScript must be enabled in your browser to display the table of contents.</b></p></noscript>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph"><p>Shared endpoints and S3 endpoints have an associated Access Control List
(ACL), and the API provides methods for reading, creating, updating and
deleting access rules in the ACL. The ACL for each endpoint can have at
most 100 access rules.</p></div>
<div class="paragraph"><p>The owner of the endpoint always has full read and write access to the endpoint.
This is not included as a rule in the ACL, as it is always present and can&#8217;t
be removed.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">Access is still subject to the local filesystem or S3 bucket
permissions. Globus ACLs provide an additional layer on top of local
permissions to simplify collaboration among Globus users.</td>
</tr></table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_document_type">Document Type</h2>
<div class="sectionbody">
<div class="paragraph"><p>All ACL management resources use the <code>access</code> document type, which represents
a single access rule in the ACL.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">The id is now a string, to allow for more implementation options for
different types of access rules.</td>
</tr></table>
</div>
<div class="listingblock">
<div class="title">Access Document Example</div>
<div class="content">
<pre><code>{
    "DATA_TYPE": "access",
    "id": "12345",
    "principal_type": "user",
    "principal": "bob",
    "path": "/",
    "permissions": "r"
}</code></pre>
</div></div>
<div class="sect2">
<h3 id="_fields">Fields</h3>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="10%" />
<col width="10%" />
<col width="80%" />
<thead>
<tr>
<th align="left" valign="top"> Field Name     </th>
<th align="left" valign="top"> JSON Type </th>
<th align="left" valign="top"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">DATA_TYPE</p></td>
<td align="left" valign="top"><p class="table">string</p></td>
<td align="left" valign="top"><p class="table">Always has value "access" to indicate this document type.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">id</p></td>
<td align="left" valign="top"><p class="table">string</p></td>
<td align="left" valign="top"><p class="table">Globally unique id for this access rule.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">principal_type</p></td>
<td align="left" valign="top"><p class="table">string</p></td>
<td align="left" valign="top"><p class="table">Type of principal that the rule applies to.
                   One of "user", "group", "email",
                   or "all_authenticated_users".</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">principal</p></td>
<td align="left" valign="top"><p class="table">string</p></td>
<td align="left" valign="top"><p class="table">Name or id of the entity the rule applies to.
                   For type "user", this will be the Globus username.
                   For type "group", this will be the Globus group uuid.
                   For type "email", this will be a user&#8217;s email address.
                   For type "all_authenticated_users", this is always an
                   empty string.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">path</p></td>
<td align="left" valign="top"><p class="table">string</p></td>
<td align="left" valign="top"><p class="table">Absolute path to a directory the access rule applies to.
                   The path must begin and end with a slash, and can&#8217;t
                   contain un-normalized components "/../" or "/./".
                   GridFTP endpoints and shared endpoints hosted on GridFTP
                   endpoints also support home directory relative paths
                   beginning with "/~/". The path is limited to 2000
                   characters after encoding; in practice this means
                   2000 ascii characters and slightly less when unicode
                   is present and must be encoded.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">permissions</p></td>
<td align="left" valign="top"><p class="table">string</p></td>
<td align="left" valign="top"><p class="table">How much permission to grant the principal specified in
                   <code>principal_type</code> and <code>principal</code>.
                   Either read-only, specified as "r",
                   or read-write, specified as "rw".</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_access_rule_types">Access Rule Types</h3>
<div class="sect3">
<h4 id="_user_access_rule">User Access Rule</h4>
<div class="paragraph"><p>User access rules apply to a single Globus user, indicated by Globus username.
The Nexus API provides resources for searching for users by full name and other
attributes.</p></div>
</div>
<div class="sect3">
<h4 id="_group_access_rule">Group Access Rule</h4>
<div class="paragraph"><p>Group access rules apply to all Globus users in a Globus group. Groups can
be created and discovered with the Nexus API. In the access rules, they
are indicated by the group id, not by the group name which is non necessarily
unique.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">Group ids are not validated; it is the responsibility of the client to
ensure the id is correct via the Group API in Nexus. Also if the group is
deleted, the rule will no longer provide any access but will stay in the ACL
until deleted by the user or client application.</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="_all_authenticated_users_access_rule">All Authenticated Users Access Rule</h4>
<div class="paragraph"><p>These rules grant access to all Globus users. This can be used to share data
with everyone, but still allows monitoring of how many people are accessing
the data.</p></div>
</div>
<div class="sect3">
<h4 id="_email_access_rule">Email Access Rule</h4>
<div class="paragraph"><p>If you&#8217;re trying to share with someone and don&#8217;t know their Globus user name or
they don&#8217;t yet have an account, you may create an "email" access rule. When an
"email" rule is created, Globus sends an email invitation to the email address
specified in principal. Once claimed, the access rule will be replaced by one
with <code>principal_type</code> "user" and <code>principal</code> equal to the username of the
Globus user who claimed the access rule. Each email access rule can be claimed
by only one Globus user account.</p></div>
<div class="paragraph"><p>Before the email access rule is claimed, it can be manipulated like any other
access rule - the permission can be updated and it can be deleted. If deleted
before claimed, any attempt to claim it will fail with an error.</p></div>
<div class="paragraph"><p>See the "Claim" section below for details on how to claim an email access rule.
In most cases this will be handled by the user following a link in the
invitation email to the <a href="http://www.globus.org">Globus</a> website.</p></div>
<div class="paragraph"><p>If the recipient of an email access rule did not receive the email, it&#8217;s
recommended that the old rule be deleted and a new rule for the same email
and path be added to resend a new invitation. This will revoke the original
invitation which is presumed to have been lost. If the user eventually receives
both, they should attempt to claim the newer one.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">(NICE TO HAVE) enforce uniqueness on (endpoint, email,
path) for email access rules.</td>
</tr></table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_common_query_parameters">Common Query Parameters</h2>
<div class="sectionbody">
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="11%" />
<col width="88%" />
<thead>
<tr>
<th align="left" valign="top"> Name   </th>
<th align="left" valign="top"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">fields</p></td>
<td align="left" valign="top"><p class="table">Comma separated list of fields to include in the response. This can
           be used to save bandwidth on large list respones when not all
           fields are needed.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">format</p></td>
<td align="left" valign="top"><p class="table">"json" or "html". Note that the "html" format is subject to change
           and should not be relied upon for programs. It is used to render
           the self-hosted, auto-generated API documentation.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_common_errors">Common Errors</h2>
<div class="sectionbody">
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">Current codes are more messy. TODO: update this with the actual codes used
today, and possibly another section with what we want them to be long term.</td>
</tr></table>
</div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="10%" />
<col width="10%" />
<col width="80%" />
<thead>
<tr>
<th align="left" valign="top"> Code              </th>
<th align="left" valign="top"> HTTP Status  </th>
<th align="left" valign="top"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">EndpointNotFound</p></td>
<td align="left" valign="top"><p class="table">404</p></td>
<td align="left" valign="top"><p class="table">If &lt;endpoint_name&gt; not found</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">AccessRuleNotFound</p></td>
<td align="left" valign="top"><p class="table">404</p></td>
<td align="left" valign="top"><p class="table">If access rule specified by &lt;id&gt; is not found</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">InvalidPath</p></td>
<td align="left" valign="top"><p class="table">400</p></td>
<td align="left" valign="top"><p class="table">If the path specified in an access rule is not
                            valid or too long.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Conflict</p></td>
<td align="left" valign="top"><p class="table">409</p></td>
<td align="left" valign="top"><p class="table">If &lt;endpoint_name&gt; does not support ACLs.
                            See the <code>acl_available</code> field of <code>endpoint</code> to
                            determine if an endpoint supports ACLs.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">PermissionDenied</p></td>
<td align="left" valign="top"><p class="table">403</p></td>
<td align="left" valign="top"><p class="table">If you do not have permissions to view or modify
                            ACLs on &lt;endpoint_name&gt;.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_operations">Operations</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_read_all">Read All</h3>
<div class="paragraph"><p>Get the list of access rules in the ACL for a specified endpoint.</p></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="16%" />
<col width="83%" />
<tbody>
<tr>
<td align="left" valign="top"><p class="table header">URL</p></td>
<td align="left" valign="top"><div><div class="literalblock">
<div class="content">
<pre><code>/endpoint/&lt;endpoint_name&gt;/access_list</code></pre>
</div></div></div></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table header">Method</p></td>
<td align="left" valign="top"><div><div class="literalblock">
<div class="content">
<pre><code>GET</code></pre>
</div></div></div></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table header">Response Body</p></td>
<td align="left" valign="top"><div><div class="listingblock">
<div class="content">
<pre><code>{
    "length": 2,
    "endpoint": "alice#myshare",
    "DATA": [
        {
            "DATA_TYPE": "access",
            "principal_type": "user",
            "path": "/",
            "principal": "bob",
            "id": "12345",
            "permissions": "r"
        },
        {
            "DATA_TYPE": "access",
            "principal_type": "group",
            "path": "/project1",
            "principal": "a2e662ac-d4bc-4ab7-aceb-8a12d2205326",
            "id": "743565",
            "permissions": "rw"
        }
    ],
    "DATA_TYPE": "access_list"
}</code></pre>
</div></div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_read_one">Read One</h3>
<div class="paragraph"><p>Get a single access rule for a specified endpoint by id.</p></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="16%" />
<col width="83%" />
<tbody>
<tr>
<td align="left" valign="top"><p class="table header">URL</p></td>
<td align="left" valign="top"><div><div class="literalblock">
<div class="content">
<pre><code>/endpoint/&lt;endpoint_name&gt;/access/&lt;id&gt;</code></pre>
</div></div></div></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table header">Method</p></td>
<td align="left" valign="top"><div><div class="literalblock">
<div class="content">
<pre><code>GET</code></pre>
</div></div></div></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table header">Response Body</p></td>
<td align="left" valign="top"><div><div class="literalblock">
<div class="content">
<pre><code>Access document (see above).</code></pre>
</div></div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_create">Create</h3>
<div class="paragraph"><p>Create a new access rule. The response contains the id of the newly created
rule in the <code>access_id</code> field.</p></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="16%" />
<col width="83%" />
<tbody>
<tr>
<td align="left" valign="top"><p class="table header">URL</p></td>
<td align="left" valign="top"><div><div class="literalblock">
<div class="content">
<pre><code>/endpoint/&lt;endpoint_name&gt;/access</code></pre>
</div></div></div></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table header">Method</p></td>
<td align="left" valign="top"><div><div class="literalblock">
<div class="content">
<pre><code>POST</code></pre>
</div></div></div></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table header">Request Body</p></td>
<td align="left" valign="top"><div><div class="literalblock">
<div class="content">
<pre><code>Access document to add to the endpoint's ACL (see above).</code></pre>
</div></div></div></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table header">Response Body</p></td>
<td align="left" valign="top"><div><div class="listingblock">
<div class="content">
<pre><code>{
    "code": "Created",
    "resource": "/endpoint/epname/access",
    "DATA_TYPE": "access_create_result",
    "request_id": "abc123",
    "access_id": 12345,
    "message": "Access rule created successfully."
}</code></pre>
</div></div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_errors">Errors</h4>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="10%" />
<col width="10%" />
<col width="80%" />
<thead>
<tr>
<th align="left" valign="top"> Code     </th>
<th align="left" valign="top"> HTTP Status </th>
<th align="left" valign="top"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">Conflict</p></td>
<td align="left" valign="top"><p class="table">409</p></td>
<td align="left" valign="top"><p class="table">If the endpoint ACL already has the maximum of 100 access
                     rules.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Conflict</p></td>
<td align="left" valign="top"><p class="table">409</p></td>
<td align="left" valign="top"><p class="table">(NICE TO HAVE) If an <code>email</code> access rule with the same
                     (<code>principal</code>, <code>path</code>) already exists in the endpoint&#8217;s
                     ACL.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_update">Update</h3>
<div class="paragraph"><p>Update the permissions on an existing access rule. Other fields (besides
<code>DATA_TYPE</code> which must always be present) may be omitted. If the id is present
it must match the id in the URL.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">This may support updating <code>path</code> or other fields in the future, so
clients should make sure to use the correct value for the other fields
or omit them entirely.</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">If an <code>email</code> access rule has been claimed since the client fetched
it and become a <code>user</code> access rule, this will update the <code>user</code> access rule,
which has the same id. Because the other fields are ignored, no error will
be raised if they are included in the request, even though they no longer
match.</td>
</tr></table>
</div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="16%" />
<col width="83%" />
<tbody>
<tr>
<td align="left" valign="top"><p class="table header">URL</p></td>
<td align="left" valign="top"><div><div class="literalblock">
<div class="content">
<pre><code>/endpoint/&lt;endpoint_name&gt;/access/&lt;id&gt;</code></pre>
</div></div></div></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table header">Method</p></td>
<td align="left" valign="top"><div><div class="literalblock">
<div class="content">
<pre><code>PUT</code></pre>
</div></div></div></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table header">Request Body</p></td>
<td align="left" valign="top"><div><div class="literalblock">
<div class="content">
<pre><code>Access document</code></pre>
</div></div></div></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table header">Response Body</p></td>
<td align="left" valign="top"><div><div class="listingblock">
<div class="content">
<pre><code>{
    "message": "Access rule '123' permissions updated successfully",
    "code": "Updated",
    "resource": "/endpoint/user#ep1/access/123",
    "DATA_TYPE": "result",
    "request_id": "ABCdef789"
}</code></pre>
</div></div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_delete">Delete</h3>
<div class="paragraph"><p>Delete a single access rule, specified by id.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">If an <code>email</code> access rule has been claimed since the client fetched
it and become a <code>user</code> access rule, this will delete the <code>user</code> access rule,
which has the same id.</td>
</tr></table>
</div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="16%" />
<col width="83%" />
<tbody>
<tr>
<td align="left" valign="top"><p class="table header">URL</p></td>
<td align="left" valign="top"><div><div class="literalblock">
<div class="content">
<pre><code>/endpoint/&lt;endpoint_name&gt;/access/&lt;id&gt;</code></pre>
</div></div></div></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table header">Method</p></td>
<td align="left" valign="top"><div><div class="literalblock">
<div class="content">
<pre><code>DELETE</code></pre>
</div></div></div></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table header">Request Body</p></td>
<td align="left" valign="top"><div><div class="literalblock">
<div class="content">
<pre><code>Empty</code></pre>
</div></div></div></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table header">Response Body</p></td>
<td align="left" valign="top"><div><div class="listingblock">
<div class="content">
<pre><code>{
    "message": "Access rule '123' deleted successfully",
    "code": "Deleted",
    "resource": "/endpoint/user#ep1/access/123",
    "DATA_TYPE": "result",
    "request_id": "ABCdef789"
}</code></pre>
</div></div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_claim">Claim</h3>
<div class="paragraph"><p>Claim an email access rule as the authenticated user. The email access rule
will be converted to a user access rule. Returns the user access rule, with an
additional <code>endpoint_name</code> field which can be used to redirect the user to
that endpoint with the access rule path displayed in a file browser.</p></div>
<div class="paragraph"><p>Once claimed, the user who claimed the access rule can continue to call this
method and get the same success response. This can be used to generate
the redirect URL if the user loads the link from the email again
after claiming the access rule.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">The access rule id does not change when claiming, but the
<code>principal_type</code> and <code>principal</code> will change to "user" and
"&lt;username of claimant&gt;".</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">The owner of the endpoint (creator of the email access rule)
can&#8217;t claim it for themselves.</td>
</tr></table>
</div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="16%" />
<col width="83%" />
<tbody>
<tr>
<td align="left" valign="top"><p class="table header">URL</p></td>
<td align="left" valign="top"><div><div class="literalblock">
<div class="content">
<pre><code>/claim_access/&lt;token&gt;</code></pre>
</div></div></div></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table header">Method</p></td>
<td align="left" valign="top"><div><div class="literalblock">
<div class="content">
<pre><code>POST</code></pre>
</div></div></div></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table header">Response Body</p></td>
<td align="left" valign="top"><div><div class="listingblock">
<div class="content">
<pre><code>{
    "DATA_TYPE": "claim_response",
    "endpoint_name": "alice#myshare",
    "id": "12345",
    "principal_type": "user",
    "principal": "bob",
    "path": "/",
    "permissions": "r"
}</code></pre>
</div></div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_errors_2">Errors</h4>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="10%" />
<col width="10%" />
<col width="80%" />
<thead>
<tr>
<th align="left" valign="top"> Code             </th>
<th align="left" valign="top"> HTTP Status </th>
<th align="left" valign="top"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">Conflict</p></td>
<td align="left" valign="top"><p class="table">409</p></td>
<td align="left" valign="top"><p class="table">If &lt;token&gt; has already been claimed by a different user.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Conflict</p></td>
<td align="left" valign="top"><p class="table">409</p></td>
<td align="left" valign="top"><p class="table">If the authenticated user is the endpoint owner.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">EndpointNotFound</p></td>
<td align="left" valign="top"><p class="table">404</p></td>
<td align="left" valign="top"><p class="table">If the endpoint containing the access rule has been deleted.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">AccessRuleNotFound</p></td>
<td align="left" valign="top"><p class="table">404</p></td>
<td align="left" valign="top"><p class="table">If the owner of the endpoint has deleted the access rule
  (basically revoking the email invitation).</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">BadRequest</p></td>
<td align="left" valign="top"><p class="table">400</p></td>
<td align="left" valign="top"><p class="table">If &lt;token&gt; is invalid, e.g. if the user&#8217;s email client
  corrupts it or if the end got chopped off. This won&#8217;t
  catch all possible corruptions - AccessRuleNotFound
  may be returned in some cases.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_change_history">Change History</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_may_30">May 30</h3>
<div class="ulist"><ul>
<li>
<p>
List illegal path components in <code>path</code> fields description
</p>
</li>
<li>
<p>
Add PermissionDenied common error
</p>
</li>
<li>
<p>
Make "all_authenticated_users" principal empty string instead of null
</p>
</li>
<li>
<p>
Add note about not checking nexus group ids and deleted groups
</p>
</li>
<li>
<p>
Remove claim error for token referencing non email acl
</p>
</li>
<li>
<p>
Improve email acl description
</p>
</li>
<li>
<p>
Misc wording improvements/typo fixes
</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="_may_29">May 29</h3>
<div class="ulist"><ul>
<li>
<p>
Mark uniqueness for email access rules as a "nice to have".
</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="_may_27">May 27</h3>
<div class="ulist"><ul>
<li>
<p>
Add Create
</p>
</li>
<li>
<p>
Require uniqueness for email access rules on (ep, email, path).
</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="_may_16">May 16</h3>
<div class="ulist"><ul>
<li>
<p>
Make claim idempotent - if the user who claims the access rule calls again,
  return the same success result.
</p>
</li>
<li>
<p>
Specify that the access rule id does not change when claiming. This makes
  the delete and update behavior simpler to understand and document.
</p>
</li>
<li>
<p>
Change claim result to access rule with <code>endpoint_name</code> added.
</p>
</li>
<li>
<p>
Document behavior of operations delete and update email access rules in
  case of concurrent claim.
</p>
</li>
<li>
<p>
Re-document NotFound errors for claim, which are not obvious based on the
  common errors because of the difference in URL structure.
</p>
</li>
<li>
<p>
Use BadRequest for invalid tokens
</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="_may_14">May 14</h3>
<div class="ulist"><ul>
<li>
<p>
Change claim to accept a token as input, and not require the endpoint name
</p>
</li>
<li>
<p>
Remove filtering on Read All, it&#8217;s overly complex and nobody is using it
</p>
</li>
<li>
<p>
Added note about 2000 character path limit and how encoding affects this
</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="_may_13">May 13</h3>
<div class="ulist"><ul>
<li>
<p>
Update Claim docs
</p>
</li>
<li>
<p>
Add detailed description of each access rule type (especially email).
</p>
</li>
<li>
<p>
Remove <em>status</em> field
</p>
</li>
<li>
<p>
Add Common Errors section
</p>
</li>
<li>
<p>
Update Read All with filtering docs
</p>
</li>
</ul></div>
</div>
</div>
</div>
</div>
<div id="footnotes"><hr /></div>
<div id="footer">
<div id="footer-text">
Last updated 2014-06-03 11:05:16 CDT
</div>
</div>
</body>
</html>
;T;@*I"/docs/transfer-api/;T{;{	;I"˝	<!DOCTYPE HTML>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>A Brand New nanoc Site - </title>
    <link href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/styles/styles.css">

    <meta name="viewport" content="width=device-width">
    <!-- you don't need to keep this, but it's cool for stats! -->
    <meta name="generator" content="nanoc 3.6.11">
  </head>
  <body>
    <header id="masthead">
  <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
      <!-- Brand and toggle get grouped for better mobile display -->
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="/">
          <img src="//www.globus.org/sites/all/themes/globus_bootstrap_theme/logo.png" alt="Home">
          globus developer
        </a>
      </div>

      <!-- Collect the nav links, forms, and other content for toggling -->
      <div class="collapse navbar-collapse">
        <form class="navbar-form navbar-right" role="search">
          <div class="form-group">
            <input type="text" class="form-control" placeholder="Search">
          </div>
          <!-- <button type="submit" class="btn btn-default">Submit</button> -->
        </form>

        <ul class="nav navbar-nav navbar-right">
          <li>
            <a href="/about">About</a>
          </li>
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Docs <b class="caret"></b></a>
            <ul class="dropdown-menu">
              <li><a href="/docs/transfer-api">Transfer API</a></li>
            </ul>
          </li>
        </ul>
      </div><!-- /.navbar-collapse -->
    </div><!-- /.container-fluid -->
  </nav>
</header>

    <div class="content container">
      

      list all docs
    </div>

    <footer>
  <div class="container">
    <p>¬© 2010-2014 Computation Institute, University of Chicago, Argonne National Laboratory <a href="//globus.org/legal">Legal</a></p>
  </div>
</footer>

<script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
<script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
  </body>
</html>
;T;	I"list all docs;T;
I"list all docs;T;@0:versioni